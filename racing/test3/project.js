window.BabylonToolkitLicense = "I-ABCDEF12345";

// Xbox Project Shim Services
var EnableXboxLiveServices = true;

// babylon.toolkit.js
var BABYLON;!function(e){var t=function(){function e(e){this.motion=e.motion,this.posX=e.posX||0,this.posY=e.posY,this.weight=e.weight||0}return e.GetIdleBlendTree=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(0===i.posX&&0===i.posY)return i}return null},e.GetDefaultIdleBlendTree=function(){return e.DefaultIdleBlendTree},e.DefaultIdleBlendTree=new e({motion:"Idle",posX:0,posY:0}),e}();e.BlendTreeValue=t;var r=function(){function t(){}return t.ZCross=function(e,t){return e.x*t.y-t.x*e.y},t.ClampValue=function(e,t,r){return e<=t?t:e>=r?r:e},t.ClampVector=function(r,i,s){var o=e.Vector3.Zero();return t.ClampVectorToRef(r,i,s,o),o},t.ClampVectorToRef=function(e,r,i,s){null!=s&&(s.x=t.ClampValue(e.x,r,i),s.y=t.ClampValue(e.y,r,i),s.z=t.ClampValue(e.z,r,i))},t.GetSignedAngle=function(e,t){return Math.atan2(e.x*t.y-e.y*t.x,e.x*t.x+e.y*t.y)},t.GetBarycentricVector=function(r,i,s,o){var n=e.Vector3.Zero();return t.GetBarycentricVectorToRef(r,i,s,o,n),n},t.GetBarycentricVectorToRef=function(e,r,i,s,o){t.TempVector2_AB.set(0,0),t.TempVector2_AB.set(0,0),t.TempVector2_AB.set(0,0),i.subtractToRef(r,t.TempVector2_AB),s.subtractToRef(r,t.TempVector2_AC),e.subtractToRef(r,t.TempVector2_AP);var n=1/t.ZCross(t.TempVector2_AB,t.TempVector2_AC),a=n*t.ZCross(t.TempVector2_AB,t.TempVector2_AP),l=n*t.ZCross(t.TempVector2_AP,t.TempVector2_AC),h=1-a-l;null!=o&&(o.x=h,o.y=a,o.z=l)},t.GetLinearInterpolation=function(e,t,r,i,s){return t+(s-e)*((i-t)/(r-e))},t.TempVector2_AB=new e.Vector2(0,0),t.TempVector2_AC=new e.Vector2(0,0),t.TempVector2_AP=new e.Vector2(0,0),t}();e.BlendTreeUtils=r;var i=function(){function i(){}return i.Calculate1DSimpleBlend=function(e,t){var s=t[0],o=t[t.length-1];if(e<=s.posY)s.weight=1;else if(e>=o.posY)o.weight=1;else{var n=i.GetRightNeighbourBlendTreeIndex(e,t),a=t[n-1],l=t[n],h=r.GetLinearInterpolation(a.posY,1,l.posY,0,e);a.weight=h,l.weight=1-a.weight}},i.Calculate2DSimpleDirectional=function(e,s,o){i.TempVector2_IP.set(e,s),i.TempVector2_TA.set(0,0),i.TempVector2_TB.set(0,0),i.TempVector2_TC.set(0,0),i.TempVector3_BARY.set(0,0,0);var n=!0,a=t.GetIdleBlendTree(o);if(a){var l=o.indexOf(a);o.splice(l,1)}else n=!1,a=t.GetDefaultIdleBlendTree();o.sort(function(e,t){return Math.atan2(e.posY,e.posX)-Math.atan2(t.posY,t.posX)}),o.unshift(a);for(var h=0,c=2;c<o.length;++c)i.TempVector2_TB.set(o[c-1].posX,o[c-1].posY),i.TempVector2_TC.set(o[c].posX,o[c].posY),r.GetBarycentricVectorToRef(i.TempVector2_IP,i.TempVector2_TA,i.TempVector2_TB,i.TempVector2_TC,i.TempVector3_BARY),r.ClampVectorToRef(i.TempVector3_BARY,0,1,i.TempVector3_BARY),i.TempVector3_BARY.z>0&&i.TempVector3_BARY.y>0&&(o[0].weight+=i.TempVector3_BARY.x,o[c-1].weight+=i.TempVector3_BARY.z,o[c].weight+=i.TempVector3_BARY.y,h+=i.TempVector3_BARY.x+i.TempVector3_BARY.y+i.TempVector3_BARY.z);i.TempVector2_TB.set(o[o.length-1].posX,o[o.length-1].posY),i.TempVector2_TC.set(o[1].posX,o[1].posY),r.GetBarycentricVectorToRef(i.TempVector2_IP,i.TempVector2_TA,i.TempVector2_TB,i.TempVector2_TC,i.TempVector3_BARY),r.ClampVectorToRef(i.TempVector3_BARY,0,1,i.TempVector3_BARY),i.TempVector3_BARY.z>0&&i.TempVector3_BARY.y>0&&(o[0].weight+=i.TempVector3_BARY.x,o[o.length-1].weight+=i.TempVector3_BARY.z,o[1].weight+=i.TempVector3_BARY.y,h+=i.TempVector3_BARY.x+i.TempVector3_BARY.y+i.TempVector3_BARY.z);for(var u=0,m=o;u<m.length;u++){var p=m[u];p.weight/=h}if(!n){o.shift();for(var f=a.weight/o.length,y=0,_=o;y<_.length;y++){var p=_[y];p.weight+=f}}},i.Calculate2DFreeformDirectional=function(t,s,o){i.TempVector2_IP.set(t,s),i.TempVector2_POSI.set(0,0),i.TempVector2_POSJ.set(0,0),i.TempVector2_POSIP.set(0,0),i.TempVector2_POSIJ.set(0,0);for(var n=2,a=0,l=i.TempVector2_IP.length(),h=0;h<o.length;++h){var c=o[h];i.TempVector2_POSI.set(c.posX,c.posY);for(var u=i.TempVector2_POSI.length(),m=l-u,p=r.GetSignedAngle(i.TempVector2_POSI,i.TempVector2_IP),f=1,y=0;y<o.length;++y)if(y!==h){i.TempVector2_POSJ.set(o[y].posX,o[y].posY);var _=i.TempVector2_POSJ.length(),d=(u+_)/2,v=m/d,g=(_-u)/d,C=r.GetSignedAngle(i.TempVector2_POSI,i.TempVector2_POSJ);i.TempVector2_POSIP.set(v,p*n),i.TempVector2_POSIJ.set(g,C*n);var b=i.TempVector2_POSIJ.lengthSquared(),S=e.Vector2.Dot(i.TempVector2_POSIP,i.TempVector2_POSIJ)/b;S=1-S,S=r.ClampValue(S,0,1),f=Math.min(S,f)}c.weight=f,a+=f}for(var x=0,T=o;x<T.length;x++){var c=T[x];c.weight/=a}},i.Calculate2DFreeformCartesian=function(t,s,o){i.TempVector2_IP.set(t,s),i.TempVector2_POSI.set(0,0),i.TempVector2_POSJ.set(0,0),i.TempVector2_POSIP.set(0,0),i.TempVector2_POSIJ.set(0,0);for(var n=0,a=0;a<o.length;++a){var l=o[a];i.TempVector2_POSI.set(l.posX,l.posY),i.TempVector2_IP.subtractToRef(i.TempVector2_POSI,i.TempVector2_POSIP);for(var h=1,c=0;c<o.length;++c)if(c!==a){i.TempVector2_POSJ.set(o[c].posX,o[c].posY),i.TempVector2_POSJ.subtractToRef(i.TempVector2_POSI,i.TempVector2_POSIJ);var u=i.TempVector2_POSIJ.lengthSquared(),m=e.Vector2.Dot(i.TempVector2_POSIP,i.TempVector2_POSIJ)/u;m=1-m,m=r.ClampValue(m,0,1),h=Math.min(h,m)}l.weight=h,n+=h}for(var p=0,f=o;p<f.length;p++){var l=f[p];l.weight/=n}},i.GetRightNeighbourBlendTreeIndex=function(e,t){t.sort(function(e,t){return e.posY-t.posY});for(var r=0;r<t.length;++r)if(t[r].posY>e)return r;return-1},i.TempVector2_IP=new e.Vector2(0,0),i.TempVector2_TA=new e.Vector2(0,0),i.TempVector2_TB=new e.Vector2(0,0),i.TempVector2_TC=new e.Vector2(0,0),i.TempVector2_POSI=new e.Vector2(0,0),i.TempVector2_POSJ=new e.Vector2(0,0),i.TempVector2_POSIP=new e.Vector2(0,0),i.TempVector2_POSIJ=new e.Vector2(0,0),i.TempVector3_BARY=new e.Vector3(0,0,0),i}();e.BlendTreeSystem=i}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){this.initAnimationState()},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t.prototype.initAnimationState=function(){console.warn("Dump Animation State Machine: "+this.transform.name),console.log(this)},t}(e.ScriptComponent);e.AnimationState=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){void 0===i&&(i={});var s=t.call(this,e,r,i)||this;return s._audio=null,s._name=null,s._file=null,s._loop=!1,s._mute=!1,s._volume=1,s._pitch=1,s._priority=128,s._panstereo=0,s._mindistance=1,s._maxdistance=50,s._rolloffmode="linear",s._rollofffactor=1,s._playonawake=!0,s._spatialblend=0,s._reverbzonemix=1,s._bypasseffects=!1,s._bypassreverbzones=!1,s._bypasslistenereffects=!1,s._name=s.getEditorProperty("name",s._name),s._file=s.getEditorProperty("file",s._file),s._loop=s.getEditorProperty("loop",s._loop),s._mute=s.getEditorProperty("mute",s._mute),s._volume=s.getEditorProperty("volume",s._volume),s._pitch=s.getEditorProperty("pitch",s._pitch),s._priority=s.getEditorProperty("priority",s._priority),s._panstereo=s.getEditorProperty("panstereo",s._panstereo),s._playonawake=s.getEditorProperty("playonawake",s._playonawake),s._mindistance=s.getEditorProperty("mindistance",s._mindistance),s._maxdistance=s.getEditorProperty("maxdistance",s._maxdistance),s._rolloffmode=s.getEditorProperty("rolloffmode",s._rolloffmode),s._rollofffactor=s.getEditorProperty("rollofffactor",s._rollofffactor),s._spatialblend=s.getEditorProperty("spatialblend",s._spatialblend),s._reverbzonemix=s.getEditorProperty("reverbzonemix",s._reverbzonemix),s._bypasseffects=s.getEditorProperty("bypasseffects",s._bypasseffects),s._bypassreverbzones=s.getEditorProperty("bypassreverbzones",s._bypassreverbzones),s._bypasslistenereffects=s.getEditorProperty("bypasslistenereffects",s._bypasslistenereffects),s}return __extends(r,t),r.prototype.getSoundClip=function(){return this._audio},r.prototype.start=function(){this.initAudioSource()},r.prototype.destroy=function(){this.destroyAudioSource()},r.prototype.initAudioSource=function(){var t=this;if(null!=this._name&&""!==this._name||(this._name="Unknown"),null!=this._file&&""!==this._file){var r=e.SceneManager.GetRootUrl(this.scene),i=this._spatialblend>=.1,s="logarithmic"===this._rolloffmode?"exponential":"linear";this._audio=new e.Sound(this._name,r+this._file,this.scene,function(){t._audio.setVolume(t._mute===!0?0:t._volume),t._audio.setPlaybackRate(t._pitch)},{loop:this._loop,autoplay:this._playonawake,refDistance:this._mindistance,maxDistance:this._maxdistance,rolloffFactor:this._rollofffactor,spatialSound:i,distanceModel:s}),this._audio.setPosition(this.transform.position.clone()),i===!0&&this._audio.attachToMesh(this.transform)}},r.prototype.destroyAudioSource=function(){null!=this._audio&&(this._audio.dispose(),this._audio=null)},r}(e.ScriptComponent);e.AudioSource=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(r,i,s){void 0===s&&(s={});var o=t.call(this,r,i,s)||this;return o.cameraType=0,o.mainCamera=!1,o.virtualReality=null,o.multiPlayerSetup=null,o.m_cameraRig=null,o.mainCamera="MainCamera"===o.getTransformTag(),o.cameraType=o.getEditorProperty("mainCameraType",o.cameraType),o.virtualReality=o.getEditorProperty("webVirtualReality",o.virtualReality),o.multiPlayerSetup=o.getEditorProperty("multiPlayerSetup",o.multiPlayerSetup),null!=o.multiPlayerSetup&&(e.UniversalCameraSystem.startupMode=o.multiPlayerSetup.playerStartupMode,e.UniversalCameraSystem.stereoCameras=o.multiPlayerSetup.stereoSideBySide),o}return __extends(r,t),r.prototype.isMainCamera=function(){return this.mainCamera},r.prototype.getCameraType=function(){return this.cameraType},r.prototype.start=function(){this.initCameraSystemState()},r.prototype.update=function(){this.updateCameraSystemState()},r.prototype.destroy=function(){this.destroyCameraSystemState()},r.prototype.initCameraSystemState=function(){if(e.Utilities.ValidateTransformQuaternion(this.transform),this.m_cameraRig=this.getCameraRig(),null!=this.m_cameraRig)if(0===this.cameraType)null==e.UniversalCameraSystem.PlayerOneCamera&&(e.UniversalCameraSystem.PlayerOneCamera=this.m_cameraRig,e.UniversalCameraSystem.PlayerOneCamera.inertia=1);else if(1===this.cameraType){if(null!=this.virtualReality&&this.virtualReality.experienceHelper===!0){var t=!1,r=null;if(this.virtualReality.useCustomButton===!0&&null!=this.virtualReality.buttonElementID&&""!==this.virtualReality.buttonElementID){var i=document.getElementById(this.virtualReality.buttonElementID);null!=i?(t=!0,r=i):e.Tools.Warn("Babylon.js failed to locate webvr button element id: "+this.virtualReality.buttonElementID)}var s=null,o=null;null!=this.virtualReality.floorMeshesTags&&""!==this.virtualReality.floorMeshesTags||(this.virtualReality.floorMeshesTags="Navigation"),this.virtualReality.enableTeleportation===!0&&(o=this.scene.getMeshesByTags(this.virtualReality.floorMeshesTags)),s=this.virtualReality.enableTeleportation===!0&&null!=o&&o.length>0?{createDeviceOrientationCamera:1===this.virtualReality.defaultCamera,createFallbackVRDeviceOrientationFreeCamera:this.virtualReality.fallbackCamera,laserToggle:this.virtualReality.displayLaserBeam,useCustomVRButton:t,customVRButton:r,rayLength:this.virtualReality.rayCastLength,defaultHeight:this.virtualReality.defaultHeight,positionScale:this.virtualReality.positionScale,floorMeshes:o}:{createDeviceOrientationCamera:1===this.virtualReality.defaultCamera,createFallbackVRDeviceOrientationFreeCamera:this.virtualReality.fallbackCamera,laserToggle:this.virtualReality.displayLaserBeam,useCustomVRButton:t,customVRButton:r,rayLength:this.virtualReality.rayCastLength,defaultHeight:this.virtualReality.defaultHeight,positionScale:this.virtualReality.positionScale},e.UniversalCameraSystem.DefaultControllers=!0;var n=this.scene.createDefaultVRExperience(s);null!=n&&(n.displayGaze=this.virtualReality.displayGazeIcon,this.virtualReality.enableInteractions===!0&&n.enableInteractions(),n.onControllerMeshLoadedObservable.add(function(t,r){"left"===t.hand?e.UniversalCameraSystem.LeftControllerStick=t:"right"===t.hand&&(e.UniversalCameraSystem.RightControllerStick=t)})),e.UniversalCameraSystem.VrCameraHelper=n}}else if(2===this.cameraType){var a=this.m_cameraRig.name;if(null==e.UniversalCameraSystem.PlayerOneCamera){var l=a+".1",h=this.m_cameraRig.clone(l);h.name=l,h.parent=null,h.position=this.transform.position.clone(),h.rotationQuaternion=this.transform.rotationQuaternion.clone(),h.viewport=new e.Viewport(0,0,0,0),h.setEnabled(!1),e.UniversalCameraSystem.PlayerOneCamera=h,e.UniversalCameraSystem.PlayerOneCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerTwoCamera){var c=a+".2",u=this.m_cameraRig.clone(c);u.name=c,u.parent=null,u.position=this.transform.position.clone(),u.rotationQuaternion=this.transform.rotationQuaternion.clone(),u.viewport=new e.Viewport(0,0,0,0),u.setEnabled(!1),e.UniversalCameraSystem.PlayerTwoCamera=u,e.UniversalCameraSystem.PlayerTwoCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerThreeCamera){var m=a+".3",p=this.m_cameraRig.clone(m);p.name=m,p.parent=null,p.position=this.transform.position.clone(),p.rotationQuaternion=this.transform.rotationQuaternion.clone(),p.viewport=new e.Viewport(0,0,0,0),p.setEnabled(!1),e.UniversalCameraSystem.PlayerThreeCamera=p,e.UniversalCameraSystem.PlayerThreeCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerFourCamera){var f=a+".4",y=this.m_cameraRig.clone(f);y.name=f,y.parent=null,y.position=this.transform.position.clone(),y.rotationQuaternion=this.transform.rotationQuaternion.clone(),y.viewport=new e.Viewport(0,0,0,0),y.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera=y,e.UniversalCameraSystem.PlayerFourCamera.inertia=1}e.UniversalCameraSystem.multiPlayerView=!0,e.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene,e.UniversalCameraSystem.startupMode)}},r.prototype.updateCameraSystemState=function(){null!=this.m_cameraRig&&(0===this.cameraType||1===this.cameraType||2===this.cameraType)},r.prototype.destroyCameraSystemState=function(){this.virtualReality=null},r.GetPlayerCamera=function(t){return e.UniversalCameraSystem.IsMultiPlayerView()?t===e.PlayerNumber.One?e.UniversalCameraSystem.PlayerOneCamera:t===e.PlayerNumber.Two?e.UniversalCameraSystem.PlayerTwoCamera:t===e.PlayerNumber.Three?e.UniversalCameraSystem.PlayerThreeCamera:t===e.PlayerNumber.Four?e.UniversalCameraSystem.PlayerFourCamera:null:t===e.PlayerNumber.One?null!=e.UniversalCameraSystem.WebVR?e.UniversalCameraSystem.WebVR.currentVRCamera:e.UniversalCameraSystem.PlayerOneCamera:(e.Tools.Warn("Babylon.js multi player camera not available for player: "+t),null)},Object.defineProperty(r,"WebVR",{get:function(){return e.UniversalCameraSystem.VrCameraHelper},enumerable:!0,configurable:!0}),r.GetWebVRLeftController=function(){return e.UniversalCameraSystem.LeftControllerStick},r.GetWebVRRightController=function(){return e.UniversalCameraSystem.RightControllerStick},r.GetWebVRLeftControllerPrefab=function(){return e.UniversalCameraSystem.LeftControllerPrefab},r.GetWebVRRightControllerPrefab=function(){return e.UniversalCameraSystem.RightControllerPrefab},r.ShowWebVRDefaultControllers=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),null!=e.UniversalCameraSystem.LeftControllerStick&&(e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.LeftControllerStick.attachToMesh(e.UniversalCameraSystem.LeftControllerStick.defaultModel),e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!0),null!=e.UniversalCameraSystem.RightControllerStick&&(e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.RightControllerStick.attachToMesh(e.UniversalCameraSystem.RightControllerStick.defaultModel),e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!0),null!=e.UniversalCameraSystem.WebVR&&(null!=t&&(e.UniversalCameraSystem.WebVR.displayGaze=t),null!=r&&(e.UniversalCameraSystem.WebVR.displayLaserPointer=r))},r.ShowWebVRCustomControllers=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),null!=e.UniversalCameraSystem.LeftControllerStick&&(e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.LeftControllerStick.attachToMesh(e.UniversalCameraSystem.LeftControllerPrefab),e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!1),null!=e.UniversalCameraSystem.RightControllerStick&&(e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.RightControllerStick.attachToMesh(e.UniversalCameraSystem.RightControllerPrefab),e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!1),null!=e.UniversalCameraSystem.WebVR&&(null!=t&&(e.UniversalCameraSystem.WebVR.displayGaze=t),null!=r&&(e.UniversalCameraSystem.WebVR.displayLaserPointer=r))},r.IsStereoCameras=function(){return e.UniversalCameraSystem.stereoCameras},r.IsMultiPlayerView=function(){return e.UniversalCameraSystem.multiPlayerView},r.GetMultiPlayerCount=function(){return e.UniversalCameraSystem.multiPlayerCount},r.ActivateMultiPlayerCameras=function(t){var r=!1;return null!=e.UniversalCameraSystem.multiPlayerCameras&&e.UniversalCameraSystem.multiPlayerCameras.length>0&&(t.activeCameras=e.UniversalCameraSystem.multiPlayerCameras,r=!0),r},r.DisposeMultiPlayerCameras=function(){null!=e.UniversalCameraSystem.PlayerOneCamera&&(e.UniversalCameraSystem.PlayerOneCamera.dispose(),e.UniversalCameraSystem.PlayerOneCamera=null),null!=e.UniversalCameraSystem.PlayerTwoCamera&&(e.UniversalCameraSystem.PlayerTwoCamera.dispose(),e.UniversalCameraSystem.PlayerTwoCamera=null),null!=e.UniversalCameraSystem.PlayerThreeCamera&&(e.UniversalCameraSystem.PlayerThreeCamera.dispose(),e.UniversalCameraSystem.PlayerThreeCamera=null),null!=e.UniversalCameraSystem.PlayerFourCamera&&(e.UniversalCameraSystem.PlayerFourCamera.dispose(),e.UniversalCameraSystem.PlayerFourCamera=null)},r.SetMultiPlayerViewLayout=function(t,r){var i=!1,s=e.Scalar.Clamp(r,1,4);return e.UniversalCameraSystem.IsMultiPlayerView()?(null!=e.UniversalCameraSystem.PlayerOneCamera&&null!=e.UniversalCameraSystem.PlayerTwoCamera&&null!=e.UniversalCameraSystem.PlayerThreeCamera&&null!=e.UniversalCameraSystem.PlayerFourCamera?(e.UniversalCameraSystem.multiPlayerCameras=[],1===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,1,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera)):2===s?(e.UniversalCameraSystem.stereoCameras===!0?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,.5,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(.5,0,.5,1)):(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,.5,1,.5),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,1,.5)),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera)):3===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,.5,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(.5,.5,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(.5,0,.5,.5),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerThreeCamera)):4===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,.5,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(.5,.5,.5,.5),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(.5,0,.5,.5),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!0),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerThreeCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerFourCamera)):e.Tools.Warn("Babylon.js camera rig invalid player count specified: "+s)):e.Tools.Warn("Babylon.js camera rig failed to initialize multi player cameras"),e.UniversalCameraSystem.multiPlayerCount=s,i=e.UniversalCameraSystem.ActivateMultiPlayerCameras(t),i===!1&&e.Tools.Warn("Babylon.js camera rig failed to initialize multi player views")):e.Tools.Warn("Babylon.js camera rig multi player view option not enabled"),i},r.VrCameraHelper=null,r.DefaultControllers=!0,r.LeftControllerStick=null,r.RightControllerStick=null,r.LeftControllerPrefab=null,r.RightControllerPrefab=null,r.PlayerOneCamera=null,r.PlayerTwoCamera=null,r.PlayerThreeCamera=null,r.PlayerFourCamera=null,r.multiPlayerView=!1,r.multiPlayerCount=1,r.multiPlayerCameras=null,r.stereoCameras=!0,r.startupMode=1,r}(e.ScriptComponent);e.UniversalCameraSystem=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(r,i,s){void 0===s&&(s={});var o=t.call(this,r,i,s)||this;return o._abstractMesh=null,o._avatarRadius=.5,o._avatarHeight=2,o._skinWidth=.08,o._stepOffset=.3,o._slopeLimit=45,o._minMoveDistance=.001,o._isPhysicsReady=!1,o._maxCollisions=4,o._useGhostSweepTest=!1,o._tmpAmmoQuaternion=null,o._tmpOriginQuaternion=null,o._tmpRotateQuaternion=null,o._tmpBabylonQuaternion=null,o._tmpBabylonEulerVector=null,o._tmpCollisionContacts=null,o.m_character=null,o.m_ghostShape=null,o.m_ghostObject=null,o.m_ghostCollision=null,o.m_ghostTransform=null,o.m_ghostPosition=null,o.m_ghostRotation=null,o.m_startPosition=null,o.m_startRotation=null,o.m_startTransform=null,o.m_walkDirection=null,o.m_warpPosition=null,o.m_turningRate=0,o.m_moveDeltaX=0,o.m_moveDeltaZ=0,o.m_physicsEngine=null,o._onCollisionEnterObservable=new e.Observable,o._onCollisionStayObservable=new e.Observable,o._onCollisionExitObservable=new e.Observable,o._abstractMesh=o.getAbstractMesh(),o._avatarRadius=o.getEditorProperty("avatarRadius",o._avatarRadius),o._avatarHeight=o.getEditorProperty("avatarHeight",o._avatarHeight),o._skinWidth=o.getEditorProperty("skinWidth",o._skinWidth),o._slopeLimit=o.getEditorProperty("slopeLimit",o._slopeLimit),o._stepOffset=o.getEditorProperty("stepOffset",o._stepOffset),o._minMoveDistance=o.getEditorProperty("minMoveDistance",o._minMoveDistance),o._useGhostSweepTest=o.getEditorProperty("useGhostSweepTest",o._useGhostSweepTest),o._tmpAmmoQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpOriginQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpRotateQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpBabylonQuaternion=new e.Quaternion(0,0,0,1),o._tmpBabylonEulerVector=new e.Vector3(0,0,0),o._tmpBabylonQuaternion=new e.Quaternion(0,0,0,1),o.m_warpPosition=new Ammo.btVector3(0,0,0),o.m_walkDirection=new Ammo.btVector3(0,0,0),o.m_physicsEngine=e.SceneManager.GetPhysicsEngine(o.scene),o.setMaxNotifications(o._maxCollisions),o}return __extends(r,t),r.prototype.getAvatarRadius=function(){return this._avatarRadius},r.prototype.getAvatarHeight=function(){return this._avatarHeight},r.prototype.getSkinWidth=function(){return this._skinWidth},r.prototype.getStepOffset=function(){return this._stepOffset},r.prototype.getUseSweepTest=function(){return this._useGhostSweepTest},r.prototype.getMinMoveDistance=function(){return this._minMoveDistance},r.prototype.setMinMoveDistance=function(e){this._minMoveDistance=e},r.prototype.getVerticalVelocity=function(){return null!=this.m_character&&this.m_character.getVerticalVelocity?this.m_character.getVerticalVelocity():0},r.prototype.setMaxJumpHeight=function(e){null!=this.m_character&&this.m_character.setMaxJumpHeight(e)},r.prototype.setFallingSpeed=function(e){null!=this.m_character&&this.m_character.setFallSpeed(e)},r.prototype.getSlopeLimit=function(){return null!=this.m_character?this.m_character.getMaxSlope():0},r.prototype.setSlopeLimit=function(e){null!=this.m_character&&this.m_character.setMaxSlope(e)},r.prototype.setUpAxis=function(e){null!=this.m_character&&this.m_character.setUpAxis(e)},r.prototype.getGravity=function(){return null!=this.m_character?this.m_character.getGravity():0},r.prototype.setGravity=function(e){null!=this.m_character&&this.m_character.setGravity(e)},r.prototype.isGrounded=function(){return null!=this.m_character&&this.m_character.onGround()},r.prototype.isReady=function(){return null!=this.m_character},r.prototype.canJump=function(){return null!=this.m_character&&this.m_character.canJump()},r.prototype.internalWarp=function(e){null!=this.m_character&&this.m_character.warp(e)},r.prototype.internalJump=function(){null!=this.m_character&&this.m_character.jump()},r.prototype.internalSetJumpSpeed=function(e){null!=this.m_character&&this.m_character.setJumpSpeed(e)},r.prototype.internalSetWalkDirection=function(e){null!=this.m_character&&this.m_character.setWalkDirection(e)},r.prototype.internalSetVelocityForTimeInterval=function(e,t){null!=this.m_character&&this.m_character.setVelocityForTimeInterval(e,t)},r.prototype.start=function(){this.initMovementState()},r.prototype.update=function(){this.updateMovementState()},r.prototype.after=function(){this.afterMovementState()},r.prototype.destroy=function(){this.destroyMovementState()},r.prototype.initMovementState=function(){e.Utilities.ValidateTransformQuaternion(this.transform);var t=e.SceneManager.GetPhysicsWorld(this.scene);null!=t?(this.m_startPosition=new Ammo.btVector3(this.transform.position.x,this.transform.position.y,this.transform.position.z),this.m_startRotation=new Ammo.btQuaternion(this.transform.rotationQuaternion.x,this.transform.rotationQuaternion.y,this.transform.rotationQuaternion.z,this.transform.rotationQuaternion.w),this.m_startTransform=new Ammo.btTransform,this.m_startTransform.setIdentity(),this.m_startTransform.setOrigin(this.m_startPosition),this.m_startTransform.setRotation(this.m_startRotation),this.m_ghostShape=new Ammo.btCapsuleShape(this._avatarRadius,.5*this._avatarHeight),this.m_ghostShape.setMargin(this._skinWidth),this.m_ghostObject=new Ammo.btPairCachingGhostObject,this.m_ghostObject.setWorldTransform(this.m_startTransform),this.m_ghostObject.setCollisionShape(this.m_ghostShape),this.m_ghostObject.setCollisionFlags(e.CollisionFlags.CF_CHARACTER_OBJECT),this.m_ghostCollision=Ammo.castObject(this.m_ghostObject,Ammo.btCollisionObject),this.m_ghostCollision.entity=this._abstractMesh,this.m_character=new Ammo.btKinematicCharacterController(this.m_ghostObject,this.m_ghostShape,this._stepOffset),this.m_character.setUseGhostSweepTest(this._useGhostSweepTest),this.m_character.setUpInterpolate(!0),this.m_character.setMaxSlope(this._slopeLimit*e.System.Deg2Rad),this.m_character.setGravity(e.System.Gravity3G),t.addCollisionObject(this.m_ghostObject,e.CollisionFilters.CharacterFilter,e.CollisionFilters.StaticFilter|e.CollisionFilters.DefaultFilter|e.CollisionFilters.CharacterFilter),t.addAction(this.m_character)):e.Tools.Warn("Null physics world detected. Failed to create character controller: "+this.transform.name),this._isPhysicsReady=null!=this.m_physicsEngine&&null!=this._tmpCollisionContacts&&null!=this.m_ghostObject&&null!=this._abstractMesh,this.updateMovementState(),this.afterMovementState()},r.prototype.syncMovementState=function(){this._isPhysicsReady===!0&&(this.m_ghostTransform=this.m_ghostObject.getWorldTransform(),null!=this.m_ghostTransform?(this.m_ghostPosition=this.m_ghostTransform.getOrigin(),this.m_ghostRotation=this.m_ghostTransform.getRotation()):(this.m_ghostPosition=null,this.m_ghostRotation=null))},r.prototype.updateMovementState=function(){this.syncMovementState(),this._isPhysicsReady===!0&&(0!==this.m_turningRate&&null!=this.m_ghostTransform&&null!=this.m_ghostRotation&&(this._tmpBabylonQuaternion.set(this.m_ghostRotation.x(),this.m_ghostRotation.y(),this.m_ghostRotation.z(),this.m_ghostRotation.w()),e.Utilities.ToEulerToRef(this._tmpBabylonQuaternion,this._tmpBabylonEulerVector),this._tmpBabylonEulerVector.y+=this.m_turningRate,e.Utilities.FromEulerToRef(this._tmpBabylonEulerVector.x,this._tmpBabylonEulerVector.y,this._tmpBabylonEulerVector.z,this._tmpBabylonQuaternion),this._tmpAmmoQuaternion.setValue(this._tmpBabylonQuaternion.x,this._tmpBabylonQuaternion.y,this._tmpBabylonQuaternion.z,this._tmpBabylonQuaternion.w),this.m_ghostTransform.setRotation(this._tmpAmmoQuaternion),this.m_ghostObject.setWorldTransform(this.m_ghostTransform)),null!=this.m_walkDirection&&this.internalSetWalkDirection(this.m_walkDirection))},r.prototype.afterMovementState=function(){this.syncMovementState(),this._isPhysicsReady===!0&&(null!=this.m_ghostPosition&&this.transform.position.set(this.m_ghostPosition.x(),this.m_ghostPosition.y(),this.m_ghostPosition.z()),null!=this.m_ghostRotation&&this.transform.rotationQuaternion.set(this.m_ghostRotation.x(),this.m_ghostRotation.y(),this.m_ghostRotation.z(),this.m_ghostRotation.w())),this.parseGhostCollisionContacts()},r.prototype.parseGhostCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();if(e||t||r){var i=0;for(i=0;i<this._tmpCollisionContacts.length;i++)this._tmpCollisionContacts[i].reset=!0;var s=this.m_ghostObject.getNumOverlappingObjects();if(s>this._maxCollisions&&(s=this._maxCollisions),s>0)for(i=0;i<s;i++){var o=this.m_ghostObject.getOverlappingObject(i);if(null!=o){
var n=Ammo.castObject(o,Ammo.btCollisionObject);if(null!=n&&null!=n.entity&&n.isActive()){var a=-1,l=n.entity;for(i=0;i<this._tmpCollisionContacts.length;i++){var h=this._tmpCollisionContacts[i];if(null!=h.mesh&&h.mesh===l){h.state=1,h.reset=!1,a=i;break}}if(a===-1)for(i=0;i<this._tmpCollisionContacts.length;i++){var c=this._tmpCollisionContacts[i];if(null==c.mesh){c.mesh=l,c.state=0,c.reset=!1;break}}}}}for(i=0;i<this._tmpCollisionContacts.length;i++){var u=this._tmpCollisionContacts[i];u.reset===!0?(r&&null!=u.mesh&&this._onCollisionExitObservable.notifyObservers(u.mesh),u.mesh=null,u.state=0,u.reset=!1):0===u.state?e&&null!=u.mesh&&this._onCollisionEnterObservable.notifyObservers(u.mesh):t&&null!=u.mesh&&this._onCollisionStayObservable.notifyObservers(u.mesh)}}}},r.prototype.destroyMovementState=function(){this.m_physicsEngine=null,null!=this.m_character&&(Ammo.destroy(this.m_character),this.m_character=null),null!=this.m_ghostObject&&(Ammo.destroy(this.m_ghostObject),this.m_ghostObject=null),null!=this.m_ghostShape&&(Ammo.destroy(this.m_ghostShape),this.m_ghostShape=null),null!=this.m_ghostCollision&&(Ammo.destroy(this.m_ghostCollision),this.m_ghostCollision=null),null!=this.m_ghostPosition&&(Ammo.destroy(this.m_ghostPosition),this.m_ghostPosition=null),null!=this.m_ghostRotation&&(Ammo.destroy(this.m_ghostRotation),this.m_ghostRotation=null),null!=this.m_ghostTransform&&(Ammo.destroy(this.m_ghostTransform),this.m_ghostTransform=null),null!=this.m_startPosition&&(Ammo.destroy(this.m_startPosition),this.m_startPosition=null),null!=this.m_startRotation&&(Ammo.destroy(this.m_startRotation),this.m_startRotation=null),null!=this.m_startTransform&&(Ammo.destroy(this.m_startTransform),this.m_startTransform=null),null!=this.m_warpPosition&&(Ammo.destroy(this.m_warpPosition),this.m_warpPosition=null),null!=this.m_walkDirection&&(Ammo.destroy(this.m_walkDirection),this.m_walkDirection=null),null!=this._tmpAmmoQuaternion&&(Ammo.destroy(this._tmpAmmoQuaternion),this._tmpAmmoQuaternion=null),null!=this._tmpOriginQuaternion&&(Ammo.destroy(this._tmpOriginQuaternion),this._tmpOriginQuaternion=null),null!=this._tmpRotateQuaternion&&(Ammo.destroy(this._tmpRotateQuaternion),this._tmpRotateQuaternion=null),this._onCollisionEnterObservable.clear(),this._onCollisionEnterObservable=null,this._onCollisionStayObservable.clear(),this._onCollisionStayObservable=null,this._onCollisionExitObservable.clear(),this._onCollisionExitObservable=null,this._tmpCollisionContacts=null,this._abstractMesh=null},r.prototype.registerOnCollisionEnter=function(e){return this._onCollisionEnterObservable.add(e)},r.prototype.unregisterOnCollisionEnter=function(e){return this._onCollisionEnterObservable.remove(e)},r.prototype.registerOnCollisionStay=function(e){return this._onCollisionStayObservable.add(e)},r.prototype.unregisterOnCollisionStay=function(e){return this._onCollisionStayObservable.remove(e)},r.prototype.registerOnCollisionExit=function(e){return this._onCollisionExitObservable.add(e)},r.prototype.unregisterOnCollisionExit=function(e){return this._onCollisionExitObservable.remove(e)},r.prototype.setMaxNotifications=function(t){this._maxCollisions=t,this._tmpCollisionContacts=[];for(var r=0;r<this._maxCollisions;r++)this._tmpCollisionContacts.push(new e.CollisionContactInfo)},r.prototype.setActivationState=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.setActivationState&&this.m_ghostCollision.setActivationState(e)},r.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&(e=this.m_ghostCollision.getBroadphaseHandle().get_m_collisionFilterGroup()),e},r.prototype.setCollisionFilterGroup=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&this.m_ghostCollision.getBroadphaseHandle().set_m_collisionFilterGroup(e)},r.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&(e=this.m_ghostCollision.getBroadphaseHandle().get_m_collisionFilterMask()),e},r.prototype.setCollisionFilterMask=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&this.m_ghostCollision.getBroadphaseHandle().set_m_collisionFilterMask(e)},r.prototype.getContactProcessingThreshold=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getContactProcessingThreshold&&this.m_ghostCollision.getContactProcessingThreshold(),e},r.prototype.setContactProcessingThreshold=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.setContactProcessingThreshold&&this.m_ghostCollision.setContactProcessingThreshold(e)},r.prototype.setGhostWorldTransform=function(e,t){null!=this.m_ghostObject&&null!=this.m_ghostTransform&&(null!=this.m_ghostPosition&&null!=e&&(this.m_ghostPosition.setValue(e.x,e.y,e.z),this.m_ghostTransform.setOrigin(this.m_ghostPosition)),null!=this.m_ghostRotation&&null!=t&&(this.m_ghostRotation.setValue(t.x,t.y,t.z,t.w),this.m_ghostTransform.setRotation(this.m_ghostRotation)),this.m_ghostObject.setWorldTransform(this.m_ghostTransform))},r.prototype.move=function(e){null!=e&&(this.m_moveDeltaX=e.x,this.m_moveDeltaZ=e.z,Math.abs(e.x)<this._minMoveDistance&&(e.x>0?this.m_moveDeltaX=this._minMoveDistance:e.x<0&&(this.m_moveDeltaX=-this._minMoveDistance)),Math.abs(e.z)<this._minMoveDistance&&(e.z>0?this.m_moveDeltaZ=this._minMoveDistance:e.z<0&&(this.m_moveDeltaZ=-this._minMoveDistance)),null!=this.m_walkDirection&&this.m_walkDirection.setValue(this.m_moveDeltaX,0,this.m_moveDeltaZ))},r.prototype.turn=function(e){this.m_turningRate=e},r.prototype.jump=function(e){this.internalSetJumpSpeed(e),this.internalJump()},r.prototype.warp=function(e){null!=this.m_warpPosition&&(this.m_warpPosition.setValue(e.x,e.y,e.z),this.internalWarp(this.m_warpPosition))},r}(e.ScriptComponent);e.CharacterController=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){return void 0===i&&(i={}),t.call(this,e,r,i)||this}return __extends(r,t),Object.defineProperty(r.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasAgentInfo",{get:function(){return null!=this.info},enumerable:!0,configurable:!0}),r.prototype.start=function(){},r.prototype.update=function(){},r.prototype.after=function(){},r.prototype.destroy=function(){},r.prototype.setDestination=function(t){this.hasAgentInfo||e.Tools.Warn("Null navigation agent metadata. Set agent destination ignored.")},r.GetNavigationMesh=function(t){return e.SceneManager.GetAbstractMesh(t,"NavigationMesh")},r.GetNavigationZone=function(){return"scene"},r.BuildNavigationNodes=function(t,r){void 0===r&&(r=null);var i=null,s=r||e.NavigationAgent.GetNavigationMesh(t);if(null!=s){i=new Navigation;var o=i.buildNodes(s);null!=o?i.setZoneData(e.NavigationAgent.GetNavigationZone(),o):e.Tools.Warn("Failed to build navigation zone nodes")}else e.Tools.Warn("Failed to locate scene navigation mesh");return i},r.FindNavigationPath=function(t,r,i){var s=e.NavigationAgent.GetNavigationZone(),o=t.getGroup(s,r);return t.findPath(r,i,s,o)},r}(e.ScriptComponent);e.NavigationAgent=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t}(e.ScriptComponent);e.NetworkSystem=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t}(e.ScriptComponent);e.ShurikenParticleSystem=t}(BABYLON||(BABYLON={}));var BABYLON;!function(e){var t=function(){function t(t,r,i,s){this._rightHanded=!1,this._centerMass=new e.Vector3(0,0,0),this._chassisMesh=null,this._tempVectorPos=new e.Vector3(0,0,0),this.lockedWheelIndexes=null,this.m_vehicle=null,this.m_vehicleTuning=null,this.m_vehicleRaycaster=null,this.m_vehicleColliders=null,this.m_tempTransform=null,this.m_tempPosition=null,this.m_wheelDirectionCS0=null,this.m_wheelAxleCS=null,this._rightHanded=i,this._chassisMesh=t,this._centerMass=s,this.m_vehicleColliders=this._chassisMesh.metadata.wheels,this.m_vehicleTuning=new Ammo.btVehicleTuning,this.m_vehicleRaycaster=new Ammo.btSmoothVehicleRaycaster(r),this.m_vehicle=new Ammo.btRaycastVehicle(this.m_vehicleTuning,this._chassisMesh.physicsImpostor.physicsBody,this.m_vehicleRaycaster),this.m_vehicle.setCoordinateSystem(0,1,2),this.m_wheelDirectionCS0=new Ammo.btVector3(0,(-1),0),this.m_wheelAxleCS=new Ammo.btVector3((-1),0,0),this.m_tempPosition=null,this.m_tempTransform=null,r.addAction(this.m_vehicle),this.setupWheelInformation()}return t.prototype.getUpAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUpAxis()},t.prototype.getRightAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getRightAxis()},t.prototype.getForwardAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getForwardAxis()},t.prototype.getForwardVector=function(){if(null!=this.m_vehicle)return this.m_vehicle.getForwardVector()},t.prototype.getNumWheels=function(){if(null!=this.m_vehicle)return this.m_vehicle.getNumWheels()},t.prototype.getWheelInfo=function(e){if(null!=this.m_vehicle)return this.m_vehicle.getWheelInfo(e)},t.prototype.resetSuspension=function(){null!=this.m_vehicle&&this.m_vehicle.resetSuspension()},t.prototype.setPitchControl=function(e){null!=this.m_vehicle&&this.m_vehicle.setPitchControl(e)},t.prototype.setEngineForce=function(e,t){null!=this.m_vehicle&&this.m_vehicle.applyEngineForce(this._rightHanded?e*-1:e,t)},t.prototype.setBrakingForce=function(e,t){null!=this.m_vehicle&&this.m_vehicle.setBrake(this._rightHanded?1*e:e,t)},t.prototype.getWheelTransform=function(e){if(null!=this.m_vehicle)return this.m_vehicle.getWheelTransformWS(e)},t.prototype.updateWheelTransform=function(e,t){null!=this.m_vehicle&&this.m_vehicle.updateWheelTransform(e,t)},t.prototype.getUserConstraintType=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUserConstraintType()},t.prototype.setUserConstraintType=function(e){null!=this.m_vehicle&&this.m_vehicle.setUserConstraintType(e)},t.prototype.setUserConstraintId=function(e){null!=this.m_vehicle&&this.m_vehicle.setUserConstraintId(e)},t.prototype.getUserConstraintId=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUserConstraintId()},t.prototype.getRawCurrentSpeedKph=function(){if(null!=this.m_vehicle)return this.m_vehicle.getCurrentSpeedKmHour()},t.prototype.getRawCurrentSpeedMph=function(){if(null!=this.m_vehicle)return this.m_vehicle.getCurrentSpeedKmHour()*e.System.Kph2Mph},t.prototype.getAbsCurrentSpeedKph=function(){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getCurrentSpeedKmHour())},t.prototype.getAbsCurrentSpeedMph=function(){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getCurrentSpeedKmHour())*e.System.Kph2Mph},t.prototype.getVehicleTuningSystem=function(){return this.m_vehicleTuning},t.prototype.getChassisWorldTransform=function(){if(null!=this.m_vehicle)return this.m_vehicle.getChassisWorldTransform()},t.prototype.dispose=function(){this.deleteWheelInformation(),null!=this.m_vehicle&&(Ammo.destroy(this.m_vehicle),this.m_vehicle=null),null!=this.m_vehicleTuning&&(Ammo.destroy(this.m_vehicleTuning),this.m_vehicleTuning=null),null!=this.m_vehicleRaycaster&&(Ammo.destroy(this.m_vehicleRaycaster),this.m_vehicleRaycaster=null),null!=this.m_wheelDirectionCS0&&(Ammo.destroy(this.m_wheelDirectionCS0),this.m_wheelDirectionCS0=null),null!=this.m_wheelAxleCS&&(Ammo.destroy(this.m_wheelAxleCS),this.m_wheelAxleCS=null),null!=this.m_tempPosition&&(Ammo.destroy(this.m_tempPosition),this.m_tempPosition=null),null!=this.m_tempTransform&&(Ammo.destroy(this.m_tempTransform),this.m_tempTransform=null),this.m_vehicleColliders=null},t.prototype.getStabilizingForce=function(){var e=-1;return null!=this.m_vehicle&&this.m_vehicle.get_m_stabilizingForce&&(e=this.m_vehicle.get_m_stabilizingForce()),e},t.prototype.setStabilizingForce=function(e){null!=this.m_vehicle&&this.m_vehicle.set_m_stabilizingForce&&this.m_vehicle.set_m_stabilizingForce(e)},t.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_collisionFilterGroup&&(e=this.m_vehicleRaycaster.get_m_collisionFilterGroup()),e},t.prototype.setCollisionFilterGroup=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_collisionFilterGroup&&this.m_vehicleRaycaster.set_m_collisionFilterGroup(e)},t.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_collisionFilterMask&&(e=this.m_vehicleRaycaster.get_m_collisionFilterMask()),e},t.prototype.setCollisionFilterMask=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_collisionFilterMask&&this.m_vehicleRaycaster.set_m_collisionFilterMask(e)},t.prototype.getInterpolateMeshNormals=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_interpolateMeshNormals&&(e=this.m_vehicleRaycaster.get_m_interpolateMeshNormals()),e},t.prototype.setInterpolateMeshNormals=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_interpolateMeshNormals&&this.m_vehicleRaycaster.set_m_interpolateMeshNormals(e)},t.prototype.getWheelIndexByID=function(e){var t=-1;if(null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0)for(var r=0;r<this.m_vehicleColliders.length;r++){var i=this.m_vehicleColliders[r];if(e.toLowerCase()===i.id.toLowerCase()){t=r;break}}return t},t.prototype.getWheelIndexByName=function(e){var t=-1;if(null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0)for(var r=0;r<this.m_vehicleColliders.length;r++){var i=this.m_vehicleColliders[r];if(e.toLowerCase()===i.name.toLowerCase()){t=r;break}}return t},t.prototype.getWheelColliderInfo=function(e){var t=-1;return null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0&&this.m_vehicleColliders.length>e&&(t=this.m_vehicleColliders[e]),t},t.prototype.setWheelTransformMesh=function(e,t){if(null!=t){var r=this.getWheelInfo(e);null!=r&&(r.transform=t)}},t.prototype.getVisualSteeringAngle=function(e){var t=0,r=this.getWheelInfo(e);return null!=r&&null!=r.steeringAngle&&(t=r.steeringAngle),t},t.prototype.setVisualSteeringAngle=function(e,t){var r=this.getWheelInfo(t);null!=r&&(r.steeringAngle=this._rightHanded?e*-1:e)},t.prototype.getPhysicsSteeringAngle=function(e){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getSteeringValue(e))},t.prototype.setPhysicsSteeringAngle=function(e,t){null!=this.m_vehicle&&this.m_vehicle.setSteeringValue(this._rightHanded?e*-1:e,t)},t.prototype.setupWheelInformation=function(){if(null!=this._chassisMesh&&null!=this._chassisMesh.physicsImpostor&&null!=this._chassisMesh.physicsImpostor.physicsBody&&this._chassisMesh.physicsImpostor.physicsBody.setActivationState(e.CollisionState.DISABLE_DEACTIVATION),null!=this.m_vehicle&&null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0){var t=-1;for(t=0;t<this.m_vehicleColliders.length;t++){var r=this.m_vehicleColliders[t],i=null!=r.name?r.name:"Unknown",s=null!=r.radius?r.radius:.5,o=null!=r.position&&r.position.length>=3?r.position[0]:1,n=null!=r.position&&r.position.length>=3?r.position[2]:-1,a=null!=r.suspensiondistance?r.suspensiondistance:.3,l=null!=r.suspensiontarget?r.suspensiontarget:.5,h=null!=r.forceapppointdistance?r.forceapppointdistance:0,c=null!=r.frontwheel||i.toLowerCase().indexOf("front")>=0;this.m_vehicle.addWheel(new Ammo.btVector3(o+-this._centerMass.x,a,n+-this._centerMass.z),this.m_wheelDirectionCS0,this.m_wheelAxleCS,l+h,s,this.m_vehicleTuning,c)}if(this.m_vehicle.getNumWheels()===this.m_vehicleColliders.length)for(t=0;t<this.m_vehicleColliders.length;t++){var r=this.m_vehicleColliders[t],u=6e3,m=500,p=null!=r.wheeldampingrate?r.wheeldampingrate:.2,f=null!=r.forward_extremumslip?r.forward_extremumslip:10,y=null!=r.forward_stiffness?r.forward_stiffness:20,_=null!=r.suspensionspring?r.suspensionspring:3.5,d=null!=r.suspensiondamper?r.suspensiondamper:4.5,v=this.m_vehicle.getWheelInfo(t);null!=v&&(v.steeringAngle=0,v.rotationBoost=0,v.defaultFriction=f,v.set_m_frictionSlip(f),v.set_m_rollInfluence(p),v.set_m_maxSuspensionForce(u),v.set_m_maxSuspensionTravelCm(m),v.set_m_suspensionStiffness(y),v.set_m_wheelsDampingCompression(_),v.set_m_wheelsDampingRelaxation(d))}else e.Tools.Warn("Failed to create proper number of wheels for: "+this._chassisMesh.name)}},t.prototype.updateWheelInformation=function(){var t=this.getNumWheels();if(t>0)for(var r=0;r<t;r++){var i=this.getWheelInfo(r);if(null!=i){var s=this.lockedWheelInformation(r);if(this.updateWheelTransform(r,!1),this.m_tempTransform=this.getWheelTransform(r),this.m_tempPosition=this.m_tempTransform.getOrigin(),null!=i.transform){var o=i.transform;if(null!=o.parent){this._tempVectorPos.set(this.m_tempPosition.x(),this.m_tempPosition.y(),this.m_tempPosition.z()),e.Utilities.InverseTransformPointToRef(o.parent,this._tempVectorPos,this._tempVectorPos),o.position.y=this._tempVectorPos.y;var n=null!=i.steeringAngle?i.steeringAngle:0;if(e.Quaternion.FromEulerAnglesToRef(0,n,0,o.rotationQuaternion),null!=i.spinner&&i.spinner.addRotation&&s===!1){var a=null!=i.get_m_deltaRotation?i.get_m_deltaRotation():0,l=null!=i.rotationBoost?i.rotationBoost:0;i.spinner.addRotation(a+l,0,0)}}}}}},t.prototype.lockedWheelInformation=function(e){var t=!1;if(null!=this.lockedWheelIndexes&&this.lockedWheelIndexes.length>0)for(var r=0;r<this.lockedWheelIndexes.length;r++)if(this.lockedWheelIndexes[r]===e){t=!0;break}return t},t.prototype.deleteWheelInformation=function(){var e=this.getNumWheels();if(e>0)for(var t=0;t<e;t++){var r=this.getWheelInfo(t);null!=r&&(null!=r.transform&&delete r.transform,null!=r.spinner&&delete r.spinner,null!=r.steeringAngle&&delete r.steeringAngle,null!=r.rotationBoost&&delete r.rotationBoost,null!=r.defaultFriction&&delete r.defaultFriction)}},t}();e.RaycastVehicle=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(){function e(){this.mesh=null,this.state=0,this.reset=!1}return e}();e.CollisionContactInfo=t;var r=function(r){function i(t,i,s){void 0===s&&(s={});var o=r.call(this,t,i,s)||this;return o._abstractMesh=null,o._isKinematic=!1,o._maxCollisions=4,o._isPhysicsReady=!1,o._centerOfMass=new e.Vector3(0,0,0),o._raycastVehicle=null,o._tmpGravityVector=null,o._tmpCollisionContacts=null,o.m_physicsWorld=null,o.m_physicsEngine=null,o._onCollisionEnterObservable=new e.Observable,o._onCollisionStayObservable=new e.Observable,o._onCollisionExitObservable=new e.Observable,o._abstractMesh=o.getAbstractMesh(),o._isKinematic=o.getEditorProperty("isKinematic",o._isKinematic),o.m_physicsWorld=e.SceneManager.GetPhysicsWorld(o.scene),o.m_physicsEngine=e.SceneManager.GetPhysicsEngine(o.scene),null!=o.transform.metadata&&null!=o.transform.metadata.unity&&null!=o.transform.metadata.unity.physics&&(o._centerOfMass=null!=o.transform.metadata.unity.physics.center?e.Utilities.ParseVector3(o.transform.metadata.unity.physics.center,o._centerOfMass):o._centerOfMass),o.setMaxNotifications(o._maxCollisions),o}return __extends(i,r),Object.defineProperty(i.prototype,"isKinematic",{get:function(){return this._isKinematic},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"centerOfMass",{get:function(){return this._centerOfMass},enumerable:!0,configurable:!0}),i.prototype.start=function(){this.initRigidbodyState()},i.prototype.update=function(){this.updateRigidbodyState()},i.prototype.after=function(){this.afterRigidbodyState()},i.prototype.destroy=function(){this.destroyRigidbodyState()},i.prototype.initRigidbodyState=function(){e.Utilities.ValidateTransformQuaternion(this.transform),this._isPhysicsReady=null!=this.m_physicsEngine&&null!=this._tmpCollisionContacts&&null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody;var t=this._isKinematic===!0?e.CollisionFilters.StaticFilter:e.CollisionFilters.DefaultFilter,r=this._isKinematic===!0?e.CollisionFilters.AllFilter^e.CollisionFilters.StaticFilter:e.CollisionFilters.AllFilter;this.setCollisionFilterGroup(t),this.setCollisionFilterMask(r),this.resetBodyCollisionContacts()},i.prototype.updateRigidbodyState=function(){this.syncronizeVehicleController()},i.prototype.afterRigidbodyState=function(){this.parseBodyCollisionContacts(),this.resetBodyCollisionContacts()},i.prototype.destroyRigidbodyState=function(){this.m_physicsWorld=null,this.m_physicsEngine=null,null!=this._raycastVehicle&&(this._raycastVehicle.dispose(),this._raycastVehicle=null),null!=this._tmpGravityVector&&(Ammo.destroy(this._tmpGravityVector),this._tmpGravityVector=null),this._onCollisionEnterObservable.clear(),this._onCollisionEnterObservable=null,this._onCollisionStayObservable.clear(),this._onCollisionStayObservable=null,this._onCollisionExitObservable.clear(),this._onCollisionExitObservable=null,this._tmpCollisionContacts=null,this._abstractMesh=null},i.prototype.syncronizeVehicleController=function(){null!=this._raycastVehicle&&this._raycastVehicle.updateWheelInformation()},i.prototype.parseBodyCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();if(e||t||r){var i=0;for(i=0;i<this._tmpCollisionContacts.length;i++)this._tmpCollisionContacts[i].reset=!0;var s=0;if(null!=this._abstractMesh.physicsImpostor.tmpCollisionObjects){var o=this._abstractMesh.physicsImpostor.tmpCollisionObjects;for(var n in o){var a=-1,l=o[n];for(i=0;i<this._tmpCollisionContacts.length;i++){var h=this._tmpCollisionContacts[i];if(null!=h.mesh&&h.mesh===l){h.state=1,h.reset=!1,a=i;break}}if(a===-1)for(i=0;i<this._tmpCollisionContacts.length;i++){var c=this._tmpCollisionContacts[i];if(null==c.mesh){c.mesh=l,c.state=0,c.reset=!1;break}}if(s++,s>this._maxCollisions)break}}for(i=0;i<this._tmpCollisionContacts.length;i++){var u=this._tmpCollisionContacts[i];u.reset===!0?(r&&null!=u.mesh&&this._onCollisionExitObservable.notifyObservers(u.mesh),u.mesh=null,u.state=0,u.reset=!1):0===u.state?e&&null!=u.mesh&&this._onCollisionEnterObservable.notifyObservers(u.mesh):t&&null!=u.mesh&&this._onCollisionStayObservable.notifyObservers(u.mesh)}}}},i.prototype.resetBodyCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();e||t||r?this._abstractMesh.physicsImpostor.tmpCollisionObjects={}:this._abstractMesh.physicsImpostor.tmpCollisionObjects=null}},i.prototype.registerOnCollisionEnter=function(e){return this._onCollisionEnterObservable.add(e)},i.prototype.unregisterOnCollisionEnter=function(e){return this._onCollisionEnterObservable.remove(e)},i.prototype.registerOnCollisionStay=function(e){return this._onCollisionStayObservable.add(e)},i.prototype.unregisterOnCollisionStay=function(e){return this._onCollisionStayObservable.remove(e)},i.prototype.registerOnCollisionExit=function(e){return this._onCollisionExitObservable.add(e)},i.prototype.unregisterOnCollisionExit=function(e){return this._onCollisionExitObservable.remove(e)},i.prototype.setGravity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setGravity&&null!=e&&(null==this._tmpGravityVector&&(this._tmpGravityVector=new Ammo.btVector3(0,0,0)),this._tmpGravityVector.setValue(e.x,e.y,e.z),this._abstractMesh.physicsImpostor.physicsBody.setGravity(this._tmpGravityVector))},i.prototype.getGravity=function(){var t=new e.Vector3(0,0,0);return this.getGravityToRef(t),t},i.prototype.getGravityToRef=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getGravity){var t=this._abstractMesh.physicsImpostor.physicsBody.getGravity();e.set(t.x(),t.y(),t.z())}},i.prototype.getMass=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.mass),e},i.prototype.setMass=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.mass!==e&&(this._abstractMesh.physicsImpostor.mass=e)},i.prototype.getFriction=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.friction),e},i.prototype.setFriction=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.friction!==e&&(this._abstractMesh.physicsImpostor.friction=e)},i.prototype.getRestitution=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.restitution),e},i.prototype.setRestitution=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.restitution!==e&&(this._abstractMesh.physicsImpostor.restitution=e)},i.prototype.getLinearVelocity=function(){var e=null;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.getLinearVelocity()),e},i.prototype.setLinearVelocity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=e&&this._abstractMesh.physicsImpostor.setLinearVelocity(e)},i.prototype.getAngularVelocity=function(){var e=null;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.getAngularVelocity()),e},i.prototype.setAngularVelocity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=e&&this._abstractMesh.physicsImpostor.setAngularVelocity(e)},i.prototype.getWorldTransform=function(){var e=null;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.getWorldTransform&&(e=t.getWorldTransform())}return e},i.prototype.getTransformPositionToRef=function(e){var t=this.getWorldTransform();if(null!=t&&null!=e){var r=t.getOrigin();e.set(r.x(),r.y(),r.z())}},i.prototype.getTransformRotationToRef=function(e){var t=this.getWorldTransform();if(null!=t&&null!=e){var r=t.getRotation();e.set(r.x(),r.y(),r.z(),r.w())}},i.prototype.clearForces=function(){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.clearForces&&this._abstractMesh.physicsImpostor.physicsBody.clearForces()},i.prototype.applyTorque=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyTorque&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyTorque(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyLocalTorque=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyLocalTorque&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyLocalTorque(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyImpulse=function(t,r){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),null==e.RigidbodyPhysics.TempAmmoVectorAux&&(e.RigidbodyPhysics.TempAmmoVectorAux=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),e.RigidbodyPhysics.TempAmmoVectorAux.setValue(r.x,r.y,r.z),this._abstractMesh.physicsImpostor.physicsBody.applyImpulse(e.RigidbodyPhysics.TempAmmoVector,e.RigidbodyPhysics.TempAmmoVectorAux))},i.prototype.applyCentralImpulse=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralImpulse(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyTorqueImpulse=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyTorqueImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyTorqueImpulse(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyForce=function(t,r){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),null==e.RigidbodyPhysics.TempAmmoVectorAux&&(e.RigidbodyPhysics.TempAmmoVectorAux=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),e.RigidbodyPhysics.TempAmmoVectorAux.setValue(r.x,r.y,r.z),this._abstractMesh.physicsImpostor.physicsBody.applyForce(e.RigidbodyPhysics.TempAmmoVector,e.RigidbodyPhysics.TempAmmoVectorAux))},i.prototype.applyCentralForce=function(t){
null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralForce(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyCentralLocalForce=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralLocalForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralLocalForce(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.getLinearFactor=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getLinearFactor&&(e=this._abstractMesh.physicsImpostor.physicsBody.getLinearFactor()),e},i.prototype.setLinearFactor=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setLinearFactor&&this._abstractMesh.physicsImpostor.physicsBody.setLinearFactor(e)},i.prototype.getAngularFactor=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getAngularFactor&&(e=this._abstractMesh.physicsImpostor.physicsBody.getAngularFactor()),e},i.prototype.setAngularFactor=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setAngularFactor&&this._abstractMesh.physicsImpostor.physicsBody.setAngularFactor(e)},i.prototype.getAngularDamping=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getAngularDamping&&(e=this._abstractMesh.physicsImpostor.physicsBody.getAngularDamping()),e},i.prototype.getLinearDamping=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getLinearDamping&&(e=this._abstractMesh.physicsImpostor.physicsBody.getLinearDamping()),e},i.prototype.setDamping=function(e,t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setDamping&&this._abstractMesh.physicsImpostor.physicsBody.setDamping(e,t)},i.prototype.setSleepingThresholds=function(e,t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setSleepingThresholds&&this._abstractMesh.physicsImpostor.physicsBody.setSleepingThresholds(e,t)},i.prototype.setMaxNotifications=function(e){this._maxCollisions=e,this._tmpCollisionContacts=[];for(var r=0;r<this._maxCollisions;r++)this._tmpCollisionContacts.push(new t)},i.prototype.setActivationState=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.setActivationState&&t.setActivationState(e)}},i.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&(e=this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().get_m_collisionFilterGroup()),e},i.prototype.setCollisionFilterGroup=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().set_m_collisionFilterGroup(e)},i.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&(e=this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().get_m_collisionFilterMask()),e},i.prototype.setCollisionFilterMask=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().set_m_collisionFilterMask(e)},i.prototype.getCollisionShapeType=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.getShapeType&&(e=r.getShapeType())}}return e},i.prototype.getCollisionShapeMargin=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.getMargin&&(e=r.getMargin())}}return e},i.prototype.setCollisionShapeMargin=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.setMargin&&r.setMargin(e)}}},i.prototype.getContactProcessingThreshold=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.getContactProcessingThreshold&&(e=t.getContactProcessingThreshold())}return e},i.prototype.setContactProcessingThreshold=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.setContactProcessingThreshold&&t.setContactProcessingThreshold(e)}},i.prototype.hasRaycastVehicle=function(){return this._isPhysicsReady===!0&&null!=this._abstractMesh.metadata&&null!=this._abstractMesh.metadata.wheels},i.prototype.getRaycastVehicle=function(){return null==this._raycastVehicle&&(this.hasRaycastVehicle()?this._raycastVehicle=new e.RaycastVehicle(this._abstractMesh,this.m_physicsWorld,this.scene.useRightHandedSystem,this._centerOfMass):e.Tools.Warn("No wheel collider metadata info for: "+this.transform.name)),this._raycastVehicle},i.SetupPhysicsComponent=function(t,r){var i=null!=r.metadata&&null!=r.metadata.unity?r.metadata.unity:null;if(null!=i&&null!=i.physics){var s=null!=i.physics.mass?i.physics.mass:0,o=null!=i.physics.center?e.Utilities.ParseVector3(i.physics.center,e.Vector3.Zero()):e.Vector3.Zero();if("rigidbody"===i.physics.type)if(null!=i.collision&&null!=i.collision.type&&"MeshCollider"===i.collision.type){var n=null!=i.collision.convexmesh&&i.collision.convexmesh,a=null!=i.collision.dynamicfriction?i.collision.dynamicfriction:.6,l=(null!=i.collision.staticfriction?i.collision.staticfriction:.6,null!=i.collision.restitution?i.collision.restitution:0),h=null!=i.collision.trigger&&i.collision.trigger,c=n===!0?e.PhysicsImpostor.ConvexHullImpostor:e.PhysicsImpostor.MeshImpostor;e.SceneManager.CreatePhysicsImpostor(t,r,c,{mass:s,friction:a,restitution:l}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,r,!1,h,i.physics)}else{var u=0,m=0,p=0,f=!1,y=0,_=null,d=r.getChildren(null,!0);null!=d&&d.length>0&&d.forEach(function(e){e.position.subtractInPlace(o)});var v=r.getChildren(null,!1);null!=v&&v.length>0&&v.forEach(function(s){if(null!=s.metadata&&null!=s.metadata.unity&&null!=s.metadata.unity.collision){var o=s.metadata.unity.collision,n=null!=o.wheelinformation?o.wheelinformation:null;if(null!=n)null==_&&(_=[]),_.push(n);else{s.parent!==r&&s.setParent(r);var a=null!=o.dynamicfriction?o.dynamicfriction:.6,l=null!=o.staticfriction?o.staticfriction:.6,h=null!=o.restitution?o.restitution:0,c=null!=o.trigger&&o.trigger,d=null!=o.type?o.type:"BoxCollider",v=e.PhysicsImpostor.BoxImpostor;"MeshCollider"===d?v=e.PhysicsImpostor.ConvexHullImpostor:"CapsuleCollider"===d?v=e.PhysicsImpostor.CapsuleImpostor:"SphereCollider"===d?v=e.PhysicsImpostor.SphereImpostor:"BoxCollider"===d&&(v=e.PhysicsImpostor.BoxImpostor),a>u&&(u=a),l>m&&(m=l),h>p&&(p=h),1==c&&(f=!0),e.SceneManager.CreatePhysicsImpostor(t,s,v,{mass:0,friction:0,restitution:0}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,s,!0,!1,i.physics),y++}}}),y>0&&(e.SceneManager.CreatePhysicsImpostor(t,r,e.PhysicsImpostor.NoImpostor,{mass:s,friction:u,restitution:p}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,r,!1,f,i.physics)),null!=_&&_.length>0&&(r.metadata.wheels=_),v=null}}},i.ConfigRigidbodyPhysics=function(t,r,i,s,o){null!=r&&(null!=r.physicsImpostor?r.physicsImpostor.executeNativeFunction(function(i,n){n.activate&&n.activate();var a=Ammo.castObject(n,Ammo.btCollisionObject);a.entity=r;var l=e.SceneManager.GetPhysicsWorld(t);if(null!=l&&l.generateInternalEdgeInfo){var h=a.getCollisionShape();if(null!=h&&h.getShapeType){var c=h.getShapeType();if(21===c){var u=Ammo.castObject(h,Ammo.btBvhTriangleMeshShape);a.triangleMapInfo=new Ammo.btTriangleInfoMap,l.generateInternalEdgeInfo(u,a.triangleMapInfo)}}}var m=null==o||null==o.gravity||o.gravity;if(m===!1&&(n.setGravity?n.setGravity(new Ammo.btVector3(0,0,0)):e.Tools.Warn("Physics engine set gravity override not supported for: "+r.name)),n.setDamping){var p=null!=o&&null!=o.ldrag?o.ldrag:0,f=null!=o&&null!=o.adrag?o.adrag:.05;n.setDamping(p,f)}else e.Tools.Warn("Physics engine set drag damping not supported for: "+r.name);n.setCollisionFlags&&n.getCollisionFlags?s===!0?n.setCollisionFlags(n.getCollisionFlags()|e.CollisionFlags.CF_NO_CONTACT_RESPONSE|e.CollisionFlags.CF_CUSTOM_MATERIAL_CALLBACK):n.setCollisionFlags(n.getCollisionFlags()|e.CollisionFlags.CF_CUSTOM_MATERIAL_CALLBACK):e.Tools.Warn("Physics engine set collision flags not supported for: "+r.name);var y=null!=o&&null!=o.freeze?o.freeze:null;if(null!=y){if(n.setLinearFactor){var _=null!=y.positionx&&y.positionx===!0?0:1,d=null!=y.positiony&&y.positiony===!0?0:1,v=null!=y.positionz&&y.positionz===!0?0:1;n.setLinearFactor(new Ammo.btVector3(_,d,v))}else e.Tools.Warn("Physics engine set linear factor not supported for: "+r.name);if(n.setAngularFactor){var g=null!=y.rotationx&&y.rotationx===!0?0:1,C=null!=y.rotationy&&y.rotationy===!0?0:1,b=null!=y.rotationz&&y.rotationz===!0?0:1;n.setAngularFactor(new Ammo.btVector3(g,C,b))}else e.Tools.Warn("Physics engine set angular factor not supported for: "+r.name)}}):e.Tools.Warn("No valid physics impostor to setup for "+r.name))},i.TempAmmoVector=null,i.TempAmmoVectorAux=null,i}(e.ScriptComponent);e.RigidbodyPhysics=r}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,r,i){var s,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(n=(o<3?s(n):o>3?s(t,r,n):s(t,r))||n);return o>3&&n&&Object.defineProperty(t,r,n),n},BABYLON;!function(e){var t=function(){function e(){this._defines={},this._defines={}}return e.prototype.getDefines=function(){return this._defines},e.prototype.defineBoolean=function(e){this._defines[e]=!0},e.prototype.defineNumeric=function(e,t){this._defines[e]=t},e.ShaderIndexer=0,e}();e.UniversalShaderDefines=t;var r=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.rebuild(),t}return __extends(t,e),t}(e.MaterialDefines);e.UniversalMaterialDefines=r;var i=function(){function e(){}return e}();e.UniversalAlbedoChunks=i;var s=function(){function e(){}return e}();e.UniversalDiffuseChunks=s;var o=function(t){function r(r,i){var s=t.call(this,r,i)||this;return s.diffuseColor=new e.Color3(1,1,1),s._disableLighting=!1,s._maxSimultaneousLights=4,s.universalMaterial=!0,s.locals=null,s._defines=null,s._uniforms=[],s._samplers=[],s._textures={},s._vectors4={},s._floats={},s.locals=new e.UniversalShaderDefines,s._defines=null,s.customShaderNameResolve=s._buildCustomShader,s}return __extends(r,t),r.prototype.getClassName=function(){return"UniversalPushMaterial"},r.prototype.getShaderName=function(){return"simple"},r.prototype.getShaderDefines=function(){return this._defines},r.prototype.needAlphaBlending=function(){return this.alpha<1},r.prototype.needAlphaTesting=function(){return!1},r.prototype.getAlphaTestTexture=function(){return null},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype.getVector4=function(e){return this._vectors4[e]},r.prototype.getFloat=function(e){return this._floats[e]},r.prototype.setTexture=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkSampler(e),this._textures[e]=t,this},r.prototype.setVector4=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._vectors4[e]=t,this},r.prototype.setFloat=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._floats[e]=t,this},r.prototype.checkUniform=function(e){this._uniforms.indexOf(e)===-1&&(this._uniforms.push(e),this.locals.defineBoolean(e.toUpperCase()))},r.prototype.checkSampler=function(e){this._samplers.indexOf(e)===-1&&(this._samplers.push(e),this.locals.defineBoolean(e.toUpperCase()),this.checkUniform(e+"Infos"),this.checkUniform(e+"Matrix"))},r.prototype.isReadyForSubMesh=function(t,r,i){if(this.isFrozen&&this._wasPreviouslyReady&&r.effect)return!0;r._materialDefines||(r._materialDefines=new e.UniversalMaterialDefines);var s=r._materialDefines,o=this.getScene();if(!this.checkReadyOnEveryCall&&r.effect&&this._renderId===o.getRenderId())return!0;var n=o.getEngine();if(s._areTexturesDirty&&(s._needUVs=!1,o.texturesEnabled&&this._diffuseTexture&&e.MaterialFlags.DiffuseTextureEnabled)){if(!this._diffuseTexture.isReady())return!1;s._needUVs=!0,s.DIFFUSE=!0}if(e.MaterialHelper.PrepareDefinesForMisc(t,o,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(t),s),s._needNormals=e.MaterialHelper.PrepareDefinesForLights(o,t,s,!1,this._maxSimultaneousLights,this._disableLighting),e.MaterialHelper.PrepareDefinesForFrameBoundValues(o,n,s,!!i),e.MaterialHelper.PrepareDefinesForAttributes(t,s,!0,!0),s.isDirty){s.markAsProcessed(),o.resetCachedMaterial();var a=new e.EffectFallbacks;s.FOG&&a.addFallback(1,"FOG"),e.MaterialHelper.HandleFallbacksForShadows(s,a,this.maxSimultaneousLights),s.NUM_BONE_INFLUENCERS>0&&a.addCPUSkinningFallback(0,t);var l=[e.VertexBuffer.PositionKind];s.NORMAL&&l.push(e.VertexBuffer.NormalKind),s.UV1&&l.push(e.VertexBuffer.UVKind),s.UV2&&l.push(e.VertexBuffer.UV2Kind),s.VERTEXCOLOR&&l.push(e.VertexBuffer.ColorKind),e.MaterialHelper.PrepareAttributesForBones(l,t,s,a),e.MaterialHelper.PrepareAttributesForInstances(l,s);var h=["world","view","viewProjection","vEyePosition","vLightsType","vDiffuseColor","vFogInfos","vFogColor","pointSize","vDiffuseInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","diffuseMatrix"],c=["diffuseSampler"],u=new Array;e.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:h,uniformBuffersNames:u,samplers:c,defines:s,maxSimultaneousLights:this.maxSimultaneousLights});var m=this.getShaderName();this.customShaderNameResolve&&(m=this.customShaderNameResolve(m,h,u,c,s));var p=s.toString();r.setEffect(o.getEngine().createEffect(m,{attributes:l,uniformsNames:h,uniformBuffersNames:u,samplers:c,defines:p,fallbacks:a,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights-1}},n),s)}return!(!r.effect||!r.effect.isReady())&&(this._renderId=o.getRenderId(),this._wasPreviouslyReady=!0,!0)},r.prototype.bindForSubMesh=function(t,r,i){var s=this.getScene(),o=i._materialDefines;if(o){var n=i.effect;n&&(this._activeEffect=n,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix("viewProjection",s.getTransformMatrix()),e.MaterialHelper.BindBonesParameters(r,this._activeEffect),this._mustRebind(s,n)&&(this._diffuseTexture&&e.MaterialFlags.DiffuseTextureEnabled&&(this._activeEffect.setTexture("diffuseSampler",this._diffuseTexture),this._activeEffect.setFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),this._activeEffect.setMatrix("diffuseMatrix",this._diffuseTexture.getTextureMatrix())),e.MaterialHelper.BindClipPlane(this._activeEffect,s),this.pointsCloud&&this._activeEffect.setFloat("pointSize",this.pointSize),e.MaterialHelper.BindEyePosition(n,s)),this._activeEffect.setColor4("vDiffuseColor",this.diffuseColor,this.alpha*r.visibility),s.lightsEnabled&&!this.disableLighting&&e.MaterialHelper.BindLights(s,r,this._activeEffect,o,this.maxSimultaneousLights),s.fogEnabled&&r.applyFog&&s.fogMode!==e.Scene.FOGMODE_NONE&&this._activeEffect.setMatrix("view",s.getViewMatrix()),e.MaterialHelper.BindFogParameters(s,r,this._activeEffect),this._afterBind(r,this._activeEffect),this._attachAfterBind(r,this._activeEffect))}},r.prototype.getAnimatables=function(){var e=[];this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture);for(var t in this._textures){var r=this._textures[t];r&&r.animations&&r.animations.length>0&&e.push(r)}return e},r.prototype.getActiveTextures=function(){var e=t.prototype.getActiveTextures.call(this);this._diffuseTexture&&e.push(this._diffuseTexture);for(var r in this._textures){var i=this._textures[r];i&&e.push(i)}return e},r.prototype.hasTexture=function(e){if(t.prototype.hasTexture.call(this,e))return!0;if(this.diffuseTexture===e)return!0;var r=!1;for(var i in this._textures){var s=this._textures[i];if(s===s){r=!0;break}}return r},r.prototype.dispose=function(e){this._diffuseTexture&&this._diffuseTexture.dispose();for(var r in this._textures){var i=this._textures[r];i&&i.dispose(),this._textures[r]=null}this._textures={},t.prototype.dispose.call(this,e)},r.prototype.clone=function(t){var r,i=this,s=e.SerializationHelper.Clone(function(){return new e.UniversalPushMaterial(t,i.getScene())},this);s._textures={};for(r in this._textures){var o=this._textures[r];o&&s.setTexture(r,o.clone(),!0)}s._vectors4={};for(r in this._vectors4)s.setVector4(r,this._vectors4[r].clone(),!0);s._floats={};for(r in this._floats)s.setFloat(r,this._floats[r],!0);return s},r.prototype.serialize=function(){var t,r=e.SerializationHelper.Serialize(this);r.customType="BABYLON.UniversalPushMaterial",r.textures={};for(t in this._textures){var i=this._textures[t];i&&(r.textures[t]=i.serialize())}r.vectors4={};for(t in this._vectors4)r.vectors4[t]=this._vectors4[t].asArray();r.floats={};for(t in this._floats)r.floats[t]=this._floats[t];return r},r.Parse=function(t,r,i){var s,o=e.SerializationHelper.Parse(function(){return new e.UniversalPushMaterial(t.name,r)},t,r,i);for(s in t.textures){var n=t.textures[s];n&&o.setTexture(s,e.Texture.Parse(n,r,i),!0)}for(s in t.vectors4)o.setVector4(s,e.Vector4.FromArray(t.vectors4[s]),!0);for(s in t.floats)o.setFloat(s,t.floats[s],!0);return o},r.prototype._buildCustomShader=function(e,t,r,i,s){this._defines=s;var o=this.getShaderName();null!=o&&""!==o||(o=e),null!=o&&""!==o||(o="simple");var n=this.locals.getDefines();if(null!=n&&null!=this._defines){var a=Object.keys(n);if(null!=a&&a.length>0){for(var l=this._defines,h=0,c=a;h<c.length;h++){var u=c[h];l[u]=n[u]}this._defines.rebuild()}}var m=0;if(null!=this._uniforms&&this._uniforms.length>0)for(m=0;m<this._uniforms.length;m++){var p=this._uniforms[m];t.indexOf(p)===-1&&t.push(p)}if(m=0,null!=this._samplers&&this._samplers.length>0)for(m=0;m<this._samplers.length;m++){var f=this._samplers[m];i.indexOf(f)===-1&&i.push(f)}return o},r.prototype._attachAfterBind=function(e,t){var r,i=this.getScene();if(i.texturesEnabled)for(r in this._textures){var s=this._textures[r];null!=s&&(t.setTexture(r,s),t.setFloat2(r+"Infos",s.coordinatesIndex,s.level),t.setMatrix(r+"Matrix",s.getTextureMatrix()))}for(r in this._vectors4)t.setVector4(r,this._vectors4[r]);for(r in this._floats)t.setFloat(r,this._floats[r])},__decorate([e.serializeAsTexture("diffuseTexture")],r.prototype,"_diffuseTexture",void 0),__decorate([e.expandToProperty("_markAllSubMeshesAsTexturesDirty")],r.prototype,"diffuseTexture",void 0),__decorate([e.serializeAsColor3("diffuse")],r.prototype,"diffuseColor",void 0),__decorate([e.serialize("disableLighting")],r.prototype,"_disableLighting",void 0),__decorate([e.expandToProperty("_markAllSubMeshesAsLightsDirty")],r.prototype,"disableLighting",void 0),__decorate([e.serialize("maxSimultaneousLights")],r.prototype,"_maxSimultaneousLights",void 0),__decorate([e.expandToProperty("_markAllSubMeshesAsLightsDirty")],r.prototype,"maxSimultaneousLights",void 0),r}(e.PushMaterial);e.UniversalPushMaterial=o,e._TypeStore.RegisteredTypes.UniversalPushMaterial=o;var n=function(t){function r(r,i){var s=t.call(this,r,i)||this;return s.universalMaterial=!0,s.locals=null,s.terrainInfo=null,s._defines=null,s._uniforms=[],s._samplers=[],s._textures={},s._vectors4={},s._floats={},s.locals=new e.UniversalShaderDefines,s._defines=null,s._setupAttachAfterBind(),s.enableShaderChunks=!1,s.materialShaderChunks=new e.UniversalAlbedoChunks,s.customShaderNameResolve=s._buildCustomShader,s.customShaderChunkResolve(),s}return __extends(r,t),r.prototype.updateShaderChunks=function(){},r.prototype.getClassName=function(){return"UniversalAlbedoMaterial"},r.prototype.getShaderName=function(){return"pbr"},r.prototype.getShaderChunk=function(){return null},r.prototype.getShaderDefines=function(){return this._defines},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype.getVector4=function(e){return this._vectors4[e]},r.prototype.getFloat=function(e){return this._floats[e]},r.prototype.setTexture=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkSampler(e),this._textures[e]=t,this},r.prototype.setVector4=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._vectors4[e]=t,this},r.prototype.setFloat=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._floats[e]=t,this},r.prototype.checkUniform=function(e){this._uniforms.indexOf(e)===-1&&(this._uniforms.push(e),this.locals.defineBoolean(e.toUpperCase()))},r.prototype.checkSampler=function(e){this._samplers.indexOf(e)===-1&&(this._samplers.push(e),this.locals.defineBoolean(e.toUpperCase()),this.checkUniform(e+"Infos"),this.checkUniform(e+"Matrix"))},r.prototype.getAnimatables=function(){var e=t.prototype.getAnimatables.call(this);for(var r in this._textures){var i=this._textures[r];i&&i.animations&&i.animations.length>0&&e.push(i)}return e},r.prototype.getActiveTextures=function(){var e=t.prototype.getActiveTextures.call(this);for(var r in this._textures){var i=this._textures[r];i&&e.push(i)}return e},r.prototype.hasTexture=function(e){if(t.prototype.hasTexture.call(this,e))return!0;var r=!1;for(var i in this._textures){var s=this._textures[i];if(s===s){r=!0;break}}return r},r.prototype.dispose=function(e,r){if(r)for(var i in this._textures){var s=this._textures[i];s&&s.dispose(),this._textures[i]=null}this._textures={},t.prototype.dispose.call(this,e,r)},r.prototype.clone=function(t){var r,i=this,s=e.SerializationHelper.Clone(function(){return new e.UniversalAlbedoMaterial(t,i.getScene())},this);s._textures={};for(r in this._textures){var o=this._textures[r];o&&s.setTexture(r,o.clone(),!0)}s._vectors4={};for(r in this._vectors4)s.setVector4(r,this._vectors4[r].clone(),!0);s._floats={};for(r in this._floats)s.setFloat(r,this._floats[r],!0);return s},r.prototype.serialize=function(){var t,r=e.SerializationHelper.Serialize(this);r.customType="BABYLON.UniversalAlbedoMaterial",r.textures={};for(t in this._textures){var i=this._textures[t];i&&(r.textures[t]=i.serialize())}r.vectors4={};for(t in this._vectors4)r.vectors4[t]=this._vectors4[t].asArray();r.floats={};for(t in this._floats)r.floats[t]=this._floats[t];return r},r.Parse=function(t,r,i){var s,o=e.SerializationHelper.Parse(function(){return new e.UniversalAlbedoMaterial(t.name,r)},t,r,i);for(s in t.textures){var n=t.textures[s];n&&o.setTexture(s,e.Texture.Parse(n,r,i),!0)}for(s in t.vectors4)o.setVector4(s,e.Vector4.FromArray(t.vectors4[s]),!0);for(s in t.floats)o.setFloat(s,t.floats[s],!0);return o},r.prototype.customShaderChunkResolve=function(){var t=this.getShaderChunk();if(null!=t&&""!==t){var r=t+"ShaderChunks";if(null!=e.Effect.ShadersStore[r]){var i=e.Effect.ShadersStore[r],s=e.Utilities.HasOwnProperty(i,"VertexBegin")?i.VertexBegin:null;null!=s&&""!==s&&(this.materialShaderChunks.Vertex_Begin=s);var o=e.Utilities.HasOwnProperty(i,"VertexDefinitions")?i.VertexDefinitions:null;null!=o&&""!==o&&(this.materialShaderChunks.Vertex_Definitions=o);var n=e.Utilities.HasOwnProperty(i,"VertexMainBegin")?i.VertexMainBegin:null;null!=n&&""!==n&&(this.materialShaderChunks.Vertex_MainBegin=n);var a=e.Utilities.HasOwnProperty(i,"VertexUpdatePosition")?i.VertexUpdatePosition:null;null!=a&&""!==a&&(this.materialShaderChunks.Vertex_Before_PositionUpdated=a.replace("result","positionUpdated"));var l=e.Utilities.HasOwnProperty(i,"VertexUpdateNormal")?i.VertexUpdateNormal:null;null!=l&&""!==l&&(this.materialShaderChunks.Vertex_Before_NormalUpdated=l.replace("result","normalUpdated"));var h=e.Utilities.HasOwnProperty(i,"VertexMainEnd")?i.VertexMainEnd:null;null!=h&&""!==h&&(this.materialShaderChunks.Vertex_MainEnd=h);var c=e.Utilities.HasOwnProperty(i,"FragmentBegin")?i.FragmentBegin:null;null!=c&&""!==c&&(this.materialShaderChunks.Fragment_Begin=c);var u=e.Utilities.HasOwnProperty(i,"FragmentDefinitions")?i.FragmentDefinitions:null;null!=u&&""!==u&&(this.materialShaderChunks.Fragment_Definitions=u);var m=e.Utilities.HasOwnProperty(i,"FragmentMainBegin")?i.FragmentMainBegin:null;null!=m&&""!==m&&(this.materialShaderChunks.Fragment_MainBegin=m);var p=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlbedo")?i.FragmentUpdateAlbedo:null;null!=p&&""!==p&&(this.materialShaderChunks.Fragment_Custom_Albedo=p.replace("result","surfaceAlbedo"));var f=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlpha")?i.FragmentUpdateAlpha:null;null!=f&&""!==f&&(this.materialShaderChunks.Fragment_Custom_Alpha=f.replace("result","alpha"));var y=e.Utilities.HasOwnProperty(i,"FragmentMetallicRoughness")?i.FragmentMetallicRoughness:null;null!=y&&""!==y&&(this.materialShaderChunks.Fragment_MetallicRoughness=y);var _=e.Utilities.HasOwnProperty(i,"FragmentMicroSurface")?i.FragmentMicroSurface:null;null!=_&&""!==_&&(this.materialShaderChunks.Fragment_MicroSurface=_);var d=e.Utilities.HasOwnProperty(i,"FragmentBeforeLights")?i.FragmentBeforeLights:null;null!=d&&""!==d&&(this.materialShaderChunks.Fragment_Before_Lights=d);var v=e.Utilities.HasOwnProperty(i,"FragmentBeforeFog")?i.FragmentBeforeFog:null;null!=v&&""!==v&&(this.materialShaderChunks.Fragment_Before_Fog=v);var g=e.Utilities.HasOwnProperty(i,"FragmentBeforeFragColor")?i.FragmentBeforeFragColor:null;null!=g&&""!==g&&(this.materialShaderChunks.Fragment_Before_FragColor=g.replace("result","color"))}else e.Tools.Warn("Failed To Locate Shader Chunk Base: "+r)}},r.prototype._buildCustomShader=function(e,t,r,i,s){this._defines=s;var o=this.getShaderName();null!=o&&""!==o||(o=e),null!=o&&""!==o||(o="pbr");var n=this.locals.getDefines();if(null!=n&&null!=this._defines){var a=Object.keys(n);if(null!=a&&a.length>0){for(var l=this._defines,h=0,c=a;h<c.length;h++){var u=c[h];l[u]=n[u]}this._defines.rebuild()}}var m=0;if(null!=this._uniforms&&this._uniforms.length>0)for(m=0;m<this._uniforms.length;m++){var p=this._uniforms[m];t.indexOf(p)===-1&&t.push(p)}if(m=0,null!=this._samplers&&this._samplers.length>0)for(m=0;m<this._samplers.length;m++){var f=this._samplers[m];i.indexOf(f)===-1&&i.push(f)}return this.enableShaderChunks===!0?this._createShaderChunks(o):o},r.prototype._createShaderChunks=function(t){if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;var r=this.getShaderChunk();null!=r&&""!==r||(r=t),e.UniversalShaderDefines.ShaderIndexer++;var i=(r+"Custom"+e.UniversalShaderDefines.ShaderIndexer).trim(),s=e.Effect.ShadersStore[t+"VertexShader"],o=e.Effect.ShadersStore[t+"PixelShader"];this.updateShaderChunks();var n=i+"VertexShader";e.Effect.ShadersStore[n]=s.replace("#define CUSTOM_VERTEX_BEGIN",this.materialShaderChunks.Vertex_Begin?this.materialShaderChunks.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions:"").replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.materialShaderChunks.Vertex_MainBegin?this.materialShaderChunks.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.materialShaderChunks.Vertex_Before_PositionUpdated?this.materialShaderChunks.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.materialShaderChunks.Vertex_Before_NormalUpdated?this.materialShaderChunks.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd:"");var a=i+"PixelShader";return e.Effect.ShadersStore[a]=o.replace("#define CUSTOM_FRAGMENT_BEGIN",this.materialShaderChunks.Fragment_Begin?this.materialShaderChunks.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.materialShaderChunks.Fragment_MainBegin?this.materialShaderChunks.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALBEDO",this.materialShaderChunks.Fragment_Custom_Albedo?this.materialShaderChunks.Fragment_Custom_Albedo:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.materialShaderChunks.Fragment_Custom_Alpha?this.materialShaderChunks.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_UPDATE_METALLICROUGHNESS",this.materialShaderChunks.Fragment_MetallicRoughness?this.materialShaderChunks.Fragment_MetallicRoughness:"").replace("#define CUSTOM_FRAGMENT_UPDATE_MICROSURFACE",this.materialShaderChunks.Fragment_MicroSurface?this.materialShaderChunks.Fragment_MicroSurface:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.materialShaderChunks.Fragment_Before_Lights?this.materialShaderChunks.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.materialShaderChunks.Fragment_Before_Fog?this.materialShaderChunks.Fragment_Before_Fog:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.materialShaderChunks.Fragment_Before_FragColor?this.materialShaderChunks.Fragment_Before_FragColor:""),
this._isCreatedShader=!0,this._createdShaderName=i,i},r.prototype._attachAfterBind=function(e,t){var r,i=this.getScene();if(i.texturesEnabled)for(r in this._textures){var s=this._textures[r];null!=s&&(t.setTexture(r,s),t.setFloat2(r+"Infos",s.coordinatesIndex,s.level),t.setMatrix(r+"Matrix",s.getTextureMatrix()))}for(r in this._vectors4)t.setVector4(r,this._vectors4[r]);for(r in this._floats)t.setFloat(r,this._floats[r])},r.prototype._setupAttachAfterBind=function(){var e=this,t=this._afterBind;this._afterBind=function(r,i){if(e._attachAfterBind(r,i),t)try{t(r,i)}catch(s){}}},r}(e.PBRMaterial);e.UniversalAlbedoMaterial=n,e._TypeStore.RegisteredTypes.UniversalAlbedoMaterial=n;var a=function(t){function r(r,i){var s=t.call(this,r,i)||this;return s.universalMaterial=!0,s.locals=null,s.terrainInfo=null,s._defines=null,s._uniforms=[],s._samplers=[],s._textures={},s._vectors4={},s._floats={},s.locals=new e.UniversalShaderDefines,s._defines=null,s._setupAttachAfterBind(),s.enableShaderChunks=!1,s.materialShaderChunks=new e.UniversalDiffuseChunks,s.customShaderNameResolve=s._buildCustomShader,s.customShaderChunkResolve(),s}return __extends(r,t),r.prototype.updateShaderChunks=function(){},r.prototype.getClassName=function(){return"UniversalDiffuseMaterial"},r.prototype.getShaderName=function(){return"default"},r.prototype.getShaderChunk=function(){return null},r.prototype.getShaderDefines=function(){return this._defines},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype.getVector4=function(e){return this._vectors4[e]},r.prototype.getFloat=function(e){return this._floats[e]},r.prototype.setTexture=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkSampler(e),this._textures[e]=t,this},r.prototype.setVector4=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._vectors4[e]=t,this},r.prototype.setFloat=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._floats[e]=t,this},r.prototype.checkUniform=function(e){this._uniforms.indexOf(e)===-1&&(this._uniforms.push(e),this.locals.defineBoolean(e.toUpperCase()))},r.prototype.checkSampler=function(e){this._samplers.indexOf(e)===-1&&(this._samplers.push(e),this.locals.defineBoolean(e.toUpperCase()),this.checkUniform(e+"Infos"),this.checkUniform(e+"Matrix"))},r.prototype.getAnimatables=function(){var e=t.prototype.getAnimatables.call(this);for(var r in this._textures){var i=this._textures[r];i&&i.animations&&i.animations.length>0&&e.push(i)}return e},r.prototype.getActiveTextures=function(){var e=t.prototype.getActiveTextures.call(this);for(var r in this._textures){var i=this._textures[r];i&&e.push(i)}return e},r.prototype.hasTexture=function(e){if(t.prototype.hasTexture.call(this,e))return!0;var r=!1;for(var i in this._textures){var s=this._textures[i];if(s===s){r=!0;break}}return r},r.prototype.dispose=function(e,r){if(r)for(var i in this._textures){var s=this._textures[i];s&&s.dispose(),this._textures[i]=null}this._textures={},t.prototype.dispose.call(this,e,r)},r.prototype.clone=function(t){var r,i=this,s=e.SerializationHelper.Clone(function(){return new e.UniversalDiffuseMaterial(t,i.getScene())},this);s._textures={};for(r in this._textures){var o=this._textures[r];o&&s.setTexture(r,o.clone(),!0)}s._vectors4={};for(r in this._vectors4)s.setVector4(r,this._vectors4[r].clone(),!0);s._floats={};for(r in this._floats)s.setFloat(r,this._floats[r],!0);return s},r.prototype.serialize=function(){var t,r=e.SerializationHelper.Serialize(this);r.customType="BABYLON.UniversalDiffuseMaterial",r.textures={};for(t in this._textures){var i=this._textures[t];i&&(r.textures[t]=i.serialize())}r.vectors4={};for(t in this._vectors4)r.vectors4[t]=this._vectors4[t].asArray();r.floats={};for(t in this._floats)r.floats[t]=this._floats[t];return r},r.Parse=function(t,r,i){var s,o=e.SerializationHelper.Parse(function(){return new e.UniversalDiffuseMaterial(t.name,r)},t,r,i);for(s in t.textures){var n=t.textures[s];n&&o.setTexture(s,e.Texture.Parse(n,r,i),!0)}for(s in t.vectors4)o.setVector4(s,e.Vector4.FromArray(t.vectors4[s]),!0);for(s in t.floats)o.setFloat(s,t.floats[s],!0);return o},r.prototype.customShaderChunkResolve=function(){var t=this.getShaderChunk();if(null!=t&&""!==t){var r=t+"ShaderChunks";if(null!=e.Effect.ShadersStore[r]){var i=e.Effect.ShadersStore[r],s=e.Utilities.HasOwnProperty(i,"VertexBegin")?i.VertexBegin:null;null!=s&&""!==s&&(this.materialShaderChunks.Vertex_Begin=s);var o=e.Utilities.HasOwnProperty(i,"VertexDefinitions")?i.VertexDefinitions:null;null!=o&&""!==o&&(this.materialShaderChunks.Vertex_Definitions=o);var n=e.Utilities.HasOwnProperty(i,"VertexMainBegin")?i.VertexMainBegin:null;null!=n&&""!==n&&(this.materialShaderChunks.Vertex_MainBegin=n);var a=e.Utilities.HasOwnProperty(i,"VertexUpdatePosition")?i.VertexUpdatePosition:null;null!=a&&""!==a&&(this.materialShaderChunks.Vertex_Before_PositionUpdated=a.replace("result","positionUpdated"));var l=e.Utilities.HasOwnProperty(i,"VertexUpdateNormal")?i.VertexUpdateNormal:null;null!=l&&""!==l&&(this.materialShaderChunks.Vertex_Before_NormalUpdated=l.replace("result","normalUpdated"));var h=e.Utilities.HasOwnProperty(i,"VertexMainEnd")?i.VertexMainEnd:null;null!=h&&""!==h&&(this.materialShaderChunks.Vertex_MainEnd=h);var c=e.Utilities.HasOwnProperty(i,"FragmentBegin")?i.FragmentBegin:null;null!=c&&""!==c&&(this.materialShaderChunks.Fragment_Begin=c);var u=e.Utilities.HasOwnProperty(i,"FragmentDefinitions")?i.FragmentDefinitions:null;null!=u&&""!==u&&(this.materialShaderChunks.Fragment_Definitions=u);var m=e.Utilities.HasOwnProperty(i,"FragmentMainBegin")?i.FragmentMainBegin:null;null!=m&&""!==m&&(this.materialShaderChunks.Fragment_MainBegin=m);var p=e.Utilities.HasOwnProperty(i,"FragmentUpdateDiffuse")?i.FragmentUpdateDiffuse:null;null!=p&&""!==p&&(this.materialShaderChunks.Fragment_Custom_Diffuse=p.replace("result","diffuseColor"));var f=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlpha")?i.FragmentUpdateAlpha:null;null!=f&&""!==f&&(this.materialShaderChunks.Fragment_Custom_Alpha=f.replace("result","alpha"));var y=e.Utilities.HasOwnProperty(i,"FragmentBeforeLights")?i.FragmentBeforeLights:null;null!=y&&""!==y&&(this.materialShaderChunks.Fragment_Before_Lights=y);var _=e.Utilities.HasOwnProperty(i,"FragmentBeforeFog")?i.FragmentBeforeFog:null;null!=_&&""!==_&&(this.materialShaderChunks.Fragment_Before_Fog=_);var d=e.Utilities.HasOwnProperty(i,"FragmentBeforeFragColor")?i.FragmentBeforeFragColor:null;null!=d&&""!==d&&(this.materialShaderChunks.Fragment_Before_FragColor=d.replace("result","color"))}else e.Tools.Warn("Failed To Locate Shader Chunk Base: "+r)}},r.prototype._buildCustomShader=function(e,t,r,i,s){this._defines=s;var o=this.getShaderName();null!=o&&""!==o||(o=e),null!=o&&""!==o||(o="default");var n=this.locals.getDefines();if(null!=n&&null!=this._defines){var a=Object.keys(n);if(null!=a&&a.length>0){for(var l=this._defines,h=0,c=a;h<c.length;h++){var u=c[h];l[u]=n[u]}this._defines.rebuild()}}var m=0;if(null!=this._uniforms&&this._uniforms.length>0)for(m=0;m<this._uniforms.length;m++){var p=this._uniforms[m];t.indexOf(p)===-1&&t.push(p)}if(m=0,null!=this._samplers&&this._samplers.length>0)for(m=0;m<this._samplers.length;m++){var f=this._samplers[m];i.indexOf(f)===-1&&i.push(f)}return this.enableShaderChunks===!0?this._createShaderChunks(o):o},r.prototype._createShaderChunks=function(t){if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;var r=this.getShaderChunk();null!=r&&""!==r||(r=t),e.UniversalShaderDefines.ShaderIndexer++;var i=(r+"Custom"+e.UniversalShaderDefines.ShaderIndexer).trim(),s=e.Effect.ShadersStore[t+"VertexShader"],o=e.Effect.ShadersStore[t+"PixelShader"];this.updateShaderChunks();var n=i+"VertexShader";e.Effect.ShadersStore[n]=s.replace("#define CUSTOM_VERTEX_BEGIN",this.materialShaderChunks.Vertex_Begin?this.materialShaderChunks.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions:"").replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.materialShaderChunks.Vertex_MainBegin?this.materialShaderChunks.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.materialShaderChunks.Vertex_Before_PositionUpdated?this.materialShaderChunks.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.materialShaderChunks.Vertex_Before_NormalUpdated?this.materialShaderChunks.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd:"");var a=i+"PixelShader";return e.Effect.ShadersStore[a]=o.replace("#define CUSTOM_FRAGMENT_BEGIN",this.materialShaderChunks.Fragment_Begin?this.materialShaderChunks.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.materialShaderChunks.Fragment_MainBegin?this.materialShaderChunks.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE",this.materialShaderChunks.Fragment_Custom_Diffuse?this.materialShaderChunks.Fragment_Custom_Diffuse:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.materialShaderChunks.Fragment_Custom_Alpha?this.materialShaderChunks.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.materialShaderChunks.Fragment_Before_Lights?this.materialShaderChunks.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.materialShaderChunks.Fragment_Before_Fog?this.materialShaderChunks.Fragment_Before_Fog:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.materialShaderChunks.Fragment_Before_FragColor?this.materialShaderChunks.Fragment_Before_FragColor:""),this._isCreatedShader=!0,this._createdShaderName=i,i},r.prototype._attachAfterBind=function(e,t){var r,i=this.getScene();if(i.texturesEnabled)for(r in this._textures){var s=this._textures[r];null!=s&&(t.setTexture(r,s),t.setFloat2(r+"Infos",s.coordinatesIndex,s.level),t.setMatrix(r+"Matrix",s.getTextureMatrix()))}for(r in this._vectors4)t.setVector4(r,this._vectors4[r]);for(r in this._floats)t.setFloat(r,this._floats[r])},r.prototype._setupAttachAfterBind=function(){var e=this,t=this._afterBind;this._afterBind=function(r,i){if(e._attachAfterBind(r,i),t)try{t(r,i)}catch(s){}}},r}(e.StandardMaterial);e.UniversalDiffuseMaterial=a,e._TypeStore.RegisteredTypes.UniversalDiffuseMaterial=a;var l=function(t){function r(e,r){var i=t.call(this,e,r)||this;return i.enableShaderChunks=!0,i}return __extends(r,t),r.prototype.getClassName=function(){return"UniversalTerrainMaterial"},r.prototype.getShaderName=function(){return"pbr"},r.prototype.getShaderChunk=function(){return null},r.prototype.updateShaderChunks=function(){var t="surfaceAlbedo",r="splatmapSampler",i="detailsSampler",s="normalsSampler",o=e.System.GammaCorrection;null!=this.materialShaderChunks.Vertex_Definitions&&""!==this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions=this.formatTerrainVertexDefintions()+this.materialShaderChunks.Vertex_Definitions:this.materialShaderChunks.Vertex_Definitions=this.formatTerrainVertexDefintions(),null!=this.materialShaderChunks.Vertex_MainEnd&&""!==this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd=this.formatTerrainVertexMainEnd()+this.materialShaderChunks.Vertex_MainEnd:this.materialShaderChunks.Vertex_MainEnd=this.formatTerrainVertexMainEnd(),null!=this.materialShaderChunks.Fragment_Definitions&&""!==this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions=this.formatTerrainFragmentDefintions(r,i,s)+this.materialShaderChunks.Fragment_Definitions:this.materialShaderChunks.Fragment_Definitions=this.formatTerrainFragmentDefintions(r,i,s),null!=this.materialShaderChunks.Fragment_Custom_Albedo&&""!==this.materialShaderChunks.Fragment_Custom_Albedo?this.materialShaderChunks.Fragment_Custom_Albedo=this.formatTerrainFragmentUpdateColor(this.terrainInfo,t,r,i,s,o)+this.materialShaderChunks.Fragment_Custom_Albedo:this.materialShaderChunks.Fragment_Custom_Albedo=this.formatTerrainFragmentUpdateColor(this.terrainInfo,t,r,i,s,o)},r.prototype.formatTerrainVertexDefintions=function(){return"\r\n#define TERRAIN_VERTEX_DEFINITIONS\r\n\r\nvarying vec2 vSplatmapUV;\r\n\r\n"},r.prototype.formatTerrainVertexMainEnd=function(){return"\r\n#define TERRAIN_VERTEX_MAIN_END\r\n\r\n#ifdef UV1\r\nvSplatmapUV = uv;\r\n#endif\r\n\r\n"},r.prototype.formatTerrainFragmentDefintions=function(e,t,r){return"\r\n#define TERRAIN_FRAGMENT_DEFNITIONS\r\n\r\nvarying vec2 vSplatmapUV;\r\nuniform sampler2D "+e+";\r\nuniform sampler2D "+t+";\r\nuniform sampler2D "+r+";\r\n\r\nfloat calculateMipmapLevel(const in vec2 uvs, const in vec2 size)\r\n{\r\n    vec2 dx = dFdx(uvs * size.x);\r\n    vec2 dy = dFdy(uvs * size.y);\r\n    float d = max(dot(dx, dx), dot(dy, dy));\r\n    return 0.4 * log2(d);\r\n}\r\n\r\nvec4 sampleTextureAtlas2D(const in sampler2D atlas, const in float gamma, const in vec2 tile, const in vec4 rect, in vec2 uvs, in float lod)\r\n{\r\n    if (lod < 0.0) lod = clamp(calculateMipmapLevel(uvs, vec2(tile.x, tile.x)), 0.0, tile.y);   // Tile Info (tile.xy)\r\n    float size = pow(2.0, tile.y - lod);                                                        // Tile Bits (tile.y)\r\n    float sizex = size / rect.z;                                                                // Tile Width (rect.z)\r\n    float sizey = size / rect.w;                                                                // Tile Height (rect.w)\r\n    uvs = fract(uvs);                                                                           // Perfrom Tiling (fract)\r\n    uvs.x = uvs.x * ((sizex * rect.z - 1.0) / sizex) + 0.5 / sizex + rect.z * rect.x;           // Tile Position X (rect.x)\r\n    uvs.y = uvs.y * ((sizey * rect.w - 1.0) / sizey) + 0.5 / sizey + rect.w * rect.y;           // Tile Position Y (rect.y)\r\n    vec4 color = texture2DLodEXT(atlas, uvs, lod);\r\n    if (gamma != 1.0) {\r\n        color.r = pow(color.r, gamma);\r\n        color.g = pow(color.g, gamma);\r\n        color.b = pow(color.b, gamma);\r\n    }\r\n    return color;\r\n}\r\n\r\nvec4 sampleSplatmapAtlas2D(const in sampler2D atlas, const in vec2 tile, const in vec4 rect, in vec2 uvs)\r\n{\r\n    float size = pow(2.0, tile.y);                                                              // Tile Bits (tile.y)\r\n\t   float sizex = size / rect.z;                                                                // Tile Width (rect.z)\r\n\t   float sizey = size / rect.w;                                                                // Tile Height (rect.w)\r\n\t   uvs.x = uvs.x * ((sizex * rect.z - 1.0) / sizex) + 0.5 / sizex + rect.z * rect.x;           // Tile Position X (rect.x)\r\n\t   uvs.y = uvs.y * ((sizey * rect.w - 1.0) / sizey) + 0.5 / sizey + rect.w * rect.y;           // Tile Position Y (rect.y)\r\n    return texture2D(atlas, uvs);\r\n}\r\n\r\nvec3 blendSplatmapAtlasColors(const in vec4 splatmap, in vec4 color1, in vec4 color2, in vec4 color3, in vec4 color4, in vec3 mixbuffer)\r\n{\r\n    mixbuffer += (color1.rgb * splatmap.r);\r\n    mixbuffer += (color2.rgb * splatmap.g);\r\n    mixbuffer += (color3.rgb * splatmap.b);\r\n    mixbuffer += (color4.rgb * splatmap.a);\r\n    return mixbuffer;\r\n}\r\n\r\nvec3 perturbNormalSamplerColor(mat3 cotangentFrame, vec3 samplerColor, float scale)\r\n{\r\n    vec3 map = samplerColor.xyz;\r\n    map = map * 2.00787402 - 1.00787402;\r\n    #ifdef NORMALXYSCALE\r\n        map = normalize(map * vec3(scale, scale, 1.0));\r\n    #endif\r\n    return normalize(cotangentFrame * map);\r\n}\r\n\r\n\r\n"},r.prototype.formatTerrainFragmentUpdateColor=function(e,t,r,i,s,o){void 0===o&&(o=1);var n="";if(null!=e&&null!=e.textureAtlas&&null!=e.splatmapAtlas&&e.splatmapCount>1){n="\r\n#define TERRAIN_FRAGMENT_UPDATE_COLOR\r\n\r\nvec3 normalsColor = vec3(0.5, 0.5, 1.0);\r\nvec3 normalsBuffer = vec3(0.0, 0.0, 0.0);\r\nvec3 splatmapBuffer = vec3(0.0, 0.0, 0.0);\r\nfloat autoMipMapLevel = -1.0;\r\nfloat normalCorrection = 1.0;\r\nfloat detailCorrection = "+o.toFixed(4)+";\r\n\r\n#if defined(ALBEDO) && defined("+r.toUpperCase()+") && defined("+i.toUpperCase()+")\r\n\r\n// Reset Normal Values\r\n#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n    uvOffset = vec2(0.0, 0.0);\r\n    #ifdef NORMAL\r\n        normalW = normalize(vNormalW);\r\n    #else\r\n        normalW = normalize(cross(dFdx(vPositionW), dFdy(vPositionW))) * vEyePosition.w;\r\n    #endif\r\n    #ifdef CLEARCOAT\r\n        clearCoatNormalW = normalW;\r\n    #endif\r\n    #if defined(BUMP) || defined(PARALLAX)\r\n        #if defined(TANGENT) && defined(NORMAL)\r\n            TBN = vTBN;\r\n        #else\r\n            TBN = cotangent_frame(normalW, vPositionW, vSplatmapUV);\r\n        #endif\r\n    #elif defined(ANISOTROPIC)\r\n        #if defined(TANGENT) && defined(NORMAL)\r\n            TBN = vTBN;\r\n        #else\r\n            TBN = cotangent_frame(normalW, vPositionW, vSplatmapUV, vec2(1.0, 1.0));\r\n        #endif\r\n    #endif\r\n    #ifdef PARALLAX\r\n        invTBN = transposeMat3(TBN);\r\n    #endif\r\n    normalW = perturbNormalSamplerColor(TBN, normalsColor, 1.0);\r\n#endif\r\n\r\n// Global Atlas Values\r\nfloat splatTileSize = "+e.splatmapAtlas[2].toFixed(4)+";\r\nfloat splatTileBits = "+e.splatmapAtlas[3].toFixed(4)+";\r\nfloat detailTileSize = "+e.textureAtlas[2].toFixed(4)+";\r\nfloat detailTileBits = "+e.textureAtlas[3].toFixed(4)+";\r\n\r\n// Sample splatmap textures\r\n";for(var a=0,l=0;l<e.splatmapCount;l++){a=4*l;var h=e["splatmapRect"+l];if(n+="vec4 splatmapRect"+l+" = vec4("+h[0].toFixed(4)+", "+h[1].toFixed(4)+", "+h[2].toFixed(4)+", "+h[3].toFixed(4)+");\r\n",n+="vec4 splatmapAlbedo"+l+" = sampleSplatmapAtlas2D("+r+", vec2(splatTileSize, splatTileBits), splatmapRect"+l+", (vSplatmapUV + uvOffset));\r\n",n+="vec4 textureAlbedo"+(a+0)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+1)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+2)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+3)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",e["textureRect"+(a+0)]){var c=e["textureRect"+(a+0)],u=e["textureInfo"+(a+0)];n+="vec4 textureRect"+(a+0)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+0)+" = vec2("+u[0].toFixed(4)+", "+u[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+0)+" = vec2("+u[2].toFixed(4)+", "+u[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+0)+" = ((vSplatmapUV + textureOffset"+(a+0)+") * textureScale"+(a+0)+");\r\n",n+="textureAlbedo"+(a+0)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+0)+", textureTileUV"+(a+0)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+1)]){var c=e["textureRect"+(a+1)],u=e["textureInfo"+(a+1)];n+="vec4 textureRect"+(a+1)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+1)+" = vec2("+u[0].toFixed(4)+", "+u[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+1)+" = vec2("+u[2].toFixed(4)+", "+u[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+1)+" = ((vSplatmapUV + textureOffset"+(a+1)+") * textureScale"+(a+1)+");\r\n",n+="textureAlbedo"+(a+1)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+1)+", textureTileUV"+(a+1)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+2)]){var c=e["textureRect"+(a+2)],u=e["textureInfo"+(a+2)];n+="vec4 textureRect"+(a+2)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+2)+" = vec2("+u[0].toFixed(4)+", "+u[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+2)+" = vec2("+u[2].toFixed(4)+", "+u[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+2)+" = ((vSplatmapUV + textureOffset"+(a+2)+") * textureScale"+(a+2)+");\r\n",n+="textureAlbedo"+(a+2)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+2)+", textureTileUV"+(a+2)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+3)]){var c=e["textureRect"+(a+3)],u=e["textureInfo"+(a+3)];n+="vec4 textureRect"+(a+3)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+3)+" = vec2("+u[0].toFixed(4)+", "+u[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+3)+" = vec2("+u[2].toFixed(4)+", "+u[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+3)+" = ((vSplatmapUV + textureOffset"+(a+3)+") * textureScale"+(a+3)+");\r\n",n+="textureAlbedo"+(a+3)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+3)+", textureTileUV"+(a+3)+", autoMipMapLevel);\r\n"}if(n+="splatmapBuffer = blendSplatmapAtlasColors(splatmapAlbedo"+l+", textureAlbedo"+(a+0)+", textureAlbedo"+(a+1)+", textureAlbedo"+(a+2)+", textureAlbedo"+(a+3)+", splatmapBuffer);\r\n",n+="#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n",n+="    #if defined("+s.toUpperCase()+")\r\n",n+="        vec4 normalColor"+(a+0)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+1)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+2)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+3)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",e["textureRect"+(a+0)]){var m=e["normalsScale"+(a+0)];n+="        float normalScale"+(a+0)+" = "+m.toFixed(4)+";\r\n",n+="        normalColor"+(a+0)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+0)+", textureTileUV"+(a+0)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+0)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+0)+".rgb, normalScale"+(a+0)+");\r\n"}if(e["textureRect"+(a+1)]){var m=e["normalsScale"+(a+1)];n+="        float normalScale"+(a+1)+" = "+m.toFixed(4)+";\r\n",n+="        normalColor"+(a+1)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+1)+", textureTileUV"+(a+1)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+1)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+1)+".rgb, normalScale"+(a+1)+");\r\n"}if(e["textureRect"+(a+2)]){var m=e["normalsScale"+(a+2)];n+="        float normalScale"+(a+2)+" = "+m.toFixed(4)+";\r\n",n+="        normalColor"+(a+2)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+2)+", textureTileUV"+(a+2)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+2)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+2)+".rgb, normalScale"+(a+2)+");\r\n"}if(e["textureRect"+(a+3)]){var m=e["normalsScale"+(a+3)];n+="        float normalScale"+(a+3)+" = "+m.toFixed(4)+";\r\n",n+="        normalColor"+(a+3)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+3)+", textureTileUV"+(a+3)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+3)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+3)+".rgb, normalScale"+(a+3)+");\r\n"}n+="        normalsBuffer = blendSplatmapAtlasColors(splatmapAlbedo"+l+", normalColor"+(a+0)+", normalColor"+(a+1)+", normalColor"+(a+2)+", normalColor"+(a+3)+", normalsBuffer);\r\n",n+="    #endif\r\n",n+="#endif\r\n",n+="\r\n"}n+="// Update Color Values\r\n"+t+".rgb = splatmapBuffer;\r\n#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n    #if defined("+s.toUpperCase()+")\r\n        normalW = normalsBuffer;\r\n    #endif\r\n    #if defined(FORCENORMALFORWARD) && defined(NORMAL)\r\n        vec3 faceNormal = normalize(cross(dFdx(vPositionW), dFdy(vPositionW))) * vEyePosition.w;\r\n        #if defined(TWOSIDEDLIGHTING)\r\n            faceNormal = gl_FrontFacing ? faceNormal : -faceNormal;\r\n        #endif\r\n        normalW *= sign(dot(normalW, faceNormal));\r\n    #endif\r\n    #if defined(TWOSIDEDLIGHTING) && defined(NORMAL)\r\n        normalW = gl_FrontFacing ? normalW : -normalW;\r\n    #endif\r\n#endif\r\n\r\n#endif\r\n\r\n"}return n},r}(e.UniversalAlbedoMaterial);e.UniversalTerrainMaterial=l,e._TypeStore.RegisteredTypes.UniversalTerrainMaterial=l}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){return void 0===i&&(i={}),t.call(this,e,r,i)||this}return __extends(r,t),r.prototype.start=function(){},r.prototype.update=function(){},r.prototype.after=function(){},r.prototype.destroy=function(){},r.IsXboxLivePluginEnabled=function(){return!!window.isXboxLivePluginEnabled&&window.isXboxLivePluginEnabled()},r.IsXboxLiveUserSignedIn=function(t,r){if(void 0===t&&(t=null),void 0===r&&(r=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()){var i=null!=t?e.WindowsPlatform.GetXboxLiveSystemUser(t,r):e.WindowsPlatform.GetXboxLiveUser(r);return null!=i&&1==i.isSignedIn}return!1},r.XboxLiveUserSignIn=function(t,r,i,s){void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()&&e.WindowsPlatform.XboxLiveUserSilentSignIn(t,function(o){o.status===Microsoft.Xbox.Services.System.SignInStatus.userInteractionRequired?e.WindowsPlatform.XboxLiveUserDialogSignIn(t,function(e){r&&r(e)},i,s):r&&r(o)},i,s)},r.XboxLiveUserSilentSignIn=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUser(t).signInSilentlyAsync(null).then(r,i,s):null},r.XboxLiveUserDialogSignIn=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUser(t).signInAsync(null).then(r,i,s):null},r.LoadXboxLiveUserProfile=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUserContext(t).profileService.getUserProfileAsync(e.WindowsPlatform.GetXboxLiveUser(t).xboxUserId).then(r,i,s):null},r.GetXboxLiveUser=function(t){void 0===t&&(t=e.PlayerNumber.One);var r=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserOne();break;case e.PlayerNumber.Two:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserTwo();break;case e.PlayerNumber.Three:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserThree();break;case e.PlayerNumber.Four:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserFour()}return r},r.GetXboxLiveSystemUser=function(t,r){void 0===r&&(r=e.PlayerNumber.One);var i=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(r){case e.PlayerNumber.One:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserOne(t);break;case e.PlayerNumber.Two:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserTwo(t);break;case e.PlayerNumber.Three:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserThree(t);break;case e.PlayerNumber.Four:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserFour(t)}return i},r.GetXboxLiveUserContext=function(t){void 0===t&&(t=e.PlayerNumber.One);var r=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextOne();break;case e.PlayerNumber.Two:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextTwo();break;case e.PlayerNumber.Three:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextThree();break;case e.PlayerNumber.Four:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextFour()}return r},r.ResetXboxLiveUserContext=function(t){if(void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()&&e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextOne();break;case e.PlayerNumber.Two:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextTwo();break;case e.PlayerNumber.Three:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextThree();break;case e.PlayerNumber.Four:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextFour()}},r.GetXboxLiveContextProperty=function(t){return e.WindowsPlatform.IsXboxLivePluginEnabled()?window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextProperty(t):null},r.SetXboxLiveContextProperty=function(t,r){e.WindowsPlatform.IsXboxLivePluginEnabled()&&window.BabylonToolkit.XboxLive.Plugin.setXboxLiveContextProperty(t,r)},r.ResetXboxLivePropertyContexts=function(){e.WindowsPlatform.IsXboxLivePluginEnabled()&&window.BabylonToolkit.XboxLive.Plugin.resetXboxLivePropertyContexts()},r.SetXboxLiveSignOutHandler=function(t){void 0===t&&(t=null),e.WindowsPlatform.IsXboxLivePluginEnabled()&&(window.BabylonToolkit.XboxLive.Plugin.onusersignout=t)},r}(e.ScriptComponent);e.WindowsPlatform=t}(BABYLON||(BABYLON={})),BABYLON.SceneManager.IsXboxOne()&&navigator.gamepadInputEmulation&&(navigator.gamepadInputEmulation="gamepad"),BABYLON.SceneManager.IsWindows()&&"undefined"!=typeof Windows.UI.ViewManagement&&"undefined"!=typeof Windows.UI.ViewManagement.ApplicationViewBoundsMode&&"undefined"!=typeof Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow&&Windows.UI.ViewManagement.ApplicationView.getForCurrentView().setDesiredBoundsMode(Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow);

// worker.js
var versionStamp = '###VERSION###';
var installFiles = ['###INSTALL###'];
// ..
// Post Service Worker Version Message
// ..
self.addEventListener('message', function(evt) {
    if (evt.data != null && evt.data === 'version' && evt.ports != null && evt.ports.length > 0) {
        var port = evt.ports[0];
        if (port && port.postMessage) {
            // console.log('WORKER: Version check: ' + versionStamp);
            port.postMessage(versionStamp);
        }
    }
});
// ..
// Install Service Worker File System
// ..
self.addEventListener('install', function(evt) {
    evt.waitUntil(
        caches.open(versionStamp).then(function(cache) {
            // console.log('WORKER: Fetching cache: ' + versionStamp);
            var cachePromises = installFiles.map(function(urlToPrefetch) {
                var url = new URL(urlToPrefetch, location.href);
                url.search += (url.search ? '&' : '?') + 'time=' + new Date().getTime().toString();
                var request = new Request(url, { mode: 'no-cors' });
                return fetch(request, { cache: 'no-store' }).then(function(response) {
                    if (response.status >= 400) throw new Error('request for ' + urlToPrefetch + ' failed with status ' + response.statusText);
                    return cache.put(urlToPrefetch, response);
                }).catch(function(error) {
                    // console.warn('WORKER: Not caching ' + urlToPrefetch + ' due to ' + error);
                });
            });
            return Promise.all(cachePromises).then(function() {
                // console.log('WORKER: Cache updated: ' + versionStamp);
                return self.skipWaiting();
            });
        }).catch(function(error) {
            // console.warn('WORKER: Pre-Fetching Failed: ', error);
        })
    );
});
// ..
// Activate Service Worker File System
// ..
self.addEventListener('activate', function(evt) {
    evt.waitUntil(
        caches.keys().then(function(cacheNames) {
            return Promise.all(
                cacheNames.map(function(cache) {
                    if (cache !== versionStamp) {
                        // console.log('WORKER: Cleaning cache: ' + cache);
                        return caches.delete(cache);
                    }
                })
            );
        })
    );
    // console.log('WORKER: Activate cache: ' + versionStamp);
    return self.clients.claim();
});
// ..
// Fetch Service Worker Request Files
// ..
self.addEventListener('fetch', function(evt) {
    // Chrome Dev Tools Bug - Temporary Workaround
    // https://bugs.chromium.org/p/chromium/issues/detail?id=823392    
    if (evt.request.cache === 'only-if-cached' && evt.request.mode !== 'same-origin') {
        var oStrangeRequest = evt.request.clone();
        console.warn('Chrome Dev Tools. Request cache has only-if-cached, but not same-origin.', oStrangeRequest.cache, oStrangeRequest.mode, 'request redirect:', oStrangeRequest.redirect, oStrangeRequest.url, oStrangeRequest);
        return;
    }
    evt.respondWith(
        caches.match(evt.request).then(function(response) {
            return response || fetch(evt.request, { cache: 'no-store' });
        })
    );
});

// BabylonToolkit2019.js
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class DebugInformation
     */
    var DebugInformation = /** @class */ (function (_super) {
        __extends(DebugInformation, _super);
        function DebugInformation(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.keys = true;
            _this.show = true;
            _this.popup = false;
            _this.views = false;
            _this.xbox = false;
            _this.keys = _this.getEditorProperty("enableDebugKeys", _this.keys);
            _this.show = _this.getEditorProperty("showDebugLabels", _this.show);
            _this.popup = _this.getEditorProperty("popupDebugPanel", _this.popup);
            _this.views = _this.getEditorProperty("togglePlayerViews", _this.views);
            _this.xbox = _this.getEditorProperty("allowXboxLiveSignIn", _this.xbox);
            // ..
            if (BABYLON.SceneManager.IsWindows())
                _this.popup = false;
            BABYLON.Tools.Log("Debug information overlay loaded");
            return _this;
        }
        DebugInformation.prototype.start = function () {
            var _this = this;
            //this.screen = document.getElementById("screen");
            //this.toggle = document.getElementById("toggle");
            //this.signin = document.getElementById("signin");
            //this.reload = document.getElementById("reload");
            //this.mouse = document.getElementById("mouse");
            //this.debug = document.getElementById("debug");
            if (this.show === true) {
                /*
                if (this.keys === true) {
                    if (!BABYLON.SceneManager.IsXboxOne()) {
                        if (this.screen) this.screen.innerHTML = "F - Show Full Screen";
                    }
                    if (BABYLON.CameraSystem.IsMultiPlayerView() && this.views === true) {
                        if (this.toggle) {
                            if (BABYLON.SceneManager.IsXboxOne()) {
                                this.toggle.style.top = "29px";
                            }
                            this.toggle.innerHTML = "1 - 4 Toggle Player View";
                        }
                    }
                    if (BABYLON.SceneManager.IsXboxLivePluginEnabled() && this.xbox === true) {
                        if (this.signin) {
                            if (BABYLON.SceneManager.IsXboxOne()) {
                                this.signin.style.top = "49px";
                            }
                            this.signin.innerHTML = "X - Xbox Live Sign In";
                        }
                    }
                    if (this.mouse) this.mouse.innerHTML = (BABYLON.SceneManager.IsXboxOne()) ? "M - Mouse" : "";
                    if (this.reload) this.reload.innerHTML = "R - Reload";
                    if (this.debug) this.debug.innerHTML = "P - Debug";
                }
                */
            }
            if (this.keys === true) {
                if (this.views === true) {
                    console.log("Enable Multiplayer Keys");
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num1, function () {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(_this.scene, 1);
                        console.log("1 player pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num2, function () {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(_this.scene, 2);
                        console.log("2 players pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num3, function () {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(_this.scene, 3);
                        console.log("3 players pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num4, function () {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(_this.scene, 4);
                        console.log("4 players pressed");
                    });
                }
                BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.R, function () {
                    window.location.reload();
                });
                BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.I, function () {
                    if (_this.popup === true) {
                        BABYLON.SceneManager.PopupDebug(_this.scene);
                    }
                    else {
                        BABYLON.SceneManager.ToggleDebug(_this.scene, true, null);
                    }
                });
                if (BABYLON.SceneManager.IsXboxOne()) {
                    if (navigator.gamepadInputEmulation) {
                        BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.M, function () {
                            if (navigator.gamepadInputEmulation !== "mouse") {
                                navigator.gamepadInputEmulation = "mouse";
                            }
                            else {
                                navigator.gamepadInputEmulation = "gamepad";
                            }
                        });
                    }
                }
                else {
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.F, function () {
                        //BABYLON.Tools.RequestFullscreen(document.documentElement);
                        _this.scene.getEngine().enterFullscreen(true);
                    });
                }
                if (BABYLON.WindowsPlatform.IsXboxLivePluginEnabled() && this.xbox === true) {
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.X, function () {
                        var player = BABYLON.PlayerNumber.One;
                        if (!BABYLON.WindowsPlatform.IsXboxLiveUserSignedIn(null, player)) {
                            BABYLON.Tools.Log("===> Trying Xbox Live Sign In For Player: " + player.toString());
                            BABYLON.WindowsPlatform.XboxLiveUserSignIn(player, function (result) {
                                var user = BABYLON.WindowsPlatform.GetXboxLiveUser(player);
                                var msg = "(" + user.xboxUserId + ") - " + user.gamertag;
                                BABYLON.SceneManager.AlertMessage(msg, "Xbox Live User Signed In");
                            }, function (err) {
                                console.log(err);
                                var msg = "Encountered Sign Error";
                                BABYLON.Tools.Warn(msg);
                                BABYLON.SceneManager.AlertMessage(msg, "Xbox Live Warning");
                            });
                        }
                        else {
                            BABYLON.Tools.Warn("Xbox Live User Already Signed In");
                            BABYLON.SceneManager.AlertMessage("User Already Signed In", "Xbox Live Warning");
                        }
                    });
                }
            }
            // Default Print To Screen Text
            var printColor = (this.scene.getEngine().webGLVersion < 2) ? "red" : "#0c0";
            var graphicsVersion = BABYLON.SceneManager.GetWebGLVersionString(this.scene);
            BABYLON.Utilities.PrintToScreen(graphicsVersion, printColor);
        };
        DebugInformation.prototype.destroy = function () {
            //this.screen = null;
            //this.toggle = null;
            //this.signin = null;
            //this.reload = null;
            //this.mouse = null;
            //this.debug = null;
        };
        return DebugInformation;
    }(BABYLON.ScriptComponent));
    PROJECT.DebugInformation = DebugInformation;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class SoftbodyMesh
     */
    var SoftbodyMesh = /** @class */ (function (_super) {
        __extends(SoftbodyMesh, _super);
        function SoftbodyMesh(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            var type = _this.getEditorProperty("type", 0);
            var options = {
                mass: _this.getEditorProperty("mass", 1),
                friction: _this.getEditorProperty("friction", 0.3),
                restitution: _this.getEditorProperty("restitution", 0.3),
                pressure: _this.getEditorProperty("pressure", 200),
                velocityIterations: _this.getEditorProperty("velocityIterations", 20),
                positionIterations: _this.getEditorProperty("positionIterations", 20),
                stiffness: _this.getEditorProperty("stiffness", 1),
                margin: _this.getEditorProperty("margin", 0.0),
                damping: _this.getEditorProperty("damping", 0.01)
            };
            var mesh = _this.getTransformMesh();
            var forceSharedVertices = _this.getEditorProperty("forceSharedVertices", true);
            if (forceSharedVertices === true)
                mesh.forceSharedVertices();
            var increaseVertices = _this.getEditorProperty("increaseVertices", 4);
            if (increaseVertices > 0)
                mesh.increaseVertices(increaseVertices);
            var impostor = null;
            if (type === 0) { // Mesh
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.SoftbodyImpostor, options, _this.scene);
            }
            else if (type === 1) { // Cloth
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.ClothImpostor, options, _this.scene);
            }
            else if (type === 2) { // Rope
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.RopeImpostor, options, _this.scene);
            }
            if (impostor != null) {
                impostor.executeNativeFunction(function (word, body) {
                    // TODO: Setup Native Softbody Physics Options
                });
            }
            return _this;
        }
        SoftbodyMesh.prototype.start = function () {
            // Start render loop function
        };
        SoftbodyMesh.prototype.update = function () {
            // Update render loop function
        };
        SoftbodyMesh.prototype.after = function () {
            // After render loop function
        };
        SoftbodyMesh.prototype.destroy = function () {
            // Destroy component function
        };
        return SoftbodyMesh;
    }(BABYLON.ScriptComponent));
    PROJECT.SoftbodyMesh = SoftbodyMesh;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class FirstPersonController
     */
    var FirstPersonController = /** @class */ (function (_super) {
        __extends(FirstPersonController, _super);
        function FirstPersonController(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.deltaFactor = 2.0;
            _this.attachCamera = true;
            _this.cameraPivot = null;
            _this.cameraRigger = null;
            _this.movementSpeed = 1.0;
            _this.jumpingVelocity = 10.0;
            _this.playerMovement = BABYLON.Vector3.Zero();
            _this.playerTurnRate = 0.0;
            _this.cameraPitchRate = 0.0;
            _this.horzSensitivity = 1.0;
            _this.vertSensitivity = 1.0;
            _this.mouseSensitivity = 1.0;
            _this.minimumPitchAngle = -60.0;
            _this.maximumPitchAngle = 60.0;
            _this.isCharacterGrounded = false;
            _this.isCharacterJumpFrame = false;
            _this.cameraEulerAngles = BABYLON.Vector3.Zero();
            _this.characterController = null;
            _this.buttonJump = BABYLON.Xbox360Button.A;
            _this.keyboardJump = BABYLON.UserInputKey.SpaceBar;
            _this.playerNumber = BABYLON.PlayerNumber.One;
            _this.playerDeltaX = 0.0;
            _this.playerDeltaZ = 0.0;
            _this.playerMouseX = 0.0;
            _this.playerMouseY = 0.0;
            _this.playerEyeLevel = 0.5;
            _this.attachCamera = _this.getEditorProperty("attachCamera", _this.attachCamera);
            _this.playerNumber = _this.getEditorProperty("playerNumber", _this.playerNumber);
            _this.playerEyeLevel = _this.getEditorProperty("playerEyeLevel", _this.playerEyeLevel);
            _this.movementSpeed = _this.getEditorProperty("movementSpeed", _this.movementSpeed);
            _this.mouseSensitivity = _this.getEditorProperty("mouseSensitivity", _this.mouseSensitivity);
            _this.minimumPitchAngle = _this.getEditorProperty("minimumPitchAngle", _this.minimumPitchAngle);
            _this.maximumPitchAngle = _this.getEditorProperty("maximumPitchAngle", _this.maximumPitchAngle);
            _this.vertSensitivity = _this.getEditorProperty("verticalSensitivity", _this.vertSensitivity);
            _this.horzSensitivity = _this.getEditorProperty("horizontalSensitivity", _this.horzSensitivity);
            _this.jumpingVelocity = _this.getEditorProperty("impulseJumpVelocity", _this.jumpingVelocity);
            // Scale Mouse Pointer Sensitivity
            if (_this.playerNumber == BABYLON.PlayerNumber.One) {
                BABYLON.UserInputOptions.PointerAngularSensibility = (BABYLON.UserInputOptions.PointerAngularSensibility * _this.mouseSensitivity);
            }
            return _this;
        }
        FirstPersonController.prototype.isCharacterJumping = function () { return false; /* TODO: Determine If Character Is Jumping - ??? */ };
        FirstPersonController.prototype.isCharacterFalling = function () { return false; /* TODO: Determine If Character Is Falling - ??? */ };
        FirstPersonController.prototype.getCharacterController = function () { return this.characterController; };
        FirstPersonController.prototype.start = function () { this.setupFirstPersonController(); };
        FirstPersonController.prototype.update = function () { this.updateFirstPersonController(); };
        FirstPersonController.prototype.destroy = function () { this.destroyFirstPersonController(); };
        FirstPersonController.prototype.setupFirstPersonController = function () {
            // Setup Camera Aattachments
            this.cameraPivot = this.getChildTransform("Pivot");
            if (this.cameraPivot == null) {
                this.cameraPivot = new BABYLON.TransformNode("Pivot", this.scene);
                this.cameraPivot.setParent(this.transform);
                this.cameraPivot.position = new BABYLON.Vector3(0.0, this.playerEyeLevel, 0.0); // NOTE: POSITION CAMERA EYE LEVEL (TO SEE ARMS)
            }
            BABYLON.Utilities.ValidateTransformQuaternion(this.cameraPivot);
            //console.log("Attach Camera For: " + this.transform.name + " --> " + this.attachCamera.toString());
            //console.log(this.transform.metadata);
            if (this.attachCamera === true) {
                // TODO: Create Multi Player Camera (No Attach Camera)
                this.cameraRigger = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.cameraRigger != null && this.cameraPivot != null) {
                    this.cameraPivot.position = new BABYLON.Vector3(0.0, this.playerEyeLevel, 0.0); // NOTE: POSITION CAMERA EYE LEVEL (TO SEE ARMS)
                    this.cameraRigger.setParent(this.cameraPivot);
                    this.cameraRigger.position = new BABYLON.Vector3(0.0, 0.0, 0.0);
                    this.cameraRigger.rotationQuaternion = BABYLON.Quaternion.Identity();
                    console.log("FPC: Attached main camera to player controller: " + this.transform.name);
                }
                else {
                    BABYLON.Tools.Warn("Failed to locate camera or local pivot for: " + this.transform.name);
                }
            }
            // Setup Character Controller
            this.characterController = this.getComponent("BABYLON.CharacterController");
            if (this.characterController == null)
                BABYLON.Tools.Warn("Failed to locate character controller for: " + this.transform.name);
            // Character Collision Contact (TEST)
            if (this.characterController != null) {
                // Test Static Only Collisions
                // this.characterController.setCollisionFilterMask(BABYLON.CollisionFilters.StaticFilter);
                this.characterController.registerOnCollisionEnter(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("PLAYER: ===> Got Collision Enter Event: " + mesh.name + " --> " + tag);
                });
                this.characterController.registerOnCollisionStay(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("PLAYER: ===> Got Collision Stay Event: " + mesh.name + " --> " + tag);
                });
                this.characterController.registerOnCollisionExit(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.warn("PLAYER ===> DESTROY: Collision Exit Event: " + mesh.name + " --> " + tag);
                });
            }
        };
        FirstPersonController.prototype.updateFirstPersonController = function () {
            var deltaTime = this.getDeltaSeconds();
            this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
            this.playerDeltaZ = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
            this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
            this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
            // Update Dead Input Values
            if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaX = 0;
            if (Math.abs(this.playerDeltaZ) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaZ = 0;
            if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseX = 0;
            if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseY = 0;
            // Update Character Movement
            if (this.characterController != null) {
                this.isCharacterGrounded = this.characterController.isGrounded();
                this.isCharacterJumpFrame = false;
                // Rotate Player Left And Right With Mouse-X
                this.playerTurnRate = (this.playerMouseX * (this.horzSensitivity * this.deltaFactor));
                this.characterController.turn(this.playerTurnRate);
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // FPC: Pitch Camera Pivot Up And Down With Mouse-Y
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                this.cameraPitchRate = (this.playerMouseY * (this.vertSensitivity * this.deltaFactor));
                this.cameraPivot.rotate(BABYLON.Axis.X, -(this.cameraPitchRate * BABYLON.System.Deg2Rad), BABYLON.Space.LOCAL);
                BABYLON.Utilities.ToEulerToRef(this.cameraPivot.rotationQuaternion, this.cameraEulerAngles);
                this.cameraEulerAngles.x = BABYLON.Scalar.Clamp(this.cameraEulerAngles.x, this.minimumPitchAngle, this.maximumPitchAngle);
                BABYLON.Utilities.FromEulerToRef(this.cameraEulerAngles.x, this.cameraEulerAngles.y, this.cameraEulerAngles.z, this.cameraPivot.rotationQuaternion);
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // Update Player Input With Delta-X And Delta-Z
                if (this.isCharacterGrounded === true) {
                    this.playerMovement.x = this.playerDeltaX;
                    this.playerMovement.y = 0.0;
                    this.playerMovement.z = this.playerDeltaZ;
                    this.isCharacterJumpFrame = (BABYLON.SceneManager.GetKeyboardInput(this.keyboardJump) || BABYLON.SceneManager.GetGamepadButtonInput(this.buttonJump));
                    // Transform Movement Direction And Scale Speed
                    BABYLON.Utilities.TransformDirectionToRef(this.transform, this.playerMovement, this.playerMovement);
                    BABYLON.Vector3.NormalizeToRef(this.playerMovement, this.playerMovement);
                    this.playerMovement.scaleInPlace((BABYLON.System.WalkingVelocity * this.movementSpeed) * deltaTime);
                    // Move Player Using Physics Character Controller
                    this.characterController.move(this.playerMovement);
                    // Jump Player Using Physics Character Controller
                    if (this.isCharacterJumpFrame === true) {
                        this.characterController.jump(this.jumpingVelocity);
                    }
                }
            }
        };
        FirstPersonController.prototype.destroyFirstPersonController = function () {
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.characterController = null;
        };
        return FirstPersonController;
    }(BABYLON.ScriptComponent));
    PROJECT.FirstPersonController = FirstPersonController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class ThirdPersonController
     */
    var ThirdPersonController = /** @class */ (function (_super) {
        __extends(ThirdPersonController, _super);
        function ThirdPersonController(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.deltaFactor = 2.0;
            _this.attachCamera = true;
            _this.cameraPivot = null;
            _this.cameraRigger = null;
            _this.movementSpeed = 1.0;
            _this.jumpingVelocity = 10.0;
            _this.playerMovement = BABYLON.Vector3.Zero();
            _this.playerTurnRate = 0.0;
            _this.cameraPitchRate = 0.0;
            _this.horzSensitivity = 1.0;
            _this.vertSensitivity = 1.0;
            _this.mouseSensitivity = 1.0;
            _this.minimumPitchAngle = -60.0;
            _this.maximumPitchAngle = 60.0;
            _this.isCharacterGrounded = false;
            _this.isCharacterJumpFrame = false;
            _this.characterController = null;
            _this.buttonJump = BABYLON.Xbox360Button.A;
            _this.keyboardJump = BABYLON.UserInputKey.SpaceBar;
            _this.playerNumber = BABYLON.PlayerNumber.One;
            _this.playerDeltaX = 0.0;
            _this.playerDeltaZ = 0.0;
            _this.playerMouseX = 0.0;
            _this.playerMouseY = 0.0;
            _this.attachCamera = _this.getEditorProperty("attachCamera", _this.attachCamera);
            _this.playerNumber = _this.getEditorProperty("playerNumber", _this.playerNumber);
            _this.movementSpeed = _this.getEditorProperty("movementSpeed", _this.movementSpeed);
            _this.mouseSensitivity = _this.getEditorProperty("mouseSensitivity", _this.mouseSensitivity);
            _this.minimumPitchAngle = _this.getEditorProperty("minimumPitchAngle", _this.minimumPitchAngle);
            _this.maximumPitchAngle = _this.getEditorProperty("maximumPitchAngle", _this.maximumPitchAngle);
            _this.vertSensitivity = _this.getEditorProperty("verticalSensitivity", _this.vertSensitivity);
            _this.horzSensitivity = _this.getEditorProperty("horizontalSensitivity", _this.horzSensitivity);
            _this.jumpingVelocity = _this.getEditorProperty("impulseJumpVelocity", _this.jumpingVelocity);
            // Scale Mouse Pointer Sensitivity
            if (_this.playerNumber == BABYLON.PlayerNumber.One) {
                BABYLON.UserInputOptions.PointerAngularSensibility = (BABYLON.UserInputOptions.PointerAngularSensibility * _this.mouseSensitivity);
            }
            return _this;
        }
        ThirdPersonController.prototype.getCharacterController = function () { return this.characterController; };
        ThirdPersonController.prototype.start = function () { this.setupThirdPersonController(); };
        ThirdPersonController.prototype.update = function () { this.updateThirdPersonController(); };
        ThirdPersonController.prototype.destroy = function () { this.destroyThirdPersonController(); };
        ThirdPersonController.prototype.setupThirdPersonController = function () {
            // Setup Camera Attachments
            this.cameraPivot = this.getChildTransform("Pivot");
            if (this.cameraPivot == null) {
                this.cameraPivot = new BABYLON.TransformNode("Pivot", this.scene);
                this.cameraPivot.setParent(this.transform);
                this.cameraPivot.position = new BABYLON.Vector3(0.0, 1.85, 0.0);
            }
            BABYLON.Utilities.ValidateTransformQuaternion(this.cameraPivot);
            if (this.attachCamera === true) {
                // TODO: Create Multi Player Camera (No Attach Camera)
                this.cameraRigger = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.cameraRigger != null && this.cameraPivot != null) {
                    this.cameraRigger.setParent(this.cameraPivot);
                    this.cameraRigger.position = new BABYLON.Vector3(0.0, 0.0, -4.5);
                    this.cameraRigger.rotationQuaternion = BABYLON.Quaternion.Identity();
                    console.log("TPC: Attached main camera to player controller: " + this.transform.name);
                }
                else {
                    BABYLON.Tools.Warn("Failed to locate camera or local pivot for: " + this.transform.name);
                }
            }
            // Setup Character Controller
            this.characterController = this.getComponent("BABYLON.CharacterController");
            if (this.characterController == null)
                BABYLON.Tools.Warn("Failed to locate character controller for: " + this.transform.name);
        };
        ThirdPersonController.prototype.updateThirdPersonController = function () {
            this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
            this.playerDeltaZ = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
            this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
            this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
            // Update Dead Input Values
            if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaX = 0;
            if (Math.abs(this.playerDeltaZ) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaZ = 0;
            if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseX = 0;
            if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseY = 0;
            // Update Character Movement
            if (this.characterController != null) {
            }
        };
        ThirdPersonController.prototype.destroyThirdPersonController = function () {
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.characterController = null;
        };
        return ThirdPersonController;
    }(BABYLON.ScriptComponent));
    PROJECT.ThirdPersonController = ThirdPersonController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class BoundingBoxSkins
     */
    var BoundingBoxSkins = /** @class */ (function (_super) {
        __extends(BoundingBoxSkins, _super);
        function BoundingBoxSkins(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.skins = null;
            _this.syncBoundingInfo = true;
            _this.updateEveryFrame = false;
            _this.positionThreashold = 0.1;
            _this.lastPosition = BABYLON.Vector3.Zero();
            // ..
            // Validate Skin Bounding Box Info
            // ..
            _this.syncBoundingInfo = _this.getEditorProperty("syncBoundingInfo", _this.syncBoundingInfo);
            _this.updateEveryFrame = _this.getEditorProperty("updateEveryFrame", _this.updateEveryFrame);
            _this.positionThreashold = _this.getEditorProperty("positionThreashold", _this.positionThreashold);
            if (_this.syncBoundingInfo === true) {
                var skinned_1 = false;
                var metadata = _this.getMetadata();
                if (metadata != null && metadata.skin === true) {
                    skinned_1 = true;
                }
                _this.skins = _this.transform.getChildMeshes(false, function (node) {
                    var data = BABYLON.SceneManager.FindSceneMetadata(node);
                    return ((data != null && data.skin === true) || (skinned_1 === true && node.name.indexOf("_primitive") >= 0)); // TODO: Remove Primitives
                });
                if (skinned_1 === true && _this.transform instanceof BABYLON.AbstractMesh) {
                    if (_this.skins == null)
                        _this.skins = [];
                    _this.skins.unshift(_this.transform);
                }
            }
            return _this;
        }
        BoundingBoxSkins.prototype.start = function () {
            this.checkSkins();
        };
        BoundingBoxSkins.prototype.update = function () {
            if (this.updateEveryFrame === true) {
                this.checkSkins();
            }
        };
        BoundingBoxSkins.prototype.after = function () {
        };
        BoundingBoxSkins.prototype.destroy = function () {
            this.skins = null;
        };
        BoundingBoxSkins.prototype.checkSkins = function () {
            // Start render loop function
            if (this.skins != null && this.skins.length > 0) {
                if (this.transform.position.x !== this.lastPosition.x || this.transform.position.y !== this.lastPosition.y || this.transform.position.z !== this.lastPosition.z) {
                    if (Math.abs(this.transform.position.x - this.lastPosition.x) >= this.positionThreashold || Math.abs(this.transform.position.y - this.lastPosition.y) >= this.positionThreashold || Math.abs(this.transform.position.z - this.lastPosition.z) >= this.positionThreashold) {
                        this.skins.forEach(function (skin) { skin.refreshBoundingInfo(true); });
                        //console.log("===> Position Change Update: " + this.transform.name);
                        //console.log(this.transform.position.toString());
                        this.lastPosition.x = this.transform.position.x;
                        this.lastPosition.y = this.transform.position.y;
                        this.lastPosition.z = this.transform.position.z;
                    }
                }
            }
        };
        return BoundingBoxSkins;
    }(BABYLON.ScriptComponent));
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon skidmark section class (Native Bullet Physics 2.82)
     * @class SkidmarkSection
     */
    var SkidmarkSection = /** @class */ (function () {
        function SkidmarkSection() {
            this.Pos = BABYLON.Vector3.Zero();
            this.Normal = BABYLON.Vector3.Zero();
            this.Tangent = BABYLON.Vector4.Zero();
            this.Posl = BABYLON.Vector3.Zero();
            this.Posr = BABYLON.Vector3.Zero();
            this.Intensity = 0.0;
            this.LastIndex = -1;
        }
        return SkidmarkSection;
    }());
    PROJECT.SkidmarkSection = SkidmarkSection;
    /**
     * Babylon Script Component
     * @class SkidmarkManager
     */
    var SkidmarkManager = /** @class */ (function (_super) {
        __extends(SkidmarkManager, _super);
        function SkidmarkManager(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            SkidmarkManager.MAX_MARKS = _this.getEditorProperty("maxSections", SkidmarkManager.MAX_MARKS);
            SkidmarkManager.MARK_COLOR = BABYLON.Utilities.ParseColor3(_this.getEditorProperty("textureColor", SkidmarkManager.MARK_COLOR));
            SkidmarkManager.MARK_WIDTH = _this.getEditorProperty("textureWidth", SkidmarkManager.MARK_WIDTH);
            SkidmarkManager.GROUND_OFFSET = _this.getEditorProperty("groundOffset", SkidmarkManager.GROUND_OFFSET);
            SkidmarkManager.VELOCITY_SCALE = _this.getEditorProperty("velocityScale", SkidmarkManager.VELOCITY_SCALE);
            SkidmarkManager.GPU_TRIANGLES = _this.getEditorProperty("gpuQuadIndices", SkidmarkManager.GPU_TRIANGLES);
            SkidmarkManager.TEXTURE_MARKS = _this.getEditorProperty("textureMarks", SkidmarkManager.TEXTURE_MARKS);
            SkidmarkManager.TEX_INTENSITY = _this.getEditorProperty("textureIntensity", SkidmarkManager.TEX_INTENSITY);
            SkidmarkManager.MIN_DISTANCE = _this.getEditorProperty("textureDistance", SkidmarkManager.MIN_DISTANCE);
            SkidmarkManager.MIN_SQR_DISTANCE = (SkidmarkManager.MIN_DISTANCE * SkidmarkManager.MIN_DISTANCE);
            SkidmarkManager.SkidThreashold = _this.getEditorProperty("skidThreashold", SkidmarkManager.SkidThreashold);
            return _this;
        }
        SkidmarkManager.prototype.start = function () { SkidmarkManager.CreateSkidmarkManager(this.scene); };
        SkidmarkManager.prototype.update = function () { SkidmarkManager.UpdateSkidmarkManager(); };
        SkidmarkManager.GetVelocityScale = function () { return SkidmarkManager.VELOCITY_SCALE; };
        SkidmarkManager.AddSkidmarkSegment = function (pos, normal, intensity, lastIndex) {
            if (SkidmarkManager.SkidmarkMesh == null)
                return null;
            SkidmarkManager.TempVector3_POS.set(0, 0, 0);
            SkidmarkManager.TempVector3_DIR.set(0, 0, 0);
            SkidmarkManager.TempVector3_XDIR.set(0, 0, 0);
            SkidmarkManager.TempVector3_SDIR.set(0, 0, 0);
            // ..
            if (intensity > 1.0)
                intensity = 1.0;
            else if (intensity < 0.0)
                return -1.0;
            // ..
            if (lastIndex > 0) {
                pos.subtractToRef(SkidmarkManager.SkidmarkSections[lastIndex].Pos, SkidmarkManager.TempVector3_POS);
                var sqrDistance = SkidmarkManager.TempVector3_POS.lengthSquared();
                if (sqrDistance < SkidmarkManager.MIN_SQR_DISTANCE)
                    return lastIndex;
            }
            // ..
            var curSection = SkidmarkManager.SkidmarkSections[SkidmarkManager.SkidmarkIndex];
            normal.scaleToRef(SkidmarkManager.GROUND_OFFSET, SkidmarkManager.TempVector3_POS);
            pos.addToRef(SkidmarkManager.TempVector3_POS, curSection.Pos);
            curSection.Normal.copyFrom(normal);
            curSection.Intensity = (intensity * SkidmarkManager.TEX_INTENSITY);
            curSection.LastIndex = lastIndex;
            // ..
            if (lastIndex != -1) {
                var lastSection = SkidmarkManager.SkidmarkSections[lastIndex];
                curSection.Pos.subtractToRef(lastSection.Pos, SkidmarkManager.TempVector3_DIR);
                BABYLON.Vector3.CrossToRef(SkidmarkManager.TempVector3_DIR, normal, SkidmarkManager.TempVector3_XDIR);
                SkidmarkManager.TempVector3_XDIR.normalizeToRef(SkidmarkManager.TempVector3_XDIR);
                // ..
                SkidmarkManager.TempVector3_XDIR.scaleToRef(SkidmarkManager.MARK_WIDTH * 0.5, SkidmarkManager.TempVector3_SDIR);
                curSection.Pos.addToRef(SkidmarkManager.TempVector3_SDIR, curSection.Posl);
                curSection.Pos.subtractToRef(SkidmarkManager.TempVector3_SDIR, curSection.Posr);
                curSection.Tangent.set(SkidmarkManager.TempVector3_XDIR.x, SkidmarkManager.TempVector3_XDIR.y, SkidmarkManager.TempVector3_XDIR.z, 1);
                // ..
                if (lastSection.LastIndex === -1) {
                    curSection.Pos.addToRef(SkidmarkManager.TempVector3_SDIR, lastSection.Posl);
                    curSection.Pos.subtractToRef(SkidmarkManager.TempVector3_SDIR, lastSection.Posr);
                    lastSection.Tangent.copyFrom(curSection.Tangent);
                }
            }
            // ..
            SkidmarkManager.AddSkidmarkVertexData();
            var curIndex = SkidmarkManager.SkidmarkIndex;
            SkidmarkManager.SkidmarkIndex = ++SkidmarkManager.SkidmarkIndex % SkidmarkManager.MAX_MARKS;
            return curIndex;
        };
        SkidmarkManager.CreateSkidmarkManager = function (scene) {
            if (SkidmarkManager.SkidmarkMesh == null) {
                var skidmarkMaterial = new BABYLON.StandardMaterial("SkidmarkMaterial", scene);
                skidmarkMaterial.backFaceCulling = false;
                skidmarkMaterial.disableLighting = true;
                skidmarkMaterial.emissiveColor = SkidmarkManager.MARK_COLOR;
                skidmarkMaterial.diffuseColor = SkidmarkManager.MARK_COLOR;
                skidmarkMaterial.diffuseTexture = BABYLON.Utilities.ParseTexture(SkidmarkManager.TEXTURE_MARKS, scene);
                if (skidmarkMaterial.diffuseTexture != null) {
                    skidmarkMaterial.diffuseTexture.hasAlpha = true;
                    skidmarkMaterial.useAlphaFromDiffuseTexture = true;
                }
                skidmarkMaterial.freeze();
                SkidmarkManager.SkidmarkMesh = new BABYLON.Mesh("SkidmarkMesh", scene);
                SkidmarkManager.SkidmarkMesh.material = skidmarkMaterial;
                SkidmarkManager.SkidmarkMesh.alwaysSelectAsActiveMesh = true;
                SkidmarkManager.SkidmarkMesh.doNotSyncBoundingInfo = true;
                SkidmarkManager.SkidmarkMesh.receiveShadows = false;
                SkidmarkManager.SkidmarkMesh.checkCollisions = false;
                SkidmarkManager.SkidmarkMesh.useVertexColors = true;
                SkidmarkManager.SkidmarkMesh.hasVertexAlpha = true;
                SkidmarkManager.SkidmarkMesh.isPickable = false;
                // ..
                // Setup Skidmark Section Properties
                // ..
                SkidmarkManager.SkidmarkSections = new Array(SkidmarkManager.MAX_MARKS);
                for (var i = 0; i < SkidmarkManager.SkidmarkSections.length; i++) {
                    SkidmarkManager.SkidmarkSections[i] = new SkidmarkSection();
                }
                // ..
                // Setup Raw Mesh Vertex Buffer Data
                // ..
                SkidmarkManager.SkidBufferPositions = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 3);
                SkidmarkManager.SkidBufferNormals = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 3);
                SkidmarkManager.SkidBufferTangents = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 4);
                SkidmarkManager.SkidBufferColors = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 4);
                SkidmarkManager.SkidBufferUvs = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 2);
                SkidmarkManager.SkidBufferIndices = new Int32Array(SkidmarkManager.MAX_MARKS * 6);
                // ..
                // Apply Raw Vertex Buffer Data To Mesh
                // ..
                var vertexData = new BABYLON.VertexData();
                vertexData.positions = SkidmarkManager.SkidBufferPositions;
                vertexData.normals = SkidmarkManager.SkidBufferNormals;
                vertexData.tangents = SkidmarkManager.SkidBufferTangents;
                vertexData.colors = SkidmarkManager.SkidBufferColors;
                vertexData.uvs = SkidmarkManager.SkidBufferUvs;
                vertexData.indices = SkidmarkManager.SkidBufferIndices;
                vertexData.applyToMesh(SkidmarkManager.SkidmarkMesh, true);
                SkidmarkManager.SkidmarkMesh.freezeWorldMatrix();
            }
        };
        SkidmarkManager.AddSkidmarkVertexData = function () {
            var curr = SkidmarkManager.SkidmarkSections[SkidmarkManager.SkidmarkIndex];
            if (curr.LastIndex === -1)
                return;
            var last = SkidmarkManager.SkidmarkSections[curr.LastIndex];
            SkidmarkManager.SkidmarkUpdated = true;
            // ..
            // Update Position Buffers Directly
            // ..
            var index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferPositions[index * 3] = last.Posl.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = last.Posl.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = last.Posl.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferPositions[index * 3] = last.Posr.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = last.Posr.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = last.Posr.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferPositions[index * 3] = curr.Posl.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = curr.Posl.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = curr.Posl.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferPositions[index * 3] = curr.Posr.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = curr.Posr.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = curr.Posr.z;
            // ..
            // Update Normal Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferNormals[index * 3] = last.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = last.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = last.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferNormals[index * 3] = last.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = last.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = last.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferNormals[index * 3] = curr.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = curr.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = curr.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferNormals[index * 3] = curr.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = curr.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = curr.Normal.z;
            // ..
            // Update Tangent Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferTangents[index * 4] = last.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = last.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = last.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = last.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferTangents[index * 4] = last.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = last.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = last.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = last.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferTangents[index * 4] = curr.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = curr.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = curr.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = curr.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferTangents[index * 4] = curr.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = curr.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = curr.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = curr.Tangent.w;
            // ..
            // Update Color Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = last.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = last.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = curr.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = curr.Intensity;
            // ..
            // Update Coord Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferUvs[index * 2] = 0;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 0;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferUvs[index * 2] = 1;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 0;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferUvs[index * 2] = 0;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 1;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferUvs[index * 2] = 1;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 1;
            // ..
            // Update Triangle 1 Buffers Directly (QUAD)
            //..
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 0] = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 2] = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 1] = SkidmarkManager.SkidmarkIndex * 4 + 2;
            // ..
            // Update Triangle 2 Buffers Directly (QUAD)
            // ..
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 3] = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 5] = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 4] = SkidmarkManager.SkidmarkIndex * 4 + 3;
        };
        SkidmarkManager.UpdateSkidmarkManager = function () {
            if (SkidmarkManager.SkidmarkMesh != null && SkidmarkManager.SkidmarkUpdated === true) {
                SkidmarkManager.SkidmarkUpdated = false;
                if (SkidmarkManager.SkidmarkMesh.geometry != null) {
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.PositionKind, SkidmarkManager.SkidBufferPositions, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.NormalKind, SkidmarkManager.SkidBufferNormals, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.TangentKind, SkidmarkManager.SkidBufferTangents, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.ColorKind, SkidmarkManager.SkidBufferColors, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.UVKind, SkidmarkManager.SkidBufferUvs, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateIndices(SkidmarkManager.SkidBufferIndices, 0, SkidmarkManager.GPU_TRIANGLES);
                }
            }
        };
        SkidmarkManager.MAX_MARKS = 4096; // Max number of marks total for everyone together
        SkidmarkManager.GROUND_OFFSET = 0.01; // Distance above surface in metres
        SkidmarkManager.VELOCITY_SCALE = 0.02; // Velocity offset scale factor
        SkidmarkManager.GPU_TRIANGLES = true; // GPU quad triangle indices only
        SkidmarkManager.MARK_COLOR = BABYLON.Color3.Black(); // Skidmark Color
        SkidmarkManager.MARK_WIDTH = 0.3; // Width of the Skidmarks. Should match the width of the wheels
        SkidmarkManager.TEX_INTENSITY = 1.0; // Amount of the skidmark texture intensity coeffecient
        SkidmarkManager.MIN_DISTANCE = 0.1; // Distance between skid texture sections in metres. Bigger = better performance, less smooth
        SkidmarkManager.MIN_SQR_DISTANCE = (SkidmarkManager.MIN_DISTANCE * SkidmarkManager.MIN_DISTANCE);
        SkidmarkManager.TEXTURE_MARKS = null;
        SkidmarkManager.SkidBufferPositions = null;
        SkidmarkManager.SkidBufferNormals = null;
        SkidmarkManager.SkidBufferTangents = null;
        SkidmarkManager.SkidBufferColors = null;
        SkidmarkManager.SkidBufferUvs = null;
        SkidmarkManager.SkidBufferIndices = null;
        SkidmarkManager.SkidmarkSections = null;
        SkidmarkManager.SkidmarkIndex = 0;
        SkidmarkManager.SkidmarkMesh = null;
        SkidmarkManager.SkidmarkUpdated = false;
        SkidmarkManager.TempVector3_POS = new BABYLON.Vector3(0, 0, 0);
        SkidmarkManager.TempVector3_DIR = new BABYLON.Vector3(0, 0, 0);
        SkidmarkManager.TempVector3_XDIR = new BABYLON.Vector3(0, 0, 0);
        SkidmarkManager.TempVector3_SDIR = new BABYLON.Vector3(0, 0, 0);
        SkidmarkManager.SkidThreashold = 0.5;
        return SkidmarkManager;
    }(BABYLON.ScriptComponent));
    PROJECT.SkidmarkManager = SkidmarkManager;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon standard rigidbody vehicle controller class (Native Bullet Physics 2.82)
     * @class StandardCarController
     */
    var StandardCarController = /** @class */ (function (_super) {
        __extends(StandardCarController, _super);
        function StandardCarController(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this._rigidbody = null;
            _this._engineAudioSource = null;
            _this._skidAudioSource = null;
            _this.gearIndex = 0; // First Gear Ratio
            _this.shiftingGears = false;
            _this.engineForce = 0;
            _this.forwardSpeed = 0;
            _this.absoluteSpeed = 0;
            _this.americanSpeed = 0;
            _this.normalizedSpeed = 0;
            _this.frontWheelPower = 0;
            _this.backWheelPower = 0;
            _this.wheelBrakingForce = 0;
            _this.visualSteerAngle = 0;
            _this.physicsSteerAngle = 0;
            _this.raycastVehicle = null;
            _this.frontLeftWheelMesh = null;
            _this.frontRightWheelMesh = null;
            _this.backLeftWheelMesh = null;
            _this.backRightWheelMesh = null;
            _this.frontLeftWheelTrans = null;
            _this.frontRightWheelTrans = null;
            _this.backLeftWheelTrans = null;
            _this.backRightWheelTrans = null;
            _this.frontLeftWheelCollider = null;
            _this.frontRightWheelCollider = null;
            _this.backLeftWheelCollider = null;
            _this.backRightWheelCollider = null;
            _this.engineTorqueCurve = null;
            _this.wheelRadius = 0;
            _this.shiftDelay = 0;
            _this.engineRPM = 0;
            //private clutchSlip:number = 0;
            //private lerpedRPM:number = 0;
            //private oldRPM:number = 0;
            _this.FRONT_LEFT = -1;
            _this.FRONT_RIGHT = -1;
            _this.BACK_LEFT = -1;
            _this.BACK_RIGHT = -1;
            _this.onUpdateVehicleInformation = null;
            _this.smokeTexture = null;
            _this.shadowTexture = null;
            _this.maxTurnAngle = 0.3;
            _this.maxBurnAngle = 0.5;
            _this.addSteerBoost = 10;
            _this.setEngineTorque = null;
            _this.topEngineSpeed = 120;
            _this.baseEnginePower = 1000;
            _this.lowSpeedAngle = 0.165;
            _this.highSpeedAngle = 0.015;
            _this.lowSpeedTurning = 0.015;
            _this.highSpeedTurning = 0.005;
            _this.stableDownForce = 1.0;
            _this.transmissionRatio = 0.7;
            _this.differentialRatio = 3.55;
            _this.maxReversePower = 0.66;
            _this.lerpEnginePitching = 5000;
            _this.maxBrakingForce = 100;
            _this.handBrakingForce = 2500;
            _this.linearBrakingForce = 0.35;
            _this.angularBrakingForce = 0.0;
            _this.wheelLockFriction = 1.0;
            _this.wheelBurnFriction = 1.0;
            _this.defaultLerpSpeed = 0.65;
            _this.driftingLerpSpeed = 0.25;
            _this.burnoutLerpSpeed = 0.1;
            _this.burnoutTimeDelay = 1.5;
            _this.burnoutDonutBoost = 0.0;
            _this.burnoutCoefficient = 0.0;
            _this.burnoutTriggerMark = 10;
            _this.wheelDriveType = 0;
            _this.gearBoxShiftDelay = 0.3;
            _this.gearBoxShiftNext = 3500;
            _this.gearBoxShiftDown = 2500;
            _this.gearBoxShiftRatios = [3.437, 0.00, 3.626, 2.2, 1.541, 1.213, 1.0, 0.767];
            _this.gearBoxShiftScales = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0];
            _this.m_frontLeftWheel = null;
            _this.m_frontRightWheel = null;
            _this.m_backLeftWheel = null;
            _this.m_backRightWheel = null;
            _this.m_physicsWorld = null;
            _this.m_frontLeftWheelSkid = -1;
            _this.m_frontRightWheelSkid = -1;
            _this.m_backLeftWheelSkid = -1;
            _this.m_backRightWheelSkid = -1;
            _this.m_velocityOffset = new BABYLON.Vector3(0, 0, 0);
            ////////////////////////////////////////////////////
            // Public Vehicle Controller Movement Functions   //
            ////////////////////////////////////////////////////
            _this.burnoutTimer = 0;
            _this.restoreTimer = 0;
            _this.cooldownTimer = 0;
            _this.wheelDonuts = false;
            _this.wheelBurnout = false;
            _this.wheelSkidding = false;
            _this.allowedTurningAngle = 0;
            _this.allowedTurningIncement = 0;
            _this.engineForce = 0;
            _this.frontWheelPower = 0;
            _this.backWheelPower = 0;
            _this.wheelBrakingForce = 0;
            _this.visualSteerAngle = 0;
            _this.physicsSteerAngle = 0;
            _this.m_physicsWorld = BABYLON.SceneManager.GetPhysicsWorld(_this.scene);
            _this.smokeTexture = _this.getEditorProperty("smokeTexture", _this.smokeTexture);
            _this.shadowTexture = _this.getEditorProperty("shadowTexture", _this.shadowTexture);
            _this.setEngineTorque = _this.getEditorProperty("setEngineTorque", _this.setEngineTorque);
            _this.topEngineSpeed = _this.getEditorProperty("topEngineSpeed", _this.topEngineSpeed);
            _this.baseEnginePower = _this.getEditorProperty("baseEnginePower", _this.baseEnginePower);
            _this.maxReversePower = _this.getEditorProperty("maxReversePower", _this.maxReversePower);
            _this.stableDownForce = _this.getEditorProperty("stableDownForce", _this.stableDownForce);
            _this.maxTurnAngle = _this.getEditorProperty("maxTurnAngle", _this.maxTurnAngle);
            _this.maxBurnAngle = _this.getEditorProperty("maxBurnAngle", _this.maxBurnAngle);
            _this.addSteerBoost = _this.getEditorProperty("addSteerBoost", _this.addSteerBoost);
            _this.lowSpeedAngle = _this.getEditorProperty("lowSpeedAngle", _this.lowSpeedAngle);
            _this.highSpeedAngle = _this.getEditorProperty("highSpeedAngle", _this.highSpeedAngle);
            _this.wheelDriveType = _this.getEditorProperty("wheelDriveType", _this.wheelDriveType);
            _this.maxBrakingForce = _this.getEditorProperty("maxBrakingForce", _this.maxBrakingForce);
            _this.handBrakingForce = _this.getEditorProperty("handBrakingForce", _this.handBrakingForce);
            _this.linearBrakingForce = _this.getEditorProperty("linearBrakingForce", _this.linearBrakingForce);
            _this.angularBrakingForce = _this.getEditorProperty("angularBrakingForce", _this.angularBrakingForce);
            _this.wheelBurnFriction = _this.getEditorProperty("wheelBurnFriction", _this.wheelBurnFriction);
            _this.wheelLockFriction = _this.getEditorProperty("wheelLockFriction", _this.wheelLockFriction);
            _this.lowSpeedTurning = _this.getEditorProperty("lowSpeedTurning", _this.lowSpeedTurning);
            _this.highSpeedTurning = _this.getEditorProperty("highSpeedTurning", _this.highSpeedTurning);
            _this.frontLeftWheelTrans = _this.getEditorProperty("frontLeftWheelMesh", _this.frontLeftWheelTrans);
            _this.frontRightWheelTrans = _this.getEditorProperty("frontRightWheelMesh", _this.frontRightWheelTrans);
            _this.backLeftWheelTrans = _this.getEditorProperty("rearLeftWheelMesh", _this.backLeftWheelTrans);
            _this.backRightWheelTrans = _this.getEditorProperty("rearRightWheelMesh", _this.backRightWheelTrans);
            _this.frontLeftWheelCollider = _this.getEditorProperty("frontLeftWheelCollider", _this.frontLeftWheelCollider);
            _this.frontRightWheelCollider = _this.getEditorProperty("frontRightWheelCollider", _this.frontRightWheelCollider);
            _this.backLeftWheelCollider = _this.getEditorProperty("rearLeftWheelCollider", _this.backLeftWheelCollider);
            _this.backRightWheelCollider = _this.getEditorProperty("rearRightWheelCollider", _this.backRightWheelCollider);
            _this.defaultLerpSpeed = _this.getEditorProperty("defaultLerpSpeed", _this.defaultLerpSpeed);
            _this.driftingLerpSpeed = _this.getEditorProperty("driftingLerpSpeed", _this.driftingLerpSpeed);
            _this.burnoutLerpSpeed = _this.getEditorProperty("burnoutLerpSpeed", _this.burnoutLerpSpeed);
            _this.burnoutTimeDelay = _this.getEditorProperty("burnoutTimeDelay", _this.burnoutTimeDelay);
            _this.burnoutDonutBoost = _this.getEditorProperty("burnoutDonutBoost", _this.burnoutDonutBoost);
            _this.burnoutCoefficient = _this.getEditorProperty("burnoutCoefficient", _this.burnoutCoefficient);
            _this.burnoutTriggerMark = _this.getEditorProperty("burnoutTriggerMark", _this.burnoutTriggerMark);
            _this.lerpEnginePitching = _this.getEditorProperty("lerpEnginePitching", _this.lerpEnginePitching);
            _this.differentialRatio = _this.getEditorProperty("gearBoxDifferential", _this.differentialRatio);
            _this.transmissionRatio = _this.getEditorProperty("gearBoxOverdrive", _this.transmissionRatio);
            _this.gearBoxShiftNext = _this.getEditorProperty("gearBoxShiftNext", _this.gearBoxShiftNext);
            _this.gearBoxShiftDown = _this.getEditorProperty("gearBoxShiftDown", _this.gearBoxShiftDown);
            _this.gearBoxShiftDelay = _this.getEditorProperty("gearBoxShiftDelay", _this.gearBoxShiftDelay);
            _this.gearBoxShiftRatios = _this.getEditorProperty("gearBoxShiftRatios", _this.gearBoxShiftRatios);
            _this.gearBoxShiftScales = _this.getEditorProperty("gearBoxShiftScales", _this.gearBoxShiftScales);
            if (_this.maxTurnAngle <= 0)
                _this.maxTurnAngle = 0.3;
            if (_this.maxBurnAngle <= 0)
                _this.maxBurnAngle = 0.5;
            if (_this.addSteerBoost <= 0)
                _this.addSteerBoost = 10;
            if (_this.lowSpeedAngle <= 0)
                _this.lowSpeedAngle = 0.165;
            if (_this.highSpeedAngle <= 0)
                _this.highSpeedAngle = 0.015;
            if (_this.lowSpeedTurning <= 0)
                _this.lowSpeedTurning = 0.015;
            if (_this.highSpeedTurning <= 0)
                _this.highSpeedTurning = 0.005;
            if (_this.lerpEnginePitching <= 0)
                _this.lerpEnginePitching = 5000;
            if (_this.baseEnginePower <= 0)
                _this.baseEnginePower = 1000;
            if (_this.topEngineSpeed <= 0)
                _this.topEngineSpeed = 120;
            if (_this.gearBoxShiftNext <= 0)
                _this.gearBoxShiftNext = 4500;
            if (_this.gearBoxShiftDown <= 0)
                _this.gearBoxShiftNext = 3000;
            if (_this.gearBoxShiftDelay <= 0)
                _this.gearBoxShiftDelay = 0.3;
            if (_this.transmissionRatio <= 0)
                _this.transmissionRatio = 1;
            if (_this.differentialRatio <= 0)
                _this.differentialRatio = 1;
            if (_this.defaultLerpSpeed <= 0)
                _this.defaultLerpSpeed = 1;
            if (_this.driftingLerpSpeed <= 0)
                _this.driftingLerpSpeed = 1;
            if (_this.burnoutLerpSpeed <= 0)
                _this.burnoutLerpSpeed = 1;
            if (_this.burnoutTimeDelay <= 0)
                _this.burnoutTimeDelay = 1;
            if (_this.setEngineTorque != null) {
                // TODO: USE ENGINE TORQUE CURVES
                // console.warn("Setup Engine Torque Animation");
                // console.log(this.setEngineTorque);
            }
            return _this;
        }
        StandardCarController.prototype.getRigidbodyPhysics = function () { return this._rigidbody; };
        StandardCarController.prototype.getRaycastVehicle = function () { return this.raycastVehicle; };
        StandardCarController.prototype.getAbsoluteSpeed = function () { return this.absoluteSpeed; };
        StandardCarController.prototype.getNormalizedSpeed = function () { return this.normalizedSpeed; };
        StandardCarController.prototype.getCurrentGearIndex = function () { return this.gearIndex; };
        StandardCarController.prototype.getCurrentEngineRPM = function () { return this.engineRPM; };
        StandardCarController.prototype.getCurrentEnginePitch = function () { return BABYLON.Scalar.Clamp((this.engineRPM / this.lerpEnginePitching) + 0.1); };
        StandardCarController.prototype.getGearShiftRatioCount = function () { return (this.gearBoxShiftRatios != null) ? this.gearBoxShiftRatios.length : 0; };
        StandardCarController.prototype.getSmokeTextureInfo = function () { return this.smokeTexture; };
        StandardCarController.prototype.getShadowTextureInfo = function () { return this.shadowTexture; };
        StandardCarController.prototype.getFrontLeftWheelNode = function () { return this.frontLeftWheelMesh; };
        StandardCarController.prototype.getFrontRightWheelNode = function () { return this.frontRightWheelMesh; };
        StandardCarController.prototype.getBackLeftWheelNode = function () { return this.backLeftWheelMesh; };
        StandardCarController.prototype.getBackRightWheelNode = function () { return this.backRightWheelMesh; };
        StandardCarController.prototype.getWheelBurnoutEnabled = function () { return this.wheelBurnout; };
        StandardCarController.prototype.start = function () { this.initVehicleState(); };
        StandardCarController.prototype.update = function () { this.updateVehicleState(); };
        StandardCarController.prototype.destroy = function () { this.destroyVehicleState(); };
        //////////////////////////////////////////////////
        // Protected Vehicle Movement State Functions //
        //////////////////////////////////////////////////
        StandardCarController.prototype.initVehicleState = function () {
            BABYLON.Utilities.ValidateTransformQuaternion(this.transform);
            // Setup Engine Audio
            this._engineAudioSource = this.getComponent("BABYLON.AudioSource");
            if (this._engineAudioSource == null)
                BABYLON.Tools.Warn("No engine audio source manager found for: " + this.transform.name);
            // Setup Raycast Vehicle
            this._rigidbody = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this._rigidbody != null) {
                if (this._rigidbody.hasRaycastVehicle()) {
                    this.raycastVehicle = this._rigidbody.getRaycastVehicle();
                    if (this.raycastVehicle != null) {
                        this._rigidbody.setDamping(0, 0); // Default Vehicle Drag Damping
                        var frontLeftWheelName = (this.frontLeftWheelTrans != null && this.frontLeftWheelTrans.name != null && this.frontLeftWheelTrans.name !== "") ? this.frontLeftWheelTrans.name : null;
                        var frontRightWheelName = (this.frontRightWheelTrans != null && this.frontRightWheelTrans.name != null && this.frontRightWheelTrans.name !== "") ? this.frontRightWheelTrans.name : null;
                        var backLeftWheelName = (this.backLeftWheelTrans != null && this.backLeftWheelTrans.name != null && this.backLeftWheelTrans.name !== "") ? this.backLeftWheelTrans.name : null;
                        var backRightWheelName = (this.backRightWheelTrans != null && this.backRightWheelTrans.name != null && this.backRightWheelTrans.name !== "") ? this.backRightWheelTrans.name : null;
                        var frontLeftWheelLabel = (this.frontLeftWheelCollider != null && this.frontLeftWheelCollider.name != null && this.frontLeftWheelCollider.name !== "") ? this.frontLeftWheelCollider.name : null;
                        var frontRightWheelLabel = (this.frontRightWheelCollider != null && this.frontRightWheelCollider.name != null && this.frontRightWheelCollider.name !== "") ? this.frontRightWheelCollider.name : null;
                        var backLeftWheelLabel = (this.backLeftWheelCollider != null && this.backLeftWheelCollider.name != null && this.backLeftWheelCollider.name !== "") ? this.backLeftWheelCollider.name : null;
                        var backRightWheelLabel = (this.backRightWheelCollider != null && this.backRightWheelCollider.name != null && this.backRightWheelCollider.name !== "") ? this.backRightWheelCollider.name : null;
                        // Get Wheel Indexs from Wheel Names
                        if (frontLeftWheelLabel != null)
                            this.FRONT_LEFT = this.raycastVehicle.getWheelIndexByName(frontLeftWheelLabel);
                        if (frontRightWheelLabel != null)
                            this.FRONT_RIGHT = this.raycastVehicle.getWheelIndexByName(frontRightWheelLabel);
                        if (backLeftWheelLabel != null)
                            this.BACK_LEFT = this.raycastVehicle.getWheelIndexByName(backLeftWheelLabel);
                        if (backRightWheelLabel != null)
                            this.BACK_RIGHT = this.raycastVehicle.getWheelIndexByName(backRightWheelLabel);
                        // Setup Wheel Info And Transform Meshes
                        if (this.raycastVehicle.getNumWheels() >= 4) {
                            if (this.FRONT_LEFT >= 0 && frontLeftWheelName != null) {
                                this.m_frontLeftWheel = this.raycastVehicle.getWheelInfo(this.FRONT_LEFT);
                                this.frontLeftWheelMesh = this.getChildTransform(frontLeftWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.frontLeftWheelMesh != null) {
                                    this.m_frontLeftWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.frontLeftWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.FRONT_LEFT, this.frontLeftWheelMesh);
                                    if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_frontLeftWheel != null) {
                                            this.wheelRadius = this.m_frontLeftWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.FRONT_RIGHT >= 0 && frontRightWheelName != null) {
                                this.m_frontRightWheel = this.raycastVehicle.getWheelInfo(this.FRONT_RIGHT);
                                this.frontRightWheelMesh = this.getChildTransform(frontRightWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.frontRightWheelMesh != null) {
                                    this.m_frontRightWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.frontRightWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.FRONT_RIGHT, this.frontRightWheelMesh);
                                    if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_frontRightWheel != null) {
                                            this.wheelRadius = this.m_frontRightWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.BACK_LEFT >= 0 && backLeftWheelName != null) {
                                this.m_backLeftWheel = this.raycastVehicle.getWheelInfo(this.BACK_LEFT);
                                this.backLeftWheelMesh = this.getChildTransform(backLeftWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.backLeftWheelMesh != null) {
                                    this.m_backLeftWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.backLeftWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.BACK_LEFT, this.backLeftWheelMesh);
                                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_backLeftWheel != null) {
                                            this.wheelRadius = this.m_backLeftWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.BACK_RIGHT >= 0 && backRightWheelName != null) {
                                this.m_backRightWheel = this.raycastVehicle.getWheelInfo(this.BACK_RIGHT);
                                this.backRightWheelMesh = this.getChildTransform(backRightWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.backRightWheelMesh != null) {
                                    this.m_backRightWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.backRightWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.BACK_RIGHT, this.backRightWheelMesh);
                                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_backRightWheel != null) {
                                            this.wheelRadius = this.m_backRightWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this._skidAudioSource == null && this.backRightWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.backRightWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.backLeftWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.backLeftWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.frontRightWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.frontRightWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.frontLeftWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.frontLeftWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null)
                                BABYLON.Tools.Warn("No skid audio source manager found for: " + this.transform.name);
                        }
                        else {
                            BABYLON.Tools.Warn("Invalid vehicle controller wheel count info for: " + this.transform.name);
                        }
                    }
                    else {
                        BABYLON.Tools.Warn("Failed to create vehicle controller for: " + this.transform.name);
                    }
                }
                else {
                    BABYLON.Tools.Warn("No wheel collider information found for: " + this.transform.name);
                }
            }
            else {
                BABYLON.Tools.Warn("Failed to get rigidbody component: " + this.transform.name);
            }
        };
        StandardCarController.prototype.updateVehicleState = function () {
            var deltaTime = this.getDeltaSeconds();
            ///////////////////////////////////////
            // Double Check Gear Index - ???
            ///////////////////////////////////////
            if (this.gearIndex < 0)
                this.gearIndex = 0;
            else if (this.gearIndex >= this.getGearShiftRatioCount())
                this.gearIndex = (this.getGearShiftRatioCount() - 1);
            ///////////////////////////////////////
            // Handle Shift Delay Flag - ???
            ///////////////////////////////////////
            if (this.shiftDelay > 0) {
                this.shiftDelay -= deltaTime;
            }
            if (this.shiftDelay <= 0) {
                this.shiftDelay = 0;
                this.shiftingGears = false;
            }
            ///////////////////////////////////////
            if (this._rigidbody != null && this.raycastVehicle != null) {
                this.forwardSpeed = this.raycastVehicle.getRawCurrentSpeedKph();
                if (this.forwardSpeed < 0.2)
                    this.forwardSpeed = 0;
                // ..
                this.absoluteSpeed = this.raycastVehicle.getAbsCurrentSpeedKph();
                if (this.absoluteSpeed < 0.2)
                    this.absoluteSpeed = 0;
                this.americanSpeed = (this.absoluteSpeed * BABYLON.System.Kph2Mph);
                this.normalizedSpeed = BABYLON.Scalar.Clamp((this.absoluteSpeed / this.topEngineSpeed));
                // ..
                if (this.gearBoxShiftRatios != null && this.gearIndex >= 0 && this.gearIndex < this.getGearShiftRatioCount()) {
                    var wheelDiameter = (this.wheelRadius * 2 * BABYLON.System.Meter2Inch);
                    var finalGearRatio = (this.gearBoxShiftRatios[this.gearIndex] * this.differentialRatio * this.transmissionRatio);
                    this.engineRPM = (this.americanSpeed * finalGearRatio * 336) / wheelDiameter + 1000;
                    // ..
                    // Update Engine Gear Box
                    // ..
                    if (this.americanSpeed < 5) {
                        this.gearIndex = 0;
                    }
                    else {
                        if (this.gearIndex > 0) {
                            if (this.engineRPM < this.gearBoxShiftDown) {
                                this.gearIndex--;
                                this.shiftDelay = 0;
                                this.shiftingGears = false;
                            }
                        }
                        if (this.gearIndex < 5) {
                            if (this.engineRPM > this.gearBoxShiftNext) {
                                this.gearIndex++;
                                this.shiftDelay = this.gearBoxShiftDelay;
                                this.shiftingGears = true;
                            }
                        }
                    }
                }
            }
            // Account for further movement since the last wheel update
            var velocityScale = PROJECT.SkidmarkManager.GetVelocityScale();
            if (velocityScale > 0.0 && this._rigidbody != null) {
                this.m_velocityOffset.copyFrom(this._rigidbody.getLinearVelocity());
                this.m_velocityOffset.scaleInPlace(velocityScale);
            }
            // Update Engine Sound Pitch
            if (this._engineAudioSource != null) {
                var engineSoundClip = this._engineAudioSource.getSoundClip();
                if (engineSoundClip != null)
                    engineSoundClip.setPlaybackRate(this.getCurrentEnginePitch() * 0.75);
            }
            // Update Wheel Skidding Info
            var skid_FL = 0, skid_FR = 0, skid_RL = 0, skid_RR = 0;
            var skidThreashold = PROJECT.SkidmarkManager.SkidThreashold;
            if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                if (this.m_frontLeftWheel != null) {
                    skid_FL = BABYLON.Scalar.Clamp((1 - this.m_frontLeftWheel.get_m_skidInfo()));
                    if (skid_FL < skidThreashold)
                        skid_FL = 0;
                    if (skid_FL > 0) {
                        var contactPointFL = this.m_frontLeftWheel.get_m_raycastInfo().get_m_contactPointWS();
                        var contactNormalFL = this.m_frontLeftWheel.get_m_raycastInfo().get_m_contactNormalWS();
                        var skidPosFL = new BABYLON.Vector3(contactPointFL.x(), contactPointFL.y(), contactPointFL.z());
                        var skidNormFL = new BABYLON.Vector3(contactNormalFL.x(), contactNormalFL.y(), contactNormalFL.z());
                        var skidScaleFL = BABYLON.Scalar.Normalize(skid_FL, skidThreashold, 1.0);
                        if (velocityScale > 0.0)
                            skidPosFL.addInPlace(this.m_velocityOffset);
                        this.m_frontLeftWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosFL, skidNormFL, skidScaleFL, this.m_frontLeftWheelSkid);
                    }
                    else {
                        this.m_frontLeftWheelSkid = -1;
                    }
                }
                if (this.m_frontRightWheel != null) {
                    skid_FR = BABYLON.Scalar.Clamp((1 - this.m_frontRightWheel.get_m_skidInfo()));
                    if (skid_FR < skidThreashold)
                        skid_FR = 0;
                    if (skid_FR > 0) {
                        var contactPointFR = this.m_frontRightWheel.get_m_raycastInfo().get_m_contactPointWS();
                        var contactNormalFR = this.m_frontRightWheel.get_m_raycastInfo().get_m_contactNormalWS();
                        var skidPosFR = new BABYLON.Vector3(contactPointFR.x(), contactPointFR.y(), contactPointFR.z());
                        var skidNormFR = new BABYLON.Vector3(contactNormalFR.x(), contactNormalFR.y(), contactNormalFR.z());
                        var skidScaleFR = BABYLON.Scalar.Normalize(skid_FR, skidThreashold, 1.0);
                        if (velocityScale > 0.0)
                            skidPosFR.addInPlace(this.m_velocityOffset);
                        this.m_frontRightWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosFR, skidNormFR, skidScaleFR, this.m_frontRightWheelSkid);
                    }
                    else {
                        this.m_frontRightWheelSkid = -1;
                    }
                }
                if (this.wheelBurnout == true || this.restoreTimer > 0) {
                    skid_FL *= 0.75;
                    skid_FR *= 0.75;
                }
                ///////////////////////////////
                // Half Skid For Front Wheels
                ///////////////////////////////
                skid_FL *= 0.5;
                skid_FR *= 0.5;
            }
            if (this.m_backLeftWheel != null) {
                skid_RL = BABYLON.Scalar.Clamp((1 - this.m_backLeftWheel.get_m_skidInfo()));
                if (skid_RL < skidThreashold)
                    skid_RL = 0;
                if (skid_RL > 0) {
                    var contactPointRL = this.m_backLeftWheel.get_m_raycastInfo().get_m_contactPointWS();
                    var contactNormalRL = this.m_backLeftWheel.get_m_raycastInfo().get_m_contactNormalWS();
                    var skidPosRL = new BABYLON.Vector3(contactPointRL.x(), contactPointRL.y(), contactPointRL.z());
                    var skidNormRL = new BABYLON.Vector3(contactNormalRL.x(), contactNormalRL.y(), contactNormalRL.z());
                    var skidScaleRL = BABYLON.Scalar.Normalize(skid_RL, skidThreashold, 1.0);
                    if (velocityScale > 0.0)
                        skidPosRL.addInPlace(this.m_velocityOffset);
                    this.m_backLeftWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosRL, skidNormRL, skidScaleRL, this.m_backLeftWheelSkid);
                }
                else {
                    this.m_backLeftWheelSkid = -1;
                }
            }
            if (this.m_backRightWheel != null) {
                skid_RR = BABYLON.Scalar.Clamp((1 - this.m_backRightWheel.get_m_skidInfo()));
                if (skid_RR < skidThreashold)
                    skid_RR = 0;
                if (skid_RR > 0) {
                    var contactPointRR = this.m_backRightWheel.get_m_raycastInfo().get_m_contactPointWS();
                    var contactNormalRR = this.m_backRightWheel.get_m_raycastInfo().get_m_contactNormalWS();
                    var skidPosRR = new BABYLON.Vector3(contactPointRR.x(), contactPointRR.y(), contactPointRR.z());
                    var skidNormRR = new BABYLON.Vector3(contactNormalRR.x(), contactNormalRR.y(), contactNormalRR.z());
                    var skidScaleRR = BABYLON.Scalar.Normalize(skid_RR, skidThreashold, 1.0);
                    if (velocityScale > 0.0)
                        skidPosRR.addInPlace(this.m_velocityOffset);
                    this.m_backRightWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosRR, skidNormRR, skidScaleRR, this.m_backRightWheelSkid);
                }
                else {
                    this.m_backRightWheelSkid = -1;
                }
            }
            if (this.wheelBurnout == true || this.restoreTimer > 0) {
                skid_RL *= 0.75;
                skid_RR *= 0.75;
            }
            ///////////////////////////////////////////
            // Play Skid Audio Track
            ///////////////////////////////////////////
            var skidding = 0;
            if (skid_FL > skidding)
                skidding = skid_FL;
            if (skid_FR > skidding)
                skidding = skid_FR;
            if (skid_RL > skidding)
                skidding = skid_RL;
            if (skid_RR > skidding)
                skidding = skid_RR;
            ///////////////////////////////////////////
            if (this._skidAudioSource != null) {
                var skidSoundClip = this._skidAudioSource.getSoundClip();
                if (skidSoundClip != null)
                    skidSoundClip.setPlaybackRate(skidding);
            }
            ///////////////////////////////////////////
            // Final Vehicle Information Update
            ///////////////////////////////////////////
            if (this.onUpdateVehicleInformation != null) {
                this.onUpdateVehicleInformation(skid_FL, skid_FR, skid_RL, skid_RR);
            }
        };
        StandardCarController.prototype.destroyVehicleState = function () {
            this._rigidbody = null;
            this._engineAudioSource = null;
            this._skidAudioSource = null;
            if (this.m_frontLeftWheel != null) {
                Ammo.destroy(this.m_frontLeftWheel); // ???
                this.m_frontLeftWheel = null;
            }
            if (this.m_frontRightWheel != null) {
                Ammo.destroy(this.m_frontRightWheel); // ???
                this.m_frontRightWheel = null;
            }
            if (this.m_backLeftWheel != null) {
                Ammo.destroy(this.m_backLeftWheel); // ???
                this.m_backLeftWheel = null;
            }
            if (this.m_backRightWheel != null) {
                Ammo.destroy(this.m_backRightWheel); // ???
                this.m_backRightWheel = null;
            }
            this.m_physicsWorld = null;
            this.raycastVehicle = null;
            this.frontLeftWheelMesh = null;
            this.frontRightWheelMesh = null;
            this.backLeftWheelMesh = null;
            this.backRightWheelMesh = null;
            this.frontLeftWheelTrans = null;
            this.frontRightWheelTrans = null;
            this.backLeftWheelTrans = null;
            this.backRightWheelTrans = null;
            this.frontLeftWheelCollider = null;
            this.frontRightWheelCollider = null;
            this.backLeftWheelCollider = null;
            this.backRightWheelCollider = null;
        };
        /** Drives the raycast vehicle with the specfied movement and hand braking properties. */
        StandardCarController.prototype.drive = function (forward, turn, braking) {
            if (braking === void 0) { braking = false; }
            if (this._rigidbody == null || this.raycastVehicle == null)
                return;
            if (this.FRONT_LEFT >= 0 && this.FRONT_RIGHT >= 0 && this.BACK_LEFT >= 0 && this.BACK_RIGHT >= 0) {
                var deltaTime = this.getDeltaSeconds();
                this.engineForce = 0;
                this.wheelBrakingForce = 0;
                this.frontWheelPower = 0;
                this.backWheelPower = 0;
                // ..
                // Update Engine Forces
                // ..
                var gearShiftScale = (this.gearBoxShiftScales != null && this.gearBoxShiftScales.length > this.gearIndex) ? this.gearBoxShiftScales[this.gearIndex] : 1.0;
                var gearShiftRatio = (this.gearBoxShiftRatios != null && this.gearBoxShiftRatios.length > this.gearIndex) ? this.gearBoxShiftRatios[this.gearIndex] : 1.0;
                var finalGearRatio = (gearShiftRatio * this.differentialRatio * this.transmissionRatio);
                var engineMotorTorque = this.getVehicleEngineTorque(this.engineRPM) * Math.abs(forward) * gearShiftScale;
                var allowedEnginePower = (engineMotorTorque * finalGearRatio);
                if (forward > 0.1) { // Forward
                    if (this.forwardSpeed < -1)
                        this.wheelBrakingForce = this.maxBrakingForce;
                    else
                        this.engineForce = allowedEnginePower;
                }
                else if (forward < -0.1) { // Reverse
                    if (this.forwardSpeed > 1)
                        this.wheelBrakingForce = this.maxBrakingForce;
                    else
                        this.engineForce = -(allowedEnginePower * this.maxReversePower);
                }
                else {
                    this.engineForce = 0;
                    this.wheelBrakingForce = 10; // Static
                }
                if (this.shiftingGears === true || this.americanSpeed > this.topEngineSpeed)
                    this.engineForce = 0;
                // ..
                // Update Physics Turn Angle (Actual Steering)
                // ..
                this.allowedTurningAngle = BABYLON.Scalar.Lerp(this.lowSpeedAngle, this.highSpeedAngle, this.normalizedSpeed);
                this.allowedTurningIncement = BABYLON.Scalar.Lerp(this.lowSpeedTurning, this.highSpeedTurning, this.normalizedSpeed);
                if (this.wheelBurnout === true && this.wheelDonuts === true) {
                    this.allowedTurningAngle = this.maxBurnAngle;
                }
                this.allowedTurningAngle = BABYLON.Scalar.Clamp(this.allowedTurningAngle, 0, 0.6);
                if (turn > 0) { // Right
                    if (this.physicsSteerAngle < this.allowedTurningAngle) {
                        this.physicsSteerAngle += (this.allowedTurningIncement);
                    }
                }
                else if (turn < 0) { // Left
                    if (this.physicsSteerAngle > -this.allowedTurningAngle) {
                        this.physicsSteerAngle -= (this.allowedTurningIncement);
                    }
                }
                else {
                    if (this.physicsSteerAngle < -this.allowedTurningIncement) {
                        this.physicsSteerAngle += this.allowedTurningIncement;
                    }
                    else {
                        if (this.physicsSteerAngle > this.allowedTurningIncement) {
                            this.physicsSteerAngle -= this.allowedTurningIncement;
                        }
                        else {
                            this.physicsSteerAngle = 0;
                        }
                    }
                }
                // ..
                // Update Visual Turn Angle (No Steering Effect)
                // ..
                if (this.wheelBurnout === true || this.wheelSkidding == true) {
                    this.allowedTurningIncement = this.lowSpeedTurning;
                    this.allowedTurningAngle = (this.wheelBurnout === true) ? this.maxBurnAngle : this.maxTurnAngle;
                }
                else {
                    this.allowedTurningIncement = BABYLON.Scalar.Lerp(this.lowSpeedTurning, this.highSpeedTurning, this.normalizedSpeed);
                    this.allowedTurningAngle = BABYLON.Scalar.Lerp(this.lowSpeedAngle, this.highSpeedAngle, this.normalizedSpeed);
                    this.allowedTurningAngle += (this.addSteerBoost * BABYLON.System.Deg2Rad);
                }
                if (turn > 0) { // Right
                    if (this.visualSteerAngle < this.allowedTurningAngle) {
                        this.visualSteerAngle += (this.allowedTurningIncement);
                    }
                }
                else if (turn < 0) { // Left
                    if (this.visualSteerAngle > -this.allowedTurningAngle) {
                        this.visualSteerAngle -= (this.allowedTurningIncement);
                    }
                }
                else {
                    if (this.visualSteerAngle < -this.allowedTurningIncement) {
                        this.visualSteerAngle += this.allowedTurningIncement;
                    }
                    else {
                        if (this.visualSteerAngle > this.allowedTurningIncement) {
                            this.visualSteerAngle -= this.allowedTurningIncement;
                        }
                        else {
                            this.visualSteerAngle = 0;
                        }
                    }
                }
                // ..
                // Update Raycast Vehicle Controls
                // ..
                var updateFriction = true;
                if (braking === true && this.handBrakingForce > 0) {
                    this.burnoutTimer = 0;
                    this.wheelBurnout = false;
                    this.wheelDonuts = false;
                    // ..
                    // Validate Wheel Skidding Mode
                    // ..
                    if (this.raycastVehicle.lockedWheelIndexes == null)
                        this.raycastVehicle.lockedWheelIndexes = [this.BACK_LEFT, this.BACK_RIGHT];
                    if (this.americanSpeed >= 5) {
                        if (this.wheelSkidding === false) {
                            this.wheelSkidding = true;
                            if (this.m_frontLeftWheel != null)
                                this.m_frontLeftWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_frontRightWheel != null)
                                this.m_frontRightWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_backLeftWheel != null)
                                this.m_backLeftWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_backRightWheel != null)
                                this.m_backRightWheel.set_m_frictionSlip(this.wheelLockFriction);
                            updateFriction = false; // Note: Disable Friction Lerping This Frame
                        }
                    }
                    // ..
                    // Update Vehicle Wheel Information
                    // ..
                    this.updateCurrentBrakeDamping(this.linearBrakingForce, this.angularBrakingForce);
                    if (updateFriction === true)
                        this.updateCurrentFrictionSlip(deltaTime * this.driftingLerpSpeed);
                    this.updateCurrentRotationBoost(0);
                    // ..
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_RIGHT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_RIGHT);
                    // ..
                    this.raycastVehicle.setEngineForce(0, this.FRONT_LEFT);
                    this.raycastVehicle.setEngineForce(0, this.FRONT_RIGHT);
                    this.raycastVehicle.setEngineForce(0, this.BACK_LEFT);
                    this.raycastVehicle.setEngineForce(0, this.BACK_RIGHT);
                    // ..
                    this.raycastVehicle.setBrakingForce(0, this.FRONT_LEFT);
                    this.raycastVehicle.setBrakingForce(0, this.FRONT_RIGHT);
                    this.raycastVehicle.setBrakingForce(this.handBrakingForce, this.BACK_LEFT);
                    this.raycastVehicle.setBrakingForce(this.handBrakingForce, this.BACK_RIGHT);
                }
                else {
                    this.wheelSkidding = false;
                    if (this.raycastVehicle.lockedWheelIndexes != null)
                        this.raycastVehicle.lockedWheelIndexes = null;
                    if (this.burnoutTriggerMark > 0) {
                        this.burnoutTriggerMark = BABYLON.Scalar.Clamp(this.burnoutTriggerMark, 0, 15);
                    }
                    if (this.burnoutDonutBoost > 0) {
                        this.burnoutDonutBoost = BABYLON.Scalar.Clamp(this.burnoutDonutBoost, 1, 5);
                    }
                    if (this.burnoutCoefficient > 0) {
                        this.burnoutCoefficient = BABYLON.Scalar.Clamp(this.burnoutCoefficient, 1, 5);
                    }
                    var isBurnoutSpeed = (this.americanSpeed <= this.burnoutTriggerMark);
                    var isFullThrottle = (forward <= -0.8 || forward >= 0.8);
                    var isFullTurning = (turn <= -0.8 || turn >= 0.8);
                    var wheelLerpSpeed = (deltaTime * this.defaultLerpSpeed);
                    var wheelBoostSpeed = 0; // Default Zero Wheel Rotation Boost
                    // ..
                    // Validate Wheel Burnout Mode
                    // ..
                    if (this.burnoutTimer <= 0 && this.burnoutCoefficient >= 1.0 && isBurnoutSpeed === true && isFullThrottle === true) {
                        this.burnoutTimer = (this.burnoutTimeDelay * 0.25); // Note: 25 Percent Slipping Time
                        this.wheelDonuts = false;
                        this.wheelBurnout = true;
                    }
                    // ..
                    // Validate Wheel Burnout Timers
                    // ..
                    if (this.restoreTimer > 0) {
                        this.restoreTimer -= deltaTime;
                        if (this.restoreTimer < 0)
                            this.restoreTimer = 0;
                        wheelLerpSpeed *= this.burnoutLerpSpeed;
                    }
                    if (this.cooldownTimer > 0) {
                        this.cooldownTimer -= deltaTime;
                        if (this.cooldownTimer < 0)
                            this.cooldownTimer = 0;
                    }
                    if (this.wheelDonuts === true && isFullTurning === false) {
                        this.burnoutTimer = 0;
                    }
                    // ..
                    // Validate Wheel Drive Burnout Mode
                    // ..
                    if (this.burnoutTimer > 0 && isFullThrottle === true) {
                        wheelBoostSpeed = (forward < -0.1) ? -0.185 : 0.185;
                        var frontSlipFactor = (this.wheelDonuts === true) ? 1.25 : 1.0;
                        if (this.burnoutCoefficient >= 1.0)
                            this.engineForce *= (this.wheelDonuts === true && this.burnoutDonutBoost > this.burnoutCoefficient) ? this.burnoutDonutBoost : this.burnoutCoefficient;
                        if (this.m_frontLeftWheel != null)
                            this.m_frontLeftWheel.set_m_frictionSlip(this.wheelBurnFriction * frontSlipFactor);
                        if (this.m_frontRightWheel != null)
                            this.m_frontRightWheel.set_m_frictionSlip(this.wheelBurnFriction * frontSlipFactor);
                        if (this.m_backLeftWheel != null)
                            this.m_backLeftWheel.set_m_frictionSlip(this.wheelBurnFriction);
                        if (this.m_backRightWheel != null)
                            this.m_backRightWheel.set_m_frictionSlip(this.wheelBurnFriction);
                        updateFriction = false; // Note: Disable Friction Lerping This Frame
                        // ..
                        this.burnoutTimer -= deltaTime;
                        if (this.burnoutTimer <= 0 && this.cooldownTimer <= 0 && this.burnoutDonutBoost >= 1.0 && isFullTurning === true) {
                            this.burnoutTimer = 0.01; // Note: Fixed Donut Burnout Time Extension
                            this.wheelDonuts = true;
                        }
                    }
                    else {
                        this.burnoutTimer = 0; // Note: Force Burnout Timer Reset
                        if (this.wheelDonuts === true) {
                            this.wheelDonuts = false;
                            this.cooldownTimer = (this.burnoutTimeDelay * 2); // Note: 200 Percent Cooldown Time
                        }
                        if (this.wheelBurnout === true) {
                            this.wheelBurnout = false;
                            this.restoreTimer = (this.burnoutTimeDelay * 0.75); // Note: 75 Percent Restoring Time
                        }
                    }
                    // ..
                    // Validate Wheel Drive Power Force
                    // ..
                    if (this.wheelBurnout === true && this.wheelDonuts === true) {
                        this.frontWheelPower = (this.engineForce * 0.1); // Note: 10 Percent Engine Power Force
                    }
                    else if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                        this.frontWheelPower = this.engineForce;
                    }
                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                        this.backWheelPower = this.engineForce;
                    }
                    // ..
                    // Update Vehicle Wheel Information
                    // ..
                    this.updateCurrentBrakeDamping(0, 0);
                    if (updateFriction === true)
                        this.updateCurrentFrictionSlip(wheelLerpSpeed);
                    this.updateCurrentRotationBoost(wheelBoostSpeed);
                    // ..
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_RIGHT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_RIGHT);
                    // ..
                    this.raycastVehicle.setEngineForce(this.frontWheelPower, this.FRONT_LEFT);
                    this.raycastVehicle.setEngineForce(this.frontWheelPower, this.FRONT_RIGHT);
                    this.raycastVehicle.setEngineForce(this.backWheelPower, this.BACK_LEFT);
                    this.raycastVehicle.setEngineForce(this.backWheelPower, this.BACK_RIGHT);
                    // ..
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce * 0.5, this.FRONT_LEFT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce * 0.5, this.FRONT_RIGHT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce, this.BACK_LEFT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce, this.BACK_RIGHT);
                }
                // Trace Current Speed
                // const msg:string = ("Speed: " + this.americanSpeed.toFixed(1) + " --> Turn Angle: " + this.allowedTurningAngle.toFixed(4));
                // const msg:string = ("MPH: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Engine Pitch: " + this.getCurrentEnginePitch().toFixed(2) + " ---> Raw KPH: " + this.absoluteSpeed.toFixed(1));
                // const msg:string = ("Car Speed: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Engine Toruqe: " + engineMotorTorque.toFixed(2)+ " ---> Engine Power: " + allowedEnginePower.toFixed(2));
                var msg = ("Car Speed: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Cooldown Timer: " + this.cooldownTimer.toFixed(2));
                BABYLON.Utilities.PrintToScreen(msg, "#008000");
            }
        };
        StandardCarController.prototype.getVehicleEngineTorque = function (rpm) {
            var result = this.baseEnginePower;
            //if (this.engineTorqueCurve != null) {
            //    result = 1000; // TODO: Sample Animation Curve
            //}
            return result;
        };
        StandardCarController.prototype.updateCurrentBrakeDamping = function (linear, angular) {
            if (this._rigidbody != null)
                this._rigidbody.setDamping(linear, angular);
        };
        StandardCarController.prototype.updateCurrentRotationBoost = function (boost) {
            if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                if (this.m_frontLeftWheel != null)
                    this.m_frontLeftWheel.rotationBoost = boost;
                if (this.m_frontRightWheel != null)
                    this.m_frontRightWheel.rotationBoost = boost;
            }
            if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                if (this.m_backLeftWheel != null)
                    this.m_backLeftWheel.rotationBoost = boost;
                if (this.m_backRightWheel != null)
                    this.m_backRightWheel.rotationBoost = boost;
            }
        };
        StandardCarController.prototype.updateCurrentFrictionSlip = function (lerpSpeed) {
            if (this.m_frontLeftWheel != null && this.m_frontLeftWheel.defaultFriction != null) {
                var frontLeftFriction = this.m_frontLeftWheel.get_m_frictionSlip();
                if (frontLeftFriction < this.m_frontLeftWheel.defaultFriction) {
                    frontLeftFriction = BABYLON.Scalar.Lerp(frontLeftFriction, this.m_frontLeftWheel.defaultFriction, lerpSpeed);
                    this.m_frontLeftWheel.set_m_frictionSlip(frontLeftFriction);
                }
                else if (frontLeftFriction > this.m_frontLeftWheel.defaultFriction) {
                    this.m_frontLeftWheel.set_m_frictionSlip(this.m_frontLeftWheel.defaultFriction);
                }
            }
            if (this.m_frontRightWheel != null && this.m_frontRightWheel.defaultFriction != null) {
                var frontRightFriction = this.m_frontRightWheel.get_m_frictionSlip();
                if (frontRightFriction !== this.m_frontRightWheel.defaultFriction) {
                    frontRightFriction = BABYLON.Scalar.Lerp(frontRightFriction, this.m_frontRightWheel.defaultFriction, lerpSpeed);
                    this.m_frontRightWheel.set_m_frictionSlip(frontRightFriction);
                }
                else if (frontRightFriction > this.m_frontRightWheel.defaultFriction) {
                    this.m_frontRightWheel.set_m_frictionSlip(this.m_frontRightWheel.defaultFriction);
                }
            }
            if (this.m_backLeftWheel != null && this.m_backLeftWheel.defaultFriction != null) {
                var backLeftFriction = this.m_backLeftWheel.get_m_frictionSlip();
                if (backLeftFriction !== this.m_backLeftWheel.defaultFriction) {
                    backLeftFriction = BABYLON.Scalar.Lerp(backLeftFriction, this.m_backLeftWheel.defaultFriction, lerpSpeed);
                    this.m_backLeftWheel.set_m_frictionSlip(backLeftFriction);
                }
                else if (backLeftFriction > this.m_backLeftWheel.defaultFriction) {
                    this.m_backLeftWheel.set_m_frictionSlip(this.m_backLeftWheel.defaultFriction);
                }
            }
            if (this.m_backRightWheel != null && this.m_backRightWheel.defaultFriction != null) {
                var backRightFriction = this.m_backRightWheel.get_m_frictionSlip();
                if (backRightFriction !== this.m_backRightWheel.defaultFriction) {
                    backRightFriction = BABYLON.Scalar.Lerp(backRightFriction, this.m_backRightWheel.defaultFriction, lerpSpeed);
                    this.m_backRightWheel.set_m_frictionSlip(backRightFriction);
                }
                else if (backRightFriction > this.m_backRightWheel.defaultFriction) {
                    this.m_backRightWheel.set_m_frictionSlip(this.m_backRightWheel.defaultFriction);
                }
            }
        };
        return StandardCarController;
    }(BABYLON.ScriptComponent));
    PROJECT.StandardCarController = StandardCarController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class VehicleInputController
     */
    var VehicleInputController = /** @class */ (function (_super) {
        __extends(VehicleInputController, _super);
        function VehicleInputController(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.playerDeltaX = 0;
            _this.playerDeltaY = 0;
            _this.playerMouseX = 0;
            _this.playerMouseY = 0;
            _this.currentUsedDistance = 0;
            _this.currentRotationAngle = 0;
            _this.wantedRotationAngle = 0;
            _this.wantedPosition = BABYLON.Vector3.Zero();
            _this.targetPosition = BABYLON.Vector3.Zero();
            _this.targetRotation = BABYLON.Quaternion.Zero();
            _this.targetAngles = BABYLON.Vector3.Zero();
            _this.cameraAngles = BABYLON.Vector3.Zero();
            _this.rotationQuat = BABYLON.Quaternion.Zero();
            _this.rotationVec = BABYLON.Vector3.Zero();
            _this.distanceVec = BABYLON.Vector3.Zero();
            _this.yVelocity = BABYLON.Vector2.Zero();
            _this.zVelocity = BABYLON.Vector2.Zero();
            _this.enableInput = false;
            _this.attachCamera = false;
            _this.followBehind = false;
            _this.followDistance = 5.0;
            _this.followHeight = 1.75;
            _this.rotationLagTime = 0.5;
            _this.distanceLagTime = 0.25;
            _this.distanceMultiplier = 0.025;
            _this.playerNumber = BABYLON.PlayerNumber.One;
            _this.triggerForward = BABYLON.Xbox360Trigger.Right;
            _this.keyboardForawrd = BABYLON.UserInputKey.W;
            _this.auxKeyboardForawrd = BABYLON.UserInputKey.UpArrow;
            _this.triggerBackwards = BABYLON.Xbox360Trigger.Left;
            _this.keyboardBackwards = BABYLON.UserInputKey.S;
            _this.auxKeyboardBackwards = BABYLON.UserInputKey.DownArrow;
            _this.buttonHandbrake = BABYLON.Xbox360Button.X;
            _this.keyboardHandbrake = BABYLON.UserInputKey.SpaceBar;
            _this.m_cameraTransform = null;
            _this.m_rigidbodyPhysics = null;
            _this.m_standardCarController = null;
            _this.enableInput = _this.getEditorProperty("enableInput", _this.enableInput);
            _this.playerNumber = _this.getEditorProperty("playerNumber", _this.playerNumber);
            _this.attachCamera = _this.getEditorProperty("attachCamera", _this.attachCamera);
            _this.followBehind = _this.getEditorProperty("followBehind", _this.followBehind);
            _this.followDistance = _this.getEditorProperty("followDistance", _this.followDistance);
            _this.followHeight = _this.getEditorProperty("followHeight", _this.followHeight);
            _this.rotationLagTime = _this.getEditorProperty("rotationLagTime", _this.rotationLagTime);
            _this.distanceLagTime = _this.getEditorProperty("distanceLagTime", _this.distanceLagTime);
            _this.distanceMultiplier = _this.getEditorProperty("distanceMultiplier", _this.distanceMultiplier);
            return _this;
        }
        VehicleInputController.prototype.getPlayerDeltaX = function () { return this.playerDeltaX; };
        ;
        VehicleInputController.prototype.getPlayerDeltaY = function () { return this.playerDeltaY; };
        ;
        VehicleInputController.prototype.getPlayerMouseX = function () { return this.playerMouseX; };
        ;
        VehicleInputController.prototype.getPlayerMouseY = function () { return this.playerMouseY; };
        ;
        VehicleInputController.prototype.start = function () { this.initVehicleController(); };
        VehicleInputController.prototype.update = function () { this.updateVehicleController(); };
        VehicleInputController.prototype.destroy = function () { this.destroyVehicleController(); };
        //////////////////////////////////////////////////
        // Protected Character Movement State Functions //
        //////////////////////////////////////////////////
        VehicleInputController.prototype.initVehicleController = function () {
            // Get Rigidbody Physics
            this.m_rigidbodyPhysics = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this.m_rigidbodyPhysics == null)
                BABYLON.Tools.Warn("Null rigidbody physics for: " + this.transform.name);
            // Get Standard Car Controller
            this.m_standardCarController = this.getComponent("PROJECT.StandardCarController");
            if (this.m_standardCarController == null)
                BABYLON.Tools.Warn("Null standard car controller for: " + this.transform.name);
            // TODO: Get Player Camera Transform
            if (this.attachCamera === true) {
                this.m_cameraTransform = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.m_cameraTransform != null)
                    BABYLON.Utilities.ValidateTransformQuaternion(this.m_cameraTransform);
            }
            // Sync Vehicle Chase Camera Position
            this.syncVehicleController(this.followBehind, true);
            // const abstractMesh:BABYLON.AbstractMesh = this.getAbstractMesh();
            // if (abstractMesh != null) abstractMesh.physicsImpostor.registerAfterPhysicsStep((impostor:BABYLON.PhysicsImpostor)=>{ this.syncVehicleController(this.followBehind, true); });
        };
        VehicleInputController.prototype.updateVehicleController = function () {
            if (this.enableInput === true) {
                // Get User Input
                this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
                this.playerDeltaY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
                this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
                this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
                // Check Dead Stick
                if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerDeltaX = 0;
                if (Math.abs(this.playerDeltaY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerDeltaY = 0;
                if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerMouseX = 0;
                if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerMouseY = 0;
                // Get Button Triggers
                var auxForwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.auxKeyboardForawrd); // Player One Only
                var forwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardForawrd); // Player One Only
                var forwardTrigger = BABYLON.SceneManager.GetGamepadTriggerInput(this.triggerForward, this.playerNumber);
                var auxBackwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.auxKeyboardBackwards); // Player One Only
                var backwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardBackwards); // Player One Only
                var backwardTrigger = BABYLON.SceneManager.GetGamepadTriggerInput(this.triggerBackwards, this.playerNumber);
                var handbrakeKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardHandbrake); // Player One Only
                var handbrakeButton = BABYLON.SceneManager.GetGamepadButtonInput(this.buttonHandbrake, this.playerNumber);
                // Reset Player Movement
                var playerMovement = 0;
                var playerSteering = 0;
                var playerHandbrake = false;
                var playerDonuts = false;
                // Primary Accelerattion
                if (forwardTrigger > 0.2)
                    playerMovement = forwardTrigger;
                else if (this.playerNumber === BABYLON.PlayerNumber.One && (forwardKeyboard === true || auxForwardKeyboard === true))
                    playerMovement = 1;
                // Braking Takes Precedence
                if (backwardTrigger > 0.2)
                    playerMovement = -backwardTrigger;
                else if (this.playerNumber === BABYLON.PlayerNumber.One && (backwardKeyboard === true || auxBackwardKeyboard === true))
                    playerMovement = -1;
                // Includes AD And Arrow Keys
                playerSteering = this.playerDeltaX;
                // Pull Hard Hand Brake Lever
                playerHandbrake = (handbrakeKeyboard === true || handbrakeButton === true);
                // Drive Standard Car Controller
                if (this.m_standardCarController != null)
                    this.m_standardCarController.drive(playerMovement, playerSteering, playerHandbrake);
            }
            // Sync Vehicle Chase Camera Position
            this.syncVehicleController(this.followBehind, true);
        };
        VehicleInputController.prototype.syncVehicleController = function (follow, look) {
            if (this.attachCamera === true && this.m_cameraTransform != null && this.m_rigidbodyPhysics != null) {
                var deltaTime = this.getDeltaSeconds();
                this.m_rigidbodyPhysics.getTransformPositionToRef(this.targetPosition);
                this.m_rigidbodyPhysics.getTransformRotationToRef(this.targetRotation);
                // Smooth Position
                this.wantedPosition.copyFrom(this.targetPosition);
                this.wantedPosition.y += this.followHeight;
                this.currentUsedDistance = BABYLON.Utilities.SmoothDampAngle(this.currentUsedDistance, this.followDistance + (this.m_rigidbodyPhysics.getLinearVelocity().length() * this.distanceMultiplier), this.distanceLagTime, Number.MAX_VALUE, deltaTime, this.zVelocity);
                // Smooth Rotation
                BABYLON.Utilities.ToEulerToRef(this.targetRotation, this.targetAngles);
                BABYLON.Utilities.ToEulerToRef(this.m_cameraTransform.rotationQuaternion, this.cameraAngles);
                this.wantedRotationAngle = this.targetAngles.y;
                this.currentRotationAngle = this.cameraAngles.y;
                this.currentRotationAngle = BABYLON.Utilities.SmoothDampAngle(this.currentRotationAngle, this.wantedRotationAngle, this.rotationLagTime, Number.MAX_VALUE, deltaTime, this.yVelocity);
                // Set Wanted Position
                this.distanceVec.set(0, 0, -this.currentUsedDistance);
                BABYLON.Utilities.FromEulerToRef(0, this.currentRotationAngle, 0, this.rotationQuat);
                BABYLON.Utilities.MultiplyQuaternionByVectorToRef(this.rotationQuat, this.distanceVec, this.rotationVec);
                this.wantedPosition.addInPlace(this.rotationVec);
                // Update Follow Camera
                if (follow === true) {
                    if (this.m_cameraTransform.position.x !== this.wantedPosition.x ||
                        this.m_cameraTransform.position.y !== this.wantedPosition.y ||
                        this.m_cameraTransform.position.z !== this.wantedPosition.z) {
                        this.m_cameraTransform.position.set(this.wantedPosition.x, this.wantedPosition.y, this.wantedPosition.z);
                    }
                }
                if (look === true) {
                    // TODO: Update Quaternion Rotation Instead - ???
                    this.m_cameraTransform.lookAt(this.targetPosition);
                }
            }
        };
        VehicleInputController.prototype.destroyVehicleController = function () {
            this.m_cameraTransform = null;
            this.m_rigidbodyPhysics = null;
            this.m_standardCarController = null;
        };
        return VehicleInputController;
    }(BABYLON.ScriptComponent));
    PROJECT.VehicleInputController = VehicleInputController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class ItemRotator
     */
    var ItemRotator = /** @class */ (function (_super) {
        __extends(ItemRotator, _super);
        function ItemRotator(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.rotateSpeed = 1.0;
            _this.rotateSpeed = _this.getEditorProperty("rotateSpeed", _this.rotateSpeed);
            return _this;
        }
        ItemRotator.prototype.start = function () {
            console.log("===> Starting item rotator for: " + this.transform.name);
        };
        ItemRotator.prototype.update = function () {
            var delta = this.getDeltaSeconds();
            this.transform.addRotation(0, (this.rotateSpeed * delta), 0);
        };
        ItemRotator.prototype.destroy = function () {
            console.log("===> Destroying item rotator for: " + this.transform.name);
        };
        return ItemRotator;
    }(BABYLON.ScriptComponent));
    PROJECT.ItemRotator = ItemRotator;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestAnimation
     */
    var TestAnimation = /** @class */ (function (_super) {
        __extends(TestAnimation, _super);
        function TestAnimation(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            //private animator:BABYLON.AnimationState = null;
            _this.animator = null;
            return _this;
        }
        TestAnimation.prototype.start = function () {
            console.log("===> Starting animation test for: " + this.transform.name);
            this.animator = this.getComponent("BABYLON.AnimationState");
            if (this.animator == null) {
                BABYLON.Tools.Warn("Failed to get animation state component: " + this.transform.name);
            }
        };
        TestAnimation.prototype.update = function () {
            // Update render loop function
        };
        TestAnimation.prototype.after = function () {
            // After render loop function
        };
        TestAnimation.prototype.destroy = function () {
            // Destroy component function
        };
        return TestAnimation;
    }(BABYLON.ScriptComponent));
    PROJECT.TestAnimation = TestAnimation;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class TestCenter
    */
    var TestCenter = /** @class */ (function (_super) {
        __extends(TestCenter, _super);
        function TestCenter(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            return _super.call(this, transform, scene, properties) || this;
        }
        TestCenter.prototype.start = function () {
            // Start render loop function
            var rb = this.getComponent("BABYLON.RigidbodyPhysics");
            console.warn("### FINAL COM ###");
            console.log(rb.centerOfMass);
        };
        TestCenter.prototype.update = function () {
            // Update render loop function
        };
        TestCenter.prototype.after = function () {
            // After render loop function
        };
        TestCenter.prototype.destroy = function () {
            // Destroy component function
        };
        return TestCenter;
    }(BABYLON.ScriptComponent));
    PROJECT.TestCenter = TestCenter;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestCollision
     */
    var TestCollision = /** @class */ (function (_super) {
        __extends(TestCollision, _super);
        function TestCollision(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.rigidbody = null;
            return _this;
        }
        TestCollision.prototype.start = function () {
            var _this = this;
            // Start render loop function
            console.log("Test collision for: " + this.transform.name);
            this.rigidbody = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this.rigidbody != null) {
                this.rigidbody.registerOnCollisionEnter(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    console.log("###: " + _this.transform.name + ": Begin Contact With: " + mesh.name);
                });
                this.rigidbody.registerOnCollisionStay(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("###: " + this.transform.name + ": Update Contact With: " + mesh.name);
                });
                this.rigidbody.registerOnCollisionExit(function (mesh) {
                    var tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    console.warn("###: " + _this.transform.name + ": End Contact With: " + mesh.name);
                });
            }
            else {
                console.warn("Failed to locate rigidbody component for: " + this.transform.name);
            }
        };
        TestCollision.prototype.update = function () {
            // Update render loop function
        };
        TestCollision.prototype.after = function () {
            // After render loop function
        };
        TestCollision.prototype.destroy = function () {
            // Destroy component function
        };
        return TestCollision;
    }(BABYLON.ScriptComponent));
    PROJECT.TestCollision = TestCollision;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestController
     */
    var TestController = /** @class */ (function (_super) {
        __extends(TestController, _super);
        function TestController(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            var _this = _super.call(this, transform, scene, properties) || this;
            _this.testTexture = null;
            _this.m_physicsWorld = null;
            _this.m_physicsEngine = null;
            _this.ran = false;
            _this.testTexture = _this.getEditorProperty("testTexture", _this.testTexture);
            return _this;
        }
        TestController.prototype.start = function () {
            return __awaiter(this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    // Start render loop function
                    console.log("===> Starting test controller...");
                    this.m_physicsWorld = BABYLON.SceneManager.GetPhysicsWorld(this.scene);
                    this.m_physicsEngine = BABYLON.SceneManager.GetPhysicsEngine(this.scene);
                    return [2 /*return*/];
                });
            });
        };
        TestController.prototype.update = function () {
            // Update render loop function
            // const num_manifolds:number = this.m_physicsWorld.getBroadphase().getOverlappingPairCache().getNumOverlappingPairs();
            //const num_manifolds:number = this.m_physicsWorld.getDispatcher().getNumManifolds();
            //const msg = "Total Overlapping Paris: " + num_manifolds;
            //BABYLON.Utilities.PrintToScreen(msg);   
            // Test Running Loop
            //if (this.ran === false) {
            //    this.ran = true;
            //    
            //}
        };
        TestController.prototype.after = function () {
            // After render loop function
        };
        TestController.prototype.destroy = function () {
            // Destroy component function
        };
        return TestController;
    }(BABYLON.ScriptComponent));
    PROJECT.TestController = TestController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class WTFComp
    */
    var WTFComp = /** @class */ (function (_super) {
        __extends(WTFComp, _super);
        function WTFComp(transform, scene, properties) {
            if (properties === void 0) { properties = {}; }
            return _super.call(this, transform, scene, properties) || this;
        }
        WTFComp.prototype.start = function () {
            // Start render loop function
        };
        WTFComp.prototype.update = function () {
            // Update render loop function
        };
        WTFComp.prototype.after = function () {
            // After render loop function
        };
        WTFComp.prototype.destroy = function () {
            // Destroy component function
        };
        return WTFComp;
    }(BABYLON.ScriptComponent));
    PROJECT.WTFComp = WTFComp;
})(PROJECT || (PROJECT = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFieWxvblRvb2xraXQyMDE5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9EZWJ1Zy9EZWJ1Z0luZm9ybWF0aW9uLnRzIiwiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9QaHlzaWNzL1NvZnRib2R5TWVzaC50cyIsIi4uL0Fzc2V0cy9CYWJ5bG9uL1tQcm9dL0NvbnRlbnQvUGxheWVycy9GaXJzdFBlcnNvbkNvbnRyb2xsZXIudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1BsYXllcnMvVGhpcmRQZXJzb25Db250cm9sbGVyLnRzIiwiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9UZXN0aW5nL0JvdW5kaW5nQm94U2tpbnMudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1ZlaGljbGUvU2tpZG1hcmtNYW5hZ2VyLnRzIiwiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9WZWhpY2xlL1N0YW5kYXJkQ2FyQ29udHJvbGxlci50cyIsIi4uL0Fzc2V0cy9CYWJ5bG9uL1tQcm9dL0NvbnRlbnQvVmVoaWNsZS9WZWhpY2xlSW5wdXRDb250cm9sbGVyLnRzIiwiLi4vQXNzZXRzL1NjcmlwdHMvSXRlbVJvdGF0b3IudHMiLCIuLi9Bc3NldHMvU2NyaXB0cy9UZXN0QW5pbWF0aW9uLnRzIiwiLi4vQXNzZXRzL1NjcmlwdHMvVGVzdENlbnRlci50cyIsIi4uL0Fzc2V0cy9TY3JpcHRzL1Rlc3RDb2xsaXNpb24udHMiLCIuLi9Bc3NldHMvU2NyaXB0cy9UZXN0Q29udHJvbGxlci50cyIsIi4uL0Fzc2V0cy9TY3JpcHRzL1dURkNvbXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBTyxPQUFPLENBNkliO0FBN0lELFdBQU8sT0FB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LENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsbUJBQW1CLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsbUJBQW1CLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsbUJBQW1CLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSztZQUNMLGlDQUFpQztZQUNqQyxLQUFLO1lBQ0wsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbkUsS0FBSyxHQUFHLGVBQWUsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxlQUFlLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzdELGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuRSxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0s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QUE2QjtRQUNqQyxDQUFDO1FBRVMseUJBQU8sR0FBakI7WUFDSSw2QkFBNkI7UUFDakMsQ0FBQztRQUNMLGNBQUM7SUFBRCxDQUFDLEFBcEJELENBQTZCLE9BQU8sQ0FBQyxlQUFlLEdBb0JuRDtJQXBCWSxlQUFPLFVBb0JuQixDQUFBO0FBQ0wsQ0FBQyxFQTFCTSxPQUFPLEtBQVAsT0FBTyxRQTBCYiIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgRGVidWdJbmZvcm1hdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBEZWJ1Z0luZm9ybWF0aW9uIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIGtleXM6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIHByaXZhdGUgc2hvdzpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHJpdmF0ZSBwb3B1cDpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgdmlld3M6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIHhib3g6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmtleXMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZW5hYmxlRGVidWdLZXlzXCIsIHRoaXMua2V5cyk7XG4gICAgICAgICAgICB0aGlzLnNob3cgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic2hvd0RlYnVnTGFiZWxzXCIsIHRoaXMuc2hvdyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVwID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInBvcHVwRGVidWdQYW5lbFwiLCB0aGlzLnBvcHVwKTtcbiAgICAgICAgICAgIHRoaXMudmlld3MgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidG9nZ2xlUGxheWVyVmlld3NcIiwgdGhpcy52aWV3cyk7XG4gICAgICAgICAgICB0aGlzLnhib3ggPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYWxsb3dYYm94TGl2ZVNpZ25JblwiLCB0aGlzLnhib3gpO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmIChCQUJZTE9OLlNjZW5lTWFuYWdlci5Jc1dpbmRvd3MoKSkgdGhpcy5wb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5Mb2coXCJEZWJ1ZyBpbmZvcm1hdGlvbiBvdmVybGF5IGxvYWRlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpIDp2b2lkIHtcbiAgICAgICAgICAgIC8vdGhpcy5zY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcmVlblwiKTtcbiAgICAgICAgICAgIC8vdGhpcy50b2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvZ2dsZVwiKTtcbiAgICAgICAgICAgIC8vdGhpcy5zaWduaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNpZ25pblwiKTtcbiAgICAgICAgICAgIC8vdGhpcy5yZWxvYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlbG9hZFwiKTtcbiAgICAgICAgICAgIC8vdGhpcy5tb3VzZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW91c2VcIik7XG4gICAgICAgICAgICAvL3RoaXMuZGVidWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlYnVnXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMua2V5cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUJBQllMT04uU2NlbmVNYW5hZ2VyLklzWGJveE9uZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY3JlZW4pIHRoaXMuc2NyZWVuLmlubmVySFRNTCA9IFwiRiAtIFNob3cgRnVsbCBTY3JlZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoQkFCWUxPTi5DYW1lcmFTeXN0ZW0uSXNNdWx0aVBsYXllclZpZXcoKSAmJiB0aGlzLnZpZXdzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b2dnbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQkFCWUxPTi5TY2VuZU1hbmFnZXIuSXNYYm94T25lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGUuc3R5bGUudG9wID0gXCIyOXB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlLmlubmVySFRNTCA9IFwiMSAtIDQgVG9nZ2xlIFBsYXllciBWaWV3XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKEJBQllMT04uU2NlbmVNYW5hZ2VyLklzWGJveExpdmVQbHVnaW5FbmFibGVkKCkgJiYgdGhpcy54Ym94ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaWduaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQkFCWUxPTi5TY2VuZU1hbmFnZXIuSXNYYm94T25lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduaW4uc3R5bGUudG9wID0gXCI0OXB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2lnbmluLmlubmVySFRNTCA9IFwiWCAtIFhib3ggTGl2ZSBTaWduIEluXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubW91c2UpIHRoaXMubW91c2UuaW5uZXJIVE1MID0gKEJBQllMT04uU2NlbmVNYW5hZ2VyLklzWGJveE9uZSgpKSA/IFwiTSAtIE1vdXNlXCIgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWxvYWQpIHRoaXMucmVsb2FkLmlubmVySFRNTCA9IFwiUiAtIFJlbG9hZFwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWJ1ZykgdGhpcy5kZWJ1Zy5pbm5lckhUTUwgPSBcIlAgLSBEZWJ1Z1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua2V5cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRW5hYmxlIE11bHRpcGxheWVyIEtleXNcIik7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLk9uS2V5Ym9hcmRQcmVzcyhCQUJZTE9OLlVzZXJJbnB1dEtleS5OdW0xLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Vbml2ZXJzYWxDYW1lcmFTeXN0ZW0uU2V0TXVsdGlQbGF5ZXJWaWV3TGF5b3V0KHRoaXMuc2NlbmUsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIxIHBsYXllciBwcmVzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5Lk51bTIsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlVuaXZlcnNhbENhbWVyYVN5c3RlbS5TZXRNdWx0aVBsYXllclZpZXdMYXlvdXQodGhpcy5zY2VuZSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjIgcGxheWVycyBwcmVzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5Lk51bTMsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlVuaXZlcnNhbENhbWVyYVN5c3RlbS5TZXRNdWx0aVBsYXllclZpZXdMYXlvdXQodGhpcy5zY2VuZSwgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjMgcGxheWVycyBwcmVzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5Lk51bTQsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlVuaXZlcnNhbENhbWVyYVN5c3RlbS5TZXRNdWx0aVBsYXllclZpZXdMYXlvdXQodGhpcy5zY2VuZSwgNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjQgcGxheWVycyBwcmVzc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5LlIsICgpPT57XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuSSwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wdXAgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLlBvcHVwRGVidWcodGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5Ub2dnbGVEZWJ1Zyh0aGlzLnNjZW5lLCB0cnVlLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChCQUJZTE9OLlNjZW5lTWFuYWdlci5Jc1hib3hPbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLmdhbWVwYWRJbnB1dEVtdWxhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5Lk0sICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5nYW1lcGFkSW5wdXRFbXVsYXRpb24gIT09IFwibW91c2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2FtZXBhZElucHV0RW11bGF0aW9uID0gXCJtb3VzZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nYW1lcGFkSW5wdXRFbXVsYXRpb24gPSBcImdhbWVwYWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLk9uS2V5Ym9hcmRQcmVzcyhCQUJZTE9OLlVzZXJJbnB1dEtleS5GLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9CQUJZTE9OLlRvb2xzLlJlcXVlc3RGdWxsc2NyZWVuKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmdldEVuZ2luZSgpLmVudGVyRnVsbHNjcmVlbih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChCQUJZTE9OLldpbmRvd3NQbGF0Zm9ybS5Jc1hib3hMaXZlUGx1Z2luRW5hYmxlZCgpICYmIHRoaXMueGJveCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuWCwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXI6QkFCWUxPTi5QbGF5ZXJOdW1iZXIuT25lID0gQkFCWUxPTi5QbGF5ZXJOdW1iZXIuT25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFCQUJZTE9OLldpbmRvd3NQbGF0Zm9ybS5Jc1hib3hMaXZlVXNlclNpZ25lZEluKG51bGwsIHBsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLkxvZyhcIj09PT4gVHJ5aW5nIFhib3ggTGl2ZSBTaWduIEluIEZvciBQbGF5ZXI6IFwiICsgcGxheWVyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uV2luZG93c1BsYXRmb3JtLlhib3hMaXZlVXNlclNpZ25JbihwbGF5ZXIsIChyZXN1bHQ6IE1pY3Jvc29mdC5YYm94LlNlcnZpY2VzLlN5c3RlbS5TaWduSW5SZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSBCQUJZTE9OLldpbmRvd3NQbGF0Zm9ybS5HZXRYYm94TGl2ZVVzZXIocGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IFwiKFwiICsgdXNlci54Ym94VXNlcklkICsgXCIpIC0gXCIgKyB1c2VyLmdhbWVydGFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5BbGVydE1lc3NhZ2UobXNnLCBcIlhib3ggTGl2ZSBVc2VyIFNpZ25lZCBJblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAoZXJyKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnOnN0cmluZyA9IFwiRW5jb3VudGVyZWQgU2lnbiBFcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4obXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuQWxlcnRNZXNzYWdlKG1zZywgXCJYYm94IExpdmUgV2FybmluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiWGJveCBMaXZlIFVzZXIgQWxyZWFkeSBTaWduZWQgSW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuQWxlcnRNZXNzYWdlKFwiVXNlciBBbHJlYWR5IFNpZ25lZCBJblwiLCBcIlhib3ggTGl2ZSBXYXJuaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRGVmYXVsdCBQcmludCBUbyBTY3JlZW4gVGV4dFxuICAgICAgICAgICAgdmFyIHByaW50Q29sb3I6c3RyaW5nID0gKHRoaXMuc2NlbmUuZ2V0RW5naW5lKCkud2ViR0xWZXJzaW9uIDwgMikgPyBcInJlZFwiIDogXCIjMGMwXCI7XG4gICAgICAgICAgICB2YXIgZ3JhcGhpY3NWZXJzaW9uOnN0cmluZyA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFdlYkdMVmVyc2lvblN0cmluZyh0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlByaW50VG9TY3JlZW4oZ3JhcGhpY3NWZXJzaW9uLCBwcmludENvbG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCkgOnZvaWQge1xuICAgICAgICAgICAgLy90aGlzLnNjcmVlbiA9IG51bGw7XG4gICAgICAgICAgICAvL3RoaXMudG9nZ2xlID0gbnVsbDtcbiAgICAgICAgICAgIC8vdGhpcy5zaWduaW4gPSBudWxsO1xuICAgICAgICAgICAgLy90aGlzLnJlbG9hZCA9IG51bGw7XG4gICAgICAgICAgICAvL3RoaXMubW91c2UgPSBudWxsO1xuICAgICAgICAgICAgLy90aGlzLmRlYnVnID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIFNvZnRib2R5TWVzaFxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBTb2Z0Ym9keU1lc2ggZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcblxuICAgICAgICAgICAgY29uc3QgdHlwZTpudW1iZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidHlwZVwiLCAwKTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbWFzczogdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1hc3NcIiwgMSksXG4gICAgICAgICAgICAgICAgZnJpY3Rpb246IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmcmljdGlvblwiLCAwLjMpLFxuICAgICAgICAgICAgICAgIHJlc3RpdHV0aW9uOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicmVzdGl0dXRpb25cIiwgMC4zKSxcbiAgICAgICAgICAgICAgICBwcmVzc3VyZTogdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInByZXNzdXJlXCIsIDIwMCksXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlJdGVyYXRpb25zOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidmVsb2NpdHlJdGVyYXRpb25zXCIsIDIwKSwgXG4gICAgICAgICAgICAgICAgcG9zaXRpb25JdGVyYXRpb25zOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicG9zaXRpb25JdGVyYXRpb25zXCIsIDIwKSxcbiAgICAgICAgICAgICAgICBzdGlmZm5lc3M6IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzdGlmZm5lc3NcIiwgMSksXG4gICAgICAgICAgICAgICAgbWFyZ2luOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWFyZ2luXCIsIDAuMCksXG4gICAgICAgICAgICAgICAgZGFtcGluZzogdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImRhbXBpbmdcIiwgMC4wMSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbWVzaDpCQUJZTE9OLk1lc2ggPSB0aGlzLmdldFRyYW5zZm9ybU1lc2goKTtcbiAgICAgICAgICAgIGNvbnN0IGZvcmNlU2hhcmVkVmVydGljZXM6Ym9vbGVhbiA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmb3JjZVNoYXJlZFZlcnRpY2VzXCIsIHRydWUpO1xuICAgICAgICAgICAgaWYgKGZvcmNlU2hhcmVkVmVydGljZXMgPT09IHRydWUpIG1lc2guZm9yY2VTaGFyZWRWZXJ0aWNlcygpO1xuXG4gICAgICAgICAgICBjb25zdCBpbmNyZWFzZVZlcnRpY2VzOm51bWJlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJpbmNyZWFzZVZlcnRpY2VzXCIsIDQpO1xuICAgICAgICAgICAgaWYgKGluY3JlYXNlVmVydGljZXMgPiAwKSBtZXNoLmluY3JlYXNlVmVydGljZXMoaW5jcmVhc2VWZXJ0aWNlcyk7XG4gICAgICAgIFxuICAgICAgICAgICAgbGV0IGltcG9zdG9yOkJBQllMT04uUGh5c2ljc0ltcG9zdG9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAwKSB7IC8vIE1lc2hcbiAgICAgICAgICAgICAgICBpbXBvc3RvciA9IG5ldyBCQUJZTE9OLlBoeXNpY3NJbXBvc3RvcihtZXNoLCBCQUJZTE9OLlBoeXNpY3NJbXBvc3Rvci5Tb2Z0Ym9keUltcG9zdG9yLCBvcHRpb25zLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMSkgeyAvLyBDbG90aFxuICAgICAgICAgICAgICAgIGltcG9zdG9yID0gbmV3IEJBQllMT04uUGh5c2ljc0ltcG9zdG9yKG1lc2gsIEJBQllMT04uUGh5c2ljc0ltcG9zdG9yLkNsb3RoSW1wb3N0b3IsIG9wdGlvbnMsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAyKSAgeyAvLyBSb3BlXG4gICAgICAgICAgICAgICAgaW1wb3N0b3IgPSBuZXcgQkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IobWVzaCwgQkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IuUm9wZUltcG9zdG9yLCBvcHRpb25zLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbXBvc3RvciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaW1wb3N0b3IuZXhlY3V0ZU5hdGl2ZUZ1bmN0aW9uKCh3b3JkOmFueSwgYm9keTphbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogU2V0dXAgTmF0aXZlIFNvZnRib2R5IFBoeXNpY3MgT3B0aW9uc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gU3RhcnQgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBhZnRlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIEFmdGVyIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIERlc3Ryb3kgY29tcG9uZW50IGZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBGaXJzdFBlcnNvbkNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgRmlyc3RQZXJzb25Db250cm9sbGVyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIGRlbHRhRmFjdG9yOm51bWJlciA9IDIuMDtcbiAgICAgICAgcHJpdmF0ZSBhdHRhY2hDYW1lcmE6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIHByaXZhdGUgY2FtZXJhUGl2b3Q6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFSaWdnZXI6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBtb3ZlbWVudFNwZWVkOm51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBqdW1waW5nVmVsb2NpdHk6bnVtYmVyID0gMTAuMDtcbiAgICAgICAgcHJpdmF0ZSBwbGF5ZXJNb3ZlbWVudDpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwcml2YXRlIHBsYXllclR1cm5SYXRlOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFQaXRjaFJhdGU6bnVtYmVyID0gMC4wO1xuICAgICAgICBwcml2YXRlIGhvcnpTZW5zaXRpdml0eTpudW1iZXIgPSAxLjA7XG4gICAgICAgIHByaXZhdGUgdmVydFNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBtb3VzZVNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBtaW5pbXVtUGl0Y2hBbmdsZTpudW1iZXIgPSAtNjAuMDtcbiAgICAgICAgcHJpdmF0ZSBtYXhpbXVtUGl0Y2hBbmdsZTpudW1iZXIgPSA2MC4wO1xuICAgICAgICBwcml2YXRlIGlzQ2hhcmFjdGVyR3JvdW5kZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGlzQ2hhcmFjdGVySnVtcEZyYW1lOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFFdWxlckFuZ2xlczpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwcml2YXRlIGNoYXJhY3RlckNvbnRyb2xsZXI6QkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyID0gbnVsbDtcblxuICAgICAgICBwdWJsaWMgaXNDaGFyYWN0ZXJKdW1waW5nKCk6Ym9vbGVhbiB7IHJldHVybiBmYWxzZTsgLyogVE9ETzogRGV0ZXJtaW5lIElmIENoYXJhY3RlciBJcyBKdW1waW5nIC0gPz8/ICovIH1cbiAgICAgICAgcHVibGljIGlzQ2hhcmFjdGVyRmFsbGluZygpOmJvb2xlYW4geyByZXR1cm4gZmFsc2U7IC8qIFRPRE86IERldGVybWluZSBJZiBDaGFyYWN0ZXIgSXMgRmFsbGluZyAtID8/PyAqLyB9XG5cbiAgICAgICAgcHVibGljIGJ1dHRvbkp1bXA6bnVtYmVyID0gQkFCWUxPTi5YYm94MzYwQnV0dG9uLkE7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZEp1bXA6bnVtYmVyID0gQkFCWUxPTi5Vc2VySW5wdXRLZXkuU3BhY2VCYXI7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJOdW1iZXI6QkFCWUxPTi5QbGF5ZXJOdW1iZXIgPSBCQUJZTE9OLlBsYXllck51bWJlci5PbmU7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJEZWx0YVg6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgcGxheWVyRGVsdGFaOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIHBsYXllck1vdXNlWDpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJNb3VzZVk6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgcGxheWVyRXllTGV2ZWw6bnVtYmVyID0gMC41O1xuICAgICAgICBwdWJsaWMgZ2V0Q2hhcmFjdGVyQ29udHJvbGxlcigpOkJBQllMT04uQ2hhcmFjdGVyQ29udHJvbGxlciB7IHJldHVybiB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXI7IH1cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hDYW1lcmEgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYXR0YWNoQ2FtZXJhXCIsIHRoaXMuYXR0YWNoQ2FtZXJhKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTnVtYmVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInBsYXllck51bWJlclwiLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnBsYXllckV5ZUxldmVsID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInBsYXllckV5ZUxldmVsXCIsIHRoaXMucGxheWVyRXllTGV2ZWwpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlbWVudFNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1vdmVtZW50U3BlZWRcIiwgdGhpcy5tb3ZlbWVudFNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VTZW5zaXRpdml0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtb3VzZVNlbnNpdGl2aXR5XCIsIHRoaXMubW91c2VTZW5zaXRpdml0eSlcbiAgICAgICAgICAgIHRoaXMubWluaW11bVBpdGNoQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWluaW11bVBpdGNoQW5nbGVcIiwgdGhpcy5taW5pbXVtUGl0Y2hBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLm1heGltdW1QaXRjaEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heGltdW1QaXRjaEFuZ2xlXCIsIHRoaXMubWF4aW11bVBpdGNoQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy52ZXJ0U2Vuc2l0aXZpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidmVydGljYWxTZW5zaXRpdml0eVwiLCB0aGlzLnZlcnRTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB0aGlzLmhvcnpTZW5zaXRpdml0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJob3Jpem9udGFsU2Vuc2l0aXZpdHlcIiwgdGhpcy5ob3J6U2Vuc2l0aXZpdHkpXG4gICAgICAgICAgICB0aGlzLmp1bXBpbmdWZWxvY2l0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJpbXB1bHNlSnVtcFZlbG9jaXR5XCIsIHRoaXMuanVtcGluZ1ZlbG9jaXR5KTtcbiAgICAgICAgICAgIC8vIFNjYWxlIE1vdXNlIFBvaW50ZXIgU2Vuc2l0aXZpdHlcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllck51bWJlciA9PSBCQUJZTE9OLlBsYXllck51bWJlci5PbmUpIHtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuUG9pbnRlckFuZ3VsYXJTZW5zaWJpbGl0eSA9IChCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuUG9pbnRlckFuZ3VsYXJTZW5zaWJpbGl0eSAqIHRoaXMubW91c2VTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7IHRoaXMuc2V0dXBGaXJzdFBlcnNvbkNvbnRyb2xsZXIoKTsgfVxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQgeyB0aGlzLnVwZGF0ZUZpcnN0UGVyc29uQ29udHJvbGxlcigpOyB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQgeyB0aGlzLmRlc3Ryb3lGaXJzdFBlcnNvbkNvbnRyb2xsZXIoKTsgfVxuXG4gICAgICAgIHByaXZhdGUgc2V0dXBGaXJzdFBlcnNvbkNvbnRyb2xsZXIoKTp2b2lkIHtcbiAgICAgICAgICAgIC8vIFNldHVwIENhbWVyYSBBYXR0YWNobWVudHNcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QgPSB0aGlzLmdldENoaWxkVHJhbnNmb3JtKFwiUGl2b3RcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW1lcmFQaXZvdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdCA9IG5ldyBCQUJZTE9OLlRyYW5zZm9ybU5vZGUoXCJQaXZvdFwiLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90LnNldFBhcmVudCh0aGlzLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdC5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMC4wLCB0aGlzLnBsYXllckV5ZUxldmVsLCAwLjApOyAvLyBOT1RFOiBQT1NJVElPTiBDQU1FUkEgRVlFIExFVkVMIChUTyBTRUUgQVJNUylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlZhbGlkYXRlVHJhbnNmb3JtUXVhdGVybmlvbih0aGlzLmNhbWVyYVBpdm90KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkF0dGFjaCBDYW1lcmEgRm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUgKyBcIiAtLT4gXCIgKyB0aGlzLmF0dGFjaENhbWVyYS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy50cmFuc2Zvcm0ubWV0YWRhdGEpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hdHRhY2hDYW1lcmEgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBDcmVhdGUgTXVsdGkgUGxheWVyIENhbWVyYSAoTm8gQXR0YWNoIENhbWVyYSlcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVJpZ2dlciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFRyYW5zZm9ybU5vZGUodGhpcy5zY2VuZSwgXCJNYWluIENhbWVyYVwiKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmFSaWdnZXIgIT0gbnVsbCAmJiB0aGlzLmNhbWVyYVBpdm90ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdC5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMC4wLCB0aGlzLnBsYXllckV5ZUxldmVsLCAwLjApOyAvLyBOT1RFOiBQT1NJVElPTiBDQU1FUkEgRVlFIExFVkVMIChUTyBTRUUgQVJNUylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIuc2V0UGFyZW50KHRoaXMuY2FtZXJhUGl2b3QpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVJpZ2dlci5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMC4wLCAwLjAsIDAuMCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyLnJvdGF0aW9uUXVhdGVybmlvbiA9IEJBQllMT04uUXVhdGVybmlvbi5JZGVudGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZQQzogQXR0YWNoZWQgbWFpbiBjYW1lcmEgdG8gcGxheWVyIGNvbnRyb2xsZXI6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGxvY2F0ZSBjYW1lcmEgb3IgbG9jYWwgcGl2b3QgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldHVwIENoYXJhY3RlciBDb250cm9sbGVyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPSB0aGlzLmdldENvbXBvbmVudChcIkJBQllMT04uQ2hhcmFjdGVyQ29udHJvbGxlclwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGxvY2F0ZSBjaGFyYWN0ZXIgY29udHJvbGxlciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG5cbiAgICAgICAgICAgIC8vIENoYXJhY3RlciBDb2xsaXNpb24gQ29udGFjdCAoVEVTVClcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgIT0gbnVsbCkge1xuXG4gICAgICAgICAgICAgICAgLy8gVGVzdCBTdGF0aWMgT25seSBDb2xsaXNpb25zXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyLnNldENvbGxpc2lvbkZpbHRlck1hc2soQkFCWUxPTi5Db2xsaXNpb25GaWx0ZXJzLlN0YXRpY0ZpbHRlcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIucmVnaXN0ZXJPbkNvbGxpc2lvbkVudGVyKChtZXNoOkJBQllMT04uQWJzdHJhY3RNZXNoKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiUExBWUVSOiA9PT0+IEdvdCBDb2xsaXNpb24gRW50ZXIgRXZlbnQ6IFwiICsgbWVzaC5uYW1lICsgXCIgLS0+IFwiICsgdGFnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIucmVnaXN0ZXJPbkNvbGxpc2lvblN0YXkoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJQTEFZRVI6ID09PT4gR290IENvbGxpc2lvbiBTdGF5IEV2ZW50OiBcIiArIG1lc2gubmFtZSArIFwiIC0tPiBcIiArIHRhZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyLnJlZ2lzdGVyT25Db2xsaXNpb25FeGl0KChtZXNoOkJBQllMT04uQWJzdHJhY3RNZXNoKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUud2FybihcIlBMQVlFUiA9PT0+IERFU1RST1k6IENvbGxpc2lvbiBFeGl0IEV2ZW50OiBcIiArIG1lc2gubmFtZSArIFwiIC0tPiBcIiArIHRhZyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHVwZGF0ZUZpcnN0UGVyc29uQ29udHJvbGxlcigpOnZvaWQge1xuICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lOm51bWJlciA9IHRoaXMuZ2V0RGVsdGFTZWNvbmRzKCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllckRlbHRhWCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuSG9yaXpvbnRhbCwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJEZWx0YVogPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLlZlcnRpY2FsLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnBsYXllck1vdXNlWCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuTW91c2VYLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnBsYXllck1vdXNlWSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuTW91c2VZLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBEZWFkIElucHV0IFZhbHVlc1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMucGxheWVyRGVsdGFYKSA8PSBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuR2FtZXBhZERlYWRTdGlja1ZhbHVlKSB0aGlzLnBsYXllckRlbHRhWCA9IDA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJEZWx0YVopIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyRGVsdGFaID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllck1vdXNlWCkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJNb3VzZVggPSAwO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMucGxheWVyTW91c2VZKSA8PSBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuR2FtZXBhZERlYWRTdGlja1ZhbHVlKSB0aGlzLnBsYXllck1vdXNlWSA9IDA7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBDaGFyYWN0ZXIgTW92ZW1lbnRcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDaGFyYWN0ZXJHcm91bmRlZCA9IHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci5pc0dyb3VuZGVkKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NoYXJhY3Rlckp1bXBGcmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJvdGF0ZSBQbGF5ZXIgTGVmdCBBbmQgUmlnaHQgV2l0aCBNb3VzZS1YXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJUdXJuUmF0ZSA9ICh0aGlzLnBsYXllck1vdXNlWCAqICh0aGlzLmhvcnpTZW5zaXRpdml0eSAqIHRoaXMuZGVsdGFGYWN0b3IpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIudHVybih0aGlzLnBsYXllclR1cm5SYXRlKTtcblxuICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgIC8vIEZQQzogUGl0Y2ggQ2FtZXJhIFBpdm90IFVwIEFuZCBEb3duIFdpdGggTW91c2UtWVxuICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl0Y2hSYXRlID0gKHRoaXMucGxheWVyTW91c2VZICogKHRoaXMudmVydFNlbnNpdGl2aXR5ICogdGhpcy5kZWx0YUZhY3RvcikpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3Qucm90YXRlKEJBQllMT04uQXhpcy5YLCAtKHRoaXMuY2FtZXJhUGl0Y2hSYXRlICogQkFCWUxPTi5TeXN0ZW0uRGVnMlJhZCksIEJBQllMT04uU3BhY2UuTE9DQUwpO1xuICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlRvRXVsZXJUb1JlZih0aGlzLmNhbWVyYVBpdm90LnJvdGF0aW9uUXVhdGVybmlvbiwgdGhpcy5jYW1lcmFFdWxlckFuZ2xlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFFdWxlckFuZ2xlcy54ID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAodGhpcy5jYW1lcmFFdWxlckFuZ2xlcy54LCB0aGlzLm1pbmltdW1QaXRjaEFuZ2xlLCB0aGlzLm1heGltdW1QaXRjaEFuZ2xlKTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Gcm9tRXVsZXJUb1JlZih0aGlzLmNhbWVyYUV1bGVyQW5nbGVzLngsIHRoaXMuY2FtZXJhRXVsZXJBbmdsZXMueSwgdGhpcy5jYW1lcmFFdWxlckFuZ2xlcy56LCB0aGlzLmNhbWVyYVBpdm90LnJvdGF0aW9uUXVhdGVybmlvbik7XG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgUGxheWVyIElucHV0IFdpdGggRGVsdGEtWCBBbmQgRGVsdGEtWlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyR3JvdW5kZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlbWVudC54ID0gdGhpcy5wbGF5ZXJEZWx0YVg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyTW92ZW1lbnQueSA9IDAuMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlbWVudC56ID0gdGhpcy5wbGF5ZXJEZWx0YVo7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDaGFyYWN0ZXJKdW1wRnJhbWUgPSAoQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0S2V5Ym9hcmRJbnB1dCh0aGlzLmtleWJvYXJkSnVtcCkgfHwgQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0R2FtZXBhZEJ1dHRvbklucHV0KHRoaXMuYnV0dG9uSnVtcCkpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIE1vdmVtZW50IERpcmVjdGlvbiBBbmQgU2NhbGUgU3BlZWRcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVHJhbnNmb3JtRGlyZWN0aW9uVG9SZWYodGhpcy50cmFuc2Zvcm0sIHRoaXMucGxheWVyTW92ZW1lbnQsIHRoaXMucGxheWVyTW92ZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlZlY3RvcjMuTm9ybWFsaXplVG9SZWYodGhpcy5wbGF5ZXJNb3ZlbWVudCwgdGhpcy5wbGF5ZXJNb3ZlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyTW92ZW1lbnQuc2NhbGVJblBsYWNlKChCQUJZTE9OLlN5c3RlbS5XYWxraW5nVmVsb2NpdHkgKiB0aGlzLm1vdmVtZW50U3BlZWQpICogZGVsdGFUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIFBsYXllciBVc2luZyBQaHlzaWNzIENoYXJhY3RlciBDb250cm9sbGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci5tb3ZlKHRoaXMucGxheWVyTW92ZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgUGxheWVyIFVzaW5nIFBoeXNpY3MgQ2hhcmFjdGVyIENvbnRyb2xsZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGFyYWN0ZXJKdW1wRnJhbWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci5qdW1wKHRoaXMuanVtcGluZ1ZlbG9jaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSBkZXN0cm95Rmlyc3RQZXJzb25Db250cm9sbGVyKCk6dm9pZCB7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBUaGlyZFBlcnNvbkNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgVGhpcmRQZXJzb25Db250cm9sbGVyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIGRlbHRhRmFjdG9yOm51bWJlciA9IDIuMDtcbiAgICAgICAgcHJpdmF0ZSBhdHRhY2hDYW1lcmE6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIHByaXZhdGUgY2FtZXJhUGl2b3Q6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFSaWdnZXI6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBtb3ZlbWVudFNwZWVkOm51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBqdW1waW5nVmVsb2NpdHk6bnVtYmVyID0gMTAuMDtcbiAgICAgICAgcHJpdmF0ZSBwbGF5ZXJNb3ZlbWVudDpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwcml2YXRlIHBsYXllclR1cm5SYXRlOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFQaXRjaFJhdGU6bnVtYmVyID0gMC4wO1xuICAgICAgICBwcml2YXRlIGhvcnpTZW5zaXRpdml0eTpudW1iZXIgPSAxLjA7XG4gICAgICAgIHByaXZhdGUgdmVydFNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBtb3VzZVNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSBtaW5pbXVtUGl0Y2hBbmdsZTpudW1iZXIgPSAtNjAuMDtcbiAgICAgICAgcHJpdmF0ZSBtYXhpbXVtUGl0Y2hBbmdsZTpudW1iZXIgPSA2MC4wO1xuICAgICAgICBwcml2YXRlIGlzQ2hhcmFjdGVyR3JvdW5kZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGlzQ2hhcmFjdGVySnVtcEZyYW1lOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBjaGFyYWN0ZXJDb250cm9sbGVyOkJBQllMT04uQ2hhcmFjdGVyQ29udHJvbGxlciA9IG51bGw7XG5cbiAgICAgICAgcHVibGljIGJ1dHRvbkp1bXA6bnVtYmVyID0gQkFCWUxPTi5YYm94MzYwQnV0dG9uLkE7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZEp1bXA6bnVtYmVyID0gQkFCWUxPTi5Vc2VySW5wdXRLZXkuU3BhY2VCYXI7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJOdW1iZXI6QkFCWUxPTi5QbGF5ZXJOdW1iZXIgPSBCQUJZTE9OLlBsYXllck51bWJlci5PbmU7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJEZWx0YVg6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgcGxheWVyRGVsdGFaOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIHBsYXllck1vdXNlWDpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJNb3VzZVk6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgZ2V0Q2hhcmFjdGVyQ29udHJvbGxlcigpOkJBQllMT04uQ2hhcmFjdGVyQ29udHJvbGxlciB7IHJldHVybiB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXI7IH1cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hDYW1lcmEgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYXR0YWNoQ2FtZXJhXCIsIHRoaXMuYXR0YWNoQ2FtZXJhKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTnVtYmVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInBsYXllck51bWJlclwiLCB0aGlzLnBsYXllck51bWJlcilcbiAgICAgICAgICAgIHRoaXMubW92ZW1lbnRTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtb3ZlbWVudFNwZWVkXCIsIHRoaXMubW92ZW1lbnRTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLm1vdXNlU2Vuc2l0aXZpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibW91c2VTZW5zaXRpdml0eVwiLCB0aGlzLm1vdXNlU2Vuc2l0aXZpdHkpXG4gICAgICAgICAgICB0aGlzLm1pbmltdW1QaXRjaEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1pbmltdW1QaXRjaEFuZ2xlXCIsIHRoaXMubWluaW11bVBpdGNoQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy5tYXhpbXVtUGl0Y2hBbmdsZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhpbXVtUGl0Y2hBbmdsZVwiLCB0aGlzLm1heGltdW1QaXRjaEFuZ2xlKTtcbiAgICAgICAgICAgIHRoaXMudmVydFNlbnNpdGl2aXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInZlcnRpY2FsU2Vuc2l0aXZpdHlcIiwgdGhpcy52ZXJ0U2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgdGhpcy5ob3J6U2Vuc2l0aXZpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaG9yaXpvbnRhbFNlbnNpdGl2aXR5XCIsIHRoaXMuaG9yelNlbnNpdGl2aXR5KVxuICAgICAgICAgICAgdGhpcy5qdW1waW5nVmVsb2NpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaW1wdWxzZUp1bXBWZWxvY2l0eVwiLCB0aGlzLmp1bXBpbmdWZWxvY2l0eSk7XG4gICAgICAgICAgICAvLyBTY2FsZSBNb3VzZSBQb2ludGVyIFNlbnNpdGl2aXR5XG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXJOdW1iZXIgPT0gQkFCWUxPTi5QbGF5ZXJOdW1iZXIuT25lKSB7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLlBvaW50ZXJBbmd1bGFyU2Vuc2liaWxpdHkgPSAoQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLlBvaW50ZXJBbmd1bGFyU2Vuc2liaWxpdHkgKiB0aGlzLm1vdXNlU2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQgeyB0aGlzLnNldHVwVGhpcmRQZXJzb25Db250cm9sbGVyKCk7IH1cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHsgdGhpcy51cGRhdGVUaGlyZFBlcnNvbkNvbnRyb2xsZXIoKTsgfVxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHsgdGhpcy5kZXN0cm95VGhpcmRQZXJzb25Db250cm9sbGVyKCk7IH1cblxuICAgICAgICBwcml2YXRlIHNldHVwVGhpcmRQZXJzb25Db250cm9sbGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gU2V0dXAgQ2FtZXJhIEF0dGFjaG1lbnRzXG4gICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90ID0gdGhpcy5nZXRDaGlsZFRyYW5zZm9ybShcIlBpdm90XCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhUGl2b3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QgPSBuZXcgQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlKFwiUGl2b3RcIiwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdC5zZXRQYXJlbnQodGhpcy50cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QucG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAuMCwgMS44NSwgMC4wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlZhbGlkYXRlVHJhbnNmb3JtUXVhdGVybmlvbih0aGlzLmNhbWVyYVBpdm90KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmF0dGFjaENhbWVyYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IENyZWF0ZSBNdWx0aSBQbGF5ZXIgQ2FtZXJhIChObyBBdHRhY2ggQ2FtZXJhKVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtTm9kZSh0aGlzLnNjZW5lLCBcIk1haW4gQ2FtZXJhXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYVJpZ2dlciAhPSBudWxsICYmIHRoaXMuY2FtZXJhUGl2b3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVJpZ2dlci5zZXRQYXJlbnQodGhpcy5jYW1lcmFQaXZvdCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyLnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLjAsIDAuMCwgLTQuNSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyLnJvdGF0aW9uUXVhdGVybmlvbiA9IEJBQllMT04uUXVhdGVybmlvbi5JZGVudGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRQQzogQXR0YWNoZWQgbWFpbiBjYW1lcmEgdG8gcGxheWVyIGNvbnRyb2xsZXI6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGxvY2F0ZSBjYW1lcmEgb3IgbG9jYWwgcGl2b3QgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNldHVwIENoYXJhY3RlciBDb250cm9sbGVyXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPSB0aGlzLmdldENvbXBvbmVudChcIkJBQllMT04uQ2hhcmFjdGVyQ29udHJvbGxlclwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGxvY2F0ZSBjaGFyYWN0ZXIgY29udHJvbGxlciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHVwZGF0ZVRoaXJkUGVyc29uQ29udHJvbGxlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRGVsdGFYID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Ib3Jpem9udGFsLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnBsYXllckRlbHRhWiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuVmVydGljYWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTW91c2VYID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Nb3VzZVgsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTW91c2VZID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Nb3VzZVksIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIERlYWQgSW5wdXQgVmFsdWVzXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJEZWx0YVgpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyRGVsdGFYID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllckRlbHRhWikgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJEZWx0YVogPSAwO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMucGxheWVyTW91c2VYKSA8PSBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuR2FtZXBhZERlYWRTdGlja1ZhbHVlKSB0aGlzLnBsYXllck1vdXNlWCA9IDA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJNb3VzZVkpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyTW91c2VZID0gMDtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIENoYXJhY3RlciBNb3ZlbWVudFxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciAhPSBudWxsKSB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZGVzdHJveVRoaXJkUGVyc29uQ29udHJvbGxlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIEJvdW5kaW5nQm94U2tpbnNcbiAgICAgKi9cbiAgICBjbGFzcyBCb3VuZGluZ0JveFNraW5zIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIHNraW5zOkJBQllMT04uQWJzdHJhY3RNZXNoW10gPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN5bmNCb3VuZGluZ0luZm86Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIHByaXZhdGUgdXBkYXRlRXZlcnlGcmFtZTpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgcG9zaXRpb25UaHJlYXNob2xkOm51bWJlciA9IDAuMTtcbiAgICAgICAgcHJpdmF0ZSBsYXN0UG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gQkFCWUxPTi5WZWN0b3IzLlplcm8oKTtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIFNraW4gQm91bmRpbmcgQm94IEluZm9cbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICB0aGlzLnN5bmNCb3VuZGluZ0luZm8gPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic3luY0JvdW5kaW5nSW5mb1wiLCB0aGlzLnN5bmNCb3VuZGluZ0luZm8pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFdmVyeUZyYW1lID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInVwZGF0ZUV2ZXJ5RnJhbWVcIiwgdGhpcy51cGRhdGVFdmVyeUZyYW1lKTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25UaHJlYXNob2xkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInBvc2l0aW9uVGhyZWFzaG9sZFwiLCB0aGlzLnBvc2l0aW9uVGhyZWFzaG9sZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zeW5jQm91bmRpbmdJbmZvID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNraW5uZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhOmFueSA9IHRoaXMuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgIT0gbnVsbCAmJiBtZXRhZGF0YS5za2luID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNraW5zID0gdGhpcy50cmFuc2Zvcm0uZ2V0Q2hpbGRNZXNoZXMoZmFsc2UsIChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6YW55ID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjZW5lTWV0YWRhdGEobm9kZSBhcyBCQUJZTE9OLlRyYW5zZm9ybU5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKChkYXRhICE9IG51bGwgJiYgZGF0YS5za2luID09PSB0cnVlKSB8fCAoc2tpbm5lZCA9PT0gdHJ1ZSAmJiBub2RlLm5hbWUuaW5kZXhPZihcIl9wcmltaXRpdmVcIikgPj0gMCkpOyAvLyBUT0RPOiBSZW1vdmUgUHJpbWl0aXZlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChza2lubmVkID09PSB0cnVlICYmIHRoaXMudHJhbnNmb3JtIGluc3RhbmNlb2YgQkFCWUxPTi5BYnN0cmFjdE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpbnMgPT0gbnVsbCkgdGhpcy5za2lucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNraW5zLnVuc2hpZnQodGhpcy50cmFuc2Zvcm0gYXMgQkFCWUxPTi5BYnN0cmFjdE1lc2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tTa2lucygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVwZGF0ZUV2ZXJ5RnJhbWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU2tpbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBhZnRlcigpOiB2b2lkIHtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgdGhpcy5za2lucyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGNoZWNrU2tpbnMoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICAgICAgaWYgKHRoaXMuc2tpbnMgIT0gbnVsbCAmJiB0aGlzLnNraW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2Zvcm0ucG9zaXRpb24ueCAhPT0gdGhpcy5sYXN0UG9zaXRpb24ueCB8fCB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi55ICE9PSB0aGlzLmxhc3RQb3NpdGlvbi55IHx8IHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLnogIT09IHRoaXMubGFzdFBvc2l0aW9uLnopIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLnggLSB0aGlzLmxhc3RQb3NpdGlvbi54KSA+PSB0aGlzLnBvc2l0aW9uVGhyZWFzaG9sZCB8fCBNYXRoLmFicyh0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi55IC0gdGhpcy5sYXN0UG9zaXRpb24ueSkgPj0gdGhpcy5wb3NpdGlvblRocmVhc2hvbGQgfHwgTWF0aC5hYnModGhpcy50cmFuc2Zvcm0ucG9zaXRpb24ueiAtIHRoaXMubGFzdFBvc2l0aW9uLnopID49IHRoaXMucG9zaXRpb25UaHJlYXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNraW5zLmZvckVhY2goKHNraW46QkFCWUxPTi5BYnN0cmFjdE1lc2gpID0+IHsgc2tpbi5yZWZyZXNoQm91bmRpbmdJbmZvKHRydWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCI9PT0+IFBvc2l0aW9uIENoYW5nZSBVcGRhdGU6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24ueCA9IHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLng7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbi55ID0gdGhpcy50cmFuc2Zvcm0ucG9zaXRpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFBvc2l0aW9uLnogPSB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIHNraWRtYXJrIHNlY3Rpb24gY2xhc3MgKE5hdGl2ZSBCdWxsZXQgUGh5c2ljcyAyLjgyKVxuICAgICAqIEBjbGFzcyBTa2lkbWFya1NlY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgU2tpZG1hcmtTZWN0aW9uIHtcbiAgICAgICAgcHVibGljIFBvczpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwdWJsaWMgTm9ybWFsOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHB1YmxpYyBUYW5nZW50OkJBQllMT04uVmVjdG9yNCA9IEJBQllMT04uVmVjdG9yNC5aZXJvKCk7XG4gICAgICAgIHB1YmxpYyBQb3NsOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHB1YmxpYyBQb3NyOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHB1YmxpYyBJbnRlbnNpdHk6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgTGFzdEluZGV4Om51bWJlciA9IC0xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgU2tpZG1hcmtNYW5hZ2VyXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFNraWRtYXJrTWFuYWdlciBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTUFYX01BUktTOm51bWJlciA9IDQwOTY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWF4IG51bWJlciBvZiBtYXJrcyB0b3RhbCBmb3IgZXZlcnlvbmUgdG9nZXRoZXJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgR1JPVU5EX09GRlNFVDpudW1iZXIgPSAwLjAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzdGFuY2UgYWJvdmUgc3VyZmFjZSBpbiBtZXRyZXNcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVkVMT0NJVFlfU0NBTEU6bnVtYmVyID0gMC4wMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVsb2NpdHkgb2Zmc2V0IHNjYWxlIGZhY3RvclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBHUFVfVFJJQU5HTEVTOmJvb2xlYW4gPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHUFUgcXVhZCB0cmlhbmdsZSBpbmRpY2VzIG9ubHlcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTUFSS19DT0xPUjpCQUJZTE9OLkNvbG9yMyA9IEJBQllMT04uQ29sb3IzLkJsYWNrKCk7ICAgICAgLy8gU2tpZG1hcmsgQ29sb3JcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTUFSS19XSURUSDpudW1iZXIgPSAwLjM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2lkdGggb2YgdGhlIFNraWRtYXJrcy4gU2hvdWxkIG1hdGNoIHRoZSB3aWR0aCBvZiB0aGUgd2hlZWxzXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFRFWF9JTlRFTlNJVFk6bnVtYmVyID0gMS4wOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiB0aGUgc2tpZG1hcmsgdGV4dHVyZSBpbnRlbnNpdHkgY29lZmZlY2llbnRcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTUlOX0RJU1RBTkNFOm51bWJlciA9IDAuMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzdGFuY2UgYmV0d2VlbiBza2lkIHRleHR1cmUgc2VjdGlvbnMgaW4gbWV0cmVzLiBCaWdnZXIgPSBiZXR0ZXIgcGVyZm9ybWFuY2UsIGxlc3Mgc21vb3RoXG4gICAgICAgIHByaXZhdGUgc3RhdGljIE1JTl9TUVJfRElTVEFOQ0UgPSAoU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSAqIFNraWRtYXJrTWFuYWdlci5NSU5fRElTVEFOQ0UpO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBURVhUVVJFX01BUktTOmFueSA9IG51bGw7XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU2tpZEJ1ZmZlclBvc2l0aW9uczpGbG9hdDMyQXJyYXkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkQnVmZmVyTm9ybWFsczpGbG9hdDMyQXJyYXkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkQnVmZmVyVGFuZ2VudHM6RmxvYXQzMkFycmF5ID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU2tpZEJ1ZmZlckNvbG9yczpGbG9hdDMyQXJyYXkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkQnVmZmVyVXZzOkZsb2F0MzJBcnJheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRCdWZmZXJJbmRpY2VzOkludDMyQXJyYXkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkbWFya1NlY3Rpb25zOlNraWRtYXJrU2VjdGlvbltdID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU2tpZG1hcmtJbmRleDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkbWFya01lc2g6QkFCWUxPTi5NZXNoID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU2tpZG1hcmtVcGRhdGVkOmJvb2xlYW4gPSBmYWxzZTtcblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBUZW1wVmVjdG9yM19QT1M6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFRlbXBWZWN0b3IzX0RJUjpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGVtcFZlY3RvcjNfWERJUjpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGVtcFZlY3RvcjNfU0RJUjpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhTZWN0aW9uc1wiLCBTa2lkbWFya01hbmFnZXIuTUFYX01BUktTKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5NQVJLX0NPTE9SID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VDb2xvcjModGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRleHR1cmVDb2xvclwiLCBTa2lkbWFya01hbmFnZXIuTUFSS19DT0xPUikpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLk1BUktfV0lEVEggPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidGV4dHVyZVdpZHRoXCIsIFNraWRtYXJrTWFuYWdlci5NQVJLX1dJRFRIKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5HUk9VTkRfT0ZGU0VUID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdyb3VuZE9mZnNldFwiLCBTa2lkbWFya01hbmFnZXIuR1JPVU5EX09GRlNFVCk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVkVMT0NJVFlfU0NBTEUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidmVsb2NpdHlTY2FsZVwiLCBTa2lkbWFya01hbmFnZXIuVkVMT0NJVFlfU0NBTEUpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLkdQVV9UUklBTkdMRVMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ3B1UXVhZEluZGljZXNcIiwgU2tpZG1hcmtNYW5hZ2VyLkdQVV9UUklBTkdMRVMpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlRFWFRVUkVfTUFSS1MgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidGV4dHVyZU1hcmtzXCIsIFNraWRtYXJrTWFuYWdlci5URVhUVVJFX01BUktTKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5URVhfSU5URU5TSVRZID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRleHR1cmVJbnRlbnNpdHlcIiwgU2tpZG1hcmtNYW5hZ2VyLlRFWF9JTlRFTlNJVFkpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0ZXh0dXJlRGlzdGFuY2VcIiwgU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuTUlOX1NRUl9ESVNUQU5DRSA9IChTa2lkbWFya01hbmFnZXIuTUlOX0RJU1RBTkNFICogU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZFRocmVhc2hvbGQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic2tpZFRocmVhc2hvbGRcIiwgU2tpZG1hcmtNYW5hZ2VyLlNraWRUaHJlYXNob2xkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpOiB2b2lkIHsgU2tpZG1hcmtNYW5hZ2VyLkNyZWF0ZVNraWRtYXJrTWFuYWdlcih0aGlzLnNjZW5lKTsgfVxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQgeyBTa2lkbWFya01hbmFnZXIuVXBkYXRlU2tpZG1hcmtNYW5hZ2VyKCk7IH1cblxuICAgICAgICBwdWJsaWMgc3RhdGljIFNraWRUaHJlYXNob2xkOm51bWJlciA9IDAuNTtcbiAgICAgICAgcHVibGljIHN0YXRpYyBHZXRWZWxvY2l0eVNjYWxlKCk6bnVtYmVyIHsgcmV0dXJuIFNraWRtYXJrTWFuYWdlci5WRUxPQ0lUWV9TQ0FMRTsgfVxuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQWRkU2tpZG1hcmtTZWdtZW50KHBvczpCQUJZTE9OLlZlY3RvcjMsIG5vcm1hbDpCQUJZTE9OLlZlY3RvcjMsIGludGVuc2l0eTpudW1iZXIsIGxhc3RJbmRleDpudW1iZXIpOkJBQllMT04uTnVsbGFibGU8bnVtYmVyPiB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19QT1Muc2V0KDAsMCwwKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19ESVIuc2V0KDAsMCwwKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19YRElSLnNldCgwLDAsMCk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUi5zZXQoMCwwLDApO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmIChpbnRlbnNpdHkgPiAxLjApIGludGVuc2l0eSA9IDEuMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGludGVuc2l0eSA8IDAuMCkgcmV0dXJuIC0xLjA7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBwb3Muc3VidHJhY3RUb1JlZihTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tsYXN0SW5kZXhdLlBvcywgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3FyRGlzdGFuY2U6bnVtYmVyID0gU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUy5sZW5ndGhTcXVhcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNxckRpc3RhbmNlIDwgU2tpZG1hcmtNYW5hZ2VyLk1JTl9TUVJfRElTVEFOQ0UpIHJldHVybiBsYXN0SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgY29uc3QgY3VyU2VjdGlvbjpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleF07XG4gICAgICAgICAgICBub3JtYWwuc2NhbGVUb1JlZihTa2lkbWFya01hbmFnZXIuR1JPVU5EX09GRlNFVCwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUyk7XG4gICAgICAgICAgICBwb3MuYWRkVG9SZWYoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUywgY3VyU2VjdGlvbi5Qb3MpO1xuICAgICAgICAgICAgY3VyU2VjdGlvbi5Ob3JtYWwuY29weUZyb20obm9ybWFsKTtcbiAgICAgICAgICAgIGN1clNlY3Rpb24uSW50ZW5zaXR5ID0gKGludGVuc2l0eSAqIFNraWRtYXJrTWFuYWdlci5URVhfSU5URU5TSVRZKTtcbiAgICAgICAgICAgIGN1clNlY3Rpb24uTGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0U2VjdGlvbjpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tsYXN0SW5kZXhdO1xuICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uUG9zLnN1YnRyYWN0VG9SZWYobGFzdFNlY3Rpb24uUG9zLCBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfRElSKTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlZlY3RvcjMuQ3Jvc3NUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfRElSLCBub3JtYWwsIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19YRElSKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUi5ub3JtYWxpemVUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUik7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUi5zY2FsZVRvUmVmKFNraWRtYXJrTWFuYWdlci5NQVJLX1dJRFRIICogMC41LCBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUilcbiAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5hZGRUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUiwgY3VyU2VjdGlvbi5Qb3NsKTtcbiAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5zdWJ0cmFjdFRvUmVmKFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19TRElSLCBjdXJTZWN0aW9uLlBvc3IpO1xuICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uVGFuZ2VudC5zZXQoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueCwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueSwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueiwgMSk7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBpZiAobGFzdFNlY3Rpb24uTGFzdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5hZGRUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUiwgbGFzdFNlY3Rpb24uUG9zbCk7XG4gICAgICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uUG9zLnN1YnRyYWN0VG9SZWYoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1NESVIsIGxhc3RTZWN0aW9uLlBvc3IpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0U2VjdGlvbi5UYW5nZW50LmNvcHlGcm9tKGN1clNlY3Rpb24uVGFuZ2VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5BZGRTa2lkbWFya1ZlcnRleERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1ckluZGV4Om51bWJlciA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggPSArK1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICUgU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUztcbiAgICAgICAgICAgIHJldHVybiBjdXJJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIHN0YXRpYyBDcmVhdGVTa2lkbWFya01hbmFnZXIoc2NlbmU6QkFCWUxPTi5TY2VuZSk6dm9pZCB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpZG1hcmtNYXRlcmlhbDpCQUJZTE9OLlN0YW5kYXJkTWF0ZXJpYWwgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKFwiU2tpZG1hcmtNYXRlcmlhbFwiLCBzY2VuZSk7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpc2FibGVMaWdodGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5lbWlzc2l2ZUNvbG9yID0gU2tpZG1hcmtNYW5hZ2VyLk1BUktfQ09MT1I7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBTa2lkbWFya01hbmFnZXIuTUFSS19DT0xPUjtcbiAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VUZXh0dXJlKFNraWRtYXJrTWFuYWdlci5URVhUVVJFX01BUktTLCBzY2VuZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRtYXJrTWF0ZXJpYWwuZGlmZnVzZVRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC51c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNraWRtYXJrTWF0ZXJpYWwuZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9IG5ldyBCQUJZTE9OLk1lc2goXCJTa2lkbWFya01lc2hcIiwgc2NlbmUpO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2gubWF0ZXJpYWwgPSBza2lkbWFya01hdGVyaWFsO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guYWx3YXlzU2VsZWN0QXNBY3RpdmVNZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmRvTm90U3luY0JvdW5kaW5nSW5mbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5yZWNlaXZlU2hhZG93cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guY2hlY2tDb2xsaXNpb25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC51c2VWZXJ0ZXhDb2xvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guaGFzVmVydGV4QWxwaGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guaXNQaWNrYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgU2tpZG1hcmsgU2VjdGlvbiBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9ucyA9IG5ldyBBcnJheTxTa2lkbWFya1NlY3Rpb24+KFNraWRtYXJrTWFuYWdlci5NQVhfTUFSS1MpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnNbaV0gPSBuZXcgU2tpZG1hcmtTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgUmF3IE1lc2ggVmVydGV4IEJ1ZmZlciBEYXRhXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiAzKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KFNraWRtYXJrTWFuYWdlci5NQVhfTUFSS1MgKiA0ICogMyk7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiA0KTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiA0KTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiAyKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXMgPSBuZXcgSW50MzJBcnJheShTa2lkbWFya01hbmFnZXIuTUFYX01BUktTICogNik7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBSYXcgVmVydGV4IEJ1ZmZlciBEYXRhIFRvIE1lc2hcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleERhdGEgPSBuZXcgQkFCWUxPTi5WZXJ0ZXhEYXRhKCk7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS5wb3NpdGlvbnMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclBvc2l0aW9ucztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLm5vcm1hbHMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHM7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS50YW5nZW50cyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHM7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS5jb2xvcnMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9ycztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLnV2cyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzOyAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZlcnRleERhdGEuaW5kaWNlcyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlcztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLmFwcGx5VG9NZXNoKFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2gsIHRydWUpO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZnJlZXplV29ybGRNYXRyaXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIHN0YXRpYyBBZGRTa2lkbWFya1ZlcnRleERhdGEoKTp2b2lkIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnI6U2tpZG1hcmtTZWN0aW9uID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXhdO1xuICAgICAgICAgICAgaWYgKGN1cnIuTGFzdEluZGV4ID09PSAtMSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbGFzdDpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tjdXJyLkxhc3RJbmRleF07XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtVcGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAvLyBVcGRhdGUgUG9zaXRpb24gQnVmZmVycyBEaXJlY3RseVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGxldCBpbmRleDpudW1iZXIgPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGxhc3QuUG9zbC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGxhc3QuUG9zbC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGxhc3QuUG9zbC56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAxO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGxhc3QuUG9zci54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGxhc3QuUG9zci55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGxhc3QuUG9zci56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAyO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGN1cnIuUG9zbC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGN1cnIuUG9zbC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGN1cnIuUG9zbC56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAzO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGN1cnIuUG9zci54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGN1cnIuUG9zci55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGN1cnIuUG9zci56O1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBOb3JtYWwgQnVmZmVycyBEaXJlY3RseVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gbGFzdC5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gbGFzdC5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gbGFzdC5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gbGFzdC5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gbGFzdC5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gbGFzdC5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gY3Vyci5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gY3Vyci5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gY3Vyci5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMztcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gY3Vyci5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gY3Vyci5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gY3Vyci5Ob3JtYWwuejtcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAvLyBVcGRhdGUgVGFuZ2VudCBCdWZmZXJzIERpcmVjdGx5XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1tpbmRleCAqIDRdID0gbGFzdC5UYW5nZW50Lng7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMV0gPSBsYXN0LlRhbmdlbnQueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAyXSA9IGxhc3QuVGFuZ2VudC56O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5UYW5nZW50Lnc7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzW2luZGV4ICogNF0gPSBsYXN0LlRhbmdlbnQueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAxXSA9IGxhc3QuVGFuZ2VudC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDJdID0gbGFzdC5UYW5nZW50Lno7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgM10gPSBsYXN0LlRhbmdlbnQudztcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbaW5kZXggKiA0XSA9IGN1cnIuVGFuZ2VudC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDFdID0gY3Vyci5UYW5nZW50Lnk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMl0gPSBjdXJyLlRhbmdlbnQuejtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAzXSA9IGN1cnIuVGFuZ2VudC53O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAzO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1tpbmRleCAqIDRdID0gY3Vyci5UYW5nZW50Lng7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMV0gPSBjdXJyLlRhbmdlbnQueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAyXSA9IGN1cnIuVGFuZ2VudC56O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5UYW5nZW50Lnc7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIENvbG9yIEJ1ZmZlcnMgRGlyZWN0bHlcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDI7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5JbnRlbnNpdHk7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIENvb3JkIEJ1ZmZlcnMgRGlyZWN0bHlcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1tpbmRleCAqIDJdID0gMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzWyhpbmRleCAqIDIpICsgMV0gPSAwO1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAxO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJVdnNbaW5kZXggKiAyXSA9IDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1soaW5kZXggKiAyKSArIDFdID0gMDtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzW2luZGV4ICogMl0gPSAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJVdnNbKGluZGV4ICogMikgKyAxXSA9IDE7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1tpbmRleCAqIDJdID0gMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzWyhpbmRleCAqIDIpICsgMV0gPSAxO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBUcmlhbmdsZSAxIEJ1ZmZlcnMgRGlyZWN0bHkgKFFVQUQpXG4gICAgICAgICAgICAvLy4uXG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA2ICsgMF0gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJJbmRpY2VzW1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNiArIDJdID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDYgKyAxXSA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDI7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIFRyaWFuZ2xlIDIgQnVmZmVycyBEaXJlY3RseSAoUVVBRClcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA2ICsgM10gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAyO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJJbmRpY2VzW1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNiArIDVdID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDYgKyA0XSA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVXBkYXRlU2tpZG1hcmtNYW5hZ2VyKCk6dm9pZCB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCAhPSBudWxsICYmIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya1VwZGF0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtVcGRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmdlb21ldHJ5LnVwZGF0ZVZlcnRpY2VzRGF0YURpcmVjdGx5KEJBQllMT04uVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5Ob3JtYWxLaW5kLCBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5UYW5nZW50S2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50cywgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmdlb21ldHJ5LnVwZGF0ZVZlcnRpY2VzRGF0YURpcmVjdGx5KEJBQllMT04uVmVydGV4QnVmZmVyLkNvbG9yS2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5VVktpbmQsIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZ2VvbWV0cnkudXBkYXRlSW5kaWNlcyhTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXMsIDAsIFNraWRtYXJrTWFuYWdlci5HUFVfVFJJQU5HTEVTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gc3RhbmRhcmQgcmlnaWRib2R5IHZlaGljbGUgY29udHJvbGxlciBjbGFzcyAoTmF0aXZlIEJ1bGxldCBQaHlzaWNzIDIuODIpXG4gICAgICogQGNsYXNzIFN0YW5kYXJkQ2FyQ29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBTdGFuZGFyZENhckNvbnRyb2xsZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgX3JpZ2lkYm9keTpCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MgPSBudWxsO1xuICAgICAgICBwcml2YXRlIF9lbmdpbmVBdWRpb1NvdXJjZTpCQUJZTE9OLkF1ZGlvU291cmNlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBfc2tpZEF1ZGlvU291cmNlOkJBQllMT04uQXVkaW9Tb3VyY2UgPSBudWxsO1xuXG4gICAgICAgIHByaXZhdGUgZ2VhckluZGV4Om51bWJlciA9IDA7IC8vIEZpcnN0IEdlYXIgUmF0aW9cbiAgICAgICAgcHJpdmF0ZSBzaGlmdGluZ0dlYXJzOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBlbmdpbmVGb3JjZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGZvcndhcmRTcGVlZDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGFic29sdXRlU3BlZWQ6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBhbWVyaWNhblNwZWVkOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgbm9ybWFsaXplZFNwZWVkOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgZnJvbnRXaGVlbFBvd2VyOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgYmFja1doZWVsUG93ZXI6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbEJyYWtpbmdGb3JjZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHZpc3VhbFN0ZWVyQW5nbGU6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBwaHlzaWNzU3RlZXJBbmdsZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHJheWNhc3RWZWhpY2xlOkJBQllMT04uUmF5Y2FzdFZlaGljbGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250TGVmdFdoZWVsTWVzaDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250UmlnaHRXaGVlbE1lc2g6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrTGVmdFdoZWVsTWVzaDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tSaWdodFdoZWVsTWVzaDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250TGVmdFdoZWVsVHJhbnM6QkFCWUxPTi5JVW5pdHlUcmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250UmlnaHRXaGVlbFRyYW5zOkJBQllMT04uSVVuaXR5VHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrTGVmdFdoZWVsVHJhbnM6QkFCWUxPTi5JVW5pdHlUcmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tSaWdodFdoZWVsVHJhbnM6QkFCWUxPTi5JVW5pdHlUcmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250TGVmdFdoZWVsQ29sbGlkZXI6YW55ID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udFJpZ2h0V2hlZWxDb2xsaWRlcjphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tMZWZ0V2hlZWxDb2xsaWRlcjphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tSaWdodFdoZWVsQ29sbGlkZXI6YW55ID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBlbmdpbmVUb3JxdWVDdXJ2ZTpCQUJZTE9OLkFuaW1hdGlvbiA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgd2hlZWxSYWRpdXM6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBzaGlmdERlbGF5Om51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgZW5naW5lUlBNOm51bWJlciA9IDA7XG5cbiAgICAgICAgLy9wcml2YXRlIGNsdXRjaFNsaXA6bnVtYmVyID0gMDtcbiAgICAgICAgLy9wcml2YXRlIGxlcnBlZFJQTTpudW1iZXIgPSAwO1xuICAgICAgICAvL3ByaXZhdGUgb2xkUlBNOm51bWJlciA9IDA7XG5cbiAgICAgICAgcHJpdmF0ZSBGUk9OVF9MRUZUOm51bWJlciA9IC0xO1xuICAgICAgICBwcml2YXRlIEZST05UX1JJR0hUOm51bWJlciA9IC0xO1xuICAgICAgICBwcml2YXRlIEJBQ0tfTEVGVDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBCQUNLX1JJR0hUOm51bWJlciA9IC0xO1xuXG4gICAgICAgIHB1YmxpYyBnZXRSaWdpZGJvZHlQaHlzaWNzKCk6QkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzIHsgcmV0dXJuIHRoaXMuX3JpZ2lkYm9keTsgfVxuICAgICAgICBwdWJsaWMgZ2V0UmF5Y2FzdFZlaGljbGUoKTpCQUJZTE9OLlJheWNhc3RWZWhpY2xlIHsgcmV0dXJuIHRoaXMucmF5Y2FzdFZlaGljbGU7IH1cbiAgICAgICAgcHVibGljIGdldEFic29sdXRlU3BlZWQoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5hYnNvbHV0ZVNwZWVkOyB9XG4gICAgICAgIHB1YmxpYyBnZXROb3JtYWxpemVkU3BlZWQoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5ub3JtYWxpemVkU3BlZWQ7IH1cbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRHZWFySW5kZXgoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5nZWFySW5kZXggfVxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudEVuZ2luZVJQTSgpOm51bWJlciB7IHJldHVybiB0aGlzLmVuZ2luZVJQTSB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50RW5naW5lUGl0Y2goKTpudW1iZXIgeyByZXR1cm4gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoKHRoaXMuZW5naW5lUlBNIC8gdGhpcy5sZXJwRW5naW5lUGl0Y2hpbmcpICsgMC4xKTsgfVxuICAgICAgICBwdWJsaWMgZ2V0R2VhclNoaWZ0UmF0aW9Db3VudCgpOm51bWJlciB7IHJldHVybiAodGhpcy5nZWFyQm94U2hpZnRSYXRpb3MgIT0gbnVsbCkgPyB0aGlzLmdlYXJCb3hTaGlmdFJhdGlvcy5sZW5ndGggOiAwIH1cbiAgICAgICAgcHVibGljIGdldFNtb2tlVGV4dHVyZUluZm8oKTphbnkgeyByZXR1cm4gdGhpcy5zbW9rZVRleHR1cmU7IH1cbiAgICAgICAgcHVibGljIGdldFNoYWRvd1RleHR1cmVJbmZvKCk6YW55IHsgcmV0dXJuIHRoaXMuc2hhZG93VGV4dHVyZTsgfVxuICAgICAgICBwdWJsaWMgZ2V0RnJvbnRMZWZ0V2hlZWxOb2RlKCk6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlIHsgcmV0dXJuIHRoaXMuZnJvbnRMZWZ0V2hlZWxNZXNoOyB9XG4gICAgICAgIHB1YmxpYyBnZXRGcm9udFJpZ2h0V2hlZWxOb2RlKCk6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlIHsgcmV0dXJuIHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaDsgfVxuICAgICAgICBwdWJsaWMgZ2V0QmFja0xlZnRXaGVlbE5vZGUoKTpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgeyByZXR1cm4gdGhpcy5iYWNrTGVmdFdoZWVsTWVzaDsgfVxuICAgICAgICBwdWJsaWMgZ2V0QmFja1JpZ2h0V2hlZWxOb2RlKCk6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlIHsgcmV0dXJuIHRoaXMuYmFja1JpZ2h0V2hlZWxNZXNoOyB9XG4gICAgICAgIHB1YmxpYyBnZXRXaGVlbEJ1cm5vdXRFbmFibGVkKCk6Ym9vbGVhbiB7IHJldHVybiB0aGlzLndoZWVsQnVybm91dDsgfVxuICAgICAgICBwdWJsaWMgb25VcGRhdGVWZWhpY2xlSW5mb3JtYXRpb246KHNraWRfRkw6bnVtYmVyLCBza2lkX0ZSOm51bWJlciwgc2tpZF9STDpudW1iZXIsIHNraWRfUlI6bnVtYmVyKT0+dm9pZCA9IG51bGw7XG5cbiAgICAgICAgcHVibGljIHNtb2tlVGV4dHVyZTphbnkgPSBudWxsO1xuICAgICAgICBwdWJsaWMgc2hhZG93VGV4dHVyZTphbnkgPSBudWxsO1xuICAgICAgICBwdWJsaWMgbWF4VHVybkFuZ2xlOm51bWJlciA9IDAuMztcbiAgICAgICAgcHVibGljIG1heEJ1cm5BbmdsZTpudW1iZXIgPSAwLjU7XG4gICAgICAgIHB1YmxpYyBhZGRTdGVlckJvb3N0Om51bWJlciA9IDEwO1xuICAgICAgICBwdWJsaWMgc2V0RW5naW5lVG9ycXVlOmFueSA9IG51bGw7XG4gICAgICAgIHB1YmxpYyB0b3BFbmdpbmVTcGVlZDpudW1iZXIgPSAxMjA7XG4gICAgICAgIHB1YmxpYyBiYXNlRW5naW5lUG93ZXI6bnVtYmVyID0gMTAwMDtcbiAgICAgICAgcHVibGljIGxvd1NwZWVkQW5nbGU6bnVtYmVyID0gMC4xNjU7XG4gICAgICAgIHB1YmxpYyBoaWdoU3BlZWRBbmdsZTpudW1iZXIgPSAwLjAxNTtcbiAgICAgICAgcHVibGljIGxvd1NwZWVkVHVybmluZzpudW1iZXIgPSAwLjAxNTtcbiAgICAgICAgcHVibGljIGhpZ2hTcGVlZFR1cm5pbmc6bnVtYmVyID0gMC4wMDU7XG4gICAgICAgIHB1YmxpYyBzdGFibGVEb3duRm9yY2U6bnVtYmVyID0gMS4wO1xuICAgICAgICBwdWJsaWMgdHJhbnNtaXNzaW9uUmF0aW8gPSAwLjc7XG4gICAgICAgIHB1YmxpYyBkaWZmZXJlbnRpYWxSYXRpbyA9IDMuNTU7XG4gICAgICAgIHB1YmxpYyBtYXhSZXZlcnNlUG93ZXI6bnVtYmVyID0gMC42NjtcbiAgICAgICAgcHVibGljIGxlcnBFbmdpbmVQaXRjaGluZyA9IDUwMDA7XG4gICAgICAgIHB1YmxpYyBtYXhCcmFraW5nRm9yY2U6bnVtYmVyID0gMTAwO1xuICAgICAgICBwdWJsaWMgaGFuZEJyYWtpbmdGb3JjZTpudW1iZXIgPSAyNTAwO1xuICAgICAgICBwdWJsaWMgbGluZWFyQnJha2luZ0ZvcmNlOm51bWJlciA9IDAuMzU7XG4gICAgICAgIHB1YmxpYyBhbmd1bGFyQnJha2luZ0ZvcmNlOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIHdoZWVsTG9ja0ZyaWN0aW9uOm51bWJlciA9IDEuMDtcbiAgICAgICAgcHVibGljIHdoZWVsQnVybkZyaWN0aW9uOm51bWJlciA9IDEuMDtcbiAgICAgICAgcHVibGljIGRlZmF1bHRMZXJwU3BlZWQ6bnVtYmVyID0gMC42NTtcbiAgICAgICAgcHVibGljIGRyaWZ0aW5nTGVycFNwZWVkOm51bWJlciA9IDAuMjU7XG4gICAgICAgIHB1YmxpYyBidXJub3V0TGVycFNwZWVkOm51bWJlciA9IDAuMTtcbiAgICAgICAgcHVibGljIGJ1cm5vdXRUaW1lRGVsYXk6bnVtYmVyID0gMS41O1xuICAgICAgICBwdWJsaWMgYnVybm91dERvbnV0Qm9vc3Q6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgYnVybm91dENvZWZmaWNpZW50Om51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIGJ1cm5vdXRUcmlnZ2VyTWFyazpudW1iZXIgPSAxMDtcbiAgICAgICAgcHVibGljIHdoZWVsRHJpdmVUeXBlOm51bWJlciA9IDA7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnREZWxheTpudW1iZXIgPSAwLjM7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnROZXh0Om51bWJlciA9IDM1MDA7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnREb3duOm51bWJlciA9IDI1MDA7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnRSYXRpb3M6bnVtYmVyW10gPSBbMy40MzcsIDAuMDAsIDMuNjI2LCAyLjIsIDEuNTQxLCAxLjIxMywgMS4wLCAwLjc2N107XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnRTY2FsZXM6bnVtYmVyW10gPSBbMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjBdO1xuXG4gICAgICAgIHByb3RlY3RlZCBtX2Zyb250TGVmdFdoZWVsOmFueSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX2Zyb250UmlnaHRXaGVlbDphbnkgPSBudWxsO1xuICAgICAgICBwcm90ZWN0ZWQgbV9iYWNrTGVmdFdoZWVsOmFueSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX2JhY2tSaWdodFdoZWVsOmFueSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX3BoeXNpY3NXb3JsZDphbnkgPSBudWxsO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRXaGVlbFBvd2VyID0gMDtcbiAgICAgICAgICAgIHRoaXMuYmFja1doZWVsUG93ZXIgPSAwO1xuICAgICAgICAgICAgdGhpcy53aGVlbEJyYWtpbmdGb3JjZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPSAwO1xuICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSA9IDA7XG4gICAgICAgICAgICB0aGlzLm1fcGh5c2ljc1dvcmxkID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0UGh5c2ljc1dvcmxkKHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgdGhpcy5zbW9rZVRleHR1cmUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic21va2VUZXh0dXJlXCIsIHRoaXMuc21va2VUZXh0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93VGV4dHVyZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzaGFkb3dUZXh0dXJlXCIsIHRoaXMuc2hhZG93VGV4dHVyZSk7XG4gICAgICAgICAgICB0aGlzLnNldEVuZ2luZVRvcnF1ZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzZXRFbmdpbmVUb3JxdWVcIiwgdGhpcy5zZXRFbmdpbmVUb3JxdWUpO1xuICAgICAgICAgICAgdGhpcy50b3BFbmdpbmVTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0b3BFbmdpbmVTcGVlZFwiLCB0aGlzLnRvcEVuZ2luZVNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZUVuZ2luZVBvd2VyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJhc2VFbmdpbmVQb3dlclwiLCB0aGlzLmJhc2VFbmdpbmVQb3dlcik7XG4gICAgICAgICAgICB0aGlzLm1heFJldmVyc2VQb3dlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhSZXZlcnNlUG93ZXJcIiwgdGhpcy5tYXhSZXZlcnNlUG93ZXIpO1xuICAgICAgICAgICAgdGhpcy5zdGFibGVEb3duRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic3RhYmxlRG93bkZvcmNlXCIsIHRoaXMuc3RhYmxlRG93bkZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMubWF4VHVybkFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heFR1cm5BbmdsZVwiLCB0aGlzLm1heFR1cm5BbmdsZSk7XG4gICAgICAgICAgICB0aGlzLm1heEJ1cm5BbmdsZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhCdXJuQW5nbGVcIiwgdGhpcy5tYXhCdXJuQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy5hZGRTdGVlckJvb3N0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImFkZFN0ZWVyQm9vc3RcIiwgdGhpcy5hZGRTdGVlckJvb3N0KTtcbiAgICAgICAgICAgIHRoaXMubG93U3BlZWRBbmdsZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJsb3dTcGVlZEFuZ2xlXCIsIHRoaXMubG93U3BlZWRBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLmhpZ2hTcGVlZEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImhpZ2hTcGVlZEFuZ2xlXCIsIHRoaXMuaGlnaFNwZWVkQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy53aGVlbERyaXZlVHlwZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ3aGVlbERyaXZlVHlwZVwiLCB0aGlzLndoZWVsRHJpdmVUeXBlKTtcbiAgICAgICAgICAgIHRoaXMubWF4QnJha2luZ0ZvcmNlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heEJyYWtpbmdGb3JjZVwiLCB0aGlzLm1heEJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICB0aGlzLmhhbmRCcmFraW5nRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGFuZEJyYWtpbmdGb3JjZVwiLCB0aGlzLmhhbmRCcmFraW5nRm9yY2UpO1xuICAgICAgICAgICAgdGhpcy5saW5lYXJCcmFraW5nRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibGluZWFyQnJha2luZ0ZvcmNlXCIsIHRoaXMubGluZWFyQnJha2luZ0ZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhbmd1bGFyQnJha2luZ0ZvcmNlXCIsIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICB0aGlzLndoZWVsQnVybkZyaWN0aW9uID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIndoZWVsQnVybkZyaWN0aW9uXCIsIHRoaXMud2hlZWxCdXJuRnJpY3Rpb24pO1xuICAgICAgICAgICAgdGhpcy53aGVlbExvY2tGcmljdGlvbiA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ3aGVlbExvY2tGcmljdGlvblwiLCB0aGlzLndoZWVsTG9ja0ZyaWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMubG93U3BlZWRUdXJuaW5nID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImxvd1NwZWVkVHVybmluZ1wiLCB0aGlzLmxvd1NwZWVkVHVybmluZyk7XG4gICAgICAgICAgICB0aGlzLmhpZ2hTcGVlZFR1cm5pbmcgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGlnaFNwZWVkVHVybmluZ1wiLCB0aGlzLmhpZ2hTcGVlZFR1cm5pbmcpO1xuICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbFRyYW5zID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZyb250TGVmdFdoZWVsTWVzaFwiLCB0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMpO1xuICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxUcmFucyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmcm9udFJpZ2h0V2hlZWxNZXNoXCIsIHRoaXMuZnJvbnRSaWdodFdoZWVsVHJhbnMpO1xuICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsVHJhbnMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicmVhckxlZnRXaGVlbE1lc2hcIiwgdGhpcy5iYWNrTGVmdFdoZWVsVHJhbnMpO1xuICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbFRyYW5zID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJlYXJSaWdodFdoZWVsTWVzaFwiLCB0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMpO1xuICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbENvbGxpZGVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZyb250TGVmdFdoZWVsQ29sbGlkZXJcIiwgdGhpcy5mcm9udExlZnRXaGVlbENvbGxpZGVyKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsQ29sbGlkZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZnJvbnRSaWdodFdoZWVsQ29sbGlkZXJcIiwgdGhpcy5mcm9udFJpZ2h0V2hlZWxDb2xsaWRlcik7XG4gICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxDb2xsaWRlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyZWFyTGVmdFdoZWVsQ29sbGlkZXJcIiwgdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIpO1xuICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbENvbGxpZGVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJlYXJSaWdodFdoZWVsQ29sbGlkZXJcIiwgdGhpcy5iYWNrUmlnaHRXaGVlbENvbGxpZGVyKTtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdExlcnBTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJkZWZhdWx0TGVycFNwZWVkXCIsIHRoaXMuZGVmYXVsdExlcnBTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLmRyaWZ0aW5nTGVycFNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImRyaWZ0aW5nTGVycFNwZWVkXCIsIHRoaXMuZHJpZnRpbmdMZXJwU3BlZWQpO1xuICAgICAgICAgICAgdGhpcy5idXJub3V0TGVycFNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJ1cm5vdXRMZXJwU3BlZWRcIiwgdGhpcy5idXJub3V0TGVycFNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVEZWxheSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJidXJub3V0VGltZURlbGF5XCIsIHRoaXMuYnVybm91dFRpbWVEZWxheSk7XG4gICAgICAgICAgICB0aGlzLmJ1cm5vdXREb251dEJvb3N0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJ1cm5vdXREb251dEJvb3N0XCIsIHRoaXMuYnVybm91dERvbnV0Qm9vc3QpO1xuICAgICAgICAgICAgdGhpcy5idXJub3V0Q29lZmZpY2llbnQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYnVybm91dENvZWZmaWNpZW50XCIsIHRoaXMuYnVybm91dENvZWZmaWNpZW50KTtcbiAgICAgICAgICAgIHRoaXMuYnVybm91dFRyaWdnZXJNYXJrID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJ1cm5vdXRUcmlnZ2VyTWFya1wiLCB0aGlzLmJ1cm5vdXRUcmlnZ2VyTWFyayk7XG4gICAgICAgICAgICB0aGlzLmxlcnBFbmdpbmVQaXRjaGluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJsZXJwRW5naW5lUGl0Y2hpbmdcIiwgdGhpcy5sZXJwRW5naW5lUGl0Y2hpbmcpO1xuICAgICAgICAgICAgdGhpcy5kaWZmZXJlbnRpYWxSYXRpbyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJnZWFyQm94RGlmZmVyZW50aWFsXCIsIHRoaXMuZGlmZmVyZW50aWFsUmF0aW8pO1xuICAgICAgICAgICAgdGhpcy50cmFuc21pc3Npb25SYXRpbyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJnZWFyQm94T3ZlcmRyaXZlXCIsIHRoaXMudHJhbnNtaXNzaW9uUmF0aW8pO1xuICAgICAgICAgICAgdGhpcy5nZWFyQm94U2hpZnROZXh0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdlYXJCb3hTaGlmdE5leHRcIiwgdGhpcy5nZWFyQm94U2hpZnROZXh0KTtcbiAgICAgICAgICAgIHRoaXMuZ2VhckJveFNoaWZ0RG93biA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJnZWFyQm94U2hpZnREb3duXCIsIHRoaXMuZ2VhckJveFNoaWZ0RG93bik7XG4gICAgICAgICAgICB0aGlzLmdlYXJCb3hTaGlmdERlbGF5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdlYXJCb3hTaGlmdERlbGF5XCIsIHRoaXMuZ2VhckJveFNoaWZ0RGVsYXkpO1xuICAgICAgICAgICAgdGhpcy5nZWFyQm94U2hpZnRSYXRpb3MgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ2VhckJveFNoaWZ0UmF0aW9zXCIsIHRoaXMuZ2VhckJveFNoaWZ0UmF0aW9zKTtcbiAgICAgICAgICAgIHRoaXMuZ2VhckJveFNoaWZ0U2NhbGVzID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdlYXJCb3hTaGlmdFNjYWxlc1wiLCB0aGlzLmdlYXJCb3hTaGlmdFNjYWxlcyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm1heFR1cm5BbmdsZSA8PSAwKSB0aGlzLm1heFR1cm5BbmdsZSA9IDAuMztcbiAgICAgICAgICAgIGlmICh0aGlzLm1heEJ1cm5BbmdsZSA8PSAwKSB0aGlzLm1heEJ1cm5BbmdsZSA9IDAuNTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkZFN0ZWVyQm9vc3QgPD0gMCkgdGhpcy5hZGRTdGVlckJvb3N0ID0gMTA7XG4gICAgICAgICAgICBpZiAodGhpcy5sb3dTcGVlZEFuZ2xlIDw9IDApIHRoaXMubG93U3BlZWRBbmdsZSA9IDAuMTY1O1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlnaFNwZWVkQW5nbGUgPD0gMCkgdGhpcy5oaWdoU3BlZWRBbmdsZSA9IDAuMDE1O1xuICAgICAgICAgICAgaWYgKHRoaXMubG93U3BlZWRUdXJuaW5nIDw9IDApIHRoaXMubG93U3BlZWRUdXJuaW5nID0gMC4wMTU7XG4gICAgICAgICAgICBpZiAodGhpcy5oaWdoU3BlZWRUdXJuaW5nIDw9IDApIHRoaXMuaGlnaFNwZWVkVHVybmluZyA9IDAuMDA1O1xuICAgICAgICAgICAgaWYgKHRoaXMubGVycEVuZ2luZVBpdGNoaW5nIDw9IDApIHRoaXMubGVycEVuZ2luZVBpdGNoaW5nID0gNTAwMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmJhc2VFbmdpbmVQb3dlciA8PSAwKSB0aGlzLmJhc2VFbmdpbmVQb3dlciA9IDEwMDA7XG4gICAgICAgICAgICBpZiAodGhpcy50b3BFbmdpbmVTcGVlZCA8PSAwKSB0aGlzLnRvcEVuZ2luZVNwZWVkID0gMTIwO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckJveFNoaWZ0TmV4dCA8PSAwKSB0aGlzLmdlYXJCb3hTaGlmdE5leHQgPSA0NTAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckJveFNoaWZ0RG93biA8PSAwKSB0aGlzLmdlYXJCb3hTaGlmdE5leHQgPSAzMDAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckJveFNoaWZ0RGVsYXkgPD0gMCkgdGhpcy5nZWFyQm94U2hpZnREZWxheSA9IDAuMztcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zbWlzc2lvblJhdGlvIDw9IDApIHRoaXMudHJhbnNtaXNzaW9uUmF0aW8gPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlmZmVyZW50aWFsUmF0aW8gPD0gMCkgdGhpcy5kaWZmZXJlbnRpYWxSYXRpbyA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0TGVycFNwZWVkIDw9IDApIHRoaXMuZGVmYXVsdExlcnBTcGVlZCA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5kcmlmdGluZ0xlcnBTcGVlZCA8PSAwKSB0aGlzLmRyaWZ0aW5nTGVycFNwZWVkID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1cm5vdXRMZXJwU3BlZWQgPD0gMCkgdGhpcy5idXJub3V0TGVycFNwZWVkID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1cm5vdXRUaW1lRGVsYXkgPD0gMCkgdGhpcy5idXJub3V0VGltZURlbGF5ID0gMTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0RW5naW5lVG9ycXVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBVU0UgRU5HSU5FIFRPUlFVRSBDVVJWRVNcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oXCJTZXR1cCBFbmdpbmUgVG9ycXVlIEFuaW1hdGlvblwiKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNldEVuZ2luZVRvcnF1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTp2b2lkIHsgdGhpcy5pbml0VmVoaWNsZVN0YXRlKCk7IH1cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpIDp2b2lkIHsgIHRoaXMudXBkYXRlVmVoaWNsZVN0YXRlKCk7IH1cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7IHRoaXMuZGVzdHJveVZlaGljbGVTdGF0ZSgpOyB9XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8gUHJvdGVjdGVkIFZlaGljbGUgTW92ZW1lbnQgU3RhdGUgRnVuY3Rpb25zIC8vXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgXG4gICAgICAgIHByb3RlY3RlZCBpbml0VmVoaWNsZVN0YXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVmFsaWRhdGVUcmFuc2Zvcm1RdWF0ZXJuaW9uKHRoaXMudHJhbnNmb3JtKTtcbiAgICAgICAgICAgIC8vIFNldHVwIEVuZ2luZSBBdWRpb1xuICAgICAgICAgICAgdGhpcy5fZW5naW5lQXVkaW9Tb3VyY2UgPSB0aGlzLmdldENvbXBvbmVudChcIkJBQllMT04uQXVkaW9Tb3VyY2VcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5fZW5naW5lQXVkaW9Tb3VyY2UgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiTm8gZW5naW5lIGF1ZGlvIHNvdXJjZSBtYW5hZ2VyIGZvdW5kIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgIC8vIFNldHVwIFJheWNhc3QgVmVoaWNsZVxuICAgICAgICAgICAgdGhpcy5fcmlnaWRib2R5ID0gdGhpcy5nZXRDb21wb25lbnQoXCJCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3NcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5Lmhhc1JheWNhc3RWZWhpY2xlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZSA9IHRoaXMuX3JpZ2lkYm9keS5nZXRSYXljYXN0VmVoaWNsZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yYXljYXN0VmVoaWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yaWdpZGJvZHkuc2V0RGFtcGluZygwLCAwKTsgLy8gRGVmYXVsdCBWZWhpY2xlIERyYWcgRGFtcGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRMZWZ0V2hlZWxOYW1lOnN0cmluZyA9ICh0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMgIT0gbnVsbCAmJiB0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMubmFtZSAhPSBudWxsICYmIHRoaXMuZnJvbnRMZWZ0V2hlZWxUcmFucy5uYW1lICE9PSBcIlwiKSA/IHRoaXMuZnJvbnRMZWZ0V2hlZWxUcmFucy5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250UmlnaHRXaGVlbE5hbWU6c3RyaW5nID0gKHRoaXMuZnJvbnRSaWdodFdoZWVsVHJhbnMgIT0gbnVsbCAmJiB0aGlzLmZyb250UmlnaHRXaGVlbFRyYW5zLm5hbWUgIT0gbnVsbCAmJiB0aGlzLmZyb250UmlnaHRXaGVlbFRyYW5zLm5hbWUgIT09IFwiXCIpID8gdGhpcy5mcm9udFJpZ2h0V2hlZWxUcmFucy5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tMZWZ0V2hlZWxOYW1lOnN0cmluZyA9ICh0aGlzLmJhY2tMZWZ0V2hlZWxUcmFucyAhPSBudWxsICYmIHRoaXMuYmFja0xlZnRXaGVlbFRyYW5zLm5hbWUgIT0gbnVsbCAmJiB0aGlzLmJhY2tMZWZ0V2hlZWxUcmFucy5uYW1lICE9PSBcIlwiKSA/IHRoaXMuYmFja0xlZnRXaGVlbFRyYW5zLm5hbWUgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFja1JpZ2h0V2hlZWxOYW1lOnN0cmluZyA9ICh0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMgIT0gbnVsbCAmJiB0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMubmFtZSAhPSBudWxsICYmIHRoaXMuYmFja1JpZ2h0V2hlZWxUcmFucy5uYW1lICE9PSBcIlwiKSA/IHRoaXMuYmFja1JpZ2h0V2hlZWxUcmFucy5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250TGVmdFdoZWVsTGFiZWw6c3RyaW5nID0gKHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlciAhPSBudWxsICYmIHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlci5uYW1lICE9IG51bGwgJiYgdGhpcy5mcm9udExlZnRXaGVlbENvbGxpZGVyLm5hbWUgIT09IFwiXCIpID8gdGhpcy5mcm9udExlZnRXaGVlbENvbGxpZGVyLm5hbWUgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRSaWdodFdoZWVsTGFiZWw6c3RyaW5nID0gKHRoaXMuZnJvbnRSaWdodFdoZWVsQ29sbGlkZXIgIT0gbnVsbCAmJiB0aGlzLmZyb250UmlnaHRXaGVlbENvbGxpZGVyLm5hbWUgIT0gbnVsbCAmJiB0aGlzLmZyb250UmlnaHRXaGVlbENvbGxpZGVyLm5hbWUgIT09IFwiXCIpID8gdGhpcy5mcm9udFJpZ2h0V2hlZWxDb2xsaWRlci5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tMZWZ0V2hlZWxMYWJlbDpzdHJpbmcgPSAodGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIgIT0gbnVsbCAmJiB0aGlzLmJhY2tMZWZ0V2hlZWxDb2xsaWRlci5uYW1lICE9IG51bGwgJiYgdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIubmFtZSAhPT0gXCJcIikgPyB0aGlzLmJhY2tMZWZ0V2hlZWxDb2xsaWRlci5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tSaWdodFdoZWVsTGFiZWw6c3RyaW5nID0gKHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlciAhPSBudWxsICYmIHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlci5uYW1lICE9IG51bGwgJiYgdGhpcy5iYWNrUmlnaHRXaGVlbENvbGxpZGVyLm5hbWUgIT09IFwiXCIpID8gdGhpcy5iYWNrUmlnaHRXaGVlbENvbGxpZGVyLm5hbWUgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IFdoZWVsIEluZGV4cyBmcm9tIFdoZWVsIE5hbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRMZWZ0V2hlZWxMYWJlbCAhPSBudWxsKSB0aGlzLkZST05UX0xFRlQgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFdoZWVsSW5kZXhCeU5hbWUoZnJvbnRMZWZ0V2hlZWxMYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRSaWdodFdoZWVsTGFiZWwgIT0gbnVsbCkgdGhpcy5GUk9OVF9SSUdIVCA9IHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0V2hlZWxJbmRleEJ5TmFtZShmcm9udFJpZ2h0V2hlZWxMYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFja0xlZnRXaGVlbExhYmVsICE9IG51bGwpIHRoaXMuQkFDS19MRUZUID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZGV4QnlOYW1lKGJhY2tMZWZ0V2hlZWxMYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmFja1JpZ2h0V2hlZWxMYWJlbCAhPSBudWxsKSB0aGlzLkJBQ0tfUklHSFQgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFdoZWVsSW5kZXhCeU5hbWUoYmFja1JpZ2h0V2hlZWxMYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXR1cCBXaGVlbCBJbmZvIEFuZCBUcmFuc2Zvcm0gTWVzaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yYXljYXN0VmVoaWNsZS5nZXROdW1XaGVlbHMoKSA+PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuRlJPTlRfTEVGVCA+PSAwICYmIGZyb250TGVmdFdoZWVsTmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbCA9IHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0V2hlZWxJbmZvKHRoaXMuRlJPTlRfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRMZWZ0V2hlZWxNZXNoID0gdGhpcy5nZXRDaGlsZFRyYW5zZm9ybShmcm9udExlZnRXaGVlbE5hbWUsIEJBQllMT04uU2VhcmNoVHlwZS5TdGFydHNXaXRoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyb250TGVmdFdoZWVsTWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuc3Bpbm5lciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkZpbmRTY2VuZUNoaWxkVHJhbnNmb3JtKHRoaXMuZnJvbnRMZWZ0V2hlZWxNZXNoLCBcIldoZWVsXCIsIEJBQllMT04uU2VhcmNoVHlwZS5JbmRleE9mLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0V2hlZWxUcmFuc2Zvcm1NZXNoKHRoaXMuRlJPTlRfTEVGVCwgdGhpcy5mcm9udExlZnRXaGVlbE1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbFJhZGl1cyA8PSAwICYmIHRoaXMubV9mcm9udExlZnRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxSYWRpdXMgPSB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZ2V0X21fd2hlZWxzUmFkaXVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLkZST05UX1JJR0hUID49IDAgJiYgZnJvbnRSaWdodFdoZWVsTmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFdoZWVsSW5mbyh0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoID0gdGhpcy5nZXRDaGlsZFRyYW5zZm9ybShmcm9udFJpZ2h0V2hlZWxOYW1lLCBCQUJZTE9OLlNlYXJjaFR5cGUuU3RhcnRzV2l0aCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuc3Bpbm5lciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkZpbmRTY2VuZUNoaWxkVHJhbnNmb3JtKHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaCwgXCJXaGVlbFwiLCBCQUJZTE9OLlNlYXJjaFR5cGUuSW5kZXhPZiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFdoZWVsVHJhbnNmb3JtTWVzaCh0aGlzLkZST05UX1JJR0hULCB0aGlzLmZyb250UmlnaHRXaGVlbE1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbFJhZGl1cyA8PSAwICYmIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsUmFkaXVzID0gdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5nZXRfbV93aGVlbHNSYWRpdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuQkFDS19MRUZUID49IDAgJiYgYmFja0xlZnRXaGVlbE5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fYmFja0xlZnRXaGVlbCA9IHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0V2hlZWxJbmZvKHRoaXMuQkFDS19MRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsTWVzaCA9IHRoaXMuZ2V0Q2hpbGRUcmFuc2Zvcm0oYmFja0xlZnRXaGVlbE5hbWUsIEJBQllMT04uU2VhcmNoVHlwZS5TdGFydHNXaXRoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNwaW5uZXIgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NlbmVDaGlsZFRyYW5zZm9ybSh0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoLCBcIldoZWVsXCIsIEJBQllMT04uU2VhcmNoVHlwZS5JbmRleE9mLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0V2hlZWxUcmFuc2Zvcm1NZXNoKHRoaXMuQkFDS19MRUZULCB0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAwIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gUkVBUiBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbFJhZGl1cyA8PSAwICYmIHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbFJhZGl1cyA9IHRoaXMubV9iYWNrTGVmdFdoZWVsLmdldF9tX3doZWVsc1JhZGl1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5CQUNLX1JJR0hUID49IDAgJiYgYmFja1JpZ2h0V2hlZWxOYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tSaWdodFdoZWVsID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZm8odGhpcy5CQUNLX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbE1lc2ggPSB0aGlzLmdldENoaWxkVHJhbnNmb3JtKGJhY2tSaWdodFdoZWVsTmFtZSwgQkFCWUxPTi5TZWFyY2hUeXBlLlN0YXJ0c1dpdGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja1JpZ2h0V2hlZWxNZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zcGlubmVyID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjZW5lQ2hpbGRUcmFuc2Zvcm0odGhpcy5iYWNrUmlnaHRXaGVlbE1lc2gsIFwiV2hlZWxcIiwgQkFCWUxPTi5TZWFyY2hUeXBlLkluZGV4T2YsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRXaGVlbFRyYW5zZm9ybU1lc2godGhpcy5CQUNLX1JJR0hULCB0aGlzLmJhY2tSaWdodFdoZWVsTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMCB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIFJFQVIgT1IgQUxMIFdIRUVMIERSSVZFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxSYWRpdXMgPD0gMCAmJiB0aGlzLm1fYmFja1JpZ2h0V2hlZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsUmFkaXVzID0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmdldF9tX3doZWVsc1JhZGl1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2tpZEF1ZGlvU291cmNlID09IG51bGwgJiYgdGhpcy5iYWNrUmlnaHRXaGVlbE1lc2ggIT0gbnVsbCkgdGhpcy5fc2tpZEF1ZGlvU291cmNlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjcmlwdENvbXBvbmVudCh0aGlzLmJhY2tSaWdodFdoZWVsTWVzaCwgXCJCQUJZTE9OLkF1ZGlvU291cmNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPT0gbnVsbCAmJiB0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoICE9IG51bGwpIHRoaXMuX3NraWRBdWRpb1NvdXJjZSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkZpbmRTY3JpcHRDb21wb25lbnQodGhpcy5iYWNrTGVmdFdoZWVsTWVzaCwgXCJCQUJZTE9OLkF1ZGlvU291cmNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPT0gbnVsbCAmJiB0aGlzLmZyb250UmlnaHRXaGVlbE1lc2ggIT0gbnVsbCkgdGhpcy5fc2tpZEF1ZGlvU291cmNlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjcmlwdENvbXBvbmVudCh0aGlzLmZyb250UmlnaHRXaGVlbE1lc2gsIFwiQkFCWUxPTi5BdWRpb1NvdXJjZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2tpZEF1ZGlvU291cmNlID09IG51bGwgJiYgdGhpcy5mcm9udExlZnRXaGVlbE1lc2ggIT0gbnVsbCkgdGhpcy5fc2tpZEF1ZGlvU291cmNlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjcmlwdENvbXBvbmVudCh0aGlzLmZyb250TGVmdFdoZWVsTWVzaCwgXCJCQUJZTE9OLkF1ZGlvU291cmNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiTm8gc2tpZCBhdWRpbyBzb3VyY2UgbWFuYWdlciBmb3VuZCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVG9vbHMuV2FybihcIkludmFsaWQgdmVoaWNsZSBjb250cm9sbGVyIHdoZWVsIGNvdW50IGluZm8gZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGNyZWF0ZSB2ZWhpY2xlIGNvbnRyb2xsZXIgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiTm8gd2hlZWwgY29sbGlkZXIgaW5mb3JtYXRpb24gZm91bmQgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGdldCByaWdpZGJvZHkgY29tcG9uZW50OiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBtX2Zyb250TGVmdFdoZWVsU2tpZDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBtX2Zyb250UmlnaHRXaGVlbFNraWQ6bnVtYmVyID0gLTE7XG4gICAgICAgIHByaXZhdGUgbV9iYWNrTGVmdFdoZWVsU2tpZDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBtX2JhY2tSaWdodFdoZWVsU2tpZDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBtX3ZlbG9jaXR5T2Zmc2V0OkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlVmVoaWNsZVN0YXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBEb3VibGUgQ2hlY2sgR2VhciBJbmRleCAtID8/P1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICBpZiAodGhpcy5nZWFySW5kZXggPCAwKSB0aGlzLmdlYXJJbmRleCA9IDA7XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmdlYXJJbmRleCA+PSB0aGlzLmdldEdlYXJTaGlmdFJhdGlvQ291bnQoKSkgdGhpcy5nZWFySW5kZXggPSAodGhpcy5nZXRHZWFyU2hpZnRSYXRpb0NvdW50KCkgLSAxKTtcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gSGFuZGxlIFNoaWZ0IERlbGF5IEZsYWcgLSA/Pz9cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hpZnREZWxheSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0RGVsYXkgLT0gZGVsdGFUaW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2hpZnREZWxheSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaGlmdERlbGF5ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0aW5nR2VhcnMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ICE9IG51bGwgJiYgdGhpcy5yYXljYXN0VmVoaWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3J3YXJkU3BlZWQgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFJhd0N1cnJlbnRTcGVlZEtwaCgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvcndhcmRTcGVlZCA8IDAuMikgdGhpcy5mb3J3YXJkU3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZVNwZWVkID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRBYnNDdXJyZW50U3BlZWRLcGgoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hYnNvbHV0ZVNwZWVkIDwgMC4yKSB0aGlzLmFic29sdXRlU3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuYW1lcmljYW5TcGVlZCA9ICh0aGlzLmFic29sdXRlU3BlZWQgKiBCQUJZTE9OLlN5c3RlbS5LcGgyTXBoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZWRTcGVlZCA9IEJBQllMT04uU2NhbGFyLkNsYW1wKCh0aGlzLmFic29sdXRlU3BlZWQgLyB0aGlzLnRvcEVuZ2luZVNwZWVkKSk7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZWFyQm94U2hpZnRSYXRpb3MgIT0gbnVsbCAmJiB0aGlzLmdlYXJJbmRleCA+PSAwICYmIHRoaXMuZ2VhckluZGV4IDwgdGhpcy5nZXRHZWFyU2hpZnRSYXRpb0NvdW50KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2hlZWxEaWFtZXRlcjpudW1iZXIgPSAodGhpcy53aGVlbFJhZGl1cyAqIDIgKiBCQUJZTE9OLlN5c3RlbS5NZXRlcjJJbmNoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxHZWFyUmF0aW86bnVtYmVyID0gKHRoaXMuZ2VhckJveFNoaWZ0UmF0aW9zW3RoaXMuZ2VhckluZGV4XSAqIHRoaXMuZGlmZmVyZW50aWFsUmF0aW8gKiB0aGlzLnRyYW5zbWlzc2lvblJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmdpbmVSUE0gPSAodGhpcy5hbWVyaWNhblNwZWVkICogZmluYWxHZWFyUmF0aW8gKiAzMzYpIC8gd2hlZWxEaWFtZXRlciArIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgR2VhciBCb3hcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW1lcmljYW5TcGVlZCA8IDUpIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlYXJJbmRleCA9IDA7XHRcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZWFySW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5naW5lUlBNIDwgdGhpcy5nZWFyQm94U2hpZnREb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VhckluZGV4LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnREZWxheSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRpbmdHZWFycyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlYXJJbmRleCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmdpbmVSUE0gPiB0aGlzLmdlYXJCb3hTaGlmdE5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZWFySW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdERlbGF5ID0gdGhpcy5nZWFyQm94U2hpZnREZWxheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdGluZ0dlYXJzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIGZ1cnRoZXIgbW92ZW1lbnQgc2luY2UgdGhlIGxhc3Qgd2hlZWwgdXBkYXRlXG4gICAgICAgICAgICBjb25zdCB2ZWxvY2l0eVNjYWxlOm51bWJlciA9IFNraWRtYXJrTWFuYWdlci5HZXRWZWxvY2l0eVNjYWxlKCk7XG4gICAgICAgICAgICBpZiAodmVsb2NpdHlTY2FsZSA+IDAuMCAmJiB0aGlzLl9yaWdpZGJvZHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubV92ZWxvY2l0eU9mZnNldC5jb3B5RnJvbSh0aGlzLl9yaWdpZGJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tX3ZlbG9jaXR5T2Zmc2V0LnNjYWxlSW5QbGFjZSh2ZWxvY2l0eVNjYWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgU291bmQgUGl0Y2hcbiAgICAgICAgICAgIGlmICh0aGlzLl9lbmdpbmVBdWRpb1NvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5naW5lU291bmRDbGlwOkJBQllMT04uU291bmQgPSB0aGlzLl9lbmdpbmVBdWRpb1NvdXJjZS5nZXRTb3VuZENsaXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoZW5naW5lU291bmRDbGlwICE9IG51bGwpIGVuZ2luZVNvdW5kQ2xpcC5zZXRQbGF5YmFja1JhdGUodGhpcy5nZXRDdXJyZW50RW5naW5lUGl0Y2goKSAqIDAuNzUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVXBkYXRlIFdoZWVsIFNraWRkaW5nIEluZm9cbiAgICAgICAgICAgIGxldCBza2lkX0ZMOm51bWJlciA9IDAsIHNraWRfRlIgPSAwLCBza2lkX1JMID0gMCwgc2tpZF9SUiAgPSAwXG4gICAgICAgICAgICBjb25zdCBza2lkVGhyZWFzaG9sZDpudW1iZXIgPSBTa2lkbWFya01hbmFnZXIuU2tpZFRocmVhc2hvbGQ7XG4gICAgICAgICAgICBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMSB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIEZST05UIE9SIEFMTCBXSEVFTCBEUklWRVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRMZWZ0V2hlZWwgIT0gbnVsbCkgeyBcbiAgICAgICAgICAgICAgICAgICAgc2tpZF9GTCA9IEJBQllMT04uU2NhbGFyLkNsYW1wKCgxIC0gdGhpcy5tX2Zyb250TGVmdFdoZWVsLmdldF9tX3NraWRJbmZvKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraWRfRkwgPCBza2lkVGhyZWFzaG9sZCkgc2tpZF9GTCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lkX0ZMID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50Rkw6YW55ID0gdGhpcy5tX2Zyb250TGVmdFdoZWVsLmdldF9tX3JheWNhc3RJbmZvKCkuZ2V0X21fY29udGFjdFBvaW50V1MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3ROb3JtYWxGTDphbnkgPSB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0Tm9ybWFsV1MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFBvc0ZMOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdFBvaW50RkwueCgpLCBjb250YWN0UG9pbnRGTC55KCksIGNvbnRhY3RQb2ludEZMLnooKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkTm9ybUZMOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdE5vcm1hbEZMLngoKSwgY29udGFjdE5vcm1hbEZMLnkoKSwgY29udGFjdE5vcm1hbEZMLnooKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkU2NhbGVGTDpudW1iZXIgPSBCQUJZTE9OLlNjYWxhci5Ob3JtYWxpemUoc2tpZF9GTCwgc2tpZFRocmVhc2hvbGQsIDEuMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWxvY2l0eVNjYWxlID4gMC4wKSBza2lkUG9zRkwuYWRkSW5QbGFjZSh0aGlzLm1fdmVsb2NpdHlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250TGVmdFdoZWVsU2tpZCA9IFNraWRtYXJrTWFuYWdlci5BZGRTa2lkbWFya1NlZ21lbnQoc2tpZFBvc0ZMLCBza2lkTm9ybUZMLCBza2lkU2NhbGVGTCwgdGhpcy5tX2Zyb250TGVmdFdoZWVsU2tpZCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRMZWZ0V2hlZWxTa2lkID0gLTE7ICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRSaWdodFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2tpZF9GUiA9IEJBQllMT04uU2NhbGFyLkNsYW1wKCgxIC0gdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5nZXRfbV9za2lkSW5mbygpKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lkX0ZSIDwgc2tpZFRocmVhc2hvbGQpIHNraWRfRlIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpZF9GUiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludEZSOmFueSA9IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0UG9pbnRXUygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbEZSOmFueSA9IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0Tm9ybWFsV1MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFBvc0ZSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdFBvaW50RlIueCgpLCBjb250YWN0UG9pbnRGUi55KCksIGNvbnRhY3RQb2ludEZSLnooKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkTm9ybUZSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdE5vcm1hbEZSLngoKSwgY29udGFjdE5vcm1hbEZSLnkoKSwgY29udGFjdE5vcm1hbEZSLnooKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkU2NhbGVGUjpudW1iZXIgPSBCQUJZTE9OLlNjYWxhci5Ob3JtYWxpemUoc2tpZF9GUiwgc2tpZFRocmVhc2hvbGQsIDEuMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWxvY2l0eVNjYWxlID4gMC4wKSBza2lkUG9zRlIuYWRkSW5QbGFjZSh0aGlzLm1fdmVsb2NpdHlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250UmlnaHRXaGVlbFNraWQgPSBTa2lkbWFya01hbmFnZXIuQWRkU2tpZG1hcmtTZWdtZW50KHNraWRQb3NGUiwgc2tpZE5vcm1GUiwgc2tpZFNjYWxlRlIsIHRoaXMubV9mcm9udFJpZ2h0V2hlZWxTa2lkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWxTa2lkID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxCdXJub3V0ID09IHRydWUgfHwgdGhpcy5yZXN0b3JlVGltZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWRfRkwgKj0gMC43NTtcbiAgICAgICAgICAgICAgICAgICAgc2tpZF9GUiAqPSAwLjc1O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgLy8gSGFsZiBTa2lkIEZvciBGcm9udCBXaGVlbHNcbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgc2tpZF9GTCAqPSAwLjU7XG4gICAgICAgICAgICAgICAgc2tpZF9GUiAqPSAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tMZWZ0V2hlZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNraWRfUkwgPSBCQUJZTE9OLlNjYWxhci5DbGFtcCgoMSAtIHRoaXMubV9iYWNrTGVmdFdoZWVsLmdldF9tX3NraWRJbmZvKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9STCA8IHNraWRUaHJlYXNob2xkKSBza2lkX1JMID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9STCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50Ukw6YW55ID0gdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0UG9pbnRXUygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsUkw6YW55ID0gdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0Tm9ybWFsV1MoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWRQb3NSTDpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKGNvbnRhY3RQb2ludFJMLngoKSwgY29udGFjdFBvaW50UkwueSgpLCBjb250YWN0UG9pbnRSTC56KCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkTm9ybVJMOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdE5vcm1hbFJMLngoKSwgY29udGFjdE5vcm1hbFJMLnkoKSwgY29udGFjdE5vcm1hbFJMLnooKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWRTY2FsZVJMOm51bWJlciA9IEJBQllMT04uU2NhbGFyLk5vcm1hbGl6ZShza2lkX1JMLCBza2lkVGhyZWFzaG9sZCwgMS4wKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodmVsb2NpdHlTY2FsZSA+IDAuMCkgc2tpZFBvc1JMLmFkZEluUGxhY2UodGhpcy5tX3ZlbG9jaXR5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tMZWZ0V2hlZWxTa2lkID0gU2tpZG1hcmtNYW5hZ2VyLkFkZFNraWRtYXJrU2VnbWVudChza2lkUG9zUkwsIHNraWROb3JtUkwsIHNraWRTY2FsZVJMLCB0aGlzLm1fYmFja0xlZnRXaGVlbFNraWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrTGVmdFdoZWVsU2tpZCA9IC0xOyAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBza2lkX1JSID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoKDEgLSB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZ2V0X21fc2tpZEluZm8oKSkpO1xuICAgICAgICAgICAgICAgIGlmIChza2lkX1JSIDwgc2tpZFRocmVhc2hvbGQpIHNraWRfUlIgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChza2lkX1JSID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnRSUjphbnkgPSB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9jb250YWN0UG9pbnRXUygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsUlI6YW55ID0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmdldF9tX3JheWNhc3RJbmZvKCkuZ2V0X21fY29udGFjdE5vcm1hbFdTKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkUG9zUlI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyhjb250YWN0UG9pbnRSUi54KCksIGNvbnRhY3RQb2ludFJSLnkoKSwgY29udGFjdFBvaW50UlIueigpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZE5vcm1SUjpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKGNvbnRhY3ROb3JtYWxSUi54KCksIGNvbnRhY3ROb3JtYWxSUi55KCksIGNvbnRhY3ROb3JtYWxSUi56KCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkU2NhbGVSUjpudW1iZXIgPSBCQUJZTE9OLlNjYWxhci5Ob3JtYWxpemUoc2tpZF9SUiwgc2tpZFRocmVhc2hvbGQsIDEuMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZlbG9jaXR5U2NhbGUgPiAwLjApIHNraWRQb3NSUi5hZGRJblBsYWNlKHRoaXMubV92ZWxvY2l0eU9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbFNraWQgPSBTa2lkbWFya01hbmFnZXIuQWRkU2tpZG1hcmtTZWdtZW50KHNraWRQb3NSUiwgc2tpZE5vcm1SUiwgc2tpZFNjYWxlUlIsIHRoaXMubV9iYWNrUmlnaHRXaGVlbFNraWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbFNraWQgPSAtMTsgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxCdXJub3V0ID09IHRydWUgfHwgdGhpcy5yZXN0b3JlVGltZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgc2tpZF9STCAqPSAwLjc1O1xuICAgICAgICAgICAgICAgIHNraWRfUlIgKj0gMC43NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIFBsYXkgU2tpZCBBdWRpbyBUcmFja1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgbGV0IHNraWRkaW5nOm51bWJlciA9IDA7XG4gICAgICAgICAgICBpZiAoc2tpZF9GTCA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfRkw7XG4gICAgICAgICAgICBpZiAoc2tpZF9GUiA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfRlI7XG4gICAgICAgICAgICBpZiAoc2tpZF9STCA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfUkw7XG4gICAgICAgICAgICBpZiAoc2tpZF9SUiA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfUlI7XG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICBpZiAodGhpcy5fc2tpZEF1ZGlvU291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lkU291bmRDbGlwOkJBQllMT04uU291bmQgPSB0aGlzLl9za2lkQXVkaW9Tb3VyY2UuZ2V0U291bmRDbGlwKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRTb3VuZENsaXAgIT0gbnVsbCkgc2tpZFNvdW5kQ2xpcC5zZXRQbGF5YmFja1JhdGUoc2tpZGRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gRmluYWwgVmVoaWNsZSBJbmZvcm1hdGlvbiBVcGRhdGVcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIGlmICh0aGlzLm9uVXBkYXRlVmVoaWNsZUluZm9ybWF0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVXBkYXRlVmVoaWNsZUluZm9ybWF0aW9uKHNraWRfRkwsIHNraWRfRlIsIHNraWRfUkwsIHNraWRfUlIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95VmVoaWNsZVN0YXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgdGhpcy5fcmlnaWRib2R5ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2VuZ2luZUF1ZGlvU291cmNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NraWRBdWRpb1NvdXJjZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5tX2Zyb250TGVmdFdoZWVsKTsgLy8gPz8/XG4gICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250TGVmdFdoZWVsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRSaWdodFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5tX2Zyb250UmlnaHRXaGVlbCk7IC8vID8/P1xuICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5tX2JhY2tMZWZ0V2hlZWwpOyAvLyA/Pz9cbiAgICAgICAgICAgICAgICB0aGlzLm1fYmFja0xlZnRXaGVlbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBBbW1vLmRlc3Ryb3kodGhpcy5tX2JhY2tSaWdodFdoZWVsKTsgLy8gPz8/XG4gICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tSaWdodFdoZWVsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubV9waHlzaWNzV29ybGQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsTWVzaCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZyb250UmlnaHRXaGVlbE1lc2ggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsTWVzaCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhY2tSaWdodFdoZWVsTWVzaCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxUcmFucyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxUcmFucyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbENvbGxpZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsQ29sbGlkZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbENvbGxpZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAvLyBQdWJsaWMgVmVoaWNsZSBDb250cm9sbGVyIE1vdmVtZW50IEZ1bmN0aW9ucyAgIC8vXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBwcml2YXRlIGJ1cm5vdXRUaW1lcjpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHJlc3RvcmVUaW1lcjpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGNvb2xkb3duVGltZXI6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbERvbnV0czpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgd2hlZWxCdXJub3V0OmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbFNraWRkaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBhbGxvd2VkVHVybmluZ0FuZ2xlOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgYWxsb3dlZFR1cm5pbmdJbmNlbWVudDpudW1iZXIgPSAwO1xuICAgICAgICAvKiogRHJpdmVzIHRoZSByYXljYXN0IHZlaGljbGUgd2l0aCB0aGUgc3BlY2ZpZWQgbW92ZW1lbnQgYW5kIGhhbmQgYnJha2luZyBwcm9wZXJ0aWVzLiAqL1xuICAgICAgICBwdWJsaWMgZHJpdmUoZm9yd2FyZDpudW1iZXIsIHR1cm46bnVtYmVyLCBicmFraW5nOmJvb2xlYW4gPSBmYWxzZSk6dm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ID09IG51bGwgfHwgdGhpcy5yYXljYXN0VmVoaWNsZSA9PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5GUk9OVF9MRUZUID49IDAgJiYgdGhpcy5GUk9OVF9SSUdIVCA+PSAwICYmIHRoaXMuQkFDS19MRUZUID49IDAgJiYgdGhpcy5CQUNLX1JJR0hUID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVRpbWU6bnVtYmVyID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsgdGhpcy53aGVlbEJyYWtpbmdGb3JjZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udFdoZWVsUG93ZXIgPSAwOyB0aGlzLmJhY2tXaGVlbFBvd2VyID0gMDtcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgRm9yY2VzXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBjb25zdCBnZWFyU2hpZnRTY2FsZTpudW1iZXIgPSAodGhpcy5nZWFyQm94U2hpZnRTY2FsZXMgIT0gbnVsbCAmJiB0aGlzLmdlYXJCb3hTaGlmdFNjYWxlcy5sZW5ndGggPiB0aGlzLmdlYXJJbmRleCkgPyB0aGlzLmdlYXJCb3hTaGlmdFNjYWxlc1t0aGlzLmdlYXJJbmRleF0gOiAxLjA7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VhclNoaWZ0UmF0aW86bnVtYmVyID0gKHRoaXMuZ2VhckJveFNoaWZ0UmF0aW9zICE9IG51bGwgJiYgdGhpcy5nZWFyQm94U2hpZnRSYXRpb3MubGVuZ3RoID4gdGhpcy5nZWFySW5kZXgpID8gdGhpcy5nZWFyQm94U2hpZnRSYXRpb3NbdGhpcy5nZWFySW5kZXhdIDogMS4wO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsR2VhclJhdGlvOm51bWJlciA9IChnZWFyU2hpZnRSYXRpbyAqIHRoaXMuZGlmZmVyZW50aWFsUmF0aW8gKiB0aGlzLnRyYW5zbWlzc2lvblJhdGlvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmdpbmVNb3RvclRvcnF1ZTpudW1iZXIgPSB0aGlzLmdldFZlaGljbGVFbmdpbmVUb3JxdWUodGhpcy5lbmdpbmVSUE0pICogTWF0aC5hYnMoZm9yd2FyZCkgKiBnZWFyU2hpZnRTY2FsZTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkRW5naW5lUG93ZXI6bnVtYmVyID0gKGVuZ2luZU1vdG9yVG9ycXVlICogZmluYWxHZWFyUmF0aW8pO1xuICAgICAgICAgICAgICAgIGlmIChmb3J3YXJkID4gMC4xKSB7IC8vIEZvcndhcmRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9yd2FyZFNwZWVkIDwgLTEpIHRoaXMud2hlZWxCcmFraW5nRm9yY2UgPSB0aGlzLm1heEJyYWtpbmdGb3JjZTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB0aGlzLmVuZ2luZUZvcmNlID0gYWxsb3dlZEVuZ2luZVBvd2VyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZm9yd2FyZCA8IC0wLjEpIHsgLy8gUmV2ZXJzZVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3J3YXJkU3BlZWQgPiAxKSB0aGlzLndoZWVsQnJha2luZ0ZvcmNlID0gdGhpcy5tYXhCcmFraW5nRm9yY2U7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5lbmdpbmVGb3JjZSA9IC0oYWxsb3dlZEVuZ2luZVBvd2VyICogdGhpcy5tYXhSZXZlcnNlUG93ZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOyB0aGlzLndoZWVsQnJha2luZ0ZvcmNlID0gMTA7IC8vIFN0YXRpY1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaGlmdGluZ0dlYXJzID09PSB0cnVlIHx8IHRoaXMuYW1lcmljYW5TcGVlZCA+IHRoaXMudG9wRW5naW5lU3BlZWQpIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFBoeXNpY3MgVHVybiBBbmdsZSAoQWN0dWFsIFN0ZWVyaW5nKVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVHVybmluZ0FuZ2xlID0gQkFCWUxPTi5TY2FsYXIuTGVycCh0aGlzLmxvd1NwZWVkQW5nbGUsIHRoaXMuaGlnaFNwZWVkQW5nbGUsIHRoaXMubm9ybWFsaXplZFNwZWVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQgPSBCQUJZTE9OLlNjYWxhci5MZXJwKHRoaXMubG93U3BlZWRUdXJuaW5nLCB0aGlzLmhpZ2hTcGVlZFR1cm5pbmcsIHRoaXMubm9ybWFsaXplZFNwZWVkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgJiYgdGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUgPSB0aGlzLm1heEJ1cm5BbmdsZTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSA9IEJBQllMT04uU2NhbGFyLkNsYW1wKHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSwgMCwgMC42KTtcbiAgICAgICAgICAgICAgICBpZiAodHVybiA+IDApIHsgLy8gUmlnaHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPCB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgKz0gKHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR1cm4gPCAwKSB7IC8vIExlZnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPiAtdGhpcy5hbGxvd2VkVHVybmluZ0FuZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVlckFuZ2xlIC09ICh0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPCAtdGhpcy5hbGxvd2VkVHVybmluZ0luY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVlckFuZ2xlICs9IHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlID4gdGhpcy5hbGxvd2VkVHVybmluZ0luY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSAtPSB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFZpc3VhbCBUdXJuIEFuZ2xlIChObyBTdGVlcmluZyBFZmZlY3QpXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgfHwgdGhpcy53aGVlbFNraWRkaW5nID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVHVybmluZ0luY2VtZW50ID0gdGhpcy5sb3dTcGVlZFR1cm5pbmc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSA9ICh0aGlzLndoZWVsQnVybm91dCA9PT0gdHJ1ZSkgPyB0aGlzLm1heEJ1cm5BbmdsZSA6IHRoaXMubWF4VHVybkFuZ2xlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCA9IEJBQllMT04uU2NhbGFyLkxlcnAodGhpcy5sb3dTcGVlZFR1cm5pbmcsIHRoaXMuaGlnaFNwZWVkVHVybmluZywgdGhpcy5ub3JtYWxpemVkU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUgPSBCQUJZTE9OLlNjYWxhci5MZXJwKHRoaXMubG93U3BlZWRBbmdsZSwgdGhpcy5oaWdoU3BlZWRBbmdsZSwgdGhpcy5ub3JtYWxpemVkU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUgKz0gKHRoaXMuYWRkU3RlZXJCb29zdCAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHVybiA+IDApIHsgLy8gUmlnaHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlzdWFsU3RlZXJBbmdsZSA8IHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aXN1YWxTdGVlckFuZ2xlICs9ICh0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0dXJuIDwgMCkgeyAvLyBMZWZ0XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPiAtdGhpcy5hbGxvd2VkVHVybmluZ0FuZ2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgLT0gKHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aXN1YWxTdGVlckFuZ2xlIDwgLXRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aXN1YWxTdGVlckFuZ2xlICs9IHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPiB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgLT0gdGhpcy5hbGxvd2VkVHVybmluZ0luY2VtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJheWNhc3QgVmVoaWNsZSBDb250cm9sc1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgbGV0IHVwZGF0ZUZyaWN0aW9uOmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChicmFraW5nID09PSB0cnVlICYmIHRoaXMuaGFuZEJyYWtpbmdGb3JjZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJub3V0VGltZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsQnVybm91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsRG9udXRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIFdoZWVsIFNraWRkaW5nIE1vZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmF5Y2FzdFZlaGljbGUubG9ja2VkV2hlZWxJbmRleGVzID09IG51bGwpIHRoaXMucmF5Y2FzdFZlaGljbGUubG9ja2VkV2hlZWxJbmRleGVzID0gW3RoaXMuQkFDS19MRUZULCB0aGlzLkJBQ0tfUklHSFRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbWVyaWNhblNwZWVkID49IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsU2tpZGRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbFNraWRkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsTG9ja0ZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRnJpY3Rpb24gPSBmYWxzZTsgLy8gTm90ZTogRGlzYWJsZSBGcmljdGlvbiBMZXJwaW5nIFRoaXMgRnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVmVoaWNsZSBXaGVlbCBJbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRCcmFrZURhbXBpbmcodGhpcy5saW5lYXJCcmFraW5nRm9yY2UsIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVGcmljdGlvbiA9PT0gdHJ1ZSkgdGhpcy51cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKGRlbHRhVGltZSAqIHRoaXMuZHJpZnRpbmdMZXJwU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRSb3RhdGlvbkJvb3N0KDApO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRQaHlzaWNzU3RlZXJpbmdBbmdsZSh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFBoeXNpY3NTdGVlcmluZ0FuZ2xlKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKDAsIHRoaXMuRlJPTlRfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UoMCwgdGhpcy5GUk9OVF9SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UoMCwgdGhpcy5CQUNLX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKDAsIHRoaXMuQkFDS19SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKDAsIHRoaXMuRlJPTlRfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKDAsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEJyYWtpbmdGb3JjZSh0aGlzLmhhbmRCcmFraW5nRm9yY2UsIHRoaXMuQkFDS19MRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy5oYW5kQnJha2luZ0ZvcmNlLCB0aGlzLkJBQ0tfUklHSFQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxTa2lkZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yYXljYXN0VmVoaWNsZS5sb2NrZWRXaGVlbEluZGV4ZXMgIT0gbnVsbCkgdGhpcy5yYXljYXN0VmVoaWNsZS5sb2NrZWRXaGVlbEluZGV4ZXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0VHJpZ2dlck1hcmsgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1cm5vdXRUcmlnZ2VyTWFyayA9IEJBQllMT04uU2NhbGFyLkNsYW1wKHRoaXMuYnVybm91dFRyaWdnZXJNYXJrLCAwLCAxNSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dERvbnV0Qm9vc3QgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1cm5vdXREb251dEJvb3N0ID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAodGhpcy5idXJub3V0RG9udXRCb29zdCwgMSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dENvZWZmaWNpZW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJub3V0Q29lZmZpY2llbnQgPSBCQUJZTE9OLlNjYWxhci5DbGFtcCh0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCwgMSwgNSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNCdXJub3V0U3BlZWQ6Ym9vbGVhbiA9ICh0aGlzLmFtZXJpY2FuU3BlZWQgPD0gdGhpcy5idXJub3V0VHJpZ2dlck1hcmspO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0Z1bGxUaHJvdHRsZTpib29sZWFuID0gKGZvcndhcmQgPD0gLTAuOCB8fCBmb3J3YXJkID49IDAuOCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRnVsbFR1cm5pbmc6Ym9vbGVhbiA9ICh0dXJuIDw9IC0wLjggfHwgdHVybiA+PSAwLjgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2hlZWxMZXJwU3BlZWQ6bnVtYmVyID0gKGRlbHRhVGltZSAqIHRoaXMuZGVmYXVsdExlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJvb3N0U3BlZWQ6bnVtYmVyID0gMDsgLy8gRGVmYXVsdCBaZXJvIFdoZWVsIFJvdGF0aW9uIEJvb3N0XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIFdoZWVsIEJ1cm5vdXQgTW9kZVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0VGltZXIgPD0gMCAmJiB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCA+PSAxLjAgJiYgaXNCdXJub3V0U3BlZWQgPT09IHRydWUgJiYgaXNGdWxsVGhyb3R0bGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gKHRoaXMuYnVybm91dFRpbWVEZWxheSAqIDAuMjUpOyAvLyBOb3RlOiAyNSBQZXJjZW50IFNsaXBwaW5nIFRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxEb251dHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxCdXJub3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSBXaGVlbCBCdXJub3V0IFRpbWVyc1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN0b3JlVGltZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVUaW1lciAtPSBkZWx0YVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN0b3JlVGltZXIgPCAwKSB0aGlzLnJlc3RvcmVUaW1lciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVlbExlcnBTcGVlZCAqPSB0aGlzLmJ1cm5vdXRMZXJwU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29vbGRvd25UaW1lciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29vbGRvd25UaW1lciAtPSBkZWx0YVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb29sZG93blRpbWVyIDwgMCkgdGhpcy5jb29sZG93blRpbWVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSAmJiBpc0Z1bGxUdXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJub3V0VGltZXIgPSAwOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSBXaGVlbCBEcml2ZSBCdXJub3V0IE1vZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dFRpbWVyID4gMCAmJiBpc0Z1bGxUaHJvdHRsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hlZWxCb29zdFNwZWVkID0gKGZvcndhcmQgPCAtMC4xKSA/IC0wLjE4NSA6IDAuMTg1O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRTbGlwRmFjdG9yOm51bWJlciA9ICh0aGlzLndoZWVsRG9udXRzID09PSB0cnVlKSA/IDEuMjUgOiAxLjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0Q29lZmZpY2llbnQgPj0gMS4wKSB0aGlzLmVuZ2luZUZvcmNlICo9ICh0aGlzLndoZWVsRG9udXRzID09PSB0cnVlICYmIHRoaXMuYnVybm91dERvbnV0Qm9vc3QgPiB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCkgPyB0aGlzLmJ1cm5vdXREb251dEJvb3N0IDogdGhpcy5idXJub3V0Q29lZmZpY2llbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbEJ1cm5GcmljdGlvbiAqIGZyb250U2xpcEZhY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250UmlnaHRXaGVlbCAhPSBudWxsKSB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsQnVybkZyaWN0aW9uICogZnJvbnRTbGlwRmFjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fYmFja0xlZnRXaGVlbCAhPSBudWxsKSB0aGlzLm1fYmFja0xlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbEJ1cm5GcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbEJ1cm5GcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVGcmljdGlvbiA9IGZhbHNlOyAvLyBOb3RlOiBEaXNhYmxlIEZyaWN0aW9uIExlcnBpbmcgVGhpcyBGcmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyIC09IGRlbHRhVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1cm5vdXRUaW1lciA8PSAwICYmIHRoaXMuY29vbGRvd25UaW1lciA8PSAwICYmIHRoaXMuYnVybm91dERvbnV0Qm9vc3QgPj0gMS4wICYmIGlzRnVsbFR1cm5pbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1cm5vdXRUaW1lciA9IDAuMDE7IC8vIE5vdGU6IEZpeGVkIERvbnV0IEJ1cm5vdXQgVGltZSBFeHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsRG9udXRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gMDsgLy8gTm90ZTogRm9yY2UgQnVybm91dCBUaW1lciBSZXNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEb251dHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsRG9udXRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29sZG93blRpbWVyID0gKHRoaXMuYnVybm91dFRpbWVEZWxheSAqIDIpOyAvLyBOb3RlOiAyMDAgUGVyY2VudCBDb29sZG93biBUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsQnVybm91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZVRpbWVyID0gKHRoaXMuYnVybm91dFRpbWVEZWxheSAqIDAuNzUpOyAvLyBOb3RlOiA3NSBQZXJjZW50IFJlc3RvcmluZyBUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgV2hlZWwgRHJpdmUgUG93ZXIgRm9yY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxCdXJub3V0ID09PSB0cnVlICYmIHRoaXMud2hlZWxEb251dHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRXaGVlbFBvd2VyID0gKHRoaXMuZW5naW5lRm9yY2UgKiAwLjEpOyAvLyBOb3RlOiAxMCBQZXJjZW50IEVuZ2luZSBQb3dlciBGb3JjZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRXaGVlbFBvd2VyID0gdGhpcy5lbmdpbmVGb3JjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMCB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIFJFQVIgT1IgQUxMIFdIRUVMIERSSVZFXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tXaGVlbFBvd2VyID0gdGhpcy5lbmdpbmVGb3JjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVmVoaWNsZSBXaGVlbCBJbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRCcmFrZURhbXBpbmcoMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVGcmljdGlvbiA9PT0gdHJ1ZSkgdGhpcy51cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKHdoZWVsTGVycFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50Um90YXRpb25Cb29zdCh3aGVlbEJvb3N0U3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRQaHlzaWNzU3RlZXJpbmdBbmdsZSh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFBoeXNpY3NTdGVlcmluZ0FuZ2xlKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKHRoaXMuZnJvbnRXaGVlbFBvd2VyLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKHRoaXMuZnJvbnRXaGVlbFBvd2VyLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRFbmdpbmVGb3JjZSh0aGlzLmJhY2tXaGVlbFBvd2VyLCB0aGlzLkJBQ0tfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UodGhpcy5iYWNrV2hlZWxQb3dlciwgdGhpcy5CQUNLX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy53aGVlbEJyYWtpbmdGb3JjZSAqIDAuNSwgdGhpcy5GUk9OVF9MRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy53aGVlbEJyYWtpbmdGb3JjZSAqIDAuNSwgdGhpcy5GUk9OVF9SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKHRoaXMud2hlZWxCcmFraW5nRm9yY2UsIHRoaXMuQkFDS19MRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy53aGVlbEJyYWtpbmdGb3JjZSwgdGhpcy5CQUNLX1JJR0hUKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVHJhY2UgQ3VycmVudCBTcGVlZFxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IG1zZzpzdHJpbmcgPSAoXCJTcGVlZDogXCIgKyB0aGlzLmFtZXJpY2FuU3BlZWQudG9GaXhlZCgxKSArIFwiIC0tPiBUdXJuIEFuZ2xlOiBcIiArIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZS50b0ZpeGVkKDQpKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBtc2c6c3RyaW5nID0gKFwiTVBIOiBcIiArIHRoaXMuYW1lcmljYW5TcGVlZC50b0ZpeGVkKDEpICsgXCIgLS0+IEdlYXIgSW5kZXg6IFwiICsgdGhpcy5nZWFySW5kZXgudG9GaXhlZCgwKSArIFwiIC0tPiBFbmdpbmUgUlBNOiBcIiArIHRoaXMuZW5naW5lUlBNLnRvRml4ZWQoMCkgKyBcIiAtLS0+IEVuZ2luZSBQaXRjaDogXCIgKyB0aGlzLmdldEN1cnJlbnRFbmdpbmVQaXRjaCgpLnRvRml4ZWQoMikgKyBcIiAtLS0+IFJhdyBLUEg6IFwiICsgdGhpcy5hYnNvbHV0ZVNwZWVkLnRvRml4ZWQoMSkpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnN0IG1zZzpzdHJpbmcgPSAoXCJDYXIgU3BlZWQ6IFwiICsgdGhpcy5hbWVyaWNhblNwZWVkLnRvRml4ZWQoMSkgKyBcIiAtLT4gR2VhciBJbmRleDogXCIgKyB0aGlzLmdlYXJJbmRleC50b0ZpeGVkKDApICsgXCIgLS0+IEVuZ2luZSBSUE06IFwiICsgdGhpcy5lbmdpbmVSUE0udG9GaXhlZCgwKSArIFwiIC0tLT4gRW5naW5lIFRvcnVxZTogXCIgKyBlbmdpbmVNb3RvclRvcnF1ZS50b0ZpeGVkKDIpKyBcIiAtLS0+IEVuZ2luZSBQb3dlcjogXCIgKyBhbGxvd2VkRW5naW5lUG93ZXIudG9GaXhlZCgyKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnOnN0cmluZyA9IChcIkNhciBTcGVlZDogXCIgKyB0aGlzLmFtZXJpY2FuU3BlZWQudG9GaXhlZCgxKSArIFwiIC0tPiBHZWFyIEluZGV4OiBcIiArIHRoaXMuZ2VhckluZGV4LnRvRml4ZWQoMCkgKyBcIiAtLT4gRW5naW5lIFJQTTogXCIgKyB0aGlzLmVuZ2luZVJQTS50b0ZpeGVkKDApICsgXCIgLS0tPiBDb29sZG93biBUaW1lcjogXCIgKyB0aGlzLmNvb2xkb3duVGltZXIudG9GaXhlZCgyKSk7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuUHJpbnRUb1NjcmVlbihtc2csIFwiIzAwODAwMFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIGdldFZlaGljbGVFbmdpbmVUb3JxdWUocnBtOm51bWJlcik6IG51bWJlciB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0Om51bWJlciA9IHRoaXMuYmFzZUVuZ2luZVBvd2VyO1xuICAgICAgICAgICAgLy9pZiAodGhpcy5lbmdpbmVUb3JxdWVDdXJ2ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyAgICByZXN1bHQgPSAxMDAwOyAvLyBUT0RPOiBTYW1wbGUgQW5pbWF0aW9uIEN1cnZlXG4gICAgICAgICAgICAvL31cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7IFxuICAgICAgICB9XG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ3VycmVudEJyYWtlRGFtcGluZyhsaW5lYXI6bnVtYmVyLCBhbmd1bGFyOm51bWJlcik6dm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ICE9IG51bGwpIHRoaXMuX3JpZ2lkYm9keS5zZXREYW1waW5nKGxpbmVhciwgYW5ndWxhcik7XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50Um90YXRpb25Cb29zdChib29zdDpudW1iZXIpOnZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udExlZnRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMCB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIFJFQVIgT1IgQUxMIFdIRUVMIERSSVZFXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrTGVmdFdoZWVsLnJvdGF0aW9uQm9vc3QgPSBib29zdDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKGxlcnBTcGVlZDpudW1iZXIpOnZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udExlZnRXaGVlbCAhPSBudWxsICYmIHRoaXMubV9mcm9udExlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9udExlZnRGcmljdGlvbjpudW1iZXIgPSB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZ2V0X21fZnJpY3Rpb25TbGlwKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZyb250TGVmdEZyaWN0aW9uIDwgdGhpcy5tX2Zyb250TGVmdFdoZWVsLmRlZmF1bHRGcmljdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmcm9udExlZnRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoZnJvbnRMZWZ0RnJpY3Rpb24sIHRoaXMubV9mcm9udExlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24sIGxlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoZnJvbnRMZWZ0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZnJvbnRMZWZ0RnJpY3Rpb24gPiB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy5tX2Zyb250TGVmdFdoZWVsLmRlZmF1bHRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb250UmlnaHRGcmljdGlvbjpudW1iZXIgPSB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChmcm9udFJpZ2h0RnJpY3Rpb24gIT09IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb250UmlnaHRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoZnJvbnRSaWdodEZyaWN0aW9uLCB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbiwgbGVycFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoZnJvbnRSaWdodEZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZyb250UmlnaHRGcmljdGlvbiA+IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuc2V0X21fZnJpY3Rpb25TbGlwKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tMZWZ0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBiYWNrTGVmdEZyaWN0aW9uOm51bWJlciA9IHRoaXMubV9iYWNrTGVmdFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChiYWNrTGVmdEZyaWN0aW9uICE9PSB0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja0xlZnRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoYmFja0xlZnRGcmljdGlvbiwgdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uLCBsZXJwU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fYmFja0xlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoYmFja0xlZnRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiYWNrTGVmdEZyaWN0aW9uID4gdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1fYmFja1JpZ2h0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgYmFja1JpZ2h0RnJpY3Rpb246bnVtYmVyID0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChiYWNrUmlnaHRGcmljdGlvbiAhPT0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrUmlnaHRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoYmFja1JpZ2h0RnJpY3Rpb24sIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5kZWZhdWx0RnJpY3Rpb24sIGxlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoYmFja1JpZ2h0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFja1JpZ2h0RnJpY3Rpb24gPiB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy5tX2JhY2tSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgVmVoaWNsZUlucHV0Q29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBWZWhpY2xlSW5wdXRDb250cm9sbGVyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIHBsYXllckRlbHRhWDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllckRlbHRhWTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdXNlWDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdXNlWTpudW1iZXIgPSAwO1xuXG5cdFx0cHJpdmF0ZSBjdXJyZW50VXNlZERpc3RhbmNlOm51bWJlciA9IDA7IFxuXHRcdHByaXZhdGUgY3VycmVudFJvdGF0aW9uQW5nbGU6bnVtYmVyID0gMDtcblx0XHRwcml2YXRlIHdhbnRlZFJvdGF0aW9uQW5nbGU6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSB3YW50ZWRQb3NpdGlvbjpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuXHRcdHByaXZhdGUgdGFyZ2V0UG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gQkFCWUxPTi5WZWN0b3IzLlplcm8oKTtcblx0XHRwcml2YXRlIHRhcmdldFJvdGF0aW9uOkJBQllMT04uUXVhdGVybmlvbiA9IEJBQllMT04uUXVhdGVybmlvbi5aZXJvKCk7XG4gICAgICAgIHByaXZhdGUgdGFyZ2V0QW5nbGVzOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHByaXZhdGUgY2FtZXJhQW5nbGVzOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG5cdFx0cHJpdmF0ZSByb3RhdGlvblF1YXQ6QkFCWUxPTi5RdWF0ZXJuaW9uID0gQkFCWUxPTi5RdWF0ZXJuaW9uLlplcm8oKTtcblx0XHRwcml2YXRlIHJvdGF0aW9uVmVjOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG5cdFx0cHJpdmF0ZSBkaXN0YW5jZVZlYzpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwcml2YXRlIHlWZWxvY2l0eTpCQUJZTE9OLlZlY3RvcjIgPSBCQUJZTE9OLlZlY3RvcjIuWmVybygpO1xuICAgICAgICBwcml2YXRlIHpWZWxvY2l0eTpCQUJZTE9OLlZlY3RvcjIgPSBCQUJZTE9OLlZlY3RvcjIuWmVybygpO1xuXG4gICAgICAgIHB1YmxpYyBnZXRQbGF5ZXJEZWx0YVgoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5wbGF5ZXJEZWx0YVggfTtcbiAgICAgICAgcHVibGljIGdldFBsYXllckRlbHRhWSgpOm51bWJlciB7IHJldHVybiB0aGlzLnBsYXllckRlbHRhWSB9O1xuICAgICAgICBwdWJsaWMgZ2V0UGxheWVyTW91c2VYKCk6bnVtYmVyIHsgcmV0dXJuIHRoaXMucGxheWVyTW91c2VYIH07XG4gICAgICAgIHB1YmxpYyBnZXRQbGF5ZXJNb3VzZVkoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5wbGF5ZXJNb3VzZVkgfTtcblxuICAgICAgICBwdWJsaWMgZW5hYmxlSW5wdXQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgYXR0YWNoQ2FtZXJhOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIGZvbGxvd0JlaGluZDpib29sZWFuID0gZmFsc2U7XG5cdFx0cHVibGljIGZvbGxvd0Rpc3RhbmNlOm51bWJlciA9IDUuMDtcbiAgICAgICAgcHVibGljIGZvbGxvd0hlaWdodDpudW1iZXIgPSAxLjc1O1xuXHRcdHB1YmxpYyByb3RhdGlvbkxhZ1RpbWU6bnVtYmVyID0gMC41O1xuXHRcdHB1YmxpYyBkaXN0YW5jZUxhZ1RpbWU6bnVtYmVyID0gMC4yNTtcblx0XHRwdWJsaWMgZGlzdGFuY2VNdWx0aXBsaWVyOm51bWJlciA9IDAuMDI1O1xuICAgICAgICBwdWJsaWMgcGxheWVyTnVtYmVyOkJBQllMT04uUGxheWVyTnVtYmVyID0gQkFCWUxPTi5QbGF5ZXJOdW1iZXIuT25lO1xuICAgICAgICBwdWJsaWMgdHJpZ2dlckZvcndhcmQ6bnVtYmVyID0gQkFCWUxPTi5YYm94MzYwVHJpZ2dlci5SaWdodDtcbiAgICAgICAgcHVibGljIGtleWJvYXJkRm9yYXdyZDpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5XO1xuICAgICAgICBwdWJsaWMgYXV4S2V5Ym9hcmRGb3Jhd3JkOm51bWJlciA9IEJBQllMT04uVXNlcklucHV0S2V5LlVwQXJyb3c7XG4gICAgICAgIHB1YmxpYyB0cmlnZ2VyQmFja3dhcmRzOm51bWJlciA9IEJBQllMT04uWGJveDM2MFRyaWdnZXIuTGVmdDtcbiAgICAgICAgcHVibGljIGtleWJvYXJkQmFja3dhcmRzOm51bWJlciA9IEJBQllMT04uVXNlcklucHV0S2V5LlM7XG4gICAgICAgIHB1YmxpYyBhdXhLZXlib2FyZEJhY2t3YXJkczpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5Eb3duQXJyb3c7XG4gICAgICAgIHB1YmxpYyBidXR0b25IYW5kYnJha2U6bnVtYmVyID0gQkFCWUxPTi5YYm94MzYwQnV0dG9uLlg7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZEhhbmRicmFrZTpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5TcGFjZUJhcjtcblxuICAgICAgICBwcm90ZWN0ZWQgbV9jYW1lcmFUcmFuc2Zvcm06QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fcmlnaWRib2R5UGh5c2ljczpCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MgPSBudWxsO1xuICAgICAgICBwcm90ZWN0ZWQgbV9zdGFuZGFyZENhckNvbnRyb2xsZXI6UFJPSkVDVC5TdGFuZGFyZENhckNvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUlucHV0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImVuYWJsZUlucHV0XCIsIHRoaXMuZW5hYmxlSW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJOdW1iZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicGxheWVyTnVtYmVyXCIsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ2FtZXJhID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImF0dGFjaENhbWVyYVwiLCB0aGlzLmF0dGFjaENhbWVyYSk7XG4gICAgICAgICAgICB0aGlzLmZvbGxvd0JlaGluZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmb2xsb3dCZWhpbmRcIiwgdGhpcy5mb2xsb3dCZWhpbmQpO1xuICAgICAgICAgICAgdGhpcy5mb2xsb3dEaXN0YW5jZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmb2xsb3dEaXN0YW5jZVwiLCB0aGlzLmZvbGxvd0Rpc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMuZm9sbG93SGVpZ2h0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvbGxvd0hlaWdodFwiLCB0aGlzLmZvbGxvd0hlaWdodCk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uTGFnVGltZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyb3RhdGlvbkxhZ1RpbWVcIiwgdGhpcy5yb3RhdGlvbkxhZ1RpbWUpO1xuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZUxhZ1RpbWUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZGlzdGFuY2VMYWdUaW1lXCIsIHRoaXMuZGlzdGFuY2VMYWdUaW1lKTtcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VNdWx0aXBsaWVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImRpc3RhbmNlTXVsdGlwbGllclwiLCB0aGlzLmRpc3RhbmNlTXVsdGlwbGllcik7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTp2b2lkIHsgdGhpcy5pbml0VmVoaWNsZUNvbnRyb2xsZXIoKTsgfVxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCkgOnZvaWQgeyAgdGhpcy51cGRhdGVWZWhpY2xlQ29udHJvbGxlcigpOyB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQgeyB0aGlzLmRlc3Ryb3lWZWhpY2xlQ29udHJvbGxlcigpOyB9XG5cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8gUHJvdGVjdGVkIENoYXJhY3RlciBNb3ZlbWVudCBTdGF0ZSBGdW5jdGlvbnMgLy9cbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdFZlaGljbGVDb250cm9sbGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gR2V0IFJpZ2lkYm9keSBQaHlzaWNzXG4gICAgICAgICAgICB0aGlzLm1fcmlnaWRib2R5UGh5c2ljcyA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzID09IG51bGwpIEJBQllMT04uVG9vbHMuV2FybihcIk51bGwgcmlnaWRib2R5IHBoeXNpY3MgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuXG4gICAgICAgICAgICAvLyBHZXQgU3RhbmRhcmQgQ2FyIENvbnRyb2xsZXJcbiAgICAgICAgICAgIHRoaXMubV9zdGFuZGFyZENhckNvbnRyb2xsZXIgPSB0aGlzLmdldENvbXBvbmVudChcIlBST0pFQ1QuU3RhbmRhcmRDYXJDb250cm9sbGVyXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMubV9zdGFuZGFyZENhckNvbnRyb2xsZXIgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiTnVsbCBzdGFuZGFyZCBjYXIgY29udHJvbGxlciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFRPRE86IEdldCBQbGF5ZXIgQ2FtZXJhIFRyYW5zZm9ybVxuICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNoQ2FtZXJhID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFRyYW5zZm9ybU5vZGUodGhpcy5zY2VuZSwgXCJNYWluIENhbWVyYVwiKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2NhbWVyYVRyYW5zZm9ybSAhPSBudWxsKSBCQUJZTE9OLlV0aWxpdGllcy5WYWxpZGF0ZVRyYW5zZm9ybVF1YXRlcm5pb24odGhpcy5tX2NhbWVyYVRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN5bmMgVmVoaWNsZSBDaGFzZSBDYW1lcmEgUG9zaXRpb25cbiAgICAgICAgICAgIHRoaXMuc3luY1ZlaGljbGVDb250cm9sbGVyKHRoaXMuZm9sbG93QmVoaW5kLCB0cnVlKTtcbiAgICAgICAgICAgIC8vIGNvbnN0IGFic3RyYWN0TWVzaDpCQUJZTE9OLkFic3RyYWN0TWVzaCA9IHRoaXMuZ2V0QWJzdHJhY3RNZXNoKCk7XG4gICAgICAgICAgICAvLyBpZiAoYWJzdHJhY3RNZXNoICE9IG51bGwpIGFic3RyYWN0TWVzaC5waHlzaWNzSW1wb3N0b3IucmVnaXN0ZXJBZnRlclBoeXNpY3NTdGVwKChpbXBvc3RvcjpCQUJZTE9OLlBoeXNpY3NJbXBvc3Rvcik9PnsgdGhpcy5zeW5jVmVoaWNsZUNvbnRyb2xsZXIodGhpcy5mb2xsb3dCZWhpbmQsIHRydWUpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlVmVoaWNsZUNvbnRyb2xsZXIoKTogdm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVJbnB1dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIEdldCBVc2VyIElucHV0XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJEZWx0YVggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLkhvcml6b250YWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckRlbHRhWSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuVmVydGljYWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllck1vdXNlWCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuTW91c2VYLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3VzZVkgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLk1vdXNlWSwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgRGVhZCBTdGlja1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllckRlbHRhWCkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJEZWx0YVggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllckRlbHRhWSkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJEZWx0YVkgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllck1vdXNlWCkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJNb3VzZVggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllck1vdXNlWSkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJNb3VzZVkgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gR2V0IEJ1dHRvbiBUcmlnZ2Vyc1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1eEZvcndhcmRLZXlib2FyZDpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0S2V5Ym9hcmRJbnB1dCh0aGlzLmF1eEtleWJvYXJkRm9yYXdyZCk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcndhcmRLZXlib2FyZDpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0S2V5Ym9hcmRJbnB1dCh0aGlzLmtleWJvYXJkRm9yYXdyZCk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcndhcmRUcmlnZ2VyOm51bWJlciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEdhbWVwYWRUcmlnZ2VySW5wdXQodGhpcy50cmlnZ2VyRm9yd2FyZCwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1eEJhY2t3YXJkS2V5Ym9hcmQ6Ym9vbGVhbiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEtleWJvYXJkSW5wdXQodGhpcy5hdXhLZXlib2FyZEJhY2t3YXJkcyk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t3YXJkS2V5Ym9hcmQ6Ym9vbGVhbiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEtleWJvYXJkSW5wdXQodGhpcy5rZXlib2FyZEJhY2t3YXJkcyk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t3YXJkVHJpZ2dlcjpudW1iZXIgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRHYW1lcGFkVHJpZ2dlcklucHV0KHRoaXMudHJpZ2dlckJhY2t3YXJkcywgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRicmFrZUtleWJvYXJkOmJvb2xlYW4gPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRLZXlib2FyZElucHV0KHRoaXMua2V5Ym9hcmRIYW5kYnJha2UpOyAvLyBQbGF5ZXIgT25lIE9ubHlcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kYnJha2VCdXR0b246Ym9vbGVhbiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEdhbWVwYWRCdXR0b25JbnB1dCh0aGlzLmJ1dHRvbkhhbmRicmFrZSwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgUGxheWVyIE1vdmVtZW50XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllck1vdmVtZW50Om51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllclN0ZWVyaW5nOm51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllckhhbmRicmFrZTpib29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllckRvbnV0czpib29sZWFuID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBQcmltYXJ5IEFjY2VsZXJhdHRpb25cbiAgICAgICAgICAgICAgICBpZiAoZm9yd2FyZFRyaWdnZXIgPiAwLjIpIHBsYXllck1vdmVtZW50ID0gZm9yd2FyZFRyaWdnZXI7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5wbGF5ZXJOdW1iZXIgPT09IEJBQllMT04uUGxheWVyTnVtYmVyLk9uZSAmJiAoZm9yd2FyZEtleWJvYXJkID09PSB0cnVlIHx8IGF1eEZvcndhcmRLZXlib2FyZCA9PT0gdHJ1ZSkpIHBsYXllck1vdmVtZW50ID0gMTtcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJyYWtpbmcgVGFrZXMgUHJlY2VkZW5jZVxuICAgICAgICAgICAgICAgIGlmIChiYWNrd2FyZFRyaWdnZXIgPiAwLjIpIHBsYXllck1vdmVtZW50ID0gLWJhY2t3YXJkVHJpZ2dlcjtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBsYXllck51bWJlciA9PT0gQkFCWUxPTi5QbGF5ZXJOdW1iZXIuT25lICYmIChiYWNrd2FyZEtleWJvYXJkID09PSB0cnVlIHx8IGF1eEJhY2t3YXJkS2V5Ym9hcmQgPT09IHRydWUpKSBwbGF5ZXJNb3ZlbWVudCA9IC0xO1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5jbHVkZXMgQUQgQW5kIEFycm93IEtleXNcbiAgICAgICAgICAgICAgICBwbGF5ZXJTdGVlcmluZyA9IHRoaXMucGxheWVyRGVsdGFYOyBcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFB1bGwgSGFyZCBIYW5kIEJyYWtlIExldmVyXG4gICAgICAgICAgICAgICAgcGxheWVySGFuZGJyYWtlID0gKGhhbmRicmFrZUtleWJvYXJkID09PSB0cnVlIHx8IGhhbmRicmFrZUJ1dHRvbiA9PT0gdHJ1ZSk7XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBEcml2ZSBTdGFuZGFyZCBDYXIgQ29udHJvbGxlclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyICE9IG51bGwpIHRoaXMubV9zdGFuZGFyZENhckNvbnRyb2xsZXIuZHJpdmUocGxheWVyTW92ZW1lbnQsIHBsYXllclN0ZWVyaW5nLCBwbGF5ZXJIYW5kYnJha2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTeW5jIFZlaGljbGUgQ2hhc2UgQ2FtZXJhIFBvc2l0aW9uXG4gICAgICAgICAgICB0aGlzLnN5bmNWZWhpY2xlQ29udHJvbGxlcih0aGlzLmZvbGxvd0JlaGluZCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHN5bmNWZWhpY2xlQ29udHJvbGxlcihmb2xsb3c6Ym9vbGVhbiwgbG9vazpib29sZWFuKTogdm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdHRhY2hDYW1lcmEgPT09IHRydWUgJiYgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybSAhPSBudWxsICYmIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVRpbWU6bnVtYmVyID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fcmlnaWRib2R5UGh5c2ljcy5nZXRUcmFuc2Zvcm1Qb3NpdGlvblRvUmVmKHRoaXMudGFyZ2V0UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLmdldFRyYW5zZm9ybVJvdGF0aW9uVG9SZWYodGhpcy50YXJnZXRSb3RhdGlvbik7XG5cbiAgICAgICAgICAgICAgICAvLyBTbW9vdGggUG9zaXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLndhbnRlZFBvc2l0aW9uLmNvcHlGcm9tKHRoaXMudGFyZ2V0UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMud2FudGVkUG9zaXRpb24ueSArPSB0aGlzLmZvbGxvd0hlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VkRGlzdGFuY2UgPSBCQUJZTE9OLlV0aWxpdGllcy5TbW9vdGhEYW1wQW5nbGUodGhpcy5jdXJyZW50VXNlZERpc3RhbmNlLCB0aGlzLmZvbGxvd0Rpc3RhbmNlICsgKHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLmdldExpbmVhclZlbG9jaXR5KCkubGVuZ3RoKCkgKiB0aGlzLmRpc3RhbmNlTXVsdGlwbGllciksIHRoaXMuZGlzdGFuY2VMYWdUaW1lLCBOdW1iZXIuTUFYX1ZBTFVFLCBkZWx0YVRpbWUsIHRoaXMuelZlbG9jaXR5KTsgXG5cbiAgICAgICAgICAgICAgICAvLyBTbW9vdGggUm90YXRpb25cbiAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Ub0V1bGVyVG9SZWYodGhpcy50YXJnZXRSb3RhdGlvbiwgdGhpcy50YXJnZXRBbmdsZXMpO1xuICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlRvRXVsZXJUb1JlZih0aGlzLm1fY2FtZXJhVHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbiwgdGhpcy5jYW1lcmFBbmdsZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMud2FudGVkUm90YXRpb25BbmdsZSA9IHRoaXMudGFyZ2V0QW5nbGVzLnk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25BbmdsZSA9IHRoaXMuY2FtZXJhQW5nbGVzLnk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Um90YXRpb25BbmdsZSA9IEJBQllMT04uVXRpbGl0aWVzLlNtb290aERhbXBBbmdsZSh0aGlzLmN1cnJlbnRSb3RhdGlvbkFuZ2xlLCB0aGlzLndhbnRlZFJvdGF0aW9uQW5nbGUsIHRoaXMucm90YXRpb25MYWdUaW1lLCBOdW1iZXIuTUFYX1ZBTFVFLCBkZWx0YVRpbWUsIHRoaXMueVZlbG9jaXR5KTtcblxuICAgICAgICAgICAgICAgIC8vIFNldCBXYW50ZWQgUG9zaXRpb25cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlVmVjLnNldCgwLCAwLCAtdGhpcy5jdXJyZW50VXNlZERpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Gcm9tRXVsZXJUb1JlZigwLCB0aGlzLmN1cnJlbnRSb3RhdGlvbkFuZ2xlLCAwLCB0aGlzLnJvdGF0aW9uUXVhdCk7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuTXVsdGlwbHlRdWF0ZXJuaW9uQnlWZWN0b3JUb1JlZih0aGlzLnJvdGF0aW9uUXVhdCwgdGhpcy5kaXN0YW5jZVZlYywgdGhpcy5yb3RhdGlvblZlYyk7XG4gICAgICAgICAgICAgICAgdGhpcy53YW50ZWRQb3NpdGlvbi5hZGRJblBsYWNlKHRoaXMucm90YXRpb25WZWMpO1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIEZvbGxvdyBDYW1lcmFcbiAgICAgICAgICAgICAgICBpZiAoZm9sbG93ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fY2FtZXJhVHJhbnNmb3JtLnBvc2l0aW9uLnggIT09IHRoaXMud2FudGVkUG9zaXRpb24ueCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9jYW1lcmFUcmFuc2Zvcm0ucG9zaXRpb24ueSAhPT0gdGhpcy53YW50ZWRQb3NpdGlvbi55IHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybS5wb3NpdGlvbi56ICE9PSB0aGlzLndhbnRlZFBvc2l0aW9uLnopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9jYW1lcmFUcmFuc2Zvcm0ucG9zaXRpb24uc2V0KHRoaXMud2FudGVkUG9zaXRpb24ueCwgdGhpcy53YW50ZWRQb3NpdGlvbi55LCB0aGlzLndhbnRlZFBvc2l0aW9uLnopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsb29rID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFVwZGF0ZSBRdWF0ZXJuaW9uIFJvdGF0aW9uIEluc3RlYWQgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybS5sb29rQXQodGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95VmVoaWNsZUNvbnRyb2xsZXIoKTp2b2lkIHtcbiAgICAgICAgICAgIHRoaXMubV9jYW1lcmFUcmFuc2Zvcm0gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5tX3JpZ2lkYm9keVBoeXNpY3MgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBJdGVtUm90YXRvclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBJdGVtUm90YXRvciBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSByb3RhdGVTcGVlZDpudW1iZXIgPSAxLjA7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMucm90YXRlU3BlZWQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicm90YXRlU3BlZWRcIiwgdGhpcy5yb3RhdGVTcGVlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT4gU3RhcnRpbmcgaXRlbSByb3RhdG9yIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YTpudW1iZXIgPSB0aGlzLmdldERlbHRhU2Vjb25kcygpO1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uYWRkUm90YXRpb24oMCwgKHRoaXMucm90YXRlU3BlZWQgKiBkZWx0YSksIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PiBEZXN0cm95aW5nIGl0ZW0gcm90YXRvciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBUZXN0QW5pbWF0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFRlc3RBbmltYXRpb24gZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIC8vcHJpdmF0ZSBhbmltYXRvcjpCQUJZTE9OLkFuaW1hdGlvblN0YXRlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBhbmltYXRvcjphbnkgPSBudWxsO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT4gU3RhcnRpbmcgYW5pbWF0aW9uIHRlc3QgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRvciA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5BbmltYXRpb25TdGF0ZVwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdG9yID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gZ2V0IGFuaW1hdGlvbiBzdGF0ZSBjb21wb25lbnQ6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWZ0ZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBBZnRlciByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBEZXN0cm95IGNvbXBvbmVudCBmdW5jdGlvblxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICogQGNsYXNzIFRlc3RDZW50ZXJcbiAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBUZXN0Q2VudGVyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICAgICAgY29uc3QgcmI6QkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzID0gdGhpcy5nZXRDb21wb25lbnQoXCJCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3NcIik7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCIjIyMgRklOQUwgQ09NICMjI1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJiLmNlbnRlck9mTWFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWZ0ZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBBZnRlciByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBEZXN0cm95IGNvbXBvbmVudCBmdW5jdGlvblxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgVGVzdENvbGxpc2lvblxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBUZXN0Q29sbGlzaW9uIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuXG4gICAgICAgIHByaXZhdGUgcmlnaWRib2R5OkJBQllMT04uUmlnaWRib2R5UGh5c2ljcyA9IG51bGw7XG5cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gU3RhcnQgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGVzdCBjb2xsaXNpb24gZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkgPSB0aGlzLmdldENvbXBvbmVudChcIkJBQllMT04uUmlnaWRib2R5UGh5c2ljc1wiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJpZ2lkYm9keSAhPSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2lkYm9keS5yZWdpc3Rlck9uQ29sbGlzaW9uRW50ZXIoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiIyMjOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUgKyBcIjogQmVnaW4gQ29udGFjdCBXaXRoOiBcIiArIG1lc2gubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkucmVnaXN0ZXJPbkNvbGxpc2lvblN0YXkoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCIjIyM6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiOiBVcGRhdGUgQ29udGFjdCBXaXRoOiBcIiArIG1lc2gubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkucmVnaXN0ZXJPbkNvbGxpc2lvbkV4aXQoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIiMjIzogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lICsgXCI6IEVuZCBDb250YWN0IFdpdGg6IFwiICsgbWVzaC5uYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGxvY2F0ZSByaWdpZGJvZHkgY29tcG9uZW50IGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBhZnRlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIEFmdGVyIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIERlc3Ryb3kgY29tcG9uZW50IGZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBUZXN0Q29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBUZXN0Q29udHJvbGxlciBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSB0ZXN0VGV4dHVyZTphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIG1fcGh5c2ljc1dvcmxkOmFueSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX3BoeXNpY3NFbmdpbmU6QkFCWUxPTi5JUGh5c2ljc0VuZ2luZSA9IG51bGw7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMudGVzdFRleHR1cmUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidGVzdFRleHR1cmVcIiwgdGhpcy50ZXN0VGV4dHVyZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYXN5bmMgc3RhcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT0+IFN0YXJ0aW5nIHRlc3QgY29udHJvbGxlci4uLlwiKTtcbiAgICAgICAgICAgIHRoaXMubV9waHlzaWNzV29ybGQgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRQaHlzaWNzV29ybGQodGhpcy5zY2VuZSk7XG4gICAgICAgICAgICB0aGlzLm1fcGh5c2ljc0VuZ2luZSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFBoeXNpY3NFbmdpbmUodGhpcy5zY2VuZSk7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT4gVGVzdCBUZXh0dXJlXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy50ZXN0VGV4dHVyZSk7XG4gICAgICAgICAgICBjb25zdCBiYWJ5bG9uVGV4dHVyZTpCQUJZTE9OLlRleHR1cmUgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZVRleHR1cmUodGhpcy50ZXN0VGV4dHVyZSwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhiYWJ5bG9uVGV4dHVyZSk7XG4gICAgICAgICAgICBjb25zdCB0ZXN0UHJvamVjdG9yOkJBQllMT04uQWJzdHJhY3RNZXNoID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0QWJzdHJhY3RNZXNoKHRoaXMuc2NlbmUsIFwiVGVzdFByb2plY3RvclwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIioqKiBGT1VORCBURVNUIFBST0pFQ1RPUiAqKipcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXN0UHJvamVjdG9yKTtcbiAgICAgICAgICAgIGxldCBhbmdsZTpudW1iZXIgPSBNYXRoLlBJIC8gMztcbiAgICAgICAgICAgIGxldCBsaWdodCA9IG5ldyBCQUJZTE9OLlNwb3RMaWdodChcbiAgICAgICAgICAgICAgICBcIkxpZ2h0XCIsXG4gICAgICAgICAgICAgICAgdGVzdFByb2plY3Rvci5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgICAgICAgICAgIG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgLTEsIDApLFxuICAgICAgICAgICAgICAgIGFuZ2xlLFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxpZ2h0LmRpZmZ1c2UuY29weUZyb21GbG9hdHMoMSwgMSwgMSk7XG4gICAgICAgICAgICBsaWdodC5zcGVjdWxhci5jb3B5RnJvbUZsb2F0cygwLjAxLCAwLjAxLCAwLjAxKTtcbiAgICAgICAgICAgIGxpZ2h0LmludGVuc2l0eSA9IDUwO1xuICAgICAgICAgICAgbGlnaHQucHJvamVjdGlvblRleHR1cmUgPSBiYWJ5bG9uVGV4dHVyZTtcbiAgICAgICAgICAgIC8vbGV0IGR5blRleHR1cmUgPSBuZXcgQkFCWUxPTi5EeW5hbWljVGV4dHVyZShcIlRleHR1cmVcIiwge3dpZHRoOiA1MTIsIGhlaWdodDogNTEyfSwgdGhpcy5zY2VuZSwgdHJ1ZSk7XG4gICAgICAgICAgICAvL2R5blRleHR1cmUuZHJhd1RleHQoXCJURVNUXCIsIDgwLCAyNTYsIFwiYm9sZCAxMDBweCBBcmlhbFwiLCBcIndoaXRlXCIsIFwiYmxhY2tcIiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAvL2xpZ2h0LnByb2plY3Rpb25UZXh0dXJlID0gZHluVGV4dHVyZTsgICAgXG4gICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAvL0JBQllMT04uU2NlbmVMb2FkZXIuSW1wb3J0TWVzaChcIlwiLCBcInNjZW5lcy9cIiwgXCJBQm90LmJhYnlsb25cIiwgdGhpcy5zY2VuZSwgZnVuY3Rpb24gKG5ld01lc2hlczpCQUJZTE9OLkFic3RyYWN0TWVzaFtdKSB7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLndhcm4oXCIqKiogTE9BREVEIE5FVyBNRVNIRVMgKioqXCIpO1xuICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2cobmV3TWVzaGVzKTtcbiAgICAgICAgICAgIC8vfSk7XG5cbiAgICAgICAgICAgIC8vdmFyIHBtOkJBQllMT04uUEJSTWF0ZXJpYWw7XG4gICAgICAgICAgICAvL3ZhciBzbTpCQUJZTE9OLlN0YW5kYXJkTWF0ZXJpYWw7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT4gQ3JlYXRlIHRlc3QgcHJlZmFicy4uLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJvb3Q6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0TWVzaCh0aGlzLnNjZW5lLCBcIl9fcm9vdF9fXCIpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJSZW15IDFcIiwgXCJOZXcgUmVteSAxXCIsIHJvb3QpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJSZW15IDJcIiwgXCJOZXcgUmVteSAyXCIsIHJvb3QpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJDdWJlIDFcIiwgXCJOZXcgQ3ViZSAxXCIsIHJvb3QpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJDdWJlIDJcIiwgXCJOZXcgQ3ViZSAyXCIsIHJvb3QpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJTcGhlcmUgMVwiLCBcIk5ldyBTcGhlcmUgMVwiLCByb290KTtcbiAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLkluc3RhbnRpYXRlUHJlZmFiKHRoaXMuc2NlbmUsIFwiU3BoZXJlIDJcIiwgXCJOZXcgU3BoZXJlIDJcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIkNhcHN1bGUgMVwiLCBcIk5ldyBDYXBzdWxlIDFcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIkNhcHN1bGUgMlwiLCBcIk5ldyBDYXBzdWxlIDJcIiwgcm9vdCk7XG4gICAgICAgICAgICAqL1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIEltcG9ydCBhdXRob3JlZCBzY2VuZVxuICAgICAgICAgICAgLy92YXIgbmV3TWVzaGVzID0gKGF3YWl0IEJBQllMT04uU2NlbmVMb2FkZXIuSW1wb3J0TWVzaEFzeW5jKFwiXCIsIFwiaHR0cHM6Ly9tYWNrZXlrMjQuZ2l0aHViLmlvL3RlbXAvVGVzdFBoeXNpY3MuZ2xiXCIsIFwiXCIsIHRoaXMuc2NlbmUpKS5tZXNoZXM7XG4gICAgICAgICAgICAvL2NvbnNvbGUud2FybihcIldURjogVGhhdCBXb3JrZWRcIik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKG5ld01lc2hlcyk7XG5cbiAgICAgICAgICAgIC8vIExvYWQgVGVzdCBSZW15IE1lc2hlc1xuICAgICAgICAgICAgLy9CQUJZTE9OLlNjZW5lTG9hZGVyLkltcG9ydE1lc2goXCJcIiwgXCJzY2VuZXMvXCIsIFwiUmVteS5nbHRmXCIsIHRoaXMuc2NlbmUsIGZ1bmN0aW9uIChuZXdNZXNoZXM6QkFCWUxPTi5BYnN0cmFjdE1lc2hbXSkge1xuICAgICAgICAgICAgLy8gICAgY29uc29sZS53YXJuKFwiKioqIExPQURFRCBORVcgTUVTSEVTICoqKlwiKTtcbiAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKG5ld01lc2hlcyk7XG4gICAgICAgICAgICAvL30pOyAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9sZXQgYm94ID0gQkFCWUxPTi5NZXNoLkNyZWF0ZUJveChcIlRlc3QgQm94XCIsIDEsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgLy9ib3gucG9zaXRpb24ueCArPSAyO1xuICAgICAgICAgICAgLy9ib3gucG9zaXRpb24ueSArPSAyO1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgdmFyIGZvbnRfbmFtZXM6c3RyaW5nW10gPSBbXCJBcmlhbFwiLCBcIkhlbHZldGljYVwiLCBcIlNhbnMtU2VyaWZcIiwgXCJDb21pY1NhbnNcIiwgXCJKdXJhXCIsIFwiSGlydWtvUHJvLUJvb2tcIiwgXCJXZWJHTC1EaW5nc1wiXTtcbiAgICAgICAgICAgIHZhciBsaW5lX2hlaWdodDpudW1iZXIgPSAxO1xuICAgICAgICAgICAgdmFyIHVwcGVyX29mZnNldDpudW1iZXIgPSAobGluZV9oZWlnaHQgKiAtMS4wKTtcbiAgICAgICAgICAgIHZhciBtaWRkbGVfb2Zmc2V0Om51bWJlciA9IChsaW5lX2hlaWdodCAqIC0wLjMzKTtcbiAgICAgICAgICAgIHZhciBsb3dlcl9vZmZzZXQ6bnVtYmVyID0gKGxpbmVfaGVpZ2h0ICogMC4yNSk7XG4gICAgICAgICAgICB2YXIgeV9wb3NpdGlvbjpudW1iZXIgPSB1cHBlcl9vZmZzZXQ7XG4gICAgICAgICAgICB2YXIgel9wb3NpdGlvbjpudW1iZXIgPSAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgd25kOmFueSA9IHdpbmRvdztcbiAgICAgICAgICAgIHZhciBXcml0ZXIgPSB3bmQuQkFCWUxPTi5NZXNoV3JpdGVyKHRoaXMuc2NlbmUsIHtzY2FsZTogMS4wfSk7XG4gICAgICAgICAgICB2YXIgdGV4dDEgID0gbmV3IFdyaXRlcihcIkhlbGxvIFdvcmxkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJhbmNob3JcIjogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZm9udC1mYW1pbHlcIiA6IFwiQXJpYWxcIiwgXG4gICAgICAgICAgICAgICAgICAgIFwibGV0dGVyLWhlaWdodFwiOiBsaW5lX2hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgXCJsZXR0ZXItdGhpY2tuZXNzXCI6IDAuMDEsXG4gICAgICAgICAgICAgICAgICAgIFwicG9zaXRpb25cIiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieVwiIDogeV9wb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwielwiIDogel9wb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcImFscGhhXCIgOiAxLFxuICAgICAgICAgICAgICAgICAgICBcImNvbG9yc1wiIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaWZmdXNlXCI6IFwiI0YwRjBGMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhbWJpZW50XCIgOiBcIiNGMEYwRjBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3BlY3VsYXJcIiA6IFwiIzAwMDAwMFwiLCAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVtaXNzaXZlXCI6IFwiIzgwODA4MFwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTsgXG4gICAgICAgICAgICB2YXIgbnA6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRNZXNoKHRoaXMuc2NlbmUsIFwiTmV3IFRleHRcIik7XG4gICAgICAgICAgICB2YXIgbXg6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSB0ZXh0MS5nZXRNZXNoKCk7XG4gICAgICAgICAgICBteC5yb3RhdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoLU1hdGguUEkvMiwgTWF0aC5QSS8yLCAtTWF0aC5QSS8yKTtcbiAgICAgICAgICAgIG14LnBhcmVudCA9IG5wO1xuICAgICAgICAgICAgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgcmFuOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gY29uc3QgbnVtX21hbmlmb2xkczpudW1iZXIgPSB0aGlzLm1fcGh5c2ljc1dvcmxkLmdldEJyb2FkcGhhc2UoKS5nZXRPdmVybGFwcGluZ1BhaXJDYWNoZSgpLmdldE51bU92ZXJsYXBwaW5nUGFpcnMoKTtcbiAgICAgICAgICAgIC8vY29uc3QgbnVtX21hbmlmb2xkczpudW1iZXIgPSB0aGlzLm1fcGh5c2ljc1dvcmxkLmdldERpc3BhdGNoZXIoKS5nZXROdW1NYW5pZm9sZHMoKTtcbiAgICAgICAgICAgIC8vY29uc3QgbXNnID0gXCJUb3RhbCBPdmVybGFwcGluZyBQYXJpczogXCIgKyBudW1fbWFuaWZvbGRzO1xuICAgICAgICAgICAgLy9CQUJZTE9OLlV0aWxpdGllcy5QcmludFRvU2NyZWVuKG1zZyk7ICAgXG4gICAgICAgICAgICAvLyBUZXN0IFJ1bm5pbmcgTG9vcFxuICAgICAgICAgICAgLy9pZiAodGhpcy5yYW4gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAvLyAgICB0aGlzLnJhbiA9IHRydWU7XG4gICAgICAgICAgICAvLyAgICBcbiAgICAgICAgICAgIC8vfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAqIEBjbGFzcyBXVEZDb21wXG4gICAgKi9cbiAgICBleHBvcnQgY2xhc3MgV1RGQ29tcCBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gU3RhcnQgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBhZnRlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIEFmdGVyIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIERlc3Ryb3kgY29tcG9uZW50IGZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICB9XG59Il19

// Project Data Store
if (navigator.dataStore == null) navigator.dataStore = {};

navigator.dataStore['manifest'] = JSON.parse(window.atob("ewogICJuYW1lIjogIiMjI1RJVExFIyMjIiwKICAic2hvcnRfbmFtZSI6ICIjIyNTSE9SVCMjIyIsCiAgInRoZW1lX2NvbG9yIjogIiMjI1NQTEFTSCMjIyIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIyMjU1BMQVNIIyMjIiwKICAib3JpZW50YXRpb24iOiAiIyMjT1JJRU5UIyMjIiwgIAogICJkaXNwbGF5IjogIiMjI0RJU1BMQVkjIyMiLAogICJzdGFydF91cmwiOiAiIyMjU1RBUlQjIyMiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTcyeDcyLnBuZyIsCiAgICAgICJzaXplcyI6ICI3Mng3MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi05Nng5Ni5wbmciLAogICAgICAic2l6ZXMiOiAiOTZ4OTYiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImljb25zL2ljb24tMTI4eDEyOC5wbmciLAogICAgICAic2l6ZXMiOiAiMTI4eDEyOCIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi0xNDR4MTQ0LnBuZyIsCiAgICAgICJzaXplcyI6ICIxNDR4MTQ0IiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTE1MngxNTIucG5nIiwKICAgICAgInNpemVzIjogIjE1MngxNTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImljb25zL2ljb24tMTkyeDE5Mi5wbmciLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi0zODR4Mzg0LnBuZyIsCiAgICAgICJzaXplcyI6ICIzODR4Mzg0IiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTUxMng1MTIucG5nIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9CiAgXQp9"));


// Project Shader Store
// Project Shader Chunks
