window.BabylonToolkitLicense = "I-ABCDEF12345";

// Xbox Project Shim Services
var EnableXboxLiveServices = true;

// babylon.toolkit.js
var BABYLON;!function(e){var t=function(){function e(e){this.motion=e.motion,this.posX=e.posX||0,this.posY=e.posY,this.weight=e.weight||0}return e.GetIdleBlendTree=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];if(0===i.posX&&0===i.posY)return i}return null},e.GetDefaultIdleBlendTree=function(){return e.DefaultIdleBlendTree},e.DefaultIdleBlendTree=new e({motion:"Idle",posX:0,posY:0}),e}();e.BlendTreeValue=t;var r=function(){function t(){}return t.ZCross=function(e,t){return e.x*t.y-t.x*e.y},t.ClampValue=function(e,t,r){return e<=t?t:e>=r?r:e},t.ClampVector=function(r,i,s){var o=e.Vector3.Zero();return t.ClampVectorToRef(r,i,s,o),o},t.ClampVectorToRef=function(e,r,i,s){null!=s&&(s.x=t.ClampValue(e.x,r,i),s.y=t.ClampValue(e.y,r,i),s.z=t.ClampValue(e.z,r,i))},t.GetSignedAngle=function(e,t){return Math.atan2(e.x*t.y-e.y*t.x,e.x*t.x+e.y*t.y)},t.GetBarycentricVector=function(r,i,s,o){var n=e.Vector3.Zero();return t.GetBarycentricVectorToRef(r,i,s,o,n),n},t.GetBarycentricVectorToRef=function(e,r,i,s,o){t.TempVector2_AB.set(0,0),t.TempVector2_AB.set(0,0),t.TempVector2_AB.set(0,0),i.subtractToRef(r,t.TempVector2_AB),s.subtractToRef(r,t.TempVector2_AC),e.subtractToRef(r,t.TempVector2_AP);var n=1/t.ZCross(t.TempVector2_AB,t.TempVector2_AC),a=n*t.ZCross(t.TempVector2_AB,t.TempVector2_AP),l=n*t.ZCross(t.TempVector2_AP,t.TempVector2_AC),h=1-a-l;null!=o&&(o.x=h,o.y=a,o.z=l)},t.GetLinearInterpolation=function(e,t,r,i,s){return t+(s-e)*((i-t)/(r-e))},t.TempVector2_AB=new e.Vector2(0,0),t.TempVector2_AC=new e.Vector2(0,0),t.TempVector2_AP=new e.Vector2(0,0),t}();e.BlendTreeUtils=r;var i=function(){function i(){}return i.Calculate1DSimpleBlend=function(e,t){var s=t[0],o=t[t.length-1];if(e<=s.posY)s.weight=1;else if(e>=o.posY)o.weight=1;else{var n=i.GetRightNeighbourBlendTreeIndex(e,t),a=t[n-1],l=t[n],h=r.GetLinearInterpolation(a.posY,1,l.posY,0,e);a.weight=h,l.weight=1-a.weight}},i.Calculate2DSimpleDirectional=function(e,s,o){i.TempVector2_IP.set(e,s),i.TempVector2_TA.set(0,0),i.TempVector2_TB.set(0,0),i.TempVector2_TC.set(0,0),i.TempVector3_BARY.set(0,0,0);var n=!0,a=t.GetIdleBlendTree(o);if(a){var l=o.indexOf(a);o.splice(l,1)}else n=!1,a=t.GetDefaultIdleBlendTree();o.sort(function(e,t){return Math.atan2(e.posY,e.posX)-Math.atan2(t.posY,t.posX)}),o.unshift(a);for(var h=0,c=2;c<o.length;++c)i.TempVector2_TB.set(o[c-1].posX,o[c-1].posY),i.TempVector2_TC.set(o[c].posX,o[c].posY),r.GetBarycentricVectorToRef(i.TempVector2_IP,i.TempVector2_TA,i.TempVector2_TB,i.TempVector2_TC,i.TempVector3_BARY),r.ClampVectorToRef(i.TempVector3_BARY,0,1,i.TempVector3_BARY),i.TempVector3_BARY.z>0&&i.TempVector3_BARY.y>0&&(o[0].weight+=i.TempVector3_BARY.x,o[c-1].weight+=i.TempVector3_BARY.z,o[c].weight+=i.TempVector3_BARY.y,h+=i.TempVector3_BARY.x+i.TempVector3_BARY.y+i.TempVector3_BARY.z);i.TempVector2_TB.set(o[o.length-1].posX,o[o.length-1].posY),i.TempVector2_TC.set(o[1].posX,o[1].posY),r.GetBarycentricVectorToRef(i.TempVector2_IP,i.TempVector2_TA,i.TempVector2_TB,i.TempVector2_TC,i.TempVector3_BARY),r.ClampVectorToRef(i.TempVector3_BARY,0,1,i.TempVector3_BARY),i.TempVector3_BARY.z>0&&i.TempVector3_BARY.y>0&&(o[0].weight+=i.TempVector3_BARY.x,o[o.length-1].weight+=i.TempVector3_BARY.z,o[1].weight+=i.TempVector3_BARY.y,h+=i.TempVector3_BARY.x+i.TempVector3_BARY.y+i.TempVector3_BARY.z);for(var m=0,u=o;m<u.length;m++){var p=u[m];p.weight/=h}if(!n){o.shift();for(var y=a.weight/o.length,_=0,f=o;_<f.length;_++){var p=f[_];p.weight+=y}}},i.Calculate2DFreeformDirectional=function(t,s,o){i.TempVector2_IP.set(t,s),i.TempVector2_POSI.set(0,0),i.TempVector2_POSJ.set(0,0),i.TempVector2_POSIP.set(0,0),i.TempVector2_POSIJ.set(0,0);for(var n=2,a=0,l=i.TempVector2_IP.length(),h=0;h<o.length;++h){var c=o[h];i.TempVector2_POSI.set(c.posX,c.posY);for(var m=i.TempVector2_POSI.length(),u=l-m,p=r.GetSignedAngle(i.TempVector2_POSI,i.TempVector2_IP),y=1,_=0;_<o.length;++_)if(_!==h){i.TempVector2_POSJ.set(o[_].posX,o[_].posY);var f=i.TempVector2_POSJ.length(),d=(m+f)/2,v=u/d,g=(f-m)/d,C=r.GetSignedAngle(i.TempVector2_POSI,i.TempVector2_POSJ);i.TempVector2_POSIP.set(v,p*n),i.TempVector2_POSIJ.set(g,C*n);var b=i.TempVector2_POSIJ.lengthSquared(),S=e.Vector2.Dot(i.TempVector2_POSIP,i.TempVector2_POSIJ)/b;S=1-S,S=r.ClampValue(S,0,1),y=Math.min(S,y)}c.weight=y,a+=y}for(var T=0,x=o;T<x.length;T++){var c=x[T];c.weight/=a}},i.Calculate2DFreeformCartesian=function(t,s,o){i.TempVector2_IP.set(t,s),i.TempVector2_POSI.set(0,0),i.TempVector2_POSJ.set(0,0),i.TempVector2_POSIP.set(0,0),i.TempVector2_POSIJ.set(0,0);for(var n=0,a=0;a<o.length;++a){var l=o[a];i.TempVector2_POSI.set(l.posX,l.posY),i.TempVector2_IP.subtractToRef(i.TempVector2_POSI,i.TempVector2_POSIP);for(var h=1,c=0;c<o.length;++c)if(c!==a){i.TempVector2_POSJ.set(o[c].posX,o[c].posY),i.TempVector2_POSJ.subtractToRef(i.TempVector2_POSI,i.TempVector2_POSIJ);var m=i.TempVector2_POSIJ.lengthSquared(),u=e.Vector2.Dot(i.TempVector2_POSIP,i.TempVector2_POSIJ)/m;u=1-u,u=r.ClampValue(u,0,1),h=Math.min(h,u)}l.weight=h,n+=h}for(var p=0,y=o;p<y.length;p++){var l=y[p];l.weight/=n}},i.GetRightNeighbourBlendTreeIndex=function(e,t){t.sort(function(e,t){return e.posY-t.posY});for(var r=0;r<t.length;++r)if(t[r].posY>e)return r;return-1},i.TempVector2_IP=new e.Vector2(0,0),i.TempVector2_TA=new e.Vector2(0,0),i.TempVector2_TB=new e.Vector2(0,0),i.TempVector2_TC=new e.Vector2(0,0),i.TempVector2_POSI=new e.Vector2(0,0),i.TempVector2_POSJ=new e.Vector2(0,0),i.TempVector2_POSIP=new e.Vector2(0,0),i.TempVector2_POSIJ=new e.Vector2(0,0),i.TempVector3_BARY=new e.Vector3(0,0,0),i}();e.BlendTreeSystem=i}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){this.initAnimationState()},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t.prototype.initAnimationState=function(){console.warn("Dump Animation State Machine: "+this.transform.name),console.log(this)},t}(e.ScriptComponent);e.AnimationState=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){void 0===i&&(i={});var s=t.call(this,e,r,i)||this;return s._audio=null,s._name=null,s._file=null,s._loop=!1,s._mute=!1,s._volume=1,s._pitch=1,s._priority=128,s._panstereo=0,s._mindistance=1,s._maxdistance=50,s._rolloffmode="linear",s._rollofffactor=1,s._playonawake=!0,s._spatialblend=0,s._reverbzonemix=1,s._bypasseffects=!1,s._bypassreverbzones=!1,s._bypasslistenereffects=!1,s._name=s.getEditorProperty("name",s._name),s._file=s.getEditorProperty("file",s._file),s._loop=s.getEditorProperty("loop",s._loop),s._mute=s.getEditorProperty("mute",s._mute),s._volume=s.getEditorProperty("volume",s._volume),s._pitch=s.getEditorProperty("pitch",s._pitch),s._priority=s.getEditorProperty("priority",s._priority),s._panstereo=s.getEditorProperty("panstereo",s._panstereo),s._playonawake=s.getEditorProperty("playonawake",s._playonawake),s._mindistance=s.getEditorProperty("mindistance",s._mindistance),s._maxdistance=s.getEditorProperty("maxdistance",s._maxdistance),s._rolloffmode=s.getEditorProperty("rolloffmode",s._rolloffmode),s._rollofffactor=s.getEditorProperty("rollofffactor",s._rollofffactor),s._spatialblend=s.getEditorProperty("spatialblend",s._spatialblend),s._reverbzonemix=s.getEditorProperty("reverbzonemix",s._reverbzonemix),s._bypasseffects=s.getEditorProperty("bypasseffects",s._bypasseffects),s._bypassreverbzones=s.getEditorProperty("bypassreverbzones",s._bypassreverbzones),s._bypasslistenereffects=s.getEditorProperty("bypasslistenereffects",s._bypasslistenereffects),s}return __extends(r,t),r.prototype.getSoundClip=function(){return this._audio},r.prototype.start=function(){this.initAudioSource()},r.prototype.destroy=function(){this.destroyAudioSource()},r.prototype.initAudioSource=function(){var t=this;if(null!=this._name&&""!==this._name||(this._name="Unknown"),null!=this._file&&""!==this._file){var r=e.SceneManager.GetRootUrl(this.scene),i=this._spatialblend>=.1,s="logarithmic"===this._rolloffmode?"exponential":"linear";this._audio=new e.Sound(this._name,r+this._file,this.scene,function(){t._audio.setVolume(t._mute===!0?0:t._volume),t._audio.setPlaybackRate(t._pitch)},{loop:this._loop,autoplay:this._playonawake,refDistance:this._mindistance,maxDistance:this._maxdistance,rolloffFactor:this._rollofffactor,spatialSound:i,distanceModel:s}),this._audio.setPosition(this.transform.position.clone()),i===!0&&this._audio.attachToMesh(this.transform)}},r.prototype.destroyAudioSource=function(){null!=this._audio&&(this._audio.dispose(),this._audio=null)},r}(e.ScriptComponent);e.AudioSource=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(r,i,s){void 0===s&&(s={});var o=t.call(this,r,i,s)||this;return o.cameraType=0,o.mainCamera=!1,o.virtualReality=null,o.multiPlayerSetup=null,o.m_cameraRig=null,o.mainCamera="MainCamera"===o.getTransformTag(),o.cameraType=o.getEditorProperty("mainCameraType",o.cameraType),o.virtualReality=o.getEditorProperty("webVirtualReality",o.virtualReality),o.multiPlayerSetup=o.getEditorProperty("multiPlayerSetup",o.multiPlayerSetup),null!=o.multiPlayerSetup&&(e.UniversalCameraSystem.startupMode=o.multiPlayerSetup.playerStartupMode,e.UniversalCameraSystem.stereoCameras=o.multiPlayerSetup.stereoSideBySide),o}return __extends(r,t),r.prototype.isMainCamera=function(){return this.mainCamera},r.prototype.getCameraType=function(){return this.cameraType},r.prototype.start=function(){this.initCameraSystemState()},r.prototype.update=function(){this.updateCameraSystemState()},r.prototype.destroy=function(){this.destroyCameraSystemState()},r.prototype.initCameraSystemState=function(){if(e.Utilities.ValidateTransformQuaternion(this.transform),this.m_cameraRig=this.getCameraRig(),null!=this.m_cameraRig)if(0===this.cameraType)null==e.UniversalCameraSystem.PlayerOneCamera&&(e.UniversalCameraSystem.PlayerOneCamera=this.m_cameraRig,e.UniversalCameraSystem.PlayerOneCamera.inertia=1);else if(1===this.cameraType){if(null!=this.virtualReality&&this.virtualReality.experienceHelper===!0){var t=!1,r=null;if(this.virtualReality.useCustomButton===!0&&null!=this.virtualReality.buttonElementID&&""!==this.virtualReality.buttonElementID){var i=document.getElementById(this.virtualReality.buttonElementID);null!=i?(t=!0,r=i):e.Tools.Warn("Babylon.js failed to locate webvr button element id: "+this.virtualReality.buttonElementID)}var s=null,o=null;null!=this.virtualReality.floorMeshesTags&&""!==this.virtualReality.floorMeshesTags||(this.virtualReality.floorMeshesTags="Navigation"),this.virtualReality.enableTeleportation===!0&&(o=this.scene.getMeshesByTags(this.virtualReality.floorMeshesTags)),s=this.virtualReality.enableTeleportation===!0&&null!=o&&o.length>0?{createDeviceOrientationCamera:1===this.virtualReality.defaultCamera,createFallbackVRDeviceOrientationFreeCamera:this.virtualReality.fallbackCamera,laserToggle:this.virtualReality.displayLaserBeam,useCustomVRButton:t,customVRButton:r,rayLength:this.virtualReality.rayCastLength,defaultHeight:this.virtualReality.defaultHeight,positionScale:this.virtualReality.positionScale,floorMeshes:o}:{createDeviceOrientationCamera:1===this.virtualReality.defaultCamera,createFallbackVRDeviceOrientationFreeCamera:this.virtualReality.fallbackCamera,laserToggle:this.virtualReality.displayLaserBeam,useCustomVRButton:t,customVRButton:r,rayLength:this.virtualReality.rayCastLength,defaultHeight:this.virtualReality.defaultHeight,positionScale:this.virtualReality.positionScale},e.UniversalCameraSystem.DefaultControllers=!0;var n=this.scene.createDefaultVRExperience(s);null!=n&&(n.displayGaze=this.virtualReality.displayGazeIcon,this.virtualReality.enableInteractions===!0&&n.enableInteractions(),n.onControllerMeshLoadedObservable.add(function(t,r){"left"===t.hand?e.UniversalCameraSystem.LeftControllerStick=t:"right"===t.hand&&(e.UniversalCameraSystem.RightControllerStick=t)})),e.UniversalCameraSystem.VrCameraHelper=n}}else if(2===this.cameraType){var a=this.m_cameraRig.name;if(null==e.UniversalCameraSystem.PlayerOneCamera){var l=a+".1",h=this.m_cameraRig.clone(l);h.name=l,h.parent=null,h.position=this.transform.position.clone(),h.rotationQuaternion=this.transform.rotationQuaternion.clone(),h.viewport=new e.Viewport(0,0,0,0),h.setEnabled(!1),e.UniversalCameraSystem.PlayerOneCamera=h,e.UniversalCameraSystem.PlayerOneCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerTwoCamera){var c=a+".2",m=this.m_cameraRig.clone(c);m.name=c,m.parent=null,m.position=this.transform.position.clone(),m.rotationQuaternion=this.transform.rotationQuaternion.clone(),m.viewport=new e.Viewport(0,0,0,0),m.setEnabled(!1),e.UniversalCameraSystem.PlayerTwoCamera=m,e.UniversalCameraSystem.PlayerTwoCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerThreeCamera){var u=a+".3",p=this.m_cameraRig.clone(u);p.name=u,p.parent=null,p.position=this.transform.position.clone(),p.rotationQuaternion=this.transform.rotationQuaternion.clone(),p.viewport=new e.Viewport(0,0,0,0),p.setEnabled(!1),e.UniversalCameraSystem.PlayerThreeCamera=p,e.UniversalCameraSystem.PlayerThreeCamera.inertia=1}if(null==e.UniversalCameraSystem.PlayerFourCamera){var y=a+".4",_=this.m_cameraRig.clone(y);_.name=y,_.parent=null,_.position=this.transform.position.clone(),_.rotationQuaternion=this.transform.rotationQuaternion.clone(),_.viewport=new e.Viewport(0,0,0,0),_.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera=_,e.UniversalCameraSystem.PlayerFourCamera.inertia=1}e.UniversalCameraSystem.multiPlayerView=!0,e.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene,e.UniversalCameraSystem.startupMode)}},r.prototype.updateCameraSystemState=function(){null!=this.m_cameraRig&&(0===this.cameraType||1===this.cameraType||2===this.cameraType)},r.prototype.destroyCameraSystemState=function(){this.virtualReality=null},r.GetPlayerCamera=function(t){return e.UniversalCameraSystem.IsMultiPlayerView()?t===e.PlayerNumber.One?e.UniversalCameraSystem.PlayerOneCamera:t===e.PlayerNumber.Two?e.UniversalCameraSystem.PlayerTwoCamera:t===e.PlayerNumber.Three?e.UniversalCameraSystem.PlayerThreeCamera:t===e.PlayerNumber.Four?e.UniversalCameraSystem.PlayerFourCamera:null:t===e.PlayerNumber.One?null!=e.UniversalCameraSystem.WebVR?e.UniversalCameraSystem.WebVR.currentVRCamera:e.UniversalCameraSystem.PlayerOneCamera:(e.Tools.Warn("Babylon.js multi player camera not available for player: "+t),null)},Object.defineProperty(r,"WebVR",{get:function(){return e.UniversalCameraSystem.VrCameraHelper},enumerable:!0,configurable:!0}),r.GetWebVRLeftController=function(){return e.UniversalCameraSystem.LeftControllerStick},r.GetWebVRRightController=function(){return e.UniversalCameraSystem.RightControllerStick},r.GetWebVRLeftControllerPrefab=function(){return e.UniversalCameraSystem.LeftControllerPrefab},r.GetWebVRRightControllerPrefab=function(){return e.UniversalCameraSystem.RightControllerPrefab},r.ShowWebVRDefaultControllers=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),null!=e.UniversalCameraSystem.LeftControllerStick&&(e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.LeftControllerStick.attachToMesh(e.UniversalCameraSystem.LeftControllerStick.defaultModel),e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!0),null!=e.UniversalCameraSystem.RightControllerStick&&(e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.RightControllerStick.attachToMesh(e.UniversalCameraSystem.RightControllerStick.defaultModel),e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!0),null!=e.UniversalCameraSystem.WebVR&&(null!=t&&(e.UniversalCameraSystem.WebVR.displayGaze=t),null!=r&&(e.UniversalCameraSystem.WebVR.displayLaserPointer=r))},r.ShowWebVRCustomControllers=function(t,r){void 0===t&&(t=null),void 0===r&&(r=null),null!=e.UniversalCameraSystem.LeftControllerStick&&(e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.LeftControllerStick.attachToMesh(e.UniversalCameraSystem.LeftControllerPrefab),e.UniversalCameraSystem.LeftControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!1),null!=e.UniversalCameraSystem.RightControllerStick&&(e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!1),e.UniversalCameraSystem.RightControllerStick.attachToMesh(e.UniversalCameraSystem.RightControllerPrefab),e.UniversalCameraSystem.RightControllerStick.mesh.setEnabled(!0),e.UniversalCameraSystem.DefaultControllers=!1),null!=e.UniversalCameraSystem.WebVR&&(null!=t&&(e.UniversalCameraSystem.WebVR.displayGaze=t),null!=r&&(e.UniversalCameraSystem.WebVR.displayLaserPointer=r))},r.IsStereoCameras=function(){return e.UniversalCameraSystem.stereoCameras},r.IsMultiPlayerView=function(){return e.UniversalCameraSystem.multiPlayerView},r.GetMultiPlayerCount=function(){return e.UniversalCameraSystem.multiPlayerCount},r.ActivateMultiPlayerCameras=function(t){var r=!1;return null!=e.UniversalCameraSystem.multiPlayerCameras&&e.UniversalCameraSystem.multiPlayerCameras.length>0&&(t.activeCameras=e.UniversalCameraSystem.multiPlayerCameras,r=!0),r},r.DisposeMultiPlayerCameras=function(){null!=e.UniversalCameraSystem.PlayerOneCamera&&(e.UniversalCameraSystem.PlayerOneCamera.dispose(),e.UniversalCameraSystem.PlayerOneCamera=null),null!=e.UniversalCameraSystem.PlayerTwoCamera&&(e.UniversalCameraSystem.PlayerTwoCamera.dispose(),e.UniversalCameraSystem.PlayerTwoCamera=null),null!=e.UniversalCameraSystem.PlayerThreeCamera&&(e.UniversalCameraSystem.PlayerThreeCamera.dispose(),e.UniversalCameraSystem.PlayerThreeCamera=null),null!=e.UniversalCameraSystem.PlayerFourCamera&&(e.UniversalCameraSystem.PlayerFourCamera.dispose(),e.UniversalCameraSystem.PlayerFourCamera=null)},r.SetMultiPlayerViewLayout=function(t,r){var i=!1,s=e.Scalar.Clamp(r,1,4);return e.UniversalCameraSystem.IsMultiPlayerView()?(null!=e.UniversalCameraSystem.PlayerOneCamera&&null!=e.UniversalCameraSystem.PlayerTwoCamera&&null!=e.UniversalCameraSystem.PlayerThreeCamera&&null!=e.UniversalCameraSystem.PlayerFourCamera?(e.UniversalCameraSystem.multiPlayerCameras=[],1===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,1,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera)):2===s?(e.UniversalCameraSystem.stereoCameras===!0?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,.5,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(.5,0,.5,1)):(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,.5,1,.5),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,1,.5)),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!1),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera)):3===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,0,.5,1),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(.5,.5,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(.5,0,.5,.5),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(0,0,0,0),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!1),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerThreeCamera)):4===s?(e.UniversalCameraSystem.PlayerOneCamera.viewport=new e.Viewport(0,.5,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.viewport=new e.Viewport(0,0,.5,.5),e.UniversalCameraSystem.PlayerTwoCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerThreeCamera.viewport=new e.Viewport(.5,.5,.5,.5),e.UniversalCameraSystem.PlayerThreeCamera.setEnabled(!0),e.UniversalCameraSystem.PlayerFourCamera.viewport=new e.Viewport(.5,0,.5,.5),e.UniversalCameraSystem.PlayerFourCamera.setEnabled(!0),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerOneCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerTwoCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerThreeCamera),e.UniversalCameraSystem.multiPlayerCameras.push(e.UniversalCameraSystem.PlayerFourCamera)):e.Tools.Warn("Babylon.js camera rig invalid player count specified: "+s)):e.Tools.Warn("Babylon.js camera rig failed to initialize multi player cameras"),e.UniversalCameraSystem.multiPlayerCount=s,i=e.UniversalCameraSystem.ActivateMultiPlayerCameras(t),i===!1&&e.Tools.Warn("Babylon.js camera rig failed to initialize multi player views")):e.Tools.Warn("Babylon.js camera rig multi player view option not enabled"),i},r.VrCameraHelper=null,r.DefaultControllers=!0,r.LeftControllerStick=null,r.RightControllerStick=null,r.LeftControllerPrefab=null,r.RightControllerPrefab=null,r.PlayerOneCamera=null,r.PlayerTwoCamera=null,r.PlayerThreeCamera=null,r.PlayerFourCamera=null,r.multiPlayerView=!1,r.multiPlayerCount=1,r.multiPlayerCameras=null,r.stereoCameras=!0,r.startupMode=1,r}(e.ScriptComponent);e.UniversalCameraSystem=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(r,i,s){void 0===s&&(s={});var o=t.call(this,r,i,s)||this;return o._abstractMesh=null,o._avatarRadius=.5,o._avatarHeight=2,o._skinWidth=.08,o._stepOffset=.3,o._slopeLimit=45,o._minMoveDistance=.001,o._isPhysicsReady=!1,o._maxCollisions=4,o._useGhostSweepTest=!1,o._tmpAmmoQuaternion=null,o._tmpOriginQuaternion=null,o._tmpRotateQuaternion=null,o._tmpBabylonQuaternion=null,o._tmpBabylonEulerVector=null,o._tmpCollisionContacts=null,o.m_character=null,o.m_ghostShape=null,o.m_ghostObject=null,o.m_ghostCollision=null,o.m_ghostTransform=null,o.m_ghostPosition=null,o.m_ghostRotation=null,o.m_startPosition=null,o.m_startRotation=null,o.m_startTransform=null,o.m_walkDirection=null,o.m_warpPosition=null,o.m_turningRate=0,o.m_moveDeltaX=0,o.m_moveDeltaZ=0,o.m_physicsEngine=null,o._onCollisionEnterObservable=new e.Observable,o._onCollisionStayObservable=new e.Observable,o._onCollisionExitObservable=new e.Observable,o._abstractMesh=o.getAbstractMesh(),o._avatarRadius=o.getEditorProperty("avatarRadius",o._avatarRadius),o._avatarHeight=o.getEditorProperty("avatarHeight",o._avatarHeight),o._skinWidth=o.getEditorProperty("skinWidth",o._skinWidth),o._slopeLimit=o.getEditorProperty("slopeLimit",o._slopeLimit),o._stepOffset=o.getEditorProperty("stepOffset",o._stepOffset),o._minMoveDistance=o.getEditorProperty("minMoveDistance",o._minMoveDistance),o._useGhostSweepTest=o.getEditorProperty("useGhostSweepTest",o._useGhostSweepTest),o._tmpAmmoQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpOriginQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpRotateQuaternion=new Ammo.btQuaternion(0,0,0,1),o._tmpBabylonQuaternion=new e.Quaternion(0,0,0,1),o._tmpBabylonEulerVector=new e.Vector3(0,0,0),o._tmpBabylonQuaternion=new e.Quaternion(0,0,0,1),o.m_warpPosition=new Ammo.btVector3(0,0,0),o.m_walkDirection=new Ammo.btVector3(0,0,0),o.m_physicsEngine=e.SceneManager.GetPhysicsEngine(o.scene),o.setMaxNotifications(o._maxCollisions),o}return __extends(r,t),r.prototype.getAvatarRadius=function(){return this._avatarRadius},r.prototype.getAvatarHeight=function(){return this._avatarHeight},r.prototype.getSkinWidth=function(){return this._skinWidth},r.prototype.getStepOffset=function(){return this._stepOffset},r.prototype.getUseSweepTest=function(){return this._useGhostSweepTest},r.prototype.getMinMoveDistance=function(){return this._minMoveDistance},r.prototype.setMinMoveDistance=function(e){this._minMoveDistance=e},r.prototype.getVerticalVelocity=function(){return null!=this.m_character&&this.m_character.getVerticalVelocity?this.m_character.getVerticalVelocity():0},r.prototype.setMaxJumpHeight=function(e){null!=this.m_character&&this.m_character.setMaxJumpHeight(e)},r.prototype.setFallingSpeed=function(e){null!=this.m_character&&this.m_character.setFallSpeed(e)},r.prototype.getSlopeLimit=function(){return null!=this.m_character?this.m_character.getMaxSlope():0},r.prototype.setSlopeLimit=function(e){null!=this.m_character&&this.m_character.setMaxSlope(e)},r.prototype.setUpAxis=function(e){null!=this.m_character&&this.m_character.setUpAxis(e)},r.prototype.getGravity=function(){return null!=this.m_character?this.m_character.getGravity():0},r.prototype.setGravity=function(e){null!=this.m_character&&this.m_character.setGravity(e)},r.prototype.isGrounded=function(){return null!=this.m_character&&this.m_character.onGround()},r.prototype.isReady=function(){return null!=this.m_character},r.prototype.canJump=function(){return null!=this.m_character&&this.m_character.canJump()},r.prototype.internalWarp=function(e){null!=this.m_character&&this.m_character.warp(e)},r.prototype.internalJump=function(){null!=this.m_character&&this.m_character.jump()},r.prototype.internalSetJumpSpeed=function(e){null!=this.m_character&&this.m_character.setJumpSpeed(e)},r.prototype.internalSetWalkDirection=function(e){null!=this.m_character&&this.m_character.setWalkDirection(e)},r.prototype.internalSetVelocityForTimeInterval=function(e,t){null!=this.m_character&&this.m_character.setVelocityForTimeInterval(e,t)},r.prototype.start=function(){this.initMovementState()},r.prototype.update=function(){this.updateMovementState()},r.prototype.after=function(){this.afterMovementState()},r.prototype.destroy=function(){this.destroyMovementState()},r.prototype.initMovementState=function(){e.Utilities.ValidateTransformQuaternion(this.transform);var t=e.SceneManager.GetPhysicsWorld(this.scene);null!=t?(this.m_startPosition=new Ammo.btVector3(this.transform.position.x,this.transform.position.y,this.transform.position.z),this.m_startRotation=new Ammo.btQuaternion(this.transform.rotationQuaternion.x,this.transform.rotationQuaternion.y,this.transform.rotationQuaternion.z,this.transform.rotationQuaternion.w),this.m_startTransform=new Ammo.btTransform,this.m_startTransform.setIdentity(),this.m_startTransform.setOrigin(this.m_startPosition),this.m_startTransform.setRotation(this.m_startRotation),this.m_ghostShape=new Ammo.btCapsuleShape(this._avatarRadius,.5*this._avatarHeight),this.m_ghostShape.setMargin(this._skinWidth),this.m_ghostObject=new Ammo.btPairCachingGhostObject,this.m_ghostObject.setWorldTransform(this.m_startTransform),this.m_ghostObject.setCollisionShape(this.m_ghostShape),this.m_ghostObject.setCollisionFlags(e.CollisionFlags.CF_CHARACTER_OBJECT),this.m_ghostCollision=Ammo.castObject(this.m_ghostObject,Ammo.btCollisionObject),this.m_ghostCollision.entity=this._abstractMesh,this.m_character=new Ammo.btKinematicCharacterController(this.m_ghostObject,this.m_ghostShape,this._stepOffset),this.m_character.setUseGhostSweepTest(this._useGhostSweepTest),this.m_character.setUpInterpolate(!0),this.m_character.setMaxSlope(this._slopeLimit*e.System.Deg2Rad),this.m_character.setGravity(e.System.Gravity3G),t.addCollisionObject(this.m_ghostObject,e.CollisionFilters.CharacterFilter,e.CollisionFilters.StaticFilter|e.CollisionFilters.DefaultFilter|e.CollisionFilters.CharacterFilter),t.addAction(this.m_character)):e.Tools.Warn("Null physics world detected. Failed to create character controller: "+this.transform.name),this._isPhysicsReady=null!=this.m_physicsEngine&&null!=this._tmpCollisionContacts&&null!=this.m_ghostObject&&null!=this._abstractMesh,this.updateMovementState(),this.afterMovementState()},r.prototype.syncMovementState=function(){this._isPhysicsReady===!0&&(this.m_ghostTransform=this.m_ghostObject.getWorldTransform(),null!=this.m_ghostTransform?(this.m_ghostPosition=this.m_ghostTransform.getOrigin(),this.m_ghostRotation=this.m_ghostTransform.getRotation()):(this.m_ghostPosition=null,this.m_ghostRotation=null))},r.prototype.updateMovementState=function(){this.syncMovementState(),this._isPhysicsReady===!0&&(0!==this.m_turningRate&&null!=this.m_ghostTransform&&null!=this.m_ghostRotation&&(this._tmpBabylonQuaternion.set(this.m_ghostRotation.x(),this.m_ghostRotation.y(),this.m_ghostRotation.z(),this.m_ghostRotation.w()),e.Utilities.ToEulerToRef(this._tmpBabylonQuaternion,this._tmpBabylonEulerVector),this._tmpBabylonEulerVector.y+=this.m_turningRate,e.Utilities.FromEulerToRef(this._tmpBabylonEulerVector.x,this._tmpBabylonEulerVector.y,this._tmpBabylonEulerVector.z,this._tmpBabylonQuaternion),this._tmpAmmoQuaternion.setValue(this._tmpBabylonQuaternion.x,this._tmpBabylonQuaternion.y,this._tmpBabylonQuaternion.z,this._tmpBabylonQuaternion.w),this.m_ghostTransform.setRotation(this._tmpAmmoQuaternion),this.m_ghostObject.setWorldTransform(this.m_ghostTransform)),null!=this.m_walkDirection&&this.internalSetWalkDirection(this.m_walkDirection))},r.prototype.afterMovementState=function(){this.syncMovementState(),this._isPhysicsReady===!0&&(null!=this.m_ghostPosition&&this.transform.position.set(this.m_ghostPosition.x(),this.m_ghostPosition.y(),this.m_ghostPosition.z()),null!=this.m_ghostRotation&&this.transform.rotationQuaternion.set(this.m_ghostRotation.x(),this.m_ghostRotation.y(),this.m_ghostRotation.z(),this.m_ghostRotation.w())),this.parseGhostCollisionContacts()},r.prototype.parseGhostCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();if(e||t||r){var i=0;for(i=0;i<this._tmpCollisionContacts.length;i++)this._tmpCollisionContacts[i].reset=!0;var s=this.m_ghostObject.getNumOverlappingObjects();if(s>this._maxCollisions&&(s=this._maxCollisions),s>0)for(i=0;i<s;i++){var o=this.m_ghostObject.getOverlappingObject(i);if(null!=o){
var n=Ammo.castObject(o,Ammo.btCollisionObject);if(null!=n&&null!=n.entity&&n.isActive()){var a=-1,l=n.entity;for(i=0;i<this._tmpCollisionContacts.length;i++){var h=this._tmpCollisionContacts[i];if(null!=h.mesh&&h.mesh===l){h.state=1,h.reset=!1,a=i;break}}if(a===-1)for(i=0;i<this._tmpCollisionContacts.length;i++){var c=this._tmpCollisionContacts[i];if(null==c.mesh){c.mesh=l,c.state=0,c.reset=!1;break}}}}}for(i=0;i<this._tmpCollisionContacts.length;i++){var m=this._tmpCollisionContacts[i];m.reset===!0?(r&&null!=m.mesh&&this._onCollisionExitObservable.notifyObservers(m.mesh),m.mesh=null,m.state=0,m.reset=!1):0===m.state?e&&null!=m.mesh&&this._onCollisionEnterObservable.notifyObservers(m.mesh):t&&null!=m.mesh&&this._onCollisionStayObservable.notifyObservers(m.mesh)}}}},r.prototype.destroyMovementState=function(){this.m_physicsEngine=null,null!=this.m_character&&(Ammo.destroy(this.m_character),this.m_character=null),null!=this.m_ghostObject&&(Ammo.destroy(this.m_ghostObject),this.m_ghostObject=null),null!=this.m_ghostShape&&(Ammo.destroy(this.m_ghostShape),this.m_ghostShape=null),null!=this.m_ghostCollision&&(Ammo.destroy(this.m_ghostCollision),this.m_ghostCollision=null),null!=this.m_ghostPosition&&(Ammo.destroy(this.m_ghostPosition),this.m_ghostPosition=null),null!=this.m_ghostRotation&&(Ammo.destroy(this.m_ghostRotation),this.m_ghostRotation=null),null!=this.m_ghostTransform&&(Ammo.destroy(this.m_ghostTransform),this.m_ghostTransform=null),null!=this.m_startPosition&&(Ammo.destroy(this.m_startPosition),this.m_startPosition=null),null!=this.m_startRotation&&(Ammo.destroy(this.m_startRotation),this.m_startRotation=null),null!=this.m_startTransform&&(Ammo.destroy(this.m_startTransform),this.m_startTransform=null),null!=this.m_warpPosition&&(Ammo.destroy(this.m_warpPosition),this.m_warpPosition=null),null!=this.m_walkDirection&&(Ammo.destroy(this.m_walkDirection),this.m_walkDirection=null),null!=this._tmpAmmoQuaternion&&(Ammo.destroy(this._tmpAmmoQuaternion),this._tmpAmmoQuaternion=null),null!=this._tmpOriginQuaternion&&(Ammo.destroy(this._tmpOriginQuaternion),this._tmpOriginQuaternion=null),null!=this._tmpRotateQuaternion&&(Ammo.destroy(this._tmpRotateQuaternion),this._tmpRotateQuaternion=null),this._onCollisionEnterObservable.clear(),this._onCollisionEnterObservable=null,this._onCollisionStayObservable.clear(),this._onCollisionStayObservable=null,this._onCollisionExitObservable.clear(),this._onCollisionExitObservable=null,this._tmpCollisionContacts=null,this._abstractMesh=null},r.prototype.registerOnCollisionEnter=function(e){return this._onCollisionEnterObservable.add(e)},r.prototype.unregisterOnCollisionEnter=function(e){return this._onCollisionEnterObservable.remove(e)},r.prototype.registerOnCollisionStay=function(e){return this._onCollisionStayObservable.add(e)},r.prototype.unregisterOnCollisionStay=function(e){return this._onCollisionStayObservable.remove(e)},r.prototype.registerOnCollisionExit=function(e){return this._onCollisionExitObservable.add(e)},r.prototype.unregisterOnCollisionExit=function(e){return this._onCollisionExitObservable.remove(e)},r.prototype.setMaxNotifications=function(t){this._maxCollisions=t,this._tmpCollisionContacts=[];for(var r=0;r<this._maxCollisions;r++)this._tmpCollisionContacts.push(new e.CollisionContactInfo)},r.prototype.setActivationState=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.setActivationState&&this.m_ghostCollision.setActivationState(e)},r.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&(e=this.m_ghostCollision.getBroadphaseHandle().get_m_collisionFilterGroup()),e},r.prototype.setCollisionFilterGroup=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&this.m_ghostCollision.getBroadphaseHandle().set_m_collisionFilterGroup(e)},r.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&(e=this.m_ghostCollision.getBroadphaseHandle().get_m_collisionFilterMask()),e},r.prototype.setCollisionFilterMask=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.getBroadphaseHandle&&this.m_ghostCollision.getBroadphaseHandle().set_m_collisionFilterMask(e)},r.prototype.getContactProcessingThreshold=function(){var e=-1;return null!=this.m_ghostCollision&&this.m_ghostCollision.getContactProcessingThreshold&&this.m_ghostCollision.getContactProcessingThreshold(),e},r.prototype.setContactProcessingThreshold=function(e){null!=this.m_ghostCollision&&this.m_ghostCollision.setContactProcessingThreshold&&this.m_ghostCollision.setContactProcessingThreshold(e)},r.prototype.setGhostWorldTransform=function(e,t){null!=this.m_ghostObject&&null!=this.m_ghostTransform&&(null!=this.m_ghostPosition&&null!=e&&(this.m_ghostPosition.setValue(e.x,e.y,e.z),this.m_ghostTransform.setOrigin(this.m_ghostPosition)),null!=this.m_ghostRotation&&null!=t&&(this.m_ghostRotation.setValue(t.x,t.y,t.z,t.w),this.m_ghostTransform.setRotation(this.m_ghostRotation)),this.m_ghostObject.setWorldTransform(this.m_ghostTransform))},r.prototype.move=function(e){null!=e&&(this.m_moveDeltaX=e.x,this.m_moveDeltaZ=e.z,Math.abs(e.x)<this._minMoveDistance&&(e.x>0?this.m_moveDeltaX=this._minMoveDistance:e.x<0&&(this.m_moveDeltaX=-this._minMoveDistance)),Math.abs(e.z)<this._minMoveDistance&&(e.z>0?this.m_moveDeltaZ=this._minMoveDistance:e.z<0&&(this.m_moveDeltaZ=-this._minMoveDistance)),null!=this.m_walkDirection&&this.m_walkDirection.setValue(this.m_moveDeltaX,0,this.m_moveDeltaZ))},r.prototype.turn=function(e){this.m_turningRate=e},r.prototype.jump=function(e){this.internalSetJumpSpeed(e),this.internalJump()},r.prototype.warp=function(e){null!=this.m_warpPosition&&(this.m_warpPosition.setValue(e.x,e.y,e.z),this.internalWarp(this.m_warpPosition))},r}(e.ScriptComponent);e.CharacterController=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){return void 0===i&&(i={}),t.call(this,e,r,i)||this}return __extends(r,t),Object.defineProperty(r.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasAgentInfo",{get:function(){return null!=this.info},enumerable:!0,configurable:!0}),r.prototype.start=function(){},r.prototype.update=function(){},r.prototype.after=function(){},r.prototype.destroy=function(){},r.prototype.setDestination=function(t){this.hasAgentInfo||e.Tools.Warn("Null navigation agent metadata. Set agent destination ignored.")},r.GetNavigationMesh=function(t){return e.SceneManager.GetAbstractMesh(t,"NavigationMesh")},r.GetNavigationZone=function(){return"scene"},r.BuildNavigationNodes=function(t,r){void 0===r&&(r=null);var i=null,s=r||e.NavigationAgent.GetNavigationMesh(t);if(null!=s){i=new Navigation;var o=i.buildNodes(s);null!=o?i.setZoneData(e.NavigationAgent.GetNavigationZone(),o):e.Tools.Warn("Failed to build navigation zone nodes")}else e.Tools.Warn("Failed to locate scene navigation mesh");return i},r.FindNavigationPath=function(t,r,i){var s=e.NavigationAgent.GetNavigationZone(),o=t.getGroup(s,r);return t.findPath(r,i,s,o)},r}(e.ScriptComponent);e.NavigationAgent=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t}(e.ScriptComponent);e.NetworkSystem=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(e){function t(t,r,i){return void 0===i&&(i={}),e.call(this,t,r,i)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.after=function(){},t.prototype.destroy=function(){},t}(e.ScriptComponent);e.ShurikenParticleSystem=t}(BABYLON||(BABYLON={}));var BABYLON;!function(e){var t=function(){function t(t,r,i){this._centerMass=new e.Vector3(0,0,0),this._chassisMesh=null,this._tempVectorPos=new e.Vector3(0,0,0),this.lockedWheelIndexes=null,this.m_vehicle=null,this.m_vehicleTuning=null,this.m_vehicleRaycaster=null,this.m_vehicleColliders=null,this.m_tempTransform=null,this.m_tempPosition=null,this.m_wheelDirectionCS0=null,this.m_wheelAxleCS=null,this._chassisMesh=t,this._centerMass=i,this.m_vehicleColliders=this._chassisMesh.metadata.wheels,this.m_vehicleTuning=new Ammo.btVehicleTuning,this.m_vehicleRaycaster=new Ammo.btSmoothVehicleRaycaster(r),this.m_vehicle=new Ammo.btRaycastVehicle(this.m_vehicleTuning,this._chassisMesh.physicsImpostor.physicsBody,this.m_vehicleRaycaster),this.m_vehicle.setCoordinateSystem(0,1,2),this.m_wheelDirectionCS0=new Ammo.btVector3(0,(-1),0),this.m_wheelAxleCS=new Ammo.btVector3((-1),0,0),this.m_tempPosition=null,this.m_tempTransform=null,r.addAction(this.m_vehicle),this.setupWheelInformation()}return t.prototype.getUpAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUpAxis()},t.prototype.getRightAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getRightAxis()},t.prototype.getForwardAxis=function(){if(null!=this.m_vehicle)return this.m_vehicle.getForwardAxis()},t.prototype.getForwardVector=function(){if(null!=this.m_vehicle)return this.m_vehicle.getForwardVector()},t.prototype.getNumWheels=function(){if(null!=this.m_vehicle)return this.m_vehicle.getNumWheels()},t.prototype.getWheelInfo=function(e){if(null!=this.m_vehicle)return this.m_vehicle.getWheelInfo(e)},t.prototype.resetSuspension=function(){null!=this.m_vehicle&&this.m_vehicle.resetSuspension()},t.prototype.setPitchControl=function(e){null!=this.m_vehicle&&this.m_vehicle.setPitchControl(e)},t.prototype.setEngineForce=function(e,t){null!=this.m_vehicle&&this.m_vehicle.applyEngineForce(e,t)},t.prototype.setBrakingForce=function(e,t){null!=this.m_vehicle&&this.m_vehicle.setBrake(e,t)},t.prototype.getWheelTransform=function(e){if(null!=this.m_vehicle)return this.m_vehicle.getWheelTransformWS(e)},t.prototype.updateWheelTransform=function(e,t){null!=this.m_vehicle&&this.m_vehicle.updateWheelTransform(e,t)},t.prototype.getUserConstraintType=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUserConstraintType()},t.prototype.setUserConstraintType=function(e){null!=this.m_vehicle&&this.m_vehicle.setUserConstraintType(e)},t.prototype.setUserConstraintId=function(e){null!=this.m_vehicle&&this.m_vehicle.setUserConstraintId(e)},t.prototype.getUserConstraintId=function(){if(null!=this.m_vehicle)return this.m_vehicle.getUserConstraintId()},t.prototype.getRawCurrentSpeedKph=function(){if(null!=this.m_vehicle)return this.m_vehicle.getCurrentSpeedKmHour()},t.prototype.getRawCurrentSpeedMph=function(){if(null!=this.m_vehicle)return this.m_vehicle.getCurrentSpeedKmHour()*e.System.Kph2Mph},t.prototype.getAbsCurrentSpeedKph=function(){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getCurrentSpeedKmHour())},t.prototype.getAbsCurrentSpeedMph=function(){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getCurrentSpeedKmHour())*e.System.Kph2Mph},t.prototype.getVehicleTuningSystem=function(){return this.m_vehicleTuning},t.prototype.getChassisWorldTransform=function(){if(null!=this.m_vehicle)return this.m_vehicle.getChassisWorldTransform()},t.prototype.dispose=function(){this.deleteWheelInformation(),null!=this.m_vehicle&&(Ammo.destroy(this.m_vehicle),this.m_vehicle=null),null!=this.m_vehicleTuning&&(Ammo.destroy(this.m_vehicleTuning),this.m_vehicleTuning=null),null!=this.m_vehicleRaycaster&&(Ammo.destroy(this.m_vehicleRaycaster),this.m_vehicleRaycaster=null),null!=this.m_wheelDirectionCS0&&(Ammo.destroy(this.m_wheelDirectionCS0),this.m_wheelDirectionCS0=null),null!=this.m_wheelAxleCS&&(Ammo.destroy(this.m_wheelAxleCS),this.m_wheelAxleCS=null),null!=this.m_tempPosition&&(Ammo.destroy(this.m_tempPosition),this.m_tempPosition=null),null!=this.m_tempTransform&&(Ammo.destroy(this.m_tempTransform),this.m_tempTransform=null),this.m_vehicleColliders=null},t.prototype.getStabilizingForce=function(){var e=-1;return null!=this.m_vehicle&&this.m_vehicle.get_m_stabilizingForce&&(e=this.m_vehicle.get_m_stabilizingForce()),e},t.prototype.setStabilizingForce=function(e){null!=this.m_vehicle&&this.m_vehicle.set_m_stabilizingForce&&this.m_vehicle.set_m_stabilizingForce(e)},t.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_collisionFilterGroup&&(e=this.m_vehicleRaycaster.get_m_collisionFilterGroup()),e},t.prototype.setCollisionFilterGroup=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_collisionFilterGroup&&this.m_vehicleRaycaster.set_m_collisionFilterGroup(e)},t.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_collisionFilterMask&&(e=this.m_vehicleRaycaster.get_m_collisionFilterMask()),e},t.prototype.setCollisionFilterMask=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_collisionFilterMask&&this.m_vehicleRaycaster.set_m_collisionFilterMask(e)},t.prototype.getInterpolateMeshNormals=function(){var e=-1;return null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.get_m_interpolateMeshNormals&&(e=this.m_vehicleRaycaster.get_m_interpolateMeshNormals()),e},t.prototype.setInterpolateMeshNormals=function(e){null!=this.m_vehicleRaycaster&&this.m_vehicleRaycaster.set_m_interpolateMeshNormals&&this.m_vehicleRaycaster.set_m_interpolateMeshNormals(e)},t.prototype.getWheelIndexByID=function(e){var t=-1;if(null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0)for(var r=0;r<this.m_vehicleColliders.length;r++){var i=this.m_vehicleColliders[r];if(e.toLowerCase()===i.id.toLowerCase()){t=r;break}}return t},t.prototype.getWheelIndexByName=function(e){var t=-1;if(null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0)for(var r=0;r<this.m_vehicleColliders.length;r++){var i=this.m_vehicleColliders[r];if(e.toLowerCase()===i.name.toLowerCase()){t=r;break}}return t},t.prototype.getWheelColliderInfo=function(e){var t=-1;return null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0&&this.m_vehicleColliders.length>e&&(t=this.m_vehicleColliders[e]),t},t.prototype.setWheelTransformMesh=function(e,t){if(null!=t){var r=this.getWheelInfo(e);null!=r&&(r.transform=t)}},t.prototype.getVisualSteeringAngle=function(e){var t=0,r=this.getWheelInfo(e);return null!=r&&null!=r.steeringAngle&&(t=r.steeringAngle),t},t.prototype.setVisualSteeringAngle=function(e,t){var r=this.getWheelInfo(t);null!=r&&(r.steeringAngle=e)},t.prototype.getPhysicsSteeringAngle=function(e){if(null!=this.m_vehicle)return Math.abs(this.m_vehicle.getSteeringValue(e))},t.prototype.setPhysicsSteeringAngle=function(e,t){null!=this.m_vehicle&&this.m_vehicle.setSteeringValue(e,t)},t.prototype.setupWheelInformation=function(){if(null!=this._chassisMesh&&null!=this._chassisMesh.physicsImpostor&&null!=this._chassisMesh.physicsImpostor.physicsBody&&this._chassisMesh.physicsImpostor.physicsBody.setActivationState(e.CollisionState.DISABLE_DEACTIVATION),null!=this.m_vehicle&&null!=this.m_vehicleColliders&&this.m_vehicleColliders.length>0){var t=-1;for(t=0;t<this.m_vehicleColliders.length;t++){var r=this.m_vehicleColliders[t],i=null!=r.name?r.name:"Unknown",s=null!=r.radius?r.radius:.5,o=null!=r.position&&r.position.length>=3?r.position[0]:1,n=null!=r.position&&r.position.length>=3?r.position[2]:-1,a=null!=r.connectionpoint?r.connectionpoint:.2,l=null!=r.suspensionrestlength?r.suspensionrestlength:0,h=null!=r.frontwheel||i.toLowerCase().indexOf("front")>=0,c=n,m=o,u=-this._centerMass.x,p=-this._centerMass.z;this.m_vehicle.addWheel(new Ammo.btVector3(m+u,a,c+p),this.m_wheelDirectionCS0,this.m_wheelAxleCS,l,s,this.m_vehicleTuning,h)}if(this.m_vehicle.getNumWheels()===this.m_vehicleColliders.length)for(t=0;t<this.m_vehicleColliders.length;t++){var r=this.m_vehicleColliders[t],y=null!=r.maxsuspensionforce?r.maxsuspensionforce:6e3,_=null!=r.maxsuspensiontravel?r.maxsuspensiontravel:500,f=null!=r.rollinfluence?r.rollinfluence:.2,d=null!=r.frictionslip?r.frictionslip:10,v=null!=r.suspensionstiffness?r.suspensionstiffness:20,g=null!=r.dampingcompression?r.dampingcompression:3.5,C=null!=r.dampingrelaxation?r.dampingrelaxation:4.5,b=this.m_vehicle.getWheelInfo(t);null!=b&&(b.steeringAngle=0,b.rotationBoost=0,b.defaultFriction=d,b.set_m_frictionSlip(d),b.set_m_rollInfluence(f),b.set_m_maxSuspensionForce(y),b.set_m_maxSuspensionTravelCm(_),b.set_m_suspensionStiffness(v),b.set_m_wheelsDampingCompression(g),b.set_m_wheelsDampingRelaxation(C))}else e.Tools.Warn("Failed to create proper number of wheels for: "+this._chassisMesh.name)}},t.prototype.updateWheelInformation=function(){var t=this.getNumWheels();if(t>0)for(var r=0;r<t;r++){var i=this.getWheelInfo(r);if(null!=i){var s=this.lockedWheelInformation(r);if(this.updateWheelTransform(r,!1),this.m_tempTransform=this.getWheelTransform(r),this.m_tempPosition=this.m_tempTransform.getOrigin(),null!=i.transform){var o=i.transform;if(null!=o.parent){e.Utilities.ConvertAmmoVector3ToRef(this.m_tempPosition,this._tempVectorPos),e.Utilities.InverseTransformPointToRef(o.parent,this._tempVectorPos,this._tempVectorPos),o.position.y=this._tempVectorPos.y;var n=null!=i.steeringAngle?i.steeringAngle:0;if(e.Quaternion.FromEulerAnglesToRef(0,n,0,o.rotationQuaternion),null!=i.spinner&&i.spinner.addRotation&&s===!1){var a=0,l=null!=i.get_m_deltaRotation?i.get_m_deltaRotation():0,h=null!=i.rotationBoost?i.rotationBoost:0;a=l<0?l+-h:l+h,i.spinner.addRotation(a,0,0)}}}}}},t.prototype.lockedWheelInformation=function(e){var t=!1;if(null!=this.lockedWheelIndexes&&this.lockedWheelIndexes.length>0)for(var r=0;r<this.lockedWheelIndexes.length;r++)if(this.lockedWheelIndexes[r]===e){t=!0;break}return t},t.prototype.deleteWheelInformation=function(){var e=this.getNumWheels();if(e>0)for(var t=0;t<e;t++){var r=this.getWheelInfo(t);null!=r&&(null!=r.transform&&delete r.transform,null!=r.spinner&&delete r.spinner,null!=r.steeringAngle&&delete r.steeringAngle,null!=r.rotationBoost&&delete r.rotationBoost,null!=r.defaultFriction&&delete r.defaultFriction)}},t}();e.RaycastVehicle=t}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(){function e(){this.mesh=null,this.state=0,this.reset=!1}return e}();e.CollisionContactInfo=t;var r=function(r){function i(t,i,s){void 0===s&&(s={});var o=r.call(this,t,i,s)||this;return o._abstractMesh=null,o._isKinematic=!1,o._maxCollisions=4,o._isPhysicsReady=!1,o._centerOfMass=new e.Vector3(0,0,0),o._raycastVehicle=null,o._tmpGravityVector=null,o._tmpCollisionContacts=null,o.m_physicsWorld=null,o.m_physicsEngine=null,o._onCollisionEnterObservable=new e.Observable,o._onCollisionStayObservable=new e.Observable,o._onCollisionExitObservable=new e.Observable,o._abstractMesh=o.getAbstractMesh(),o._isKinematic=o.getEditorProperty("isKinematic",o._isKinematic),o.m_physicsWorld=e.SceneManager.GetPhysicsWorld(o.scene),o.m_physicsEngine=e.SceneManager.GetPhysicsEngine(o.scene),null!=o.transform.metadata&&null!=o.transform.metadata.unity&&null!=o.transform.metadata.unity.physics&&(o._centerOfMass=null!=o.transform.metadata.unity.physics.center?e.Utilities.ParseVector3(o.transform.metadata.unity.physics.center,o._centerOfMass):o._centerOfMass),o.setMaxNotifications(o._maxCollisions),o}return __extends(i,r),Object.defineProperty(i.prototype,"isKinematic",{get:function(){return this._isKinematic},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"centerOfMass",{get:function(){return this._centerOfMass},enumerable:!0,configurable:!0}),i.prototype.start=function(){this.initRigidbodyState()},i.prototype.update=function(){this.updateRigidbodyState()},i.prototype.after=function(){this.afterRigidbodyState()},i.prototype.destroy=function(){this.destroyRigidbodyState()},i.prototype.initRigidbodyState=function(){e.Utilities.ValidateTransformQuaternion(this.transform),this._isPhysicsReady=null!=this.m_physicsEngine&&null!=this._tmpCollisionContacts&&null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody;var t=this._isKinematic===!0?e.CollisionFilters.StaticFilter:e.CollisionFilters.DefaultFilter,r=this._isKinematic===!0?e.CollisionFilters.AllFilter^e.CollisionFilters.StaticFilter:e.CollisionFilters.AllFilter;this.setCollisionFilterGroup(t),this.setCollisionFilterMask(r),this.resetBodyCollisionContacts()},i.prototype.updateRigidbodyState=function(){this.syncronizeVehicleController()},i.prototype.afterRigidbodyState=function(){this.parseBodyCollisionContacts(),this.resetBodyCollisionContacts()},i.prototype.destroyRigidbodyState=function(){this.m_physicsWorld=null,this.m_physicsEngine=null,null!=this._raycastVehicle&&(this._raycastVehicle.dispose(),this._raycastVehicle=null),null!=this._tmpGravityVector&&(Ammo.destroy(this._tmpGravityVector),this._tmpGravityVector=null),this._onCollisionEnterObservable.clear(),this._onCollisionEnterObservable=null,this._onCollisionStayObservable.clear(),this._onCollisionStayObservable=null,this._onCollisionExitObservable.clear(),this._onCollisionExitObservable=null,this._tmpCollisionContacts=null,this._abstractMesh=null},i.prototype.syncronizeVehicleController=function(){null!=this._raycastVehicle&&this._raycastVehicle.updateWheelInformation()},i.prototype.parseBodyCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();if(e||t||r){var i=0;for(i=0;i<this._tmpCollisionContacts.length;i++)this._tmpCollisionContacts[i].reset=!0;var s=0;if(null!=this._abstractMesh.physicsImpostor.tmpCollisionObjects){var o=this._abstractMesh.physicsImpostor.tmpCollisionObjects;for(var n in o){var a=-1,l=o[n];for(i=0;i<this._tmpCollisionContacts.length;i++){var h=this._tmpCollisionContacts[i];if(null!=h.mesh&&h.mesh===l){h.state=1,h.reset=!1,a=i;break}}if(a===-1)for(i=0;i<this._tmpCollisionContacts.length;i++){var c=this._tmpCollisionContacts[i];if(null==c.mesh){c.mesh=l,c.state=0,c.reset=!1;break}}if(s++,s>this._maxCollisions)break}}for(i=0;i<this._tmpCollisionContacts.length;i++){var m=this._tmpCollisionContacts[i];m.reset===!0?(r&&null!=m.mesh&&this._onCollisionExitObservable.notifyObservers(m.mesh),m.mesh=null,m.state=0,m.reset=!1):0===m.state?e&&null!=m.mesh&&this._onCollisionEnterObservable.notifyObservers(m.mesh):t&&null!=m.mesh&&this._onCollisionStayObservable.notifyObservers(m.mesh)}}}},i.prototype.resetBodyCollisionContacts=function(){if(this._isPhysicsReady===!0){var e=this._onCollisionEnterObservable.hasObservers(),t=this._onCollisionStayObservable.hasObservers(),r=this._onCollisionExitObservable.hasObservers();e||t||r?this._abstractMesh.physicsImpostor.tmpCollisionObjects={}:this._abstractMesh.physicsImpostor.tmpCollisionObjects=null}},i.prototype.registerOnCollisionEnter=function(e){return this._onCollisionEnterObservable.add(e)},i.prototype.unregisterOnCollisionEnter=function(e){return this._onCollisionEnterObservable.remove(e)},i.prototype.registerOnCollisionStay=function(e){return this._onCollisionStayObservable.add(e)},i.prototype.unregisterOnCollisionStay=function(e){return this._onCollisionStayObservable.remove(e)},i.prototype.registerOnCollisionExit=function(e){return this._onCollisionExitObservable.add(e)},i.prototype.unregisterOnCollisionExit=function(e){return this._onCollisionExitObservable.remove(e)},i.prototype.setGravity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setGravity&&null!=e&&(null==this._tmpGravityVector&&(this._tmpGravityVector=new Ammo.btVector3(0,0,0)),this._tmpGravityVector.setValue(e.x,e.y,e.z),this._abstractMesh.physicsImpostor.physicsBody.setGravity(this._tmpGravityVector))},i.prototype.getGravity=function(){var t=new e.Vector3(0,0,0);return this.getGravityToRef(t),t},i.prototype.getGravityToRef=function(t){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getGravity){var r=this._abstractMesh.physicsImpostor.physicsBody.getGravity();e.Utilities.ConvertAmmoVector3ToRef(r,t)}},i.prototype.getMass=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.mass),e},i.prototype.setMass=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.mass!==e&&(this._abstractMesh.physicsImpostor.mass=e)},i.prototype.getFriction=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.friction),e},i.prototype.setFriction=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.friction!==e&&(this._abstractMesh.physicsImpostor.friction=e)},i.prototype.getRestitution=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.restitution),e},i.prototype.setRestitution=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&this._abstractMesh.physicsImpostor.restitution!==e&&(this._abstractMesh.physicsImpostor.restitution=e)},i.prototype.getLinearVelocity=function(){var e=null;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.getLinearVelocity()),e},i.prototype.setLinearVelocity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=e&&this._abstractMesh.physicsImpostor.setLinearVelocity(e)},i.prototype.getAngularVelocity=function(){var e=null;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&(e=this._abstractMesh.physicsImpostor.getAngularVelocity()),e},i.prototype.setAngularVelocity=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=e&&this._abstractMesh.physicsImpostor.setAngularVelocity(e)},i.prototype.getWorldTransform=function(){var e=null;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.getWorldTransform&&(e=t.getWorldTransform())}return e},i.prototype.getTransformPositionToRef=function(t){var r=this.getWorldTransform();if(null!=r&&null!=t){var i=r.getOrigin();e.Utilities.ConvertAmmoVector3ToRef(i,t)}},i.prototype.getTransformRotationToRef=function(t){var r=this.getWorldTransform();if(null!=r&&null!=t){var i=r.getRotation();e.Utilities.ConvertAmmoQuaternionToRef(i,t)}},i.prototype.clearForces=function(){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.clearForces&&this._abstractMesh.physicsImpostor.physicsBody.clearForces()},i.prototype.applyTorque=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyTorque&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyTorque(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyLocalTorque=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyLocalTorque&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyLocalTorque(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyImpulse=function(t,r){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),null==e.RigidbodyPhysics.TempAmmoVectorAux&&(e.RigidbodyPhysics.TempAmmoVectorAux=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),e.RigidbodyPhysics.TempAmmoVectorAux.setValue(r.x,r.y,r.z),this._abstractMesh.physicsImpostor.physicsBody.applyImpulse(e.RigidbodyPhysics.TempAmmoVector,e.RigidbodyPhysics.TempAmmoVectorAux))},i.prototype.applyCentralImpulse=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralImpulse(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyTorqueImpulse=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyTorqueImpulse&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyTorqueImpulse(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyForce=function(t,r){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),null==e.RigidbodyPhysics.TempAmmoVectorAux&&(e.RigidbodyPhysics.TempAmmoVectorAux=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),e.RigidbodyPhysics.TempAmmoVectorAux.setValue(r.x,r.y,r.z),this._abstractMesh.physicsImpostor.physicsBody.applyForce(e.RigidbodyPhysics.TempAmmoVector,e.RigidbodyPhysics.TempAmmoVectorAux))},i.prototype.applyCentralForce=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),
e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralForce(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.applyCentralLocalForce=function(t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.applyCentralLocalForce&&null!=t&&(null==e.RigidbodyPhysics.TempAmmoVector&&(e.RigidbodyPhysics.TempAmmoVector=new Ammo.btVector3(0,0,0)),e.RigidbodyPhysics.TempAmmoVector.setValue(t.x,t.y,t.z),this._abstractMesh.physicsImpostor.physicsBody.applyCentralLocalForce(e.RigidbodyPhysics.TempAmmoVector))},i.prototype.getLinearFactor=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getLinearFactor&&(e=this._abstractMesh.physicsImpostor.physicsBody.getLinearFactor()),e},i.prototype.setLinearFactor=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setLinearFactor&&this._abstractMesh.physicsImpostor.physicsBody.setLinearFactor(e)},i.prototype.getAngularFactor=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getAngularFactor&&(e=this._abstractMesh.physicsImpostor.physicsBody.getAngularFactor()),e},i.prototype.setAngularFactor=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setAngularFactor&&this._abstractMesh.physicsImpostor.physicsBody.setAngularFactor(e)},i.prototype.getAngularDamping=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getAngularDamping&&(e=this._abstractMesh.physicsImpostor.physicsBody.getAngularDamping()),e},i.prototype.getLinearDamping=function(){var e=0;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getLinearDamping&&(e=this._abstractMesh.physicsImpostor.physicsBody.getLinearDamping()),e},i.prototype.setDamping=function(e,t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setDamping&&this._abstractMesh.physicsImpostor.physicsBody.setDamping(e,t)},i.prototype.setSleepingThresholds=function(e,t){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.setSleepingThresholds&&this._abstractMesh.physicsImpostor.physicsBody.setSleepingThresholds(e,t)},i.prototype.setMaxNotifications=function(e){this._maxCollisions=e,this._tmpCollisionContacts=[];for(var r=0;r<this._maxCollisions;r++)this._tmpCollisionContacts.push(new t)},i.prototype.setActivationState=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.setActivationState&&t.setActivationState(e)}},i.prototype.getCollisionFilterGroup=function(){var e=-1;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&(e=this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().get_m_collisionFilterGroup()),e},i.prototype.setCollisionFilterGroup=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().set_m_collisionFilterGroup(e)},i.prototype.getCollisionFilterMask=function(){var e=-1;return null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&(e=this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().get_m_collisionFilterMask()),e},i.prototype.setCollisionFilterMask=function(e){null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy&&this._abstractMesh.physicsImpostor.physicsBody.getBroadphaseProxy().set_m_collisionFilterMask(e)},i.prototype.getCollisionShapeType=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.getShapeType&&(e=r.getShapeType())}}return e},i.prototype.getCollisionShapeMargin=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.getMargin&&(e=r.getMargin())}}return e},i.prototype.setCollisionShapeMargin=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);if(null!=t){var r=t.getCollisionShape();null!=r&&r.setMargin&&r.setMargin(e)}}},i.prototype.getContactProcessingThreshold=function(){var e=-1;if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.getContactProcessingThreshold&&(e=t.getContactProcessingThreshold())}return e},i.prototype.setContactProcessingThreshold=function(e){if(null!=this._abstractMesh&&null!=this._abstractMesh.physicsImpostor&&null!=this._abstractMesh.physicsImpostor.physicsBody){var t=Ammo.castObject(this._abstractMesh.physicsImpostor.physicsBody,Ammo.btCollisionObject);null!=t&&t.setContactProcessingThreshold&&t.setContactProcessingThreshold(e)}},i.prototype.hasRaycastVehicle=function(){return this._isPhysicsReady===!0&&null!=this._abstractMesh.metadata&&null!=this._abstractMesh.metadata.wheels},i.prototype.getRaycastVehicle=function(){if(null==this._raycastVehicle)if(this.hasRaycastVehicle()){var t=e.SceneManager.GetRightHanded(this.scene);t===!0&&e.Tools.Warn("Raycast vehicle not supported for right handed scene: "+this._abstractMesh.name),this._raycastVehicle=new e.RaycastVehicle(this._abstractMesh,this.m_physicsWorld,this._centerOfMass)}else e.Tools.Warn("No wheel collider metadata info for: "+this.transform.name);return this._raycastVehicle},i.CreatePhysicsMetadata=function(t,r,i,s){void 0===r&&(r=0),void 0===i&&(i=.05),void 0===s&&(s=null);var o=null!=s?s:new e.Vector3(0,0,0);return{type:"rigidbody",mass:t,ldrag:r,adrag:i,center:{x:o.x,y:o.y,z:o.z}}},i.CreateCollisionMetadata=function(e,t,r,i,s,o){return void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===i&&(i=0),void 0===s&&(s=.6),void 0===o&&(o=.6),{type:e,trigger:t,convexmesh:r,restitution:i,dynamicfriction:s,staticfriction:o,wheelinformation:null}},i.CreatePhysicsProperties=function(e,t,r,i,s){return void 0===t&&(t=0),void 0===r&&(r=.05),void 0===i&&(i=!0),void 0===s&&(s=!1),{mass:e,drag:t,angularDrag:r,useGravity:i,isKinematic:s}},i.SetupPhysicsComponent=function(t,r){var i=null!=r.metadata&&null!=r.metadata.unity?r.metadata.unity:null;if(null!=i&&null!=i.physics){var s=null!=i.physics.mass?i.physics.mass:0,o=null!=i.physics.center?e.Utilities.ParseVector3(i.physics.center,e.Vector3.Zero()):e.Vector3.Zero();if("rigidbody"===i.physics.type)if(null!=i.collision&&null!=i.collision.type){var n=null!=i.collision.convexmesh&&i.collision.convexmesh,a=null!=i.collision.dynamicfriction?i.collision.dynamicfriction:.6,l=(null!=i.collision.staticfriction?i.collision.staticfriction:.6,null!=i.collision.restitution?i.collision.restitution:0),h=null!=i.collision.trigger&&i.collision.trigger,c=null!=i.collision.type?i.collision.type:"BoxCollider",m=e.PhysicsImpostor.BoxImpostor;m="MeshCollider"===c?n===!0?e.PhysicsImpostor.ConvexHullImpostor:e.PhysicsImpostor.MeshImpostor:"CapsuleCollider"===c?e.PhysicsImpostor.CapsuleImpostor:"SphereCollider"===c?e.PhysicsImpostor.SphereImpostor:e.PhysicsImpostor.BoxImpostor,e.SceneManager.CreatePhysicsImpostor(t,r,m,{mass:s,friction:a,restitution:l}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,r,!1,h,i.physics)}else{var u=0,p=0,y=0,_=!1,f=0,d=null,v=r.getChildren(null,!0);null!=v&&v.length>0&&v.forEach(function(e){e.position.subtractInPlace(o)});var g=r.getChildren(null,!1);null!=g&&g.length>0&&g.forEach(function(s){if(null!=s.metadata&&null!=s.metadata.unity&&null!=s.metadata.unity.collision){var o=s.metadata.unity.collision,n=null!=o.wheelinformation?o.wheelinformation:null;if(null!=n)null==d&&(d=[]),d.push(n);else{s.parent!==r&&s.setParent(r);var a=null!=o.dynamicfriction?o.dynamicfriction:.6,l=null!=o.staticfriction?o.staticfriction:.6,h=null!=o.restitution?o.restitution:0,c=null!=o.trigger&&o.trigger,m=null!=o.type?o.type:"BoxCollider",v=e.PhysicsImpostor.BoxImpostor;v="MeshCollider"===m?e.PhysicsImpostor.ConvexHullImpostor:"CapsuleCollider"===m?e.PhysicsImpostor.CapsuleImpostor:"SphereCollider"===m?e.PhysicsImpostor.SphereImpostor:e.PhysicsImpostor.BoxImpostor,a>u&&(u=a),l>p&&(p=l),h>y&&(y=h),1==c&&(_=!0),e.SceneManager.CreatePhysicsImpostor(t,s,v,{mass:0,friction:0,restitution:0}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,s,!0,!1,i.physics),f++}}}),f>0&&(e.SceneManager.CreatePhysicsImpostor(t,r,e.PhysicsImpostor.NoImpostor,{mass:s,friction:u,restitution:y}),e.RigidbodyPhysics.ConfigRigidbodyPhysics(t,r,!1,_,i.physics)),null!=d&&d.length>0&&(r.metadata.wheels=d),g=null}}},i.ConfigRigidbodyPhysics=function(t,r,i,s,o){null!=r&&(null!=r.physicsImpostor?r.physicsImpostor.executeNativeFunction(function(i,n){n.activate&&n.activate();var a=Ammo.castObject(n,Ammo.btCollisionObject);a.entity=r;var l=e.SceneManager.GetPhysicsWorld(t);if(null!=l&&l.generateInternalEdgeInfo){var h=a.getCollisionShape();if(null!=h&&h.getShapeType){var c=h.getShapeType();if(21===c){var m=Ammo.castObject(h,Ammo.btBvhTriangleMeshShape);a.triangleMapInfo=new Ammo.btTriangleInfoMap,l.generateInternalEdgeInfo(m,a.triangleMapInfo)}}}var u=null==o||null==o.gravity||o.gravity;if(u===!1&&(n.setGravity?n.setGravity(new Ammo.btVector3(0,0,0)):e.Tools.Warn("Physics engine set gravity override not supported for: "+r.name)),n.setDamping){var p=null!=o&&null!=o.ldrag?o.ldrag:0,y=null!=o&&null!=o.adrag?o.adrag:.05;n.setDamping(p,y)}else e.Tools.Warn("Physics engine set drag damping not supported for: "+r.name);n.setCollisionFlags&&n.getCollisionFlags?s===!0?n.setCollisionFlags(n.getCollisionFlags()|e.CollisionFlags.CF_NO_CONTACT_RESPONSE|e.CollisionFlags.CF_CUSTOM_MATERIAL_CALLBACK):n.setCollisionFlags(n.getCollisionFlags()|e.CollisionFlags.CF_CUSTOM_MATERIAL_CALLBACK):e.Tools.Warn("Physics engine set collision flags not supported for: "+r.name);var _=null!=o&&null!=o.freeze?o.freeze:null;if(null!=_){if(n.setLinearFactor){var f=null!=_.positionx&&_.positionx===!0?0:1,d=null!=_.positiony&&_.positiony===!0?0:1,v=null!=_.positionz&&_.positionz===!0?0:1;n.setLinearFactor(new Ammo.btVector3(f,d,v))}else e.Tools.Warn("Physics engine set linear factor not supported for: "+r.name);if(n.setAngularFactor){var g=null!=_.rotationx&&_.rotationx===!0?0:1,C=null!=_.rotationy&&_.rotationy===!0?0:1,b=null!=_.rotationz&&_.rotationz===!0?0:1;n.setAngularFactor(new Ammo.btVector3(g,C,b))}else e.Tools.Warn("Physics engine set angular factor not supported for: "+r.name)}}):e.Tools.Warn("No valid physics impostor to setup for "+r.name))},i.TempAmmoVector=null,i.TempAmmoVectorAux=null,i}(e.ScriptComponent);e.RigidbodyPhysics=r}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(){function e(){this._defines={},this._defines={}}return e.prototype.getDefines=function(){return this._defines},e.prototype.defineBoolean=function(e){this._defines[e]=!0},e.prototype.defineNumeric=function(e,t){this._defines[e]=t},e.ShaderIndexer=0,e}();e.UniversalShaderDefines=t;var r=function(){function e(){}return e}();e.UniversalAlbedoChunks=r;var i=function(){function e(){}return e}();e.UniversalDiffuseChunks=i;var s=function(t){function r(r,i){var s=t.call(this,r,i)||this;return s.universalMaterial=!0,s.locals=null,s.terrainInfo=null,s._defines=null,s._uniforms=[],s._samplers=[],s._textures={},s._vectors4={},s._floats={},s.locals=new e.UniversalShaderDefines,s._defines=null,s._setupAttachAfterBind(),s.enableShaderChunks=!1,s.materialShaderChunks=new e.UniversalAlbedoChunks,s.customShaderNameResolve=s._buildCustomShader,s.customShaderChunkResolve(),s}return __extends(r,t),r.prototype.updateShaderChunks=function(){},r.prototype.getClassName=function(){return"UniversalAlbedoMaterial"},r.prototype.getShaderName=function(){return"pbr"},r.prototype.getShaderChunk=function(){return null},r.prototype.getShaderDefines=function(){return this._defines},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype.getVector4=function(e){return this._vectors4[e]},r.prototype.getFloat=function(e){return this._floats[e]},r.prototype.setTexture=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkSampler(e),this._textures[e]=t,this},r.prototype.setVector4=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._vectors4[e]=t,this},r.prototype.setFloat=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._floats[e]=t,this},r.prototype.checkUniform=function(e){this._uniforms.indexOf(e)===-1&&(this._uniforms.push(e),this.locals.defineBoolean(e.toUpperCase()))},r.prototype.checkSampler=function(e){this._samplers.indexOf(e)===-1&&(this._samplers.push(e),this.locals.defineBoolean(e.toUpperCase()),this.checkUniform(e+"Infos"),this.checkUniform(e+"Matrix"))},r.prototype.getAnimatables=function(){var e=t.prototype.getAnimatables.call(this);for(var r in this._textures){var i=this._textures[r];i&&i.animations&&i.animations.length>0&&e.push(i)}return e},r.prototype.getActiveTextures=function(){var e=t.prototype.getActiveTextures.call(this);for(var r in this._textures){var i=this._textures[r];i&&e.push(i)}return e},r.prototype.hasTexture=function(e){if(t.prototype.hasTexture.call(this,e))return!0;var r=!1;for(var i in this._textures){var s=this._textures[i];if(s===s){r=!0;break}}return r},r.prototype.dispose=function(e,r){if(r)for(var i in this._textures){var s=this._textures[i];s&&s.dispose(),this._textures[i]=null}this._textures={},t.prototype.dispose.call(this,e,r)},r.prototype.clone=function(t){var r,i=this,s=e.SerializationHelper.Clone(function(){return new e.UniversalAlbedoMaterial(t,i.getScene())},this);s._textures={};for(r in this._textures){var o=this._textures[r];o&&s.setTexture(r,o.clone(),!0)}s._vectors4={};for(r in this._vectors4)s.setVector4(r,this._vectors4[r].clone(),!0);s._floats={};for(r in this._floats)s.setFloat(r,this._floats[r],!0);return s},r.prototype.serialize=function(){var t,r=e.SerializationHelper.Serialize(this);r.customType="BABYLON.UniversalAlbedoMaterial",r.textures={};for(t in this._textures){var i=this._textures[t];i&&(r.textures[t]=i.serialize())}r.vectors4={};for(t in this._vectors4)r.vectors4[t]=this._vectors4[t].asArray();r.floats={};for(t in this._floats)r.floats[t]=this._floats[t];return r},r.Parse=function(t,r,i){var s,o=e.SerializationHelper.Parse(function(){return new e.UniversalAlbedoMaterial(t.name,r)},t,r,i);for(s in t.textures){var n=t.textures[s];n&&o.setTexture(s,e.Texture.Parse(n,r,i),!0)}for(s in t.vectors4)o.setVector4(s,e.Vector4.FromArray(t.vectors4[s]),!0);for(s in t.floats)o.setFloat(s,t.floats[s],!0);return o},r.prototype.customShaderChunkResolve=function(){var t=this.getShaderChunk();if(null!=t&&""!==t){var r=t+"ShaderChunks";if(null!=e.Effect.ShadersStore[r]){var i=e.Effect.ShadersStore[r],s=e.Utilities.HasOwnProperty(i,"VertexBegin")?i.VertexBegin:null;null!=s&&""!==s&&(this.materialShaderChunks.Vertex_Begin=s);var o=e.Utilities.HasOwnProperty(i,"VertexDefinitions")?i.VertexDefinitions:null;null!=o&&""!==o&&(this.materialShaderChunks.Vertex_Definitions=o);var n=e.Utilities.HasOwnProperty(i,"VertexMainBegin")?i.VertexMainBegin:null;null!=n&&""!==n&&(this.materialShaderChunks.Vertex_MainBegin=n);var a=e.Utilities.HasOwnProperty(i,"VertexUpdatePosition")?i.VertexUpdatePosition:null;null!=a&&""!==a&&(this.materialShaderChunks.Vertex_Before_PositionUpdated=a.replace("result","positionUpdated"));var l=e.Utilities.HasOwnProperty(i,"VertexUpdateNormal")?i.VertexUpdateNormal:null;null!=l&&""!==l&&(this.materialShaderChunks.Vertex_Before_NormalUpdated=l.replace("result","normalUpdated"));var h=e.Utilities.HasOwnProperty(i,"VertexMainEnd")?i.VertexMainEnd:null;null!=h&&""!==h&&(this.materialShaderChunks.Vertex_MainEnd=h);var c=e.Utilities.HasOwnProperty(i,"FragmentBegin")?i.FragmentBegin:null;null!=c&&""!==c&&(this.materialShaderChunks.Fragment_Begin=c);var m=e.Utilities.HasOwnProperty(i,"FragmentDefinitions")?i.FragmentDefinitions:null;null!=m&&""!==m&&(this.materialShaderChunks.Fragment_Definitions=m);var u=e.Utilities.HasOwnProperty(i,"FragmentMainBegin")?i.FragmentMainBegin:null;null!=u&&""!==u&&(this.materialShaderChunks.Fragment_MainBegin=u);var p=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlbedo")?i.FragmentUpdateAlbedo:null;null!=p&&""!==p&&(this.materialShaderChunks.Fragment_Custom_Albedo=p.replace("result","surfaceAlbedo"));var y=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlpha")?i.FragmentUpdateAlpha:null;null!=y&&""!==y&&(this.materialShaderChunks.Fragment_Custom_Alpha=y.replace("result","alpha"));var _=e.Utilities.HasOwnProperty(i,"FragmentMetallicRoughness")?i.FragmentMetallicRoughness:null;null!=_&&""!==_&&(this.materialShaderChunks.Fragment_MetallicRoughness=_);var f=e.Utilities.HasOwnProperty(i,"FragmentMicroSurface")?i.FragmentMicroSurface:null;null!=f&&""!==f&&(this.materialShaderChunks.Fragment_MicroSurface=f);var d=e.Utilities.HasOwnProperty(i,"FragmentBeforeLights")?i.FragmentBeforeLights:null;null!=d&&""!==d&&(this.materialShaderChunks.Fragment_Before_Lights=d);var v=e.Utilities.HasOwnProperty(i,"FragmentBeforeFog")?i.FragmentBeforeFog:null;null!=v&&""!==v&&(this.materialShaderChunks.Fragment_Before_Fog=v);var g=e.Utilities.HasOwnProperty(i,"FragmentBeforeFragColor")?i.FragmentBeforeFragColor:null;null!=g&&""!==g&&(this.materialShaderChunks.Fragment_Before_FragColor=g.replace("result","color"))}else e.Tools.Warn("Failed To Locate Shader Chunk Base: "+r)}},r.prototype._buildCustomShader=function(e,t,r,i,s){this._defines=s;var o=this.getShaderName();null!=o&&""!==o||(o=e),null!=o&&""!==o||(o="pbr");var n=this.locals.getDefines();if(null!=n&&null!=this._defines){var a=Object.keys(n);if(null!=a&&a.length>0){for(var l=this._defines,h=0,c=a;h<c.length;h++){var m=c[h];l[m]=n[m]}this._defines.rebuild()}}var u=0;if(null!=this._uniforms&&this._uniforms.length>0)for(u=0;u<this._uniforms.length;u++){var p=this._uniforms[u];t.indexOf(p)===-1&&t.push(p)}if(u=0,null!=this._samplers&&this._samplers.length>0)for(u=0;u<this._samplers.length;u++){var y=this._samplers[u];i.indexOf(y)===-1&&i.push(y)}return this.enableShaderChunks===!0?this._createShaderChunks(o):o},r.prototype._createShaderChunks=function(t){if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;var r=this.getShaderChunk();null!=r&&""!==r||(r=t),e.UniversalShaderDefines.ShaderIndexer++;var i=(r+"Custom"+e.UniversalShaderDefines.ShaderIndexer).trim(),s=e.Effect.ShadersStore[t+"VertexShader"],o=e.Effect.ShadersStore[t+"PixelShader"];this.updateShaderChunks();var n=i+"VertexShader";e.Effect.ShadersStore[n]=s.replace("#define CUSTOM_VERTEX_BEGIN",this.materialShaderChunks.Vertex_Begin?this.materialShaderChunks.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions:"").replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.materialShaderChunks.Vertex_MainBegin?this.materialShaderChunks.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.materialShaderChunks.Vertex_Before_PositionUpdated?this.materialShaderChunks.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.materialShaderChunks.Vertex_Before_NormalUpdated?this.materialShaderChunks.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd:"");var a=i+"PixelShader";return e.Effect.ShadersStore[a]=o.replace("#define CUSTOM_FRAGMENT_BEGIN",this.materialShaderChunks.Fragment_Begin?this.materialShaderChunks.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.materialShaderChunks.Fragment_MainBegin?this.materialShaderChunks.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALBEDO",this.materialShaderChunks.Fragment_Custom_Albedo?this.materialShaderChunks.Fragment_Custom_Albedo:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.materialShaderChunks.Fragment_Custom_Alpha?this.materialShaderChunks.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_UPDATE_METALLICROUGHNESS",this.materialShaderChunks.Fragment_MetallicRoughness?this.materialShaderChunks.Fragment_MetallicRoughness:"").replace("#define CUSTOM_FRAGMENT_UPDATE_MICROSURFACE",this.materialShaderChunks.Fragment_MicroSurface?this.materialShaderChunks.Fragment_MicroSurface:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.materialShaderChunks.Fragment_Before_Lights?this.materialShaderChunks.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.materialShaderChunks.Fragment_Before_Fog?this.materialShaderChunks.Fragment_Before_Fog:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.materialShaderChunks.Fragment_Before_FragColor?this.materialShaderChunks.Fragment_Before_FragColor:""),this._isCreatedShader=!0,this._createdShaderName=i,i},r.prototype._attachAfterBind=function(e,t){var r,i=this.getScene();if(i.texturesEnabled)for(r in this._textures){var s=this._textures[r];null!=s&&(t.setTexture(r,s),t.setFloat2(r+"Infos",s.coordinatesIndex,s.level),t.setMatrix(r+"Matrix",s.getTextureMatrix()))}for(r in this._vectors4)t.setVector4(r,this._vectors4[r]);for(r in this._floats)t.setFloat(r,this._floats[r])},r.prototype._setupAttachAfterBind=function(){var e=this,t=this._afterBind;this._afterBind=function(r,i){if(e._attachAfterBind(r,i),t)try{t(r,i)}catch(s){}}},r}(e.PBRMaterial);e.UniversalAlbedoMaterial=s,e._TypeStore.RegisteredTypes.UniversalAlbedoMaterial=s;var o=function(t){function r(r,i){var s=t.call(this,r,i)||this;return s.universalMaterial=!0,s.locals=null,s.terrainInfo=null,s._defines=null,s._uniforms=[],s._samplers=[],s._textures={},s._vectors4={},s._floats={},s.locals=new e.UniversalShaderDefines,s._defines=null,s._setupAttachAfterBind(),s.enableShaderChunks=!1,s.materialShaderChunks=new e.UniversalDiffuseChunks,s.customShaderNameResolve=s._buildCustomShader,s.customShaderChunkResolve(),s}return __extends(r,t),r.prototype.updateShaderChunks=function(){},r.prototype.getClassName=function(){return"UniversalDiffuseMaterial"},r.prototype.getShaderName=function(){return"default"},r.prototype.getShaderChunk=function(){return null},r.prototype.getShaderDefines=function(){return this._defines},r.prototype.getTexture=function(e){return this._textures[e]},r.prototype.getVector4=function(e){return this._vectors4[e]},r.prototype.getFloat=function(e){return this._floats[e]},r.prototype.setTexture=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkSampler(e),this._textures[e]=t,this},r.prototype.setVector4=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._vectors4[e]=t,this},r.prototype.setFloat=function(e,t,r){return void 0===r&&(r=!1),r===!0&&this.checkUniform(e),this._floats[e]=t,this},r.prototype.checkUniform=function(e){this._uniforms.indexOf(e)===-1&&(this._uniforms.push(e),this.locals.defineBoolean(e.toUpperCase()))},r.prototype.checkSampler=function(e){this._samplers.indexOf(e)===-1&&(this._samplers.push(e),this.locals.defineBoolean(e.toUpperCase()),this.checkUniform(e+"Infos"),this.checkUniform(e+"Matrix"))},r.prototype.getAnimatables=function(){var e=t.prototype.getAnimatables.call(this);for(var r in this._textures){var i=this._textures[r];i&&i.animations&&i.animations.length>0&&e.push(i)}return e},r.prototype.getActiveTextures=function(){var e=t.prototype.getActiveTextures.call(this);for(var r in this._textures){var i=this._textures[r];i&&e.push(i)}return e},r.prototype.hasTexture=function(e){if(t.prototype.hasTexture.call(this,e))return!0;var r=!1;for(var i in this._textures){var s=this._textures[i];if(s===s){r=!0;break}}return r},r.prototype.dispose=function(e,r){if(r)for(var i in this._textures){var s=this._textures[i];s&&s.dispose(),this._textures[i]=null}this._textures={},t.prototype.dispose.call(this,e,r)},r.prototype.clone=function(t){var r,i=this,s=e.SerializationHelper.Clone(function(){return new e.UniversalDiffuseMaterial(t,i.getScene())},this);s._textures={};for(r in this._textures){var o=this._textures[r];o&&s.setTexture(r,o.clone(),!0)}s._vectors4={};for(r in this._vectors4)s.setVector4(r,this._vectors4[r].clone(),!0);s._floats={};for(r in this._floats)s.setFloat(r,this._floats[r],!0);return s},r.prototype.serialize=function(){var t,r=e.SerializationHelper.Serialize(this);r.customType="BABYLON.UniversalDiffuseMaterial",r.textures={};for(t in this._textures){var i=this._textures[t];i&&(r.textures[t]=i.serialize())}r.vectors4={};for(t in this._vectors4)r.vectors4[t]=this._vectors4[t].asArray();r.floats={};for(t in this._floats)r.floats[t]=this._floats[t];return r},r.Parse=function(t,r,i){var s,o=e.SerializationHelper.Parse(function(){return new e.UniversalDiffuseMaterial(t.name,r)},t,r,i);for(s in t.textures){var n=t.textures[s];n&&o.setTexture(s,e.Texture.Parse(n,r,i),!0)}for(s in t.vectors4)o.setVector4(s,e.Vector4.FromArray(t.vectors4[s]),!0);for(s in t.floats)o.setFloat(s,t.floats[s],!0);return o},r.prototype.customShaderChunkResolve=function(){var t=this.getShaderChunk();if(null!=t&&""!==t){var r=t+"ShaderChunks";if(null!=e.Effect.ShadersStore[r]){var i=e.Effect.ShadersStore[r],s=e.Utilities.HasOwnProperty(i,"VertexBegin")?i.VertexBegin:null;null!=s&&""!==s&&(this.materialShaderChunks.Vertex_Begin=s);var o=e.Utilities.HasOwnProperty(i,"VertexDefinitions")?i.VertexDefinitions:null;null!=o&&""!==o&&(this.materialShaderChunks.Vertex_Definitions=o);var n=e.Utilities.HasOwnProperty(i,"VertexMainBegin")?i.VertexMainBegin:null;null!=n&&""!==n&&(this.materialShaderChunks.Vertex_MainBegin=n);var a=e.Utilities.HasOwnProperty(i,"VertexUpdatePosition")?i.VertexUpdatePosition:null;null!=a&&""!==a&&(this.materialShaderChunks.Vertex_Before_PositionUpdated=a.replace("result","positionUpdated"));var l=e.Utilities.HasOwnProperty(i,"VertexUpdateNormal")?i.VertexUpdateNormal:null;null!=l&&""!==l&&(this.materialShaderChunks.Vertex_Before_NormalUpdated=l.replace("result","normalUpdated"));var h=e.Utilities.HasOwnProperty(i,"VertexMainEnd")?i.VertexMainEnd:null;null!=h&&""!==h&&(this.materialShaderChunks.Vertex_MainEnd=h);var c=e.Utilities.HasOwnProperty(i,"FragmentBegin")?i.FragmentBegin:null;null!=c&&""!==c&&(this.materialShaderChunks.Fragment_Begin=c);var m=e.Utilities.HasOwnProperty(i,"FragmentDefinitions")?i.FragmentDefinitions:null;null!=m&&""!==m&&(this.materialShaderChunks.Fragment_Definitions=m);var u=e.Utilities.HasOwnProperty(i,"FragmentMainBegin")?i.FragmentMainBegin:null;null!=u&&""!==u&&(this.materialShaderChunks.Fragment_MainBegin=u);var p=e.Utilities.HasOwnProperty(i,"FragmentUpdateDiffuse")?i.FragmentUpdateDiffuse:null;null!=p&&""!==p&&(this.materialShaderChunks.Fragment_Custom_Diffuse=p.replace("result","diffuseColor"));var y=e.Utilities.HasOwnProperty(i,"FragmentUpdateAlpha")?i.FragmentUpdateAlpha:null;null!=y&&""!==y&&(this.materialShaderChunks.Fragment_Custom_Alpha=y.replace("result","alpha"));var _=e.Utilities.HasOwnProperty(i,"FragmentBeforeLights")?i.FragmentBeforeLights:null;null!=_&&""!==_&&(this.materialShaderChunks.Fragment_Before_Lights=_);var f=e.Utilities.HasOwnProperty(i,"FragmentBeforeFog")?i.FragmentBeforeFog:null;null!=f&&""!==f&&(this.materialShaderChunks.Fragment_Before_Fog=f);var d=e.Utilities.HasOwnProperty(i,"FragmentBeforeFragColor")?i.FragmentBeforeFragColor:null;null!=d&&""!==d&&(this.materialShaderChunks.Fragment_Before_FragColor=d.replace("result","color"))}else e.Tools.Warn("Failed To Locate Shader Chunk Base: "+r)}},r.prototype._buildCustomShader=function(e,t,r,i,s){this._defines=s;var o=this.getShaderName();null!=o&&""!==o||(o=e),null!=o&&""!==o||(o="default");var n=this.locals.getDefines();if(null!=n&&null!=this._defines){var a=Object.keys(n);if(null!=a&&a.length>0){for(var l=this._defines,h=0,c=a;h<c.length;h++){var m=c[h];l[m]=n[m]}this._defines.rebuild()}}var u=0;if(null!=this._uniforms&&this._uniforms.length>0)for(u=0;u<this._uniforms.length;u++){var p=this._uniforms[u];t.indexOf(p)===-1&&t.push(p)}if(u=0,null!=this._samplers&&this._samplers.length>0)for(u=0;u<this._samplers.length;u++){var y=this._samplers[u];i.indexOf(y)===-1&&i.push(y)}return this.enableShaderChunks===!0?this._createShaderChunks(o):o},r.prototype._createShaderChunks=function(t){if(this._isCreatedShader)return this._createdShaderName;this._isCreatedShader=!1;var r=this.getShaderChunk();null!=r&&""!==r||(r=t),e.UniversalShaderDefines.ShaderIndexer++;var i=(r+"Custom"+e.UniversalShaderDefines.ShaderIndexer).trim(),s=e.Effect.ShadersStore[t+"VertexShader"],o=e.Effect.ShadersStore[t+"PixelShader"];this.updateShaderChunks();var n=i+"VertexShader";e.Effect.ShadersStore[n]=s.replace("#define CUSTOM_VERTEX_BEGIN",this.materialShaderChunks.Vertex_Begin?this.materialShaderChunks.Vertex_Begin:"").replace("#define CUSTOM_VERTEX_DEFINITIONS",this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions:"").replace("#define CUSTOM_VERTEX_MAIN_BEGIN",this.materialShaderChunks.Vertex_MainBegin?this.materialShaderChunks.Vertex_MainBegin:"").replace("#define CUSTOM_VERTEX_UPDATE_POSITION",this.materialShaderChunks.Vertex_Before_PositionUpdated?this.materialShaderChunks.Vertex_Before_PositionUpdated:"").replace("#define CUSTOM_VERTEX_UPDATE_NORMAL",this.materialShaderChunks.Vertex_Before_NormalUpdated?this.materialShaderChunks.Vertex_Before_NormalUpdated:"").replace("#define CUSTOM_VERTEX_MAIN_END",this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd:"");var a=i+"PixelShader";return e.Effect.ShadersStore[a]=o.replace("#define CUSTOM_FRAGMENT_BEGIN",this.materialShaderChunks.Fragment_Begin?this.materialShaderChunks.Fragment_Begin:"").replace("#define CUSTOM_FRAGMENT_DEFINITIONS",this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions:"").replace("#define CUSTOM_FRAGMENT_MAIN_BEGIN",this.materialShaderChunks.Fragment_MainBegin?this.materialShaderChunks.Fragment_MainBegin:"").replace("#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE",this.materialShaderChunks.Fragment_Custom_Diffuse?this.materialShaderChunks.Fragment_Custom_Diffuse:"").replace("#define CUSTOM_FRAGMENT_UPDATE_ALPHA",this.materialShaderChunks.Fragment_Custom_Alpha?this.materialShaderChunks.Fragment_Custom_Alpha:"").replace("#define CUSTOM_FRAGMENT_BEFORE_LIGHTS",this.materialShaderChunks.Fragment_Before_Lights?this.materialShaderChunks.Fragment_Before_Lights:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FOG",this.materialShaderChunks.Fragment_Before_Fog?this.materialShaderChunks.Fragment_Before_Fog:"").replace("#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR",this.materialShaderChunks.Fragment_Before_FragColor?this.materialShaderChunks.Fragment_Before_FragColor:""),
this._isCreatedShader=!0,this._createdShaderName=i,i},r.prototype._attachAfterBind=function(e,t){var r,i=this.getScene();if(i.texturesEnabled)for(r in this._textures){var s=this._textures[r];null!=s&&(t.setTexture(r,s),t.setFloat2(r+"Infos",s.coordinatesIndex,s.level),t.setMatrix(r+"Matrix",s.getTextureMatrix()))}for(r in this._vectors4)t.setVector4(r,this._vectors4[r]);for(r in this._floats)t.setFloat(r,this._floats[r])},r.prototype._setupAttachAfterBind=function(){var e=this,t=this._afterBind;this._afterBind=function(r,i){if(e._attachAfterBind(r,i),t)try{t(r,i)}catch(s){}}},r}(e.StandardMaterial);e.UniversalDiffuseMaterial=o,e._TypeStore.RegisteredTypes.UniversalDiffuseMaterial=o;var n=function(t){function r(e,r){var i=t.call(this,e,r)||this;return i.enableShaderChunks=!0,i}return __extends(r,t),r.prototype.getClassName=function(){return"UniversalTerrainMaterial"},r.prototype.getShaderName=function(){return"pbr"},r.prototype.getShaderChunk=function(){return null},r.prototype.updateShaderChunks=function(){var t="surfaceAlbedo",r="splatmapSampler",i="detailsSampler",s="normalsSampler",o=e.System.GammaCorrection;null!=this.materialShaderChunks.Vertex_Definitions&&""!==this.materialShaderChunks.Vertex_Definitions?this.materialShaderChunks.Vertex_Definitions=this.formatTerrainVertexDefintions()+this.materialShaderChunks.Vertex_Definitions:this.materialShaderChunks.Vertex_Definitions=this.formatTerrainVertexDefintions(),null!=this.materialShaderChunks.Vertex_MainEnd&&""!==this.materialShaderChunks.Vertex_MainEnd?this.materialShaderChunks.Vertex_MainEnd=this.formatTerrainVertexMainEnd()+this.materialShaderChunks.Vertex_MainEnd:this.materialShaderChunks.Vertex_MainEnd=this.formatTerrainVertexMainEnd(),null!=this.materialShaderChunks.Fragment_Definitions&&""!==this.materialShaderChunks.Fragment_Definitions?this.materialShaderChunks.Fragment_Definitions=this.formatTerrainFragmentDefintions(r,i,s)+this.materialShaderChunks.Fragment_Definitions:this.materialShaderChunks.Fragment_Definitions=this.formatTerrainFragmentDefintions(r,i,s),null!=this.materialShaderChunks.Fragment_Custom_Albedo&&""!==this.materialShaderChunks.Fragment_Custom_Albedo?this.materialShaderChunks.Fragment_Custom_Albedo=this.formatTerrainFragmentUpdateColor(this.terrainInfo,t,r,i,s,o)+this.materialShaderChunks.Fragment_Custom_Albedo:this.materialShaderChunks.Fragment_Custom_Albedo=this.formatTerrainFragmentUpdateColor(this.terrainInfo,t,r,i,s,o)},r.prototype.formatTerrainVertexDefintions=function(){return"\r\n#define TERRAIN_VERTEX_DEFINITIONS\r\n\r\nvarying vec2 vSplatmapUV;\r\n\r\n"},r.prototype.formatTerrainVertexMainEnd=function(){return"\r\n#define TERRAIN_VERTEX_MAIN_END\r\n\r\n#ifdef UV1\r\nvSplatmapUV = uv;\r\n#endif\r\n\r\n"},r.prototype.formatTerrainFragmentDefintions=function(e,t,r){return"\r\n#define TERRAIN_FRAGMENT_DEFNITIONS\r\n\r\nvarying vec2 vSplatmapUV;\r\nuniform sampler2D "+e+";\r\nuniform sampler2D "+t+";\r\nuniform sampler2D "+r+";\r\n\r\nfloat calculateMipmapLevel(const in vec2 uvs, const in vec2 size)\r\n{\r\n    vec2 dx = dFdx(uvs * size.x);\r\n    vec2 dy = dFdy(uvs * size.y);\r\n    float d = max(dot(dx, dx), dot(dy, dy));\r\n    return 0.4 * log2(d);\r\n}\r\n\r\nvec4 sampleTextureAtlas2D(const in sampler2D atlas, const in float gamma, const in vec2 tile, const in vec4 rect, in vec2 uvs, in float lod)\r\n{\r\n    if (lod < 0.0) lod = clamp(calculateMipmapLevel(uvs, vec2(tile.x, tile.x)), 0.0, tile.y);   // Tile Info (tile.xy)\r\n    float size = pow(2.0, tile.y - lod);                                                        // Tile Bits (tile.y)\r\n    float sizex = size / rect.z;                                                                // Tile Width (rect.z)\r\n    float sizey = size / rect.w;                                                                // Tile Height (rect.w)\r\n    uvs = fract(uvs);                                                                           // Perfrom Tiling (fract)\r\n    uvs.x = uvs.x * ((sizex * rect.z - 1.0) / sizex) + 0.5 / sizex + rect.z * rect.x;           // Tile Position X (rect.x)\r\n    uvs.y = uvs.y * ((sizey * rect.w - 1.0) / sizey) + 0.5 / sizey + rect.w * rect.y;           // Tile Position Y (rect.y)\r\n    vec4 color = texture2DLodEXT(atlas, uvs, lod);\r\n    if (gamma != 1.0) {\r\n        color.r = pow(color.r, gamma);\r\n        color.g = pow(color.g, gamma);\r\n        color.b = pow(color.b, gamma);\r\n    }\r\n    return color;\r\n}\r\n\r\nvec4 sampleSplatmapAtlas2D(const in sampler2D atlas, const in vec2 tile, const in vec4 rect, in vec2 uvs)\r\n{\r\n    float size = pow(2.0, tile.y);                                                              // Tile Bits (tile.y)\r\n\t   float sizex = size / rect.z;                                                                // Tile Width (rect.z)\r\n\t   float sizey = size / rect.w;                                                                // Tile Height (rect.w)\r\n\t   uvs.x = uvs.x * ((sizex * rect.z - 1.0) / sizex) + 0.5 / sizex + rect.z * rect.x;           // Tile Position X (rect.x)\r\n\t   uvs.y = uvs.y * ((sizey * rect.w - 1.0) / sizey) + 0.5 / sizey + rect.w * rect.y;           // Tile Position Y (rect.y)\r\n    return texture2D(atlas, uvs);\r\n}\r\n\r\nvec3 blendSplatmapAtlasColors(const in vec4 splatmap, in vec4 color1, in vec4 color2, in vec4 color3, in vec4 color4, in vec3 mixbuffer)\r\n{\r\n    mixbuffer += (color1.rgb * splatmap.r);\r\n    mixbuffer += (color2.rgb * splatmap.g);\r\n    mixbuffer += (color3.rgb * splatmap.b);\r\n    mixbuffer += (color4.rgb * splatmap.a);\r\n    return mixbuffer;\r\n}\r\n\r\nvec3 perturbNormalSamplerColor(mat3 cotangentFrame, vec3 samplerColor, float scale)\r\n{\r\n    vec3 map = samplerColor.xyz;\r\n    map = map * 2.00787402 - 1.00787402;\r\n    #ifdef NORMALXYSCALE\r\n        map = normalize(map * vec3(scale, scale, 1.0));\r\n    #endif\r\n    return normalize(cotangentFrame * map);\r\n}\r\n\r\n\r\n"},r.prototype.formatTerrainFragmentUpdateColor=function(e,t,r,i,s,o){void 0===o&&(o=1);var n="";if(null!=e&&null!=e.textureAtlas&&null!=e.splatmapAtlas&&e.splatmapCount>1){n="\r\n#define TERRAIN_FRAGMENT_UPDATE_COLOR\r\n\r\nvec3 normalsColor = vec3(0.5, 0.5, 1.0);\r\nvec3 normalsBuffer = vec3(0.0, 0.0, 0.0);\r\nvec3 splatmapBuffer = vec3(0.0, 0.0, 0.0);\r\nfloat autoMipMapLevel = -1.0;\r\nfloat normalCorrection = 1.0;\r\nfloat detailCorrection = "+o.toFixed(4)+";\r\n\r\n#if defined(ALBEDO) && defined("+r.toUpperCase()+") && defined("+i.toUpperCase()+")\r\n\r\n// Reset Normal Values\r\n#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n    uvOffset = vec2(0.0, 0.0);\r\n    #ifdef NORMAL\r\n        normalW = normalize(vNormalW);\r\n    #else\r\n        normalW = normalize(cross(dFdx(vPositionW), dFdy(vPositionW))) * vEyePosition.w;\r\n    #endif\r\n    #ifdef CLEARCOAT\r\n        clearCoatNormalW = normalW;\r\n    #endif\r\n    #if defined(BUMP) || defined(PARALLAX)\r\n        #if defined(TANGENT) && defined(NORMAL)\r\n            TBN = vTBN;\r\n        #else\r\n            TBN = cotangent_frame(normalW, vPositionW, vSplatmapUV);\r\n        #endif\r\n    #elif defined(ANISOTROPIC)\r\n        #if defined(TANGENT) && defined(NORMAL)\r\n            TBN = vTBN;\r\n        #else\r\n            TBN = cotangent_frame(normalW, vPositionW, vSplatmapUV, vec2(1.0, 1.0));\r\n        #endif\r\n    #endif\r\n    #ifdef PARALLAX\r\n        invTBN = transposeMat3(TBN);\r\n    #endif\r\n    normalW = perturbNormalSamplerColor(TBN, normalsColor, 1.0);\r\n#endif\r\n\r\n// Global Atlas Values\r\nfloat splatTileSize = "+e.splatmapAtlas[2].toFixed(4)+";\r\nfloat splatTileBits = "+e.splatmapAtlas[3].toFixed(4)+";\r\nfloat detailTileSize = "+e.textureAtlas[2].toFixed(4)+";\r\nfloat detailTileBits = "+e.textureAtlas[3].toFixed(4)+";\r\n\r\n// Sample splatmap textures\r\n";for(var a=0,l=0;l<e.splatmapCount;l++){a=4*l;var h=e["splatmapRect"+l];if(n+="vec4 splatmapRect"+l+" = vec4("+h[0].toFixed(4)+", "+h[1].toFixed(4)+", "+h[2].toFixed(4)+", "+h[3].toFixed(4)+");\r\n",n+="vec4 splatmapAlbedo"+l+" = sampleSplatmapAtlas2D("+r+", vec2(splatTileSize, splatTileBits), splatmapRect"+l+", (vSplatmapUV + uvOffset));\r\n",n+="vec4 textureAlbedo"+(a+0)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+1)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+2)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="vec4 textureAlbedo"+(a+3)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",e["textureRect"+(a+0)]){var c=e["textureRect"+(a+0)],m=e["textureInfo"+(a+0)];n+="vec4 textureRect"+(a+0)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+0)+" = vec2("+m[0].toFixed(4)+", "+m[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+0)+" = vec2("+m[2].toFixed(4)+", "+m[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+0)+" = ((vSplatmapUV + textureOffset"+(a+0)+") * textureScale"+(a+0)+");\r\n",n+="textureAlbedo"+(a+0)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+0)+", textureTileUV"+(a+0)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+1)]){var c=e["textureRect"+(a+1)],m=e["textureInfo"+(a+1)];n+="vec4 textureRect"+(a+1)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+1)+" = vec2("+m[0].toFixed(4)+", "+m[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+1)+" = vec2("+m[2].toFixed(4)+", "+m[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+1)+" = ((vSplatmapUV + textureOffset"+(a+1)+") * textureScale"+(a+1)+");\r\n",n+="textureAlbedo"+(a+1)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+1)+", textureTileUV"+(a+1)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+2)]){var c=e["textureRect"+(a+2)],m=e["textureInfo"+(a+2)];n+="vec4 textureRect"+(a+2)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+2)+" = vec2("+m[0].toFixed(4)+", "+m[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+2)+" = vec2("+m[2].toFixed(4)+", "+m[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+2)+" = ((vSplatmapUV + textureOffset"+(a+2)+") * textureScale"+(a+2)+");\r\n",n+="textureAlbedo"+(a+2)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+2)+", textureTileUV"+(a+2)+", autoMipMapLevel);\r\n"}if(e["textureRect"+(a+3)]){var c=e["textureRect"+(a+3)],m=e["textureInfo"+(a+3)];n+="vec4 textureRect"+(a+3)+" = vec4("+c[0].toFixed(4)+", "+c[1].toFixed(4)+", "+c[2].toFixed(4)+", "+c[3].toFixed(4)+");\r\n",n+="vec2 textureScale"+(a+3)+" = vec2("+m[0].toFixed(4)+", "+m[1].toFixed(4)+");\r\n",n+="vec2 textureOffset"+(a+3)+" = vec2("+m[2].toFixed(4)+", "+m[3].toFixed(4)+");\r\n",n+="vec2 textureTileUV"+(a+3)+" = ((vSplatmapUV + textureOffset"+(a+3)+") * textureScale"+(a+3)+");\r\n",n+="textureAlbedo"+(a+3)+" = sampleTextureAtlas2D("+i+", detailCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+3)+", textureTileUV"+(a+3)+", autoMipMapLevel);\r\n"}if(n+="splatmapBuffer = blendSplatmapAtlasColors(splatmapAlbedo"+l+", textureAlbedo"+(a+0)+", textureAlbedo"+(a+1)+", textureAlbedo"+(a+2)+", textureAlbedo"+(a+3)+", splatmapBuffer);\r\n",n+="#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n",n+="    #if defined("+s.toUpperCase()+")\r\n",n+="        vec4 normalColor"+(a+0)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+1)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+2)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",n+="        vec4 normalColor"+(a+3)+" = vec4(0.0, 0.0, 0.0, 1.0);\r\n",e["textureRect"+(a+0)]){var u=e["normalsScale"+(a+0)];n+="        float normalScale"+(a+0)+" = "+u.toFixed(4)+";\r\n",n+="        normalColor"+(a+0)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+0)+", textureTileUV"+(a+0)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+0)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+0)+".rgb, normalScale"+(a+0)+");\r\n"}if(e["textureRect"+(a+1)]){var u=e["normalsScale"+(a+1)];n+="        float normalScale"+(a+1)+" = "+u.toFixed(4)+";\r\n",n+="        normalColor"+(a+1)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+1)+", textureTileUV"+(a+1)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+1)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+1)+".rgb, normalScale"+(a+1)+");\r\n"}if(e["textureRect"+(a+2)]){var u=e["normalsScale"+(a+2)];n+="        float normalScale"+(a+2)+" = "+u.toFixed(4)+";\r\n",n+="        normalColor"+(a+2)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+2)+", textureTileUV"+(a+2)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+2)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+2)+".rgb, normalScale"+(a+2)+");\r\n"}if(e["textureRect"+(a+3)]){var u=e["normalsScale"+(a+3)];n+="        float normalScale"+(a+3)+" = "+u.toFixed(4)+";\r\n",n+="        normalColor"+(a+3)+" = sampleTextureAtlas2D("+s+", normalCorrection, vec2(detailTileSize, detailTileBits), textureRect"+(a+3)+", textureTileUV"+(a+3)+", autoMipMapLevel);\r\n",n+="        normalColor"+(a+3)+".rgb = perturbNormalSamplerColor(TBN, normalColor"+(a+3)+".rgb, normalScale"+(a+3)+");\r\n"}n+="        normalsBuffer = blendSplatmapAtlasColors(splatmapAlbedo"+l+", normalColor"+(a+0)+", normalColor"+(a+1)+", normalColor"+(a+2)+", normalColor"+(a+3)+", normalsBuffer);\r\n",n+="    #endif\r\n",n+="#endif\r\n",n+="\r\n"}n+="// Update Color Values\r\n"+t+".rgb = splatmapBuffer;\r\n#if defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC)\r\n    #if defined("+s.toUpperCase()+")\r\n        normalW = normalsBuffer;\r\n    #endif\r\n    #if defined(FORCENORMALFORWARD) && defined(NORMAL)\r\n        vec3 faceNormal = normalize(cross(dFdx(vPositionW), dFdy(vPositionW))) * vEyePosition.w;\r\n        #if defined(TWOSIDEDLIGHTING)\r\n            faceNormal = gl_FrontFacing ? faceNormal : -faceNormal;\r\n        #endif\r\n        normalW *= sign(dot(normalW, faceNormal));\r\n    #endif\r\n    #if defined(TWOSIDEDLIGHTING) && defined(NORMAL)\r\n        normalW = gl_FrontFacing ? normalW : -normalW;\r\n    #endif\r\n#endif\r\n\r\n#endif\r\n\r\n"}return n},r}(e.UniversalAlbedoMaterial);e.UniversalTerrainMaterial=n,e._TypeStore.RegisteredTypes.UniversalTerrainMaterial=n}(BABYLON||(BABYLON={}));var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),BABYLON;!function(e){var t=function(t){function r(e,r,i){return void 0===i&&(i={}),t.call(this,e,r,i)||this}return __extends(r,t),r.prototype.start=function(){},r.prototype.update=function(){},r.prototype.after=function(){},r.prototype.destroy=function(){},r.IsXboxLivePluginEnabled=function(){return!!window.isXboxLivePluginEnabled&&window.isXboxLivePluginEnabled()},r.IsXboxLiveUserSignedIn=function(t,r){if(void 0===t&&(t=null),void 0===r&&(r=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()){var i=null!=t?e.WindowsPlatform.GetXboxLiveSystemUser(t,r):e.WindowsPlatform.GetXboxLiveUser(r);return null!=i&&1==i.isSignedIn}return!1},r.XboxLiveUserSignIn=function(t,r,i,s){void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()&&e.WindowsPlatform.XboxLiveUserSilentSignIn(t,function(o){o.status===Microsoft.Xbox.Services.System.SignInStatus.userInteractionRequired?e.WindowsPlatform.XboxLiveUserDialogSignIn(t,function(e){r&&r(e)},i,s):r&&r(o)},i,s)},r.XboxLiveUserSilentSignIn=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUser(t).signInSilentlyAsync(null).then(r,i,s):null},r.XboxLiveUserDialogSignIn=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUser(t).signInAsync(null).then(r,i,s):null},r.LoadXboxLiveUserProfile=function(t,r,i,s){return void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()?e.WindowsPlatform.GetXboxLiveUserContext(t).profileService.getUserProfileAsync(e.WindowsPlatform.GetXboxLiveUser(t).xboxUserId).then(r,i,s):null},r.GetXboxLiveUser=function(t){void 0===t&&(t=e.PlayerNumber.One);var r=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserOne();break;case e.PlayerNumber.Two:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserTwo();break;case e.PlayerNumber.Three:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserThree();break;case e.PlayerNumber.Four:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveUserFour()}return r},r.GetXboxLiveSystemUser=function(t,r){void 0===r&&(r=e.PlayerNumber.One);var i=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(r){case e.PlayerNumber.One:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserOne(t);break;case e.PlayerNumber.Two:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserTwo(t);break;case e.PlayerNumber.Three:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserThree(t);break;case e.PlayerNumber.Four:i=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveSystemUserFour(t)}return i},r.GetXboxLiveUserContext=function(t){void 0===t&&(t=e.PlayerNumber.One);var r=null;if(e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextOne();break;case e.PlayerNumber.Two:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextTwo();break;case e.PlayerNumber.Three:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextThree();break;case e.PlayerNumber.Four:r=window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextFour()}return r},r.ResetXboxLiveUserContext=function(t){if(void 0===t&&(t=e.PlayerNumber.One),e.WindowsPlatform.IsXboxLivePluginEnabled()&&e.WindowsPlatform.IsXboxLivePluginEnabled())switch(t){case e.PlayerNumber.One:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextOne();break;case e.PlayerNumber.Two:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextTwo();break;case e.PlayerNumber.Three:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextThree();break;case e.PlayerNumber.Four:window.BabylonToolkit.XboxLive.Plugin.resetXboxLiveUserContextFour()}},r.GetXboxLiveContextProperty=function(t){return e.WindowsPlatform.IsXboxLivePluginEnabled()?window.BabylonToolkit.XboxLive.Plugin.getXboxLiveContextProperty(t):null},r.SetXboxLiveContextProperty=function(t,r){e.WindowsPlatform.IsXboxLivePluginEnabled()&&window.BabylonToolkit.XboxLive.Plugin.setXboxLiveContextProperty(t,r)},r.ResetXboxLivePropertyContexts=function(){e.WindowsPlatform.IsXboxLivePluginEnabled()&&window.BabylonToolkit.XboxLive.Plugin.resetXboxLivePropertyContexts()},r.SetXboxLiveSignOutHandler=function(t){void 0===t&&(t=null),e.WindowsPlatform.IsXboxLivePluginEnabled()&&(window.BabylonToolkit.XboxLive.Plugin.onusersignout=t)},r}(e.ScriptComponent);e.WindowsPlatform=t}(BABYLON||(BABYLON={})),BABYLON.SceneManager.IsXboxOne()&&navigator.gamepadInputEmulation&&(navigator.gamepadInputEmulation="gamepad"),BABYLON.SceneManager.IsWindows()&&"undefined"!=typeof Windows.UI.ViewManagement&&"undefined"!=typeof Windows.UI.ViewManagement.ApplicationViewBoundsMode&&"undefined"!=typeof Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow&&Windows.UI.ViewManagement.ApplicationView.getForCurrentView().setDesiredBoundsMode(Windows.UI.ViewManagement.ApplicationViewBoundsMode.useCoreWindow);

// worker.js
var versionStamp = '###VERSION###';
var installFiles = ['###INSTALL###'];
// ..
// Post Service Worker Version Message
// ..
self.addEventListener('message', function(evt) {
    if (evt.data != null && evt.data === 'version' && evt.ports != null && evt.ports.length > 0) {
        var port = evt.ports[0];
        if (port && port.postMessage) {
            // console.log('WORKER: Version check: ' + versionStamp);
            port.postMessage(versionStamp);
        }
    }
});
// ..
// Install Service Worker File System
// ..
self.addEventListener('install', function(evt) {
    evt.waitUntil(
        caches.open(versionStamp).then(function(cache) {
            // console.log('WORKER: Fetching cache: ' + versionStamp);
            var cachePromises = installFiles.map(function(urlToPrefetch) {
                var url = new URL(urlToPrefetch, location.href);
                url.search += (url.search ? '&' : '?') + 'time=' + new Date().getTime().toString();
                var request = new Request(url, { mode: 'no-cors' });
                return fetch(request, { cache: 'no-store' }).then(function(response) {
                    if (response.status >= 400) throw new Error('request for ' + urlToPrefetch + ' failed with status ' + response.statusText);
                    return cache.put(urlToPrefetch, response);
                }).catch(function(error) {
                    // console.warn('WORKER: Not caching ' + urlToPrefetch + ' due to ' + error);
                });
            });
            return Promise.all(cachePromises).then(function() {
                // console.log('WORKER: Cache updated: ' + versionStamp);
                return self.skipWaiting();
            });
        }).catch(function(error) {
            // console.warn('WORKER: Pre-Fetching Failed: ', error);
        })
    );
});
// ..
// Activate Service Worker File System
// ..
self.addEventListener('activate', function(evt) {
    evt.waitUntil(
        caches.keys().then(function(cacheNames) {
            return Promise.all(
                cacheNames.map(function(cache) {
                    if (cache !== versionStamp) {
                        // console.log('WORKER: Cleaning cache: ' + cache);
                        return caches.delete(cache);
                    }
                })
            );
        })
    );
    // console.log('WORKER: Activate cache: ' + versionStamp);
    return self.clients.claim();
});
// ..
// Fetch Service Worker Request Files
// ..
self.addEventListener('fetch', function(evt) {
    // Chrome Dev Tools Bug - Temporary Workaround
    // https://bugs.chromium.org/p/chromium/issues/detail?id=823392    
    if (evt.request.cache === 'only-if-cached' && evt.request.mode !== 'same-origin') {
        var oStrangeRequest = evt.request.clone();
        console.warn('Chrome Dev Tools. Request cache has only-if-cached, but not same-origin.', oStrangeRequest.cache, oStrangeRequest.mode, 'request redirect:', oStrangeRequest.redirect, oStrangeRequest.url, oStrangeRequest);
        return;
    }
    evt.respondWith(
        caches.match(evt.request).then(function(response) {
            return response || fetch(evt.request, { cache: 'no-store' });
        })
    );
});

// BabylonPlayground.js
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class DebugInformation
     */
    class DebugInformation extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.keys = true;
            this.show = true;
            this.popup = false;
            this.views = false;
            this.xbox = false;
            this.keys = this.getEditorProperty("enableDebugKeys", this.keys);
            this.show = this.getEditorProperty("showDebugLabels", this.show);
            this.popup = this.getEditorProperty("popupDebugPanel", this.popup);
            this.views = this.getEditorProperty("togglePlayerViews", this.views);
            this.xbox = this.getEditorProperty("allowXboxLiveSignIn", this.xbox);
            // ..
            if (BABYLON.SceneManager.IsWindows())
                this.popup = false;
            BABYLON.Tools.Log("Debug information overlay loaded");
        }
        start() {
            //this.screen = document.getElementById("screen");
            //this.toggle = document.getElementById("toggle");
            //this.signin = document.getElementById("signin");
            //this.reload = document.getElementById("reload");
            //this.mouse = document.getElementById("mouse");
            //this.debug = document.getElementById("debug");
            if (this.show === true) {
                /*
                if (this.keys === true) {
                    if (!BABYLON.SceneManager.IsXboxOne()) {
                        if (this.screen) this.screen.innerHTML = "F - Show Full Screen";
                    }
                    if (BABYLON.CameraSystem.IsMultiPlayerView() && this.views === true) {
                        if (this.toggle) {
                            if (BABYLON.SceneManager.IsXboxOne()) {
                                this.toggle.style.top = "29px";
                            }
                            this.toggle.innerHTML = "1 - 4 Toggle Player View";
                        }
                    }
                    if (BABYLON.SceneManager.IsXboxLivePluginEnabled() && this.xbox === true) {
                        if (this.signin) {
                            if (BABYLON.SceneManager.IsXboxOne()) {
                                this.signin.style.top = "49px";
                            }
                            this.signin.innerHTML = "X - Xbox Live Sign In";
                        }
                    }
                    if (this.mouse) this.mouse.innerHTML = (BABYLON.SceneManager.IsXboxOne()) ? "M - Mouse" : "";
                    if (this.reload) this.reload.innerHTML = "R - Reload";
                    if (this.debug) this.debug.innerHTML = "P - Debug";
                }
                */
            }
            if (this.keys === true) {
                if (this.views === true) {
                    console.log("Enable Multiplayer Keys");
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num1, () => {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene, 1);
                        console.log("1 player pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num2, () => {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene, 2);
                        console.log("2 players pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num3, () => {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene, 3);
                        console.log("3 players pressed");
                    });
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.Num4, () => {
                        BABYLON.UniversalCameraSystem.SetMultiPlayerViewLayout(this.scene, 4);
                        console.log("4 players pressed");
                    });
                }
                BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.R, () => {
                    window.location.reload();
                });
                BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.I, () => {
                    if (this.popup === true) {
                        BABYLON.SceneManager.PopupDebug(this.scene);
                    }
                    else {
                        BABYLON.SceneManager.ToggleDebug(this.scene, true, null);
                    }
                });
                if (BABYLON.SceneManager.IsXboxOne()) {
                    if (navigator.gamepadInputEmulation) {
                        BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.M, () => {
                            if (navigator.gamepadInputEmulation !== "mouse") {
                                navigator.gamepadInputEmulation = "mouse";
                            }
                            else {
                                navigator.gamepadInputEmulation = "gamepad";
                            }
                        });
                    }
                }
                else {
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.F, () => {
                        //BABYLON.Tools.RequestFullscreen(document.documentElement);
                        this.scene.getEngine().enterFullscreen(true);
                    });
                }
                if (BABYLON.WindowsPlatform.IsXboxLivePluginEnabled() && this.xbox === true) {
                    BABYLON.SceneManager.OnKeyboardPress(BABYLON.UserInputKey.X, () => {
                        var player = BABYLON.PlayerNumber.One;
                        if (!BABYLON.WindowsPlatform.IsXboxLiveUserSignedIn(null, player)) {
                            BABYLON.Tools.Log("===> Trying Xbox Live Sign In For Player: " + player.toString());
                            BABYLON.WindowsPlatform.XboxLiveUserSignIn(player, (result) => {
                                var user = BABYLON.WindowsPlatform.GetXboxLiveUser(player);
                                var msg = "(" + user.xboxUserId + ") - " + user.gamertag;
                                BABYLON.SceneManager.AlertMessage(msg, "Xbox Live User Signed In");
                            }, (err) => {
                                console.log(err);
                                var msg = "Encountered Sign Error";
                                BABYLON.Tools.Warn(msg);
                                BABYLON.SceneManager.AlertMessage(msg, "Xbox Live Warning");
                            });
                        }
                        else {
                            BABYLON.Tools.Warn("Xbox Live User Already Signed In");
                            BABYLON.SceneManager.AlertMessage("User Already Signed In", "Xbox Live Warning");
                        }
                    });
                }
            }
            // Default Print To Screen Text
            var printColor = (this.scene.getEngine().webGLVersion < 2) ? "red" : "#0c0";
            var graphicsVersion = BABYLON.SceneManager.GetWebGLVersionString(this.scene);
            BABYLON.Utilities.PrintToScreen(graphicsVersion, printColor);
        }
        destroy() {
            //this.screen = null;
            //this.toggle = null;
            //this.signin = null;
            //this.reload = null;
            //this.mouse = null;
            //this.debug = null;
        }
    }
    PROJECT.DebugInformation = DebugInformation;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class SoftbodyMesh
     */
    class SoftbodyMesh extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            const type = this.getEditorProperty("type", 0);
            const options = {
                mass: this.getEditorProperty("mass", 1),
                friction: this.getEditorProperty("friction", 0.3),
                restitution: this.getEditorProperty("restitution", 0.3),
                pressure: this.getEditorProperty("pressure", 200),
                velocityIterations: this.getEditorProperty("velocityIterations", 20),
                positionIterations: this.getEditorProperty("positionIterations", 20),
                stiffness: this.getEditorProperty("stiffness", 1),
                margin: this.getEditorProperty("margin", 0.0),
                damping: this.getEditorProperty("damping", 0.01)
            };
            const mesh = this.getTransformMesh();
            const forceSharedVertices = this.getEditorProperty("forceSharedVertices", true);
            if (forceSharedVertices === true)
                mesh.forceSharedVertices();
            const increaseVertices = this.getEditorProperty("increaseVertices", 4);
            if (increaseVertices > 0)
                mesh.increaseVertices(increaseVertices);
            let impostor = null;
            if (type === 0) { // Mesh
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.SoftbodyImpostor, options, this.scene);
            }
            else if (type === 1) { // Cloth
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.ClothImpostor, options, this.scene);
            }
            else if (type === 2) { // Rope
                impostor = new BABYLON.PhysicsImpostor(mesh, BABYLON.PhysicsImpostor.RopeImpostor, options, this.scene);
            }
            if (impostor != null) {
                impostor.executeNativeFunction((word, body) => {
                    // TODO: Setup Native Softbody Physics Options
                });
            }
        }
        start() {
            // Start render loop function
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.SoftbodyMesh = SoftbodyMesh;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class FirstPersonController
     */
    class FirstPersonController extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.deltaFactor = 2.0;
            this.attachCamera = true;
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.movementSpeed = 1.0;
            this.jumpingVelocity = 10.0;
            this.playerMovement = BABYLON.Vector3.Zero();
            this.playerTurnRate = 0.0;
            this.cameraPitchRate = 0.0;
            this.horzSensitivity = 1.0;
            this.vertSensitivity = 1.0;
            this.mouseSensitivity = 1.0;
            this.minimumPitchAngle = -60.0;
            this.maximumPitchAngle = 60.0;
            this.isCharacterGrounded = false;
            this.isCharacterJumpFrame = false;
            this.cameraEulerAngles = BABYLON.Vector3.Zero();
            this.characterController = null;
            this.buttonJump = BABYLON.Xbox360Button.A;
            this.keyboardJump = BABYLON.UserInputKey.SpaceBar;
            this.playerNumber = BABYLON.PlayerNumber.One;
            this.playerDeltaX = 0.0;
            this.playerDeltaZ = 0.0;
            this.playerMouseX = 0.0;
            this.playerMouseY = 0.0;
            this.playerEyeLevel = 0.5;
            this.attachCamera = this.getEditorProperty("attachCamera", this.attachCamera);
            this.playerNumber = this.getEditorProperty("playerNumber", this.playerNumber);
            this.playerEyeLevel = this.getEditorProperty("playerEyeLevel", this.playerEyeLevel);
            this.movementSpeed = this.getEditorProperty("movementSpeed", this.movementSpeed);
            this.mouseSensitivity = this.getEditorProperty("mouseSensitivity", this.mouseSensitivity);
            this.minimumPitchAngle = this.getEditorProperty("minimumPitchAngle", this.minimumPitchAngle);
            this.maximumPitchAngle = this.getEditorProperty("maximumPitchAngle", this.maximumPitchAngle);
            this.vertSensitivity = this.getEditorProperty("verticalSensitivity", this.vertSensitivity);
            this.horzSensitivity = this.getEditorProperty("horizontalSensitivity", this.horzSensitivity);
            this.jumpingVelocity = this.getEditorProperty("impulseJumpVelocity", this.jumpingVelocity);
            // Scale Mouse Pointer Sensitivity
            if (this.playerNumber == BABYLON.PlayerNumber.One) {
                BABYLON.UserInputOptions.PointerAngularSensibility = (BABYLON.UserInputOptions.PointerAngularSensibility * this.mouseSensitivity);
            }
        }
        isCharacterJumping() { return false; /* TODO: Determine If Character Is Jumping - ??? */ }
        isCharacterFalling() { return false; /* TODO: Determine If Character Is Falling - ??? */ }
        getCharacterController() { return this.characterController; }
        start() { this.setupFirstPersonController(); }
        update() { this.updateFirstPersonController(); }
        destroy() { this.destroyFirstPersonController(); }
        setupFirstPersonController() {
            // Setup Camera Aattachments
            this.cameraPivot = this.getChildTransform("Pivot");
            if (this.cameraPivot == null) {
                this.cameraPivot = new BABYLON.TransformNode("Pivot", this.scene);
                this.cameraPivot.setParent(this.transform);
                this.cameraPivot.position = new BABYLON.Vector3(0.0, this.playerEyeLevel, 0.0); // NOTE: POSITION CAMERA EYE LEVEL (TO SEE ARMS)
            }
            BABYLON.Utilities.ValidateTransformQuaternion(this.cameraPivot);
            //console.log("Attach Camera For: " + this.transform.name + " --> " + this.attachCamera.toString());
            //console.log(this.transform.metadata);
            if (this.attachCamera === true) {
                // TODO: Create Multi Player Camera (No Attach Camera)
                this.cameraRigger = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.cameraRigger != null && this.cameraPivot != null) {
                    this.cameraPivot.position = new BABYLON.Vector3(0.0, this.playerEyeLevel, 0.0); // NOTE: POSITION CAMERA EYE LEVEL (TO SEE ARMS)
                    this.cameraRigger.setParent(this.cameraPivot);
                    this.cameraRigger.position = new BABYLON.Vector3(0.0, 0.0, 0.0);
                    this.cameraRigger.rotationQuaternion = BABYLON.Quaternion.Identity();
                    console.log("FPC: Attached main camera to player controller: " + this.transform.name);
                }
                else {
                    BABYLON.Tools.Warn("Failed to locate camera or local pivot for: " + this.transform.name);
                }
            }
            // Setup Character Controller
            this.characterController = this.getComponent("BABYLON.CharacterController");
            if (this.characterController == null)
                BABYLON.Tools.Warn("Failed to locate character controller for: " + this.transform.name);
            // Character Collision Contact (TEST)
            if (this.characterController != null) {
                // Test Static Only Collisions
                // this.characterController.setCollisionFilterMask(BABYLON.CollisionFilters.StaticFilter);
                this.characterController.registerOnCollisionEnter((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("PLAYER: ===> Got Collision Enter Event: " + mesh.name + " --> " + tag);
                });
                this.characterController.registerOnCollisionStay((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("PLAYER: ===> Got Collision Stay Event: " + mesh.name + " --> " + tag);
                });
                this.characterController.registerOnCollisionExit((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.warn("PLAYER ===> DESTROY: Collision Exit Event: " + mesh.name + " --> " + tag);
                });
            }
        }
        updateFirstPersonController() {
            const deltaTime = this.getDeltaSeconds();
            this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
            this.playerDeltaZ = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
            this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
            this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
            // Update Dead Input Values
            if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaX = 0;
            if (Math.abs(this.playerDeltaZ) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaZ = 0;
            if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseX = 0;
            if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseY = 0;
            // Update Character Movement
            if (this.characterController != null) {
                this.isCharacterGrounded = this.characterController.isGrounded();
                this.isCharacterJumpFrame = false;
                // Rotate Player Left And Right With Mouse-X
                this.playerTurnRate = (this.playerMouseX * (this.horzSensitivity * this.deltaFactor));
                this.characterController.turn(this.playerTurnRate);
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // FPC: Pitch Camera Pivot Up And Down With Mouse-Y
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                this.cameraPitchRate = (this.playerMouseY * (this.vertSensitivity * this.deltaFactor));
                this.cameraPivot.rotate(BABYLON.Axis.X, -(this.cameraPitchRate * BABYLON.System.Deg2Rad), BABYLON.Space.LOCAL);
                BABYLON.Utilities.ToEulerToRef(this.cameraPivot.rotationQuaternion, this.cameraEulerAngles);
                this.cameraEulerAngles.x = BABYLON.Scalar.Clamp(this.cameraEulerAngles.x, this.minimumPitchAngle, this.maximumPitchAngle);
                BABYLON.Utilities.FromEulerToRef(this.cameraEulerAngles.x, this.cameraEulerAngles.y, this.cameraEulerAngles.z, this.cameraPivot.rotationQuaternion);
                /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // Update Player Input With Delta-X And Delta-Z
                if (this.isCharacterGrounded === true) {
                    this.playerMovement.x = this.playerDeltaX;
                    this.playerMovement.y = 0.0;
                    this.playerMovement.z = this.playerDeltaZ;
                    this.isCharacterJumpFrame = (BABYLON.SceneManager.GetKeyboardInput(this.keyboardJump) || BABYLON.SceneManager.GetGamepadButtonInput(this.buttonJump));
                    // Transform Movement Direction And Scale Speed
                    BABYLON.Utilities.TransformDirectionToRef(this.transform, this.playerMovement, this.playerMovement);
                    BABYLON.Vector3.NormalizeToRef(this.playerMovement, this.playerMovement);
                    this.playerMovement.scaleInPlace((BABYLON.System.WalkingVelocity * this.movementSpeed) * deltaTime);
                    // Move Player Using Physics Character Controller
                    this.characterController.move(this.playerMovement);
                    // Jump Player Using Physics Character Controller
                    if (this.isCharacterJumpFrame === true) {
                        this.characterController.jump(this.jumpingVelocity);
                    }
                }
            }
        }
        destroyFirstPersonController() {
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.characterController = null;
        }
    }
    PROJECT.FirstPersonController = FirstPersonController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class ThirdPersonController
     */
    class ThirdPersonController extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.deltaFactor = 2.0;
            this.attachCamera = true;
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.movementSpeed = 1.0;
            this.jumpingVelocity = 10.0;
            this.playerMovement = BABYLON.Vector3.Zero();
            this.playerTurnRate = 0.0;
            this.cameraPitchRate = 0.0;
            this.horzSensitivity = 1.0;
            this.vertSensitivity = 1.0;
            this.mouseSensitivity = 1.0;
            this.minimumPitchAngle = -60.0;
            this.maximumPitchAngle = 60.0;
            this.isCharacterGrounded = false;
            this.isCharacterJumpFrame = false;
            this.characterController = null;
            this.buttonJump = BABYLON.Xbox360Button.A;
            this.keyboardJump = BABYLON.UserInputKey.SpaceBar;
            this.playerNumber = BABYLON.PlayerNumber.One;
            this.playerDeltaX = 0.0;
            this.playerDeltaZ = 0.0;
            this.playerMouseX = 0.0;
            this.playerMouseY = 0.0;
            this.attachCamera = this.getEditorProperty("attachCamera", this.attachCamera);
            this.playerNumber = this.getEditorProperty("playerNumber", this.playerNumber);
            this.movementSpeed = this.getEditorProperty("movementSpeed", this.movementSpeed);
            this.mouseSensitivity = this.getEditorProperty("mouseSensitivity", this.mouseSensitivity);
            this.minimumPitchAngle = this.getEditorProperty("minimumPitchAngle", this.minimumPitchAngle);
            this.maximumPitchAngle = this.getEditorProperty("maximumPitchAngle", this.maximumPitchAngle);
            this.vertSensitivity = this.getEditorProperty("verticalSensitivity", this.vertSensitivity);
            this.horzSensitivity = this.getEditorProperty("horizontalSensitivity", this.horzSensitivity);
            this.jumpingVelocity = this.getEditorProperty("impulseJumpVelocity", this.jumpingVelocity);
            // Scale Mouse Pointer Sensitivity
            if (this.playerNumber == BABYLON.PlayerNumber.One) {
                BABYLON.UserInputOptions.PointerAngularSensibility = (BABYLON.UserInputOptions.PointerAngularSensibility * this.mouseSensitivity);
            }
        }
        getCharacterController() { return this.characterController; }
        start() { this.setupThirdPersonController(); }
        update() { this.updateThirdPersonController(); }
        destroy() { this.destroyThirdPersonController(); }
        setupThirdPersonController() {
            // Setup Camera Attachments
            this.cameraPivot = this.getChildTransform("Pivot");
            if (this.cameraPivot == null) {
                this.cameraPivot = new BABYLON.TransformNode("Pivot", this.scene);
                this.cameraPivot.setParent(this.transform);
                this.cameraPivot.position = new BABYLON.Vector3(0.0, 1.85, 0.0);
            }
            BABYLON.Utilities.ValidateTransformQuaternion(this.cameraPivot);
            if (this.attachCamera === true) {
                // TODO: Create Multi Player Camera (No Attach Camera)
                this.cameraRigger = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.cameraRigger != null && this.cameraPivot != null) {
                    this.cameraRigger.setParent(this.cameraPivot);
                    this.cameraRigger.position = new BABYLON.Vector3(0.0, 0.0, -4.5);
                    this.cameraRigger.rotationQuaternion = BABYLON.Quaternion.Identity();
                    console.log("TPC: Attached main camera to player controller: " + this.transform.name);
                }
                else {
                    BABYLON.Tools.Warn("Failed to locate camera or local pivot for: " + this.transform.name);
                }
            }
            // Setup Character Controller
            this.characterController = this.getComponent("BABYLON.CharacterController");
            if (this.characterController == null)
                BABYLON.Tools.Warn("Failed to locate character controller for: " + this.transform.name);
        }
        updateThirdPersonController() {
            this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
            this.playerDeltaZ = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
            this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
            this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
            // Update Dead Input Values
            if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaX = 0;
            if (Math.abs(this.playerDeltaZ) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerDeltaZ = 0;
            if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseX = 0;
            if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                this.playerMouseY = 0;
            // Update Character Movement
            if (this.characterController != null) {
            }
        }
        destroyThirdPersonController() {
            this.cameraPivot = null;
            this.cameraRigger = null;
            this.characterController = null;
        }
    }
    PROJECT.ThirdPersonController = ThirdPersonController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class SmoothFollowTarget
    */
    class SmoothFollowTarget extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.target = null;
            this.distance = 10;
            this.height = 1.5;
            this.heightOffset = 0.0;
            this.heightDamping = 2;
            this.rotationDamping = 2;
            this.startBehindTarget = true;
            this.followBehindTarget = true;
            this.targetAngles = new BABYLON.Vector3(0, 0, 0);
            this.transformAngles = new BABYLON.Vector3(0, 0, 0);
            this.positionBuffer = new BABYLON.Vector3(0, 0, 0);
            this.rotationBuffer = new BABYLON.Quaternion(0, 0, 0, 1);
            this.tempRotationBuffer = new BABYLON.Vector3(0, 0, 0);
            this.distance = this.getEditorProperty("distance", this.distance);
            this.height = this.getEditorProperty("height", this.height);
            this.heightOffset = this.getEditorProperty("heightOffset", this.heightOffset);
            this.heightDamping = this.getEditorProperty("heightDamping", this.heightDamping);
            this.rotationDamping = this.getEditorProperty("rotationDamping", this.rotationDamping);
            this.startBehindTarget = this.getEditorProperty("startBehindTarget", this.startBehindTarget);
            this.followBehindTarget = this.getEditorProperty("followBehindTarget", this.followBehindTarget);
            if (this.distance <= 0)
                this.distance = 10;
            if (this.height <= 0)
                this.distance = 1.5;
            if (this.heightDamping <= 0)
                this.heightDamping = 4;
            if (this.rotationDamping <= 0)
                this.rotationDamping = 2;
            const followTarget = this.getEditorProperty("target");
            if (followTarget != null) {
                this.target = BABYLON.Utilities.ParseTransform(this.scene, followTarget);
            }
        }
        start() {
            if (this.target != null) {
                if (this.startBehindTarget === true) {
                    // TODO: this.transform.position = this.target.position.clone(); - ???
                }
            }
        }
        update() {
            if (this.target != null) {
                if (this.followBehindTarget === true) {
                    const deltaTime = this.getDeltaSeconds();
                    BABYLON.Utilities.ToEulerToRef(this.target.rotationQuaternion, this.targetAngles);
                    BABYLON.Utilities.ToEulerToRef(this.transform.rotationQuaternion, this.transformAngles);
                    let wantedRotationAngle = this.targetAngles.y;
                    let wantedHeight = this.target.position.y + this.height;
                    let currentRotationAngle = this.transformAngles.y;
                    let currentHeight = this.transform.position.y;
                    currentRotationAngle = BABYLON.Scalar.LerpAngle(currentRotationAngle, wantedRotationAngle, this.rotationDamping * deltaTime);
                    currentHeight = BABYLON.Scalar.Lerp(currentHeight, wantedHeight, this.heightDamping * deltaTime);
                    BABYLON.Utilities.FromEulerToRef(0, currentRotationAngle, 0, this.rotationBuffer);
                    BABYLON.Utilities.MultiplyQuaternionByVectorToRef(this.rotationBuffer, BABYLON.Vector3.Forward(), this.tempRotationBuffer);
                    this.tempRotationBuffer.scaleInPlace(this.distance);
                    this.positionBuffer.copyFrom(this.target.position);
                    this.positionBuffer.subtractInPlace(this.tempRotationBuffer);
                    this.transform.position.set(this.positionBuffer.x, (currentHeight + this.heightOffset), this.positionBuffer.z);
                }
                this.transform.lookAt(this.target.position);
            }
        }
        destroy() {
            this.target = null;
            this.targetAngles = null;
            this.transformAngles = null;
            this.positionBuffer = null;
            this.rotationBuffer = null;
            this.tempRotationBuffer = null;
        }
    }
    PROJECT.SmoothFollowTarget = SmoothFollowTarget;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class WaypointManager
    */
    class WaypointManager extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this._waypointMeshLines = null;
            this._waypointSplineCurve = null;
            this._waypointTransformNodes = null;
            this._waypointSplinePositions = null;
            this._waypointSphereMaterial = null;
            this.resolution = 1;
            this.closedLoop = true;
            this.drawLines = false;
            this.drawPoints = false;
            this.drawTraces = false;
            this.pointSize = 0.5;
            this.lineColor = new BABYLON.Color3(1, 1, 1);
            this.pointColor = new BABYLON.Color3(1, 1, 1);
            this.traceColor = new BABYLON.Color3(1, 1, 1);
            this.resolution = this.getEditorProperty("resolution", this.resolution);
            this.closedLoop = this.getEditorProperty("closedLoop", this.closedLoop);
            this.drawLines = this.getEditorProperty("drawLines", this.drawLines);
            this.drawPoints = this.getEditorProperty("drawPoints", this.drawPoints);
            this.drawTraces = this.getEditorProperty("drawTraces", this.drawTraces);
            this.pointSize = this.getEditorProperty("pointSize", this.pointSize);
            this.lineColor = BABYLON.Utilities.ParseColor3(this.getEditorProperty("lineColor", this.lineColor));
            this.pointColor = BABYLON.Utilities.ParseColor3(this.getEditorProperty("pointColor", this.pointColor));
            this.traceColor = BABYLON.Utilities.ParseColor3(this.getEditorProperty("traceColor", this.traceColor));
            // ..
            this._waypointSphereMaterial = new BABYLON.StandardMaterial(this.transform.name + ".SplineMaterial", this.scene);
            this._waypointSphereMaterial.diffuseColor = this.pointColor;
            //this._waypointSphereMaterial.wireframe = true;
            // ..
            this._waypointTransformNodes = this.transform.getChildren(null, true);
            if (this._waypointTransformNodes != null && this._waypointTransformNodes.length > 0) {
                const controlPoints = [];
                this._waypointTransformNodes.forEach((transform) => {
                    BABYLON.Utilities.ValidateTransformQuaternion(transform);
                    controlPoints.push(transform.getAbsolutePosition().clone());
                    if (this.drawPoints === true) {
                        const controlPoint = BABYLON.MeshBuilder.CreateSphere(transform.name + ".WireSphere", { segments: 24, diameter: (this.pointSize * 2) }, this.scene);
                        controlPoint.parent = transform;
                        controlPoint.position.set(0, 0, 0);
                        controlPoint.visibility = 0.25;
                        controlPoint.isVisible = true;
                        controlPoint.material = this._waypointSphereMaterial;
                    }
                });
                this._waypointSplineCurve = BABYLON.Curve3.CreateCatmullRomSpline(controlPoints, this.resolution, this.closedLoop);
                if (this._waypointSplineCurve != null)
                    this._waypointSplinePositions = this._waypointSplineCurve.getPoints();
                if (this._waypointSplinePositions != null)
                    console.warn("DEBUG: Waypoint Manager - " + this.transform.name + ": (" + this._waypointTransformNodes.length + " - " + this._waypointSplinePositions.length + " - " + this._waypointSplineCurve.length().toFixed(2) + ")");
            }
        }
        getSplineCurve() { return this._waypointSplineCurve; }
        getSplineCurveLength() { return (this._waypointSplineCurve != null) ? this._waypointSplineCurve.length() : 0; }
        getSplineCurvePositions() { return this._waypointSplinePositions; }
        getControlPointTransforms() { return this._waypointTransformNodes; }
        start() {
            if (this._waypointSplinePositions != null && this.drawLines === true) {
                this._waypointMeshLines = BABYLON.MeshBuilder.CreateLines((this.transform.name + ".SplineMesh"), { points: this._waypointSplinePositions }, this.scene);
                this._waypointMeshLines.parent = this.transform;
                this._waypointMeshLines.color = this.lineColor;
            }
        }
        destroy() {
            this.lineColor = null;
            this._waypointSplineCurve = null;
            this._waypointTransformNodes = null;
            this._waypointSplinePositions = null;
            if (this._waypointMeshLines != null) {
                this._waypointMeshLines.dispose();
                this._waypointMeshLines = null;
            }
        }
    }
    PROJECT.WaypointManager = WaypointManager;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class PaintshopManager
    */
    class PaintshopManager extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.baseColor = BABYLON.Color3.White();
            this.baseMaterial = null;
            this.baseColor = BABYLON.Utilities.ParseColor3(this.getEditorProperty("baseColor", this.baseColor));
            // TODO: Find Skin Mesh And Get Material To Clone
        }
        start() {
            // Start render loop function
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.PaintshopManager = PaintshopManager;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon skidmark section class (Native Bullet Physics 2.82)
     * @class SkidmarkSection
     */
    class SkidmarkSection {
        constructor() {
            this.Pos = BABYLON.Vector3.Zero();
            this.Normal = BABYLON.Vector3.Zero();
            this.Tangent = BABYLON.Vector4.Zero();
            this.Posl = BABYLON.Vector3.Zero();
            this.Posr = BABYLON.Vector3.Zero();
            this.Intensity = 0.0;
            this.LastIndex = -1;
        }
    }
    PROJECT.SkidmarkSection = SkidmarkSection;
    /**
     * Babylon Script Component
     * @class SkidmarkManager
     */
    class SkidmarkManager extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            SkidmarkManager.MAX_MARKS = this.getEditorProperty("maxSections", SkidmarkManager.MAX_MARKS);
            SkidmarkManager.MARK_COLOR = BABYLON.Utilities.ParseColor3(this.getEditorProperty("textureColor", SkidmarkManager.MARK_COLOR));
            SkidmarkManager.MARK_WIDTH = this.getEditorProperty("textureWidth", SkidmarkManager.MARK_WIDTH);
            SkidmarkManager.GROUND_OFFSET = this.getEditorProperty("groundOffset", SkidmarkManager.GROUND_OFFSET);
            SkidmarkManager.GPU_TRIANGLES = this.getEditorProperty("gpuQuadIndices", SkidmarkManager.GPU_TRIANGLES);
            SkidmarkManager.TEXTURE_MARKS = this.getEditorProperty("textureMarks", SkidmarkManager.TEXTURE_MARKS);
            SkidmarkManager.TEX_INTENSITY = this.getEditorProperty("textureIntensity", SkidmarkManager.TEX_INTENSITY);
            SkidmarkManager.MIN_DISTANCE = this.getEditorProperty("textureDistance", SkidmarkManager.MIN_DISTANCE);
            SkidmarkManager.MIN_SQR_DISTANCE = (SkidmarkManager.MIN_DISTANCE * SkidmarkManager.MIN_DISTANCE);
        }
        start() { SkidmarkManager.CreateSkidmarkManager(this.scene); }
        update() { SkidmarkManager.UpdateSkidmarkManager(); }
        static AddSkidmarkSegment(pos, normal, intensity, lastIndex) {
            if (SkidmarkManager.SkidmarkMesh == null)
                return null;
            SkidmarkManager.TempVector3_POS.set(0, 0, 0);
            SkidmarkManager.TempVector3_DIR.set(0, 0, 0);
            SkidmarkManager.TempVector3_XDIR.set(0, 0, 0);
            SkidmarkManager.TempVector3_SDIR.set(0, 0, 0);
            // ..
            if (intensity > 1.0)
                intensity = 1.0;
            else if (intensity < 0.0)
                return -1.0;
            // ..
            if (lastIndex > 0) {
                pos.subtractToRef(SkidmarkManager.SkidmarkSections[lastIndex].Pos, SkidmarkManager.TempVector3_POS);
                const sqrDistance = SkidmarkManager.TempVector3_POS.lengthSquared();
                if (sqrDistance < SkidmarkManager.MIN_SQR_DISTANCE)
                    return lastIndex;
            }
            // ..
            const curSection = SkidmarkManager.SkidmarkSections[SkidmarkManager.SkidmarkIndex];
            normal.scaleToRef(SkidmarkManager.GROUND_OFFSET, SkidmarkManager.TempVector3_POS);
            pos.addToRef(SkidmarkManager.TempVector3_POS, curSection.Pos);
            curSection.Normal.copyFrom(normal);
            curSection.Intensity = (intensity * SkidmarkManager.TEX_INTENSITY);
            curSection.LastIndex = lastIndex;
            // ..
            if (lastIndex != -1) {
                const lastSection = SkidmarkManager.SkidmarkSections[lastIndex];
                curSection.Pos.subtractToRef(lastSection.Pos, SkidmarkManager.TempVector3_DIR);
                BABYLON.Vector3.CrossToRef(SkidmarkManager.TempVector3_DIR, normal, SkidmarkManager.TempVector3_XDIR);
                SkidmarkManager.TempVector3_XDIR.normalizeToRef(SkidmarkManager.TempVector3_XDIR);
                // ..
                SkidmarkManager.TempVector3_XDIR.scaleToRef(SkidmarkManager.MARK_WIDTH * 0.5, SkidmarkManager.TempVector3_SDIR);
                curSection.Pos.addToRef(SkidmarkManager.TempVector3_SDIR, curSection.Posl);
                curSection.Pos.subtractToRef(SkidmarkManager.TempVector3_SDIR, curSection.Posr);
                curSection.Tangent.set(SkidmarkManager.TempVector3_XDIR.x, SkidmarkManager.TempVector3_XDIR.y, SkidmarkManager.TempVector3_XDIR.z, 1);
                // ..
                if (lastSection.LastIndex === -1) {
                    curSection.Pos.addToRef(SkidmarkManager.TempVector3_SDIR, lastSection.Posl);
                    curSection.Pos.subtractToRef(SkidmarkManager.TempVector3_SDIR, lastSection.Posr);
                    lastSection.Tangent.copyFrom(curSection.Tangent);
                }
            }
            // ..
            SkidmarkManager.AddSkidmarkVertexData();
            const curIndex = SkidmarkManager.SkidmarkIndex;
            SkidmarkManager.SkidmarkIndex = ++SkidmarkManager.SkidmarkIndex % SkidmarkManager.MAX_MARKS;
            return curIndex;
        }
        static CreateSkidmarkManager(scene) {
            if (SkidmarkManager.SkidmarkMesh == null) {
                const skidmarkMaterial = new BABYLON.StandardMaterial("SkidmarkMaterial", scene);
                skidmarkMaterial.backFaceCulling = false;
                skidmarkMaterial.disableLighting = true;
                skidmarkMaterial.emissiveColor = SkidmarkManager.MARK_COLOR;
                skidmarkMaterial.diffuseColor = SkidmarkManager.MARK_COLOR;
                skidmarkMaterial.diffuseTexture = BABYLON.Utilities.ParseTexture(SkidmarkManager.TEXTURE_MARKS, scene);
                if (skidmarkMaterial.diffuseTexture != null) {
                    skidmarkMaterial.diffuseTexture.hasAlpha = true;
                    skidmarkMaterial.useAlphaFromDiffuseTexture = true;
                }
                skidmarkMaterial.freeze();
                SkidmarkManager.SkidmarkMesh = new BABYLON.Mesh("SkidmarkMesh", scene);
                SkidmarkManager.SkidmarkMesh.material = skidmarkMaterial;
                SkidmarkManager.SkidmarkMesh.alwaysSelectAsActiveMesh = true;
                SkidmarkManager.SkidmarkMesh.doNotSyncBoundingInfo = true;
                SkidmarkManager.SkidmarkMesh.receiveShadows = false;
                SkidmarkManager.SkidmarkMesh.checkCollisions = false;
                SkidmarkManager.SkidmarkMesh.useVertexColors = true;
                SkidmarkManager.SkidmarkMesh.hasVertexAlpha = true;
                SkidmarkManager.SkidmarkMesh.isPickable = false;
                // ..
                // Setup Skidmark Section Properties
                // ..
                SkidmarkManager.SkidmarkSections = new Array(SkidmarkManager.MAX_MARKS);
                for (let i = 0; i < SkidmarkManager.SkidmarkSections.length; i++) {
                    SkidmarkManager.SkidmarkSections[i] = new SkidmarkSection();
                }
                // ..
                // Setup Raw Mesh Vertex Buffer Data
                // ..
                SkidmarkManager.SkidBufferPositions = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 3);
                SkidmarkManager.SkidBufferNormals = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 3);
                SkidmarkManager.SkidBufferTangents = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 4);
                SkidmarkManager.SkidBufferColors = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 4);
                SkidmarkManager.SkidBufferUvs = new Float32Array(SkidmarkManager.MAX_MARKS * 4 * 2);
                SkidmarkManager.SkidBufferIndices = new Int32Array(SkidmarkManager.MAX_MARKS * 6);
                // ..
                // Apply Raw Vertex Buffer Data To Mesh
                // ..
                const vertexData = new BABYLON.VertexData();
                vertexData.positions = SkidmarkManager.SkidBufferPositions;
                vertexData.normals = SkidmarkManager.SkidBufferNormals;
                vertexData.tangents = SkidmarkManager.SkidBufferTangents;
                vertexData.colors = SkidmarkManager.SkidBufferColors;
                vertexData.uvs = SkidmarkManager.SkidBufferUvs;
                vertexData.indices = SkidmarkManager.SkidBufferIndices;
                vertexData.applyToMesh(SkidmarkManager.SkidmarkMesh, true);
                SkidmarkManager.SkidmarkMesh.freezeWorldMatrix();
            }
        }
        static AddSkidmarkVertexData() {
            const curr = SkidmarkManager.SkidmarkSections[SkidmarkManager.SkidmarkIndex];
            if (curr.LastIndex === -1)
                return;
            const last = SkidmarkManager.SkidmarkSections[curr.LastIndex];
            SkidmarkManager.SkidmarkUpdated = true;
            // ..
            // Update Position Buffers Directly
            // ..
            let index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferPositions[index * 3] = last.Posl.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = last.Posl.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = last.Posl.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferPositions[index * 3] = last.Posr.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = last.Posr.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = last.Posr.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferPositions[index * 3] = curr.Posl.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = curr.Posl.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = curr.Posl.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferPositions[index * 3] = curr.Posr.x;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 1] = curr.Posr.y;
            SkidmarkManager.SkidBufferPositions[(index * 3) + 2] = curr.Posr.z;
            // ..
            // Update Normal Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferNormals[index * 3] = last.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = last.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = last.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferNormals[index * 3] = last.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = last.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = last.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferNormals[index * 3] = curr.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = curr.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = curr.Normal.z;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferNormals[index * 3] = curr.Normal.x;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 1] = curr.Normal.y;
            SkidmarkManager.SkidBufferNormals[(index * 3) + 2] = curr.Normal.z;
            // ..
            // Update Tangent Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferTangents[index * 4] = last.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = last.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = last.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = last.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferTangents[index * 4] = last.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = last.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = last.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = last.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferTangents[index * 4] = curr.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = curr.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = curr.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = curr.Tangent.w;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferTangents[index * 4] = curr.Tangent.x;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 1] = curr.Tangent.y;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 2] = curr.Tangent.z;
            SkidmarkManager.SkidBufferTangents[(index * 4) + 3] = curr.Tangent.w;
            // ..
            // Update Color Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = last.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = last.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = curr.Intensity;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferColors[index * 4] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 1] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 2] = 1.0;
            SkidmarkManager.SkidBufferColors[(index * 4) + 3] = curr.Intensity;
            // ..
            // Update Coord Buffers Directly
            // ..
            index = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferUvs[index * 2] = 0;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 0;
            index = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferUvs[index * 2] = 1;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 0;
            index = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferUvs[index * 2] = 0;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 1;
            index = SkidmarkManager.SkidmarkIndex * 4 + 3;
            SkidmarkManager.SkidBufferUvs[index * 2] = 1;
            SkidmarkManager.SkidBufferUvs[(index * 2) + 1] = 1;
            // ..
            // Update Triangle 1 Buffers Directly (QUAD)
            //..
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 0] = SkidmarkManager.SkidmarkIndex * 4 + 0;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 2] = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 1] = SkidmarkManager.SkidmarkIndex * 4 + 2;
            // ..
            // Update Triangle 2 Buffers Directly (QUAD)
            // ..
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 3] = SkidmarkManager.SkidmarkIndex * 4 + 2;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 5] = SkidmarkManager.SkidmarkIndex * 4 + 1;
            SkidmarkManager.SkidBufferIndices[SkidmarkManager.SkidmarkIndex * 6 + 4] = SkidmarkManager.SkidmarkIndex * 4 + 3;
        }
        static UpdateSkidmarkManager() {
            if (SkidmarkManager.SkidmarkMesh != null && SkidmarkManager.SkidmarkUpdated === true) {
                SkidmarkManager.SkidmarkUpdated = false;
                if (SkidmarkManager.SkidmarkMesh.geometry != null) {
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.PositionKind, SkidmarkManager.SkidBufferPositions, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.NormalKind, SkidmarkManager.SkidBufferNormals, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.TangentKind, SkidmarkManager.SkidBufferTangents, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.ColorKind, SkidmarkManager.SkidBufferColors, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateVerticesDataDirectly(BABYLON.VertexBuffer.UVKind, SkidmarkManager.SkidBufferUvs, 0, false);
                    SkidmarkManager.SkidmarkMesh.geometry.updateIndices(SkidmarkManager.SkidBufferIndices, 0, SkidmarkManager.GPU_TRIANGLES);
                }
            }
        }
    }
    SkidmarkManager.MAX_MARKS = 4096; // Max number of marks total for everyone together
    SkidmarkManager.GROUND_OFFSET = 0.01; // Distance above surface in metres
    SkidmarkManager.GPU_TRIANGLES = true; // GPU quad triangle indices only
    SkidmarkManager.MARK_COLOR = BABYLON.Color3.Black(); // Skidmark Color
    SkidmarkManager.MARK_WIDTH = 0.3; // Width of the Skidmarks. Should match the width of the wheels
    SkidmarkManager.TEX_INTENSITY = 1.0; // Amount of the skidmark texture intensity coeffecient
    SkidmarkManager.MIN_DISTANCE = 0.1; // Distance between skid texture sections in metres. Bigger = better performance, less smooth
    SkidmarkManager.MIN_SQR_DISTANCE = (SkidmarkManager.MIN_DISTANCE * SkidmarkManager.MIN_DISTANCE);
    SkidmarkManager.TEXTURE_MARKS = null;
    SkidmarkManager.SkidBufferPositions = null;
    SkidmarkManager.SkidBufferNormals = null;
    SkidmarkManager.SkidBufferTangents = null;
    SkidmarkManager.SkidBufferColors = null;
    SkidmarkManager.SkidBufferUvs = null;
    SkidmarkManager.SkidBufferIndices = null;
    SkidmarkManager.SkidmarkSections = null;
    SkidmarkManager.SkidmarkIndex = 0;
    SkidmarkManager.SkidmarkMesh = null;
    SkidmarkManager.SkidmarkUpdated = false;
    SkidmarkManager.TempVector3_POS = new BABYLON.Vector3(0, 0, 0);
    SkidmarkManager.TempVector3_DIR = new BABYLON.Vector3(0, 0, 0);
    SkidmarkManager.TempVector3_XDIR = new BABYLON.Vector3(0, 0, 0);
    SkidmarkManager.TempVector3_SDIR = new BABYLON.Vector3(0, 0, 0);
    PROJECT.SkidmarkManager = SkidmarkManager;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon standard rigidbody vehicle controller class (Native Bullet Physics 2.82)
     * @class StandardCarController
     */
    class StandardCarController extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this._rigidbody = null;
            this._engineAudioSource = null;
            this._skidAudioSource = null;
            this.gearIndex = 0; // First Gear Ratio
            this.downShift = 1000;
            this.shiftingTime = 0;
            this.engineForce = 0;
            this.linearDamping = 0;
            this.angularDamping = 0;
            this.forwardSpeed = 0;
            this.absoluteSpeed = 0;
            this.americanSpeed = 0;
            this.normalizedSpeed = 0;
            this.frontWheelPower = 0;
            this.backWheelPower = 0;
            this.wheelBrakingForce = 0;
            this.visualSteerAngle = 0;
            this.physicsSteerAngle = 0;
            this.vehicleResetCheck = 0;
            this.raycastVehicle = null;
            this.frontLeftWheelTrans = null;
            this.frontRightWheelTrans = null;
            this.backLeftWheelTrans = null;
            this.backRightWheelTrans = null;
            this.frontLeftWheelMesh = null;
            this.frontRightWheelMesh = null;
            this.backLeftWheelMesh = null;
            this.backRightWheelMesh = null;
            this.frontLeftWheelEmitter = null;
            this.frontRightWheelEmitter = null;
            this.backLeftWheelEmitter = null;
            this.backRightWheelEmitter = null;
            this.frontLeftWheelParticle = null;
            this.frontRightWheelParticle = null;
            this.backLeftWheelParticle = null;
            this.backRightWheelParticle = null;
            this.frontLeftWheelCollider = null;
            this.frontRightWheelCollider = null;
            this.backLeftWheelCollider = null;
            this.backRightWheelCollider = null;
            this.engineTorqueCurve = null;
            this.wheelRadius = 0;
            this.clutchSlip = 0;
            this.engineRPM = 0;
            this.pitchRPM = 0;
            this.shiftRPM = 0;
            this.FRONT_LEFT = -1;
            this.FRONT_RIGHT = -1;
            this.BACK_LEFT = -1;
            this.BACK_RIGHT = -1;
            this.onUpdateVehicleInformation = null;
            this.smokeTexture = null;
            this.shadowTexture = null;
            this.smokeIntensity = 150;
            this.smokeOpacity = 0.1;
            this.smokeDonuts = 2.0;
            this.velocityScaling = 0.02;
            this.skidThreashold = 0.65;
            this.maxTurnAngle = 20;
            this.maxBurnAngle = 40;
            this.overSteerDelay = 0.1;
            this.steeringBoost = 3;
            this.topEngineSpeed = 125;
            this.powerCoefficient = 1.0;
            this.lowSpeedAngle = 10;
            this.highSpeedAngle = 1;
            this.lowSpeedTurning = 0.015;
            this.highSpeedTurning = 0.005;
            this.stableDownForce = 1.0;
            this.transmissionRatio = 0.75;
            this.differentialRatio = 3.55;
            this.maxFrontBraking = 0.2;
            this.maxReversePower = 0.5;
            this.minBrakingForce = 50;
            this.maxBrakingForce = 250;
            this.handBrakingForce = 2500;
            this.linearBrakingForce = 0.3;
            this.angularBrakingForce = 0.0;
            this.skidWhenFootBraking = false;
            this.footBrakingThreashold = 0.9;
            this.footSkidBrakingFactor = 1.5;
            this.footSkidBrakingSpeed = 30;
            this.wheelLockFriction = 1.0;
            this.wheelBurnFriction = 1.0;
            this.defaultLerpSpeed = 0.65;
            this.driftingLerpSpeed = 0.25;
            this.burnoutLerpSpeed = 0.1;
            this.burnoutTimeDelay = 1.5;
            this.burnoutWheelPitch = 0.85;
            this.burnoutCoefficient = 0.0;
            this.burnoutTriggerMark = 10;
            this.resetVehicleTime = 3;
            this.playVehicleSounds = true;
            this.throttleEngineSpeed = 0;
            this.wheelDriveType = 0;
            this.gearBoxMaxPitching = 6500;
            this.gearBoxShiftChange = 4500;
            this.gearBoxShiftDelay = 0.35;
            this.gearBoxShiftRatios = [4.17, 2.34, 1.52, 1.14, 0.89, 0.68];
            this.gearBoxShiftRanges = [1000, 2400, 2800, 3200, 3200, 3200];
            this.m_frontLeftWheel = null;
            this.m_frontRightWheel = null;
            this.m_backLeftWheel = null;
            this.m_backRightWheel = null;
            this.m_physicsWorld = null;
            this.m_frontLeftWheelSkid = -1;
            this.m_frontRightWheelSkid = -1;
            this.m_backLeftWheelSkid = -1;
            this.m_backRightWheelSkid = -1;
            this.m_velocityOffset = new BABYLON.Vector3(0, 0, 0);
            ////////////////////////////////////////////////////
            // Public Vehicle Controller Movement Functions   //
            ////////////////////////////////////////////////////
            this.burnoutTimer = 0;
            this.restoreTimer = 0;
            this.cooldownTimer = 0;
            this.driftingTimer = 0;
            this.wheelDonuts = false;
            this.wheelBurnout = false;
            this.wheelSkidding = false;
            this.donutSpinTime = 0;
            this.currentForward = 0;
            this.currentTurning = 0;
            this.currentSkidding = false;
            this.currentDrifting = false;
            this.allowedTurningAngle = 0;
            this.allowedTurningIncement = 0;
            this.engineForce = 0;
            this.frontWheelPower = 0;
            this.backWheelPower = 0;
            this.wheelBrakingForce = 0;
            this.visualSteerAngle = 0;
            this.physicsSteerAngle = 0;
            this.vehicleResetCheck = 0;
            this.m_physicsWorld = BABYLON.SceneManager.GetPhysicsWorld(this.scene);
            this.smokeIntensity = this.getEditorProperty("smokeIntensity", this.smokeIntensity);
            this.smokeOpacity = this.getEditorProperty("smokeOpacity", this.smokeOpacity);
            this.smokeDonuts = this.getEditorProperty("smokeDonuts", this.smokeDonuts);
            this.velocityScaling = this.getEditorProperty("velocityScaling", this.velocityScaling);
            this.skidThreashold = this.getEditorProperty("skidThreashold", this.skidThreashold);
            this.topEngineSpeed = this.getEditorProperty("topEngineSpeed", this.topEngineSpeed);
            this.powerCoefficient = this.getEditorProperty("powerCoefficient", this.powerCoefficient);
            this.maxFrontBraking = this.getEditorProperty("maxFrontBraking", this.maxFrontBraking);
            this.maxReversePower = this.getEditorProperty("maxReversePower", this.maxReversePower);
            this.stableDownForce = this.getEditorProperty("stableDownForce", this.stableDownForce);
            this.maxTurnAngle = this.getEditorProperty("maxTurnAngle", this.maxTurnAngle);
            this.maxBurnAngle = this.getEditorProperty("maxBurnAngle", this.maxBurnAngle);
            this.steeringBoost = this.getEditorProperty("steeringBoost", this.steeringBoost);
            this.overSteerDelay = this.getEditorProperty("overSteerDelay", this.overSteerDelay);
            this.lowSpeedAngle = this.getEditorProperty("lowSpeedAngle", this.lowSpeedAngle);
            this.highSpeedAngle = this.getEditorProperty("highSpeedAngle", this.highSpeedAngle);
            this.wheelDriveType = this.getEditorProperty("wheelDriveType", this.wheelDriveType);
            this.minBrakingForce = this.getEditorProperty("minBrakingForce", this.minBrakingForce);
            this.maxBrakingForce = this.getEditorProperty("maxBrakingForce", this.maxBrakingForce);
            this.handBrakingForce = this.getEditorProperty("handBrakingForce", this.handBrakingForce);
            this.linearBrakingForce = this.getEditorProperty("linearBrakingForce", this.linearBrakingForce);
            this.angularBrakingForce = this.getEditorProperty("angularBrakingForce", this.angularBrakingForce);
            this.footBrakingThreashold = this.getEditorProperty("footBrakingThreashold", this.footBrakingThreashold);
            this.skidWhenFootBraking = this.getEditorProperty("skidWhenFootBraking", this.skidWhenFootBraking);
            this.footSkidBrakingFactor = this.getEditorProperty("footSkidBrakingFactor", this.footSkidBrakingFactor);
            this.footSkidBrakingSpeed = this.getEditorProperty("footSkidBrakingSpeed", this.footSkidBrakingSpeed);
            this.wheelBurnFriction = this.getEditorProperty("wheelBurnFriction", this.wheelBurnFriction);
            this.wheelLockFriction = this.getEditorProperty("wheelLockFriction", this.wheelLockFriction);
            this.lowSpeedTurning = this.getEditorProperty("lowSpeedTurning", this.lowSpeedTurning);
            this.highSpeedTurning = this.getEditorProperty("highSpeedTurning", this.highSpeedTurning);
            this.frontLeftWheelTrans = this.getEditorProperty("frontLeftWheelMesh", this.frontLeftWheelTrans);
            this.frontRightWheelTrans = this.getEditorProperty("frontRightWheelMesh", this.frontRightWheelTrans);
            this.backLeftWheelTrans = this.getEditorProperty("rearLeftWheelMesh", this.backLeftWheelTrans);
            this.backRightWheelTrans = this.getEditorProperty("rearRightWheelMesh", this.backRightWheelTrans);
            this.frontLeftWheelCollider = this.getEditorProperty("frontLeftWheelCollider", this.frontLeftWheelCollider);
            this.frontRightWheelCollider = this.getEditorProperty("frontRightWheelCollider", this.frontRightWheelCollider);
            this.backLeftWheelCollider = this.getEditorProperty("rearLeftWheelCollider", this.backLeftWheelCollider);
            this.backRightWheelCollider = this.getEditorProperty("rearRightWheelCollider", this.backRightWheelCollider);
            this.defaultLerpSpeed = this.getEditorProperty("defaultLerpSpeed", this.defaultLerpSpeed);
            this.driftingLerpSpeed = this.getEditorProperty("driftingLerpSpeed", this.driftingLerpSpeed);
            this.burnoutLerpSpeed = this.getEditorProperty("burnoutLerpSpeed", this.burnoutLerpSpeed);
            this.burnoutTimeDelay = this.getEditorProperty("burnoutTimeDelay", this.burnoutTimeDelay);
            this.burnoutWheelPitch = this.getEditorProperty("burnoutWheelPitch", this.burnoutWheelPitch);
            this.burnoutCoefficient = this.getEditorProperty("burnoutCoefficient", this.burnoutCoefficient);
            this.burnoutTriggerMark = this.getEditorProperty("burnoutTriggerMark", this.burnoutTriggerMark);
            this.resetVehicleTime = this.getEditorProperty("resetVehicleTime", this.resetVehicleTime);
            this.playVehicleSounds = this.getEditorProperty("playVehicleSounds", this.playVehicleSounds);
            this.differentialRatio = this.getEditorProperty("gearBoxDifferential", this.differentialRatio);
            this.transmissionRatio = this.getEditorProperty("gearBoxOverdrive", this.transmissionRatio);
            this.gearBoxMaxPitching = this.getEditorProperty("gearBoxMaxPitching", this.gearBoxMaxPitching);
            this.gearBoxShiftChange = this.getEditorProperty("gearBoxShiftChange", this.gearBoxShiftChange);
            this.gearBoxShiftDelay = this.getEditorProperty("gearBoxShiftDelay", this.gearBoxShiftDelay);
            this.gearBoxShiftRatios = this.getEditorProperty("gearBoxShiftRatios", this.gearBoxShiftRatios);
            this.gearBoxShiftRanges = this.getEditorProperty("gearBoxShiftRanges", this.gearBoxShiftRanges);
            if (this.maxTurnAngle <= 0)
                this.maxTurnAngle = 20;
            if (this.maxBurnAngle <= 0)
                this.maxBurnAngle = 45;
            if (this.maxFrontBraking <= 0)
                this.maxFrontBraking = 0.01;
            if (this.maxReversePower <= 0)
                this.maxReversePower = 0.5;
            if (this.lowSpeedAngle <= 0)
                this.lowSpeedAngle = 10;
            if (this.highSpeedAngle <= 0)
                this.highSpeedAngle = 1;
            if (this.lowSpeedTurning <= 0)
                this.lowSpeedTurning = 0.015;
            if (this.highSpeedTurning <= 0)
                this.highSpeedTurning = 0.005;
            if (this.powerCoefficient <= 0)
                this.powerCoefficient = 1.0;
            if (this.topEngineSpeed <= 0)
                this.topEngineSpeed = 125;
            if (this.gearBoxMaxPitching <= 0)
                this.gearBoxMaxPitching = 6500;
            if (this.gearBoxShiftChange <= 0)
                this.gearBoxShiftChange = 4500;
            if (this.gearBoxShiftDelay <= 0)
                this.gearBoxShiftDelay = 0.35;
            if (this.transmissionRatio <= 0)
                this.transmissionRatio = 1;
            if (this.differentialRatio <= 0)
                this.differentialRatio = 1;
            if (this.defaultLerpSpeed <= 0)
                this.defaultLerpSpeed = 1;
            if (this.driftingLerpSpeed <= 0)
                this.driftingLerpSpeed = 1;
            if (this.burnoutLerpSpeed <= 0)
                this.burnoutLerpSpeed = 1;
            if (this.burnoutTimeDelay <= 0)
                this.burnoutTimeDelay = 1;
            if (this.burnoutWheelPitch <= 0)
                this.burnoutWheelPitch = 1;
            const smokeTextureInfo = this.getEditorProperty("smokeTexture");
            if (smokeTextureInfo != null) {
                this.smokeTexture = BABYLON.Utilities.ParseTexture(smokeTextureInfo, this.scene);
            }
            const shadowTextureInfo = this.getEditorProperty("shadowTexture");
            if (shadowTextureInfo != null) {
                this.shadowTexture = BABYLON.Utilities.ParseTexture(shadowTextureInfo, this.scene);
            }
            const engineTorqueInfo = this.getEditorProperty("engineTorque");
            if (engineTorqueInfo != null && engineTorqueInfo.animation != null) {
                this.engineTorqueCurve = BABYLON.Animation.Parse(engineTorqueInfo.animation);
                engineTorqueInfo.animation = null; // Is This Really Needed - ???
            }
            if (this.engineTorqueCurve == null)
                BABYLON.Tools.Warn("Failed to parse engine torque curve for: " + this.transform.name);
        }
        getCurrentBraking() { return (this.currentForward < 0 && this.forwardSpeed > 1); }
        getCurrentForward() { return this.currentForward; }
        getCurrentTurning() { return this.currentTurning; }
        getCurrentSkidding() { return this.currentSkidding; }
        getCurrentDrifting() { return this.currentDrifting; }
        getRigidbodyPhysics() { return this._rigidbody; }
        getRaycastVehicle() { return this.raycastVehicle; }
        getForwardSpeed() { return this.absoluteSpeed; }
        getAbsoluteSpeed() { return this.forwardSpeed; }
        getAmericanSpeed() { return this.americanSpeed; }
        getNormalizedSpeed() { return this.normalizedSpeed; }
        getCurrentGearIndex() { return this.gearIndex; }
        getCurrentEngineRPM() { return this.engineRPM; }
        getCurrentEnginePitch() { return BABYLON.Scalar.Clamp((this.pitchRPM / this.gearBoxMaxPitching) + 0.1); }
        getGearShiftRatioCount() { return (this.gearBoxShiftRatios != null) ? this.gearBoxShiftRatios.length : 0; }
        getSmokeTextureMask() { return this.smokeTexture; }
        getShadowTextureMask() { return this.shadowTexture; }
        getFrontLeftWheelNode() { return this.frontLeftWheelMesh; }
        getFrontRightWheelNode() { return this.frontRightWheelMesh; }
        getBackLeftWheelNode() { return this.backLeftWheelMesh; }
        getBackRightWheelNode() { return this.backRightWheelMesh; }
        getWheelBurnoutEnabled() { return this.wheelBurnout; }
        getWheelDonutsEnabled() { return this.wheelDonuts; }
        getCurrentDonutSpinTime() { return this.donutSpinTime; }
        start() { this.initVehicleState(); }
        update() { this.updateVehicleState(); }
        destroy() { this.destroyVehicleState(); }
        //////////////////////////////////////////////////
        // Protected Vehicle Movement State Functions //
        //////////////////////////////////////////////////
        initVehicleState() {
            BABYLON.Utilities.ValidateTransformQuaternion(this.transform);
            // Setup Engine Audio
            this._engineAudioSource = this.getComponent("BABYLON.AudioSource");
            if (this._engineAudioSource == null)
                BABYLON.Tools.Warn("No engine audio source manager found for: " + this.transform.name);
            // Setup Raycast Vehicle
            this._rigidbody = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this._rigidbody != null) {
                if (this._rigidbody.hasRaycastVehicle()) {
                    this.raycastVehicle = this._rigidbody.getRaycastVehicle();
                    if (this.raycastVehicle != null) {
                        this.linearDamping = this._rigidbody.getLinearDamping();
                        this.angularDamping = this._rigidbody.getAngularDamping();
                        const frontLeftWheelName = (this.frontLeftWheelTrans != null && this.frontLeftWheelTrans.name != null && this.frontLeftWheelTrans.name !== "") ? this.frontLeftWheelTrans.name : null;
                        const frontRightWheelName = (this.frontRightWheelTrans != null && this.frontRightWheelTrans.name != null && this.frontRightWheelTrans.name !== "") ? this.frontRightWheelTrans.name : null;
                        const backLeftWheelName = (this.backLeftWheelTrans != null && this.backLeftWheelTrans.name != null && this.backLeftWheelTrans.name !== "") ? this.backLeftWheelTrans.name : null;
                        const backRightWheelName = (this.backRightWheelTrans != null && this.backRightWheelTrans.name != null && this.backRightWheelTrans.name !== "") ? this.backRightWheelTrans.name : null;
                        const frontLeftWheelLabel = (this.frontLeftWheelCollider != null && this.frontLeftWheelCollider.name != null && this.frontLeftWheelCollider.name !== "") ? this.frontLeftWheelCollider.name : null;
                        const frontRightWheelLabel = (this.frontRightWheelCollider != null && this.frontRightWheelCollider.name != null && this.frontRightWheelCollider.name !== "") ? this.frontRightWheelCollider.name : null;
                        const backLeftWheelLabel = (this.backLeftWheelCollider != null && this.backLeftWheelCollider.name != null && this.backLeftWheelCollider.name !== "") ? this.backLeftWheelCollider.name : null;
                        const backRightWheelLabel = (this.backRightWheelCollider != null && this.backRightWheelCollider.name != null && this.backRightWheelCollider.name !== "") ? this.backRightWheelCollider.name : null;
                        // Get Wheel Indexs from Wheel Names
                        if (frontLeftWheelLabel != null)
                            this.FRONT_LEFT = this.raycastVehicle.getWheelIndexByName(frontLeftWheelLabel);
                        if (frontRightWheelLabel != null)
                            this.FRONT_RIGHT = this.raycastVehicle.getWheelIndexByName(frontRightWheelLabel);
                        if (backLeftWheelLabel != null)
                            this.BACK_LEFT = this.raycastVehicle.getWheelIndexByName(backLeftWheelLabel);
                        if (backRightWheelLabel != null)
                            this.BACK_RIGHT = this.raycastVehicle.getWheelIndexByName(backRightWheelLabel);
                        // Setup Wheel Info And Transform Meshes
                        if (this.raycastVehicle.getNumWheels() >= 4) {
                            if (this.FRONT_LEFT >= 0 && frontLeftWheelName != null) {
                                this.m_frontLeftWheel = this.raycastVehicle.getWheelInfo(this.FRONT_LEFT);
                                this.frontLeftWheelMesh = this.getChildTransform(frontLeftWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.frontLeftWheelMesh != null) {
                                    this.m_frontLeftWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.frontLeftWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.FRONT_LEFT, this.frontLeftWheelMesh);
                                    if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                                        this.frontLeftWheelEmitter = new BABYLON.AbstractMesh("Emitter_FL");
                                        this.frontLeftWheelEmitter.parent = this.m_frontLeftWheel.spinner || this.frontLeftWheelMesh;
                                        this.frontLeftWheelEmitter.position = new BABYLON.Vector3(0, 0, 0);
                                        this.frontLeftWheelParticle = this.createSmokeParticleSystem(this.transform.name + "Smoke_FL", this.frontLeftWheelEmitter);
                                        if (this.wheelRadius <= 0 && this.m_frontLeftWheel != null) {
                                            this.wheelRadius = this.m_frontLeftWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.FRONT_RIGHT >= 0 && frontRightWheelName != null) {
                                this.m_frontRightWheel = this.raycastVehicle.getWheelInfo(this.FRONT_RIGHT);
                                this.frontRightWheelMesh = this.getChildTransform(frontRightWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.frontRightWheelMesh != null) {
                                    this.m_frontRightWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.frontRightWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.FRONT_RIGHT, this.frontRightWheelMesh);
                                    if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                                        this.frontRightWheelEmitter = new BABYLON.AbstractMesh("Emitter_FR");
                                        this.frontRightWheelEmitter.parent = this.m_frontRightWheel.spinner || this.frontRightWheelMesh;
                                        this.frontRightWheelEmitter.position = new BABYLON.Vector3(0, 0, 0);
                                        this.frontRightWheelParticle = this.createSmokeParticleSystem(this.transform.name + "Smoke_FR", this.frontRightWheelEmitter);
                                        if (this.wheelRadius <= 0 && this.m_frontRightWheel != null) {
                                            this.wheelRadius = this.m_frontRightWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.BACK_LEFT >= 0 && backLeftWheelName != null) {
                                this.m_backLeftWheel = this.raycastVehicle.getWheelInfo(this.BACK_LEFT);
                                this.backLeftWheelMesh = this.getChildTransform(backLeftWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.backLeftWheelMesh != null) {
                                    this.m_backLeftWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.backLeftWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.BACK_LEFT, this.backLeftWheelMesh);
                                    this.backLeftWheelEmitter = new BABYLON.AbstractMesh("Emitter_RL");
                                    this.backLeftWheelEmitter.parent = this.m_backLeftWheel.spinner || this.backLeftWheelMesh;
                                    this.backLeftWheelEmitter.position = new BABYLON.Vector3(0, 0, 0);
                                    this.backLeftWheelParticle = this.createSmokeParticleSystem(this.transform.name + "Smoke_RL", this.backLeftWheelEmitter);
                                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_backLeftWheel != null) {
                                            this.wheelRadius = this.m_backLeftWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this.BACK_RIGHT >= 0 && backRightWheelName != null) {
                                this.m_backRightWheel = this.raycastVehicle.getWheelInfo(this.BACK_RIGHT);
                                this.backRightWheelMesh = this.getChildTransform(backRightWheelName, BABYLON.SearchType.StartsWith, false);
                                if (this.backRightWheelMesh != null) {
                                    this.m_backRightWheel.spinner = BABYLON.SceneManager.FindSceneChildTransform(this.backRightWheelMesh, "Wheel", BABYLON.SearchType.IndexOf, true);
                                    this.raycastVehicle.setWheelTransformMesh(this.BACK_RIGHT, this.backRightWheelMesh);
                                    this.backRightWheelEmitter = new BABYLON.AbstractMesh("Emitter_RR");
                                    this.backRightWheelEmitter.parent = this.m_backRightWheel.spinner || this.backRightWheelMesh;
                                    this.backRightWheelEmitter.position = new BABYLON.Vector3(0, 0, 0);
                                    this.backRightWheelParticle = this.createSmokeParticleSystem(this.transform.name + "Smoke_RR", this.backRightWheelEmitter);
                                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                                        if (this.wheelRadius <= 0 && this.m_backRightWheel != null) {
                                            this.wheelRadius = this.m_backRightWheel.get_m_wheelsRadius();
                                        }
                                    }
                                }
                            }
                            if (this._skidAudioSource == null && this.backRightWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.backRightWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.backLeftWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.backLeftWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.frontRightWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.frontRightWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null && this.frontLeftWheelMesh != null)
                                this._skidAudioSource = BABYLON.SceneManager.FindScriptComponent(this.frontLeftWheelMesh, "BABYLON.AudioSource");
                            if (this._skidAudioSource == null)
                                BABYLON.Tools.Warn("No skid audio source manager found for: " + this.transform.name);
                        }
                        else {
                            BABYLON.Tools.Warn("Invalid vehicle controller wheel count info for: " + this.transform.name);
                        }
                    }
                    else {
                        BABYLON.Tools.Warn("Failed to create vehicle controller for: " + this.transform.name);
                    }
                }
                else {
                    BABYLON.Tools.Warn("No wheel collider information found for: " + this.transform.name);
                }
            }
            else {
                BABYLON.Tools.Warn("Failed to get rigidbody component: " + this.transform.name);
            }
        }
        updateVehicleState() {
            const deltaTime = this.getDeltaSeconds();
            const gearCount = this.getGearShiftRatioCount();
            if (this.shiftingTime > 0) {
                this.shiftingTime -= deltaTime;
                if (this.shiftingTime < 0)
                    this.shiftingTime = 0;
            }
            if (this._rigidbody != null && this.raycastVehicle != null) {
                const deadSpeed = 0.2; // Note: Dead Movement Speed Threshold
                this.forwardSpeed = this.raycastVehicle.getRawCurrentSpeedKph();
                if (Math.abs(this.forwardSpeed) < deadSpeed)
                    this.forwardSpeed = 0;
                // ..
                this.absoluteSpeed = this.raycastVehicle.getAbsCurrentSpeedKph();
                if (this.absoluteSpeed < deadSpeed)
                    this.absoluteSpeed = 0;
                // ..
                this.americanSpeed = (this.absoluteSpeed * BABYLON.System.Kph2Mph);
                this.normalizedSpeed = BABYLON.Scalar.Clamp((this.absoluteSpeed / this.topEngineSpeed));
                // ..
                if (this.gearBoxShiftRatios != null && this.gearIndex >= 0 && this.gearIndex < gearCount) {
                    const minimumDelta = Math.min(Math.max(deltaTime, 1 / 200), 1);
                    const wheelDiameter = (this.wheelRadius * 2 * BABYLON.System.Meter2Inch);
                    const finalGearRatio = (this.gearBoxShiftRatios[this.gearIndex] * this.differentialRatio * this.transmissionRatio);
                    // ..
                    // Update Engine Revolutions (TODO: No Shifting Donut Mode - RPM Bounce Boosting)
                    // ..
                    this.downShift = (this.gearBoxShiftRanges != null && this.gearBoxShiftRanges.length === this.gearBoxShiftRatios.length) ? this.gearBoxShiftRanges[this.gearIndex] : 1000;
                    this.clutchSlip = BABYLON.Utilities.LerpClamp(this.clutchSlip, 0, 1 - Math.pow(0.01, minimumDelta));
                    this.engineRPM = ((this.americanSpeed * finalGearRatio * 336) / wheelDiameter);
                    /////////////////////////////////////////////////////////
                    // TODO: Lock High Pitching RPM While Skidding & Donuts
                    /////////////////////////////////////////////////////////
                    this.pitchRPM = BABYLON.Utilities.LerpClamp(this.shiftRPM, this.engineRPM, (1 - this.clutchSlip)) + StandardCarController.MIN_RPM;
                    /////////////////////////////////////////////////////////
                    /* Penny - Change Gears
                    float speedPercentage = Mathf.Abs(currentSpeed / maxSpeed);
                    float upperGearMax = (1 / (float)numGears) * (currentGear + 1);
                    float downGearMax = (1 / (float)numGears) * currentGear;
            
                    if (currentGear > 0 && speedPercentage < downGearMax)
                        currentGear--;
            
                    if (speedPercentage > upperGearMax && (currentGear < (numGears - 1)))
                        currentGear++;
                    */
                    // ..
                    // Update Engine Gearing Box (TODO: No Shifting Donut Mode - RPM Bounce Boosting)
                    // ..
                    if (this.americanSpeed < 5) {
                        this.gearIndex = 0;
                    }
                    else {
                        if (this.engineRPM > this.gearBoxShiftChange) {
                            this.shiftRPM = this.engineRPM;
                            this.clutchSlip = 1.0;
                            this.shiftingTime = this.gearBoxShiftDelay;
                            if (this.gearIndex < (gearCount - 1)) {
                                this.gearIndex++;
                            }
                        }
                        else if (this.engineRPM < this.downShift) {
                            this.shiftRPM = this.engineRPM;
                            this.clutchSlip = 1.0;
                            this.shiftingTime = 0;
                            if (this.gearIndex > 0) {
                                this.gearIndex--;
                            }
                        }
                    }
                    ///////////////////////////////////////
                    // Double Check Gear Index - ???
                    ///////////////////////////////////////
                    if (this.gearIndex < 0)
                        this.gearIndex = 0;
                    else if (this.gearIndex >= gearCount)
                        this.gearIndex = (gearCount - 1);
                }
            }
            // Account for further movement since the last wheel update
            if (this.velocityScaling > 0 && this._rigidbody != null) {
                this.m_velocityOffset.copyFrom(this._rigidbody.getLinearVelocity());
                this.m_velocityOffset.scaleInPlace(this.velocityScaling);
            }
            // Update Engine Sound Pitch
            let pitching = 0;
            if (this.playVehicleSounds === true) {
                pitching = (this.getCurrentEnginePitch() * 0.75);
            }
            if (this._engineAudioSource != null) {
                const engineSoundClip = this._engineAudioSource.getSoundClip();
                if (engineSoundClip != null)
                    engineSoundClip.setPlaybackRate(pitching);
            }
            // Update Smoke Instensity
            this.smokeDonuts = BABYLON.Scalar.Clamp(this.smokeDonuts, 1, 10);
            let smokeIntensityFactor = this.smokeIntensity;
            if (this.wheelBurnout === true && this.wheelDonuts === true)
                smokeIntensityFactor *= this.smokeDonuts;
            // Update Wheel Skidding Info
            let skid_FL = 0, skid_FR = 0, skid_RL = 0, skid_RR = 0;
            if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                if (this.m_frontLeftWheel != null) {
                    const wheelContactFL = (this.m_frontLeftWheel.get_m_raycastInfo().get_m_groundObject() !== 0);
                    skid_FL = this.updateCurrentSkidInfo(this.m_frontLeftWheel);
                    if (skid_FL < this.skidThreashold)
                        skid_FL = 0;
                    if (skid_FL > 0 && wheelContactFL === true) {
                        const contactPointFL = this.m_frontLeftWheel.get_m_raycastInfo().get_m_contactPointWS();
                        const contactNormalFL = this.m_frontLeftWheel.get_m_raycastInfo().get_m_contactNormalWS();
                        const skidPosFL = new BABYLON.Vector3(contactPointFL.x(), contactPointFL.y(), contactPointFL.z());
                        const skidNormFL = new BABYLON.Vector3(contactNormalFL.x(), contactNormalFL.y(), contactNormalFL.z());
                        const skidScaleFL = BABYLON.Scalar.Normalize(skid_FL, this.skidThreashold, 1.0);
                        if (this.velocityScaling > 0)
                            skidPosFL.addInPlace(this.m_velocityOffset);
                        this.m_frontLeftWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosFL, skidNormFL, skidScaleFL, this.m_frontLeftWheelSkid);
                        if (this.frontLeftWheelParticle != null) {
                            if (this.frontLeftWheelParticle.isStarted() === false) {
                                this.frontLeftWheelParticle.start();
                            }
                            const smoke_FL = skid_FL * skid_FL;
                            this.frontLeftWheelParticle.emitRate = smokeIntensityFactor * smoke_FL;
                            this.frontLeftWheelParticle.minSize = 0.2 * smoke_FL + 0.2;
                            this.frontLeftWheelParticle.maxSize = 1.5 * smoke_FL + 1.2;
                        }
                    }
                    else {
                        if (this.frontLeftWheelParticle != null)
                            this.frontLeftWheelParticle.emitRate = 0;
                        this.m_frontLeftWheelSkid = -1;
                    }
                }
                if (this.m_frontRightWheel != null) {
                    const wheelContactFR = (this.m_frontRightWheel.get_m_raycastInfo().get_m_groundObject() !== 0);
                    skid_FR = this.updateCurrentSkidInfo(this.m_frontRightWheel);
                    if (skid_FR < this.skidThreashold)
                        skid_FR = 0;
                    if (skid_FR > 0 && wheelContactFR === true) {
                        const contactPointFR = this.m_frontRightWheel.get_m_raycastInfo().get_m_contactPointWS();
                        const contactNormalFR = this.m_frontRightWheel.get_m_raycastInfo().get_m_contactNormalWS();
                        const skidPosFR = new BABYLON.Vector3(contactPointFR.x(), contactPointFR.y(), contactPointFR.z());
                        const skidNormFR = new BABYLON.Vector3(contactNormalFR.x(), contactNormalFR.y(), contactNormalFR.z());
                        const skidScaleFR = BABYLON.Scalar.Normalize(skid_FR, this.skidThreashold, 1.0);
                        if (this.velocityScaling > 0)
                            skidPosFR.addInPlace(this.m_velocityOffset);
                        this.m_frontRightWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosFR, skidNormFR, skidScaleFR, this.m_frontRightWheelSkid);
                        if (this.frontRightWheelParticle != null) {
                            if (this.frontRightWheelParticle.isStarted() === false) {
                                this.frontRightWheelParticle.start();
                            }
                            const smoke_FR = skid_FR * skid_FR;
                            this.frontRightWheelParticle.emitRate = smokeIntensityFactor * smoke_FR;
                            this.frontRightWheelParticle.minSize = 0.2 * smoke_FR + 0.2;
                            this.frontRightWheelParticle.maxSize = 1.5 * smoke_FR + 1.2;
                        }
                    }
                    else {
                        if (this.frontRightWheelParticle != null)
                            this.frontRightWheelParticle.emitRate = 0;
                        this.m_frontRightWheelSkid = -1;
                    }
                }
                if (this.wheelBurnout == true || this.restoreTimer > 0) {
                    skid_FL *= this.burnoutWheelPitch;
                    skid_FR *= this.burnoutWheelPitch;
                }
                ///////////////////////////////
                // Half Skid For Front Wheels
                ///////////////////////////////
                skid_FL *= 0.5;
                skid_FR *= 0.5;
            }
            if (this.m_backLeftWheel != null) {
                const wheelContactBL = (this.m_backLeftWheel.get_m_raycastInfo().get_m_groundObject() !== 0);
                skid_RL = this.updateCurrentSkidInfo(this.m_backLeftWheel);
                if (skid_RL < this.skidThreashold)
                    skid_RL = 0;
                if (skid_RL > 0 && wheelContactBL === true) {
                    const contactPointRL = this.m_backLeftWheel.get_m_raycastInfo().get_m_contactPointWS();
                    const contactNormalRL = this.m_backLeftWheel.get_m_raycastInfo().get_m_contactNormalWS();
                    const skidPosRL = new BABYLON.Vector3(contactPointRL.x(), contactPointRL.y(), contactPointRL.z());
                    const skidNormRL = new BABYLON.Vector3(contactNormalRL.x(), contactNormalRL.y(), contactNormalRL.z());
                    const skidScaleRL = BABYLON.Scalar.Normalize(skid_RL, this.skidThreashold, 1.0);
                    if (this.velocityScaling > 0)
                        skidPosRL.addInPlace(this.m_velocityOffset);
                    this.m_backLeftWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosRL, skidNormRL, skidScaleRL, this.m_backLeftWheelSkid);
                    if (this.backLeftWheelParticle != null) {
                        if (this.backLeftWheelParticle.isStarted() === false) {
                            this.backLeftWheelParticle.start();
                        }
                        const smoke_RL = skid_RL * skid_RL;
                        this.backLeftWheelParticle.emitRate = smokeIntensityFactor * smoke_RL;
                        this.backLeftWheelParticle.minSize = 0.2 * smoke_RL + 0.2;
                        this.backLeftWheelParticle.maxSize = 1.5 * smoke_RL + 1.2;
                    }
                }
                else {
                    if (this.backLeftWheelParticle != null)
                        this.backLeftWheelParticle.emitRate = 0;
                    this.m_backLeftWheelSkid = -1;
                }
            }
            if (this.m_backRightWheel != null) {
                const wheelContactBR = (this.m_backRightWheel.get_m_raycastInfo().get_m_groundObject() !== 0);
                skid_RR = this.updateCurrentSkidInfo(this.m_backRightWheel);
                if (skid_RR < this.skidThreashold)
                    skid_RR = 0;
                if (skid_RR > 0 && wheelContactBR === true) {
                    const contactPointRR = this.m_backRightWheel.get_m_raycastInfo().get_m_contactPointWS();
                    const contactNormalRR = this.m_backRightWheel.get_m_raycastInfo().get_m_contactNormalWS();
                    const skidPosRR = new BABYLON.Vector3(contactPointRR.x(), contactPointRR.y(), contactPointRR.z());
                    const skidNormRR = new BABYLON.Vector3(contactNormalRR.x(), contactNormalRR.y(), contactNormalRR.z());
                    const skidScaleRR = BABYLON.Scalar.Normalize(skid_RR, this.skidThreashold, 1.0);
                    if (this.velocityScaling > 0)
                        skidPosRR.addInPlace(this.m_velocityOffset);
                    this.m_backRightWheelSkid = PROJECT.SkidmarkManager.AddSkidmarkSegment(skidPosRR, skidNormRR, skidScaleRR, this.m_backRightWheelSkid);
                    if (this.backRightWheelParticle != null) {
                        if (this.backRightWheelParticle.isStarted() === false) {
                            this.backRightWheelParticle.start();
                        }
                        const smoke_RR = skid_RR * skid_RR;
                        this.backRightWheelParticle.emitRate = smokeIntensityFactor * smoke_RR;
                        this.backRightWheelParticle.minSize = 0.2 * smoke_RR + 0.2;
                        this.backRightWheelParticle.maxSize = 1.5 * smoke_RR + 1.2;
                    }
                }
                else {
                    if (this.backRightWheelParticle != null)
                        this.backRightWheelParticle.emitRate = 0;
                    this.m_backRightWheelSkid = -1;
                }
            }
            if (this.wheelBurnout == true || this.restoreTimer > 0) {
                skid_RL *= this.burnoutWheelPitch;
                skid_RR *= this.burnoutWheelPitch;
            }
            ///////////////////////////////////////////
            // Play Skid Audio Track
            ///////////////////////////////////////////
            let skidding = 0;
            if (this.playVehicleSounds === true) {
                if (skid_FL > skidding)
                    skidding = skid_FL;
                if (skid_FR > skidding)
                    skidding = skid_FR;
                if (skid_RL > skidding)
                    skidding = skid_RL;
                if (skid_RR > skidding)
                    skidding = skid_RR;
            }
            if (this._skidAudioSource != null) {
                const skidSoundClip = this._skidAudioSource.getSoundClip();
                if (skidSoundClip != null)
                    skidSoundClip.setPlaybackRate(skidding);
            }
            ///////////////////////////////////////////
            // Reset Vehicle Information Check
            ///////////////////////////////////////////
            if (this.resetVehicleTime > 0) {
                const gameTime = BABYLON.SceneManager.GetGameTime();
                if (this.transform.up.y > 0.5 || this.absoluteSpeed > 1) {
                    this.vehicleResetCheck = gameTime;
                }
                if (gameTime > (this.vehicleResetCheck + this.resetVehicleTime)) {
                    this.transform.position.addInPlace(BABYLON.Vector3.Up().scale(0.5));
                    BABYLON.Utilities.LookRotationToRef(this.transform.forward, BABYLON.Vector3.Up(), this.transform.rotationQuaternion);
                }
            }
            ///////////////////////////////////////////
            // Final Vehicle Information Update
            ///////////////////////////////////////////
            if (this.onUpdateVehicleInformation != null) {
                this.onUpdateVehicleInformation(skid_FL, skid_FR, skid_RL, skid_RR);
            }
        }
        destroyVehicleState() {
            this._rigidbody = null;
            this._engineAudioSource = null;
            this._skidAudioSource = null;
            if (this.m_frontLeftWheel != null) {
                Ammo.destroy(this.m_frontLeftWheel); // ???
                this.m_frontLeftWheel = null;
            }
            if (this.m_frontRightWheel != null) {
                Ammo.destroy(this.m_frontRightWheel); // ???
                this.m_frontRightWheel = null;
            }
            if (this.m_backLeftWheel != null) {
                Ammo.destroy(this.m_backLeftWheel); // ???
                this.m_backLeftWheel = null;
            }
            if (this.m_backRightWheel != null) {
                Ammo.destroy(this.m_backRightWheel); // ???
                this.m_backRightWheel = null;
            }
            this.m_physicsWorld = null;
            this.raycastVehicle = null;
            this.frontLeftWheelMesh = null;
            this.frontRightWheelMesh = null;
            this.backLeftWheelMesh = null;
            this.backRightWheelMesh = null;
            this.frontLeftWheelTrans = null;
            this.frontRightWheelTrans = null;
            this.backLeftWheelTrans = null;
            this.backRightWheelTrans = null;
            this.frontLeftWheelCollider = null;
            this.frontRightWheelCollider = null;
            this.backLeftWheelCollider = null;
            this.backRightWheelCollider = null;
        }
        /** Drives the raycast vehicle with the specfied movement and hand braking properties. */
        drive(accel, steer, skid = false, drift, assist = true) {
            this.currentForward = BABYLON.Scalar.Clamp(accel, -1, 1);
            this.currentTurning = BABYLON.Scalar.Clamp(steer, -1, 1);
            this.currentSkidding = skid;
            this.currentDrifting = drift;
            if (this._rigidbody == null || this.raycastVehicle == null)
                return;
            if (this.FRONT_LEFT >= 0 && this.FRONT_RIGHT >= 0 && this.BACK_LEFT >= 0 && this.BACK_RIGHT >= 0) {
                const deltaTime = this.getDeltaSeconds();
                this.engineForce = 0;
                this.wheelBrakingForce = 0;
                this.frontWheelPower = 0;
                this.backWheelPower = 0;
                // ..
                // Update Engine Forces
                // ..
                const handbraking = (this.getCurrentSkidding() === true && this.handBrakingForce > 0);
                const gearShiftRatio = (this.gearBoxShiftRatios != null && this.gearBoxShiftRatios.length > this.gearIndex) ? this.gearBoxShiftRatios[this.gearIndex] : 1.0;
                const finalGearRatio = (gearShiftRatio * this.differentialRatio * this.transmissionRatio);
                const engineMotorTorque = this.getVehicleEngineTorque(this.engineRPM) * Math.abs(this.currentForward);
                const allowedEnginePower = (engineMotorTorque * finalGearRatio);
                const allowedBrakingForce = BABYLON.Scalar.Lerp(this.minBrakingForce, this.maxBrakingForce, this.normalizedSpeed) * Math.abs(this.currentForward);
                if (this.currentForward > 0 && this.wheelBurnout === true && this.wheelDonuts === true) {
                    this.engineForce = allowedEnginePower;
                }
                else {
                    if (this.currentForward > 0) { // Forward
                        // TODO: Support Right Handed
                        if (this.forwardSpeed < -1)
                            this.wheelBrakingForce = allowedBrakingForce;
                        else
                            this.engineForce = allowedEnginePower;
                    }
                    else if (this.currentForward < 0) { // Reverse
                        // TODO: Support Right Handed
                        if (this.forwardSpeed > 1)
                            this.wheelBrakingForce = allowedBrakingForce;
                        else
                            this.engineForce = -(allowedEnginePower * this.maxReversePower);
                    }
                    else { // Static
                        this.engineForce = 0;
                        this.wheelBrakingForce = 10;
                    }
                }
                const throttleSpeed = (this.throttleEngineSpeed > 0) ? this.throttleEngineSpeed : this.topEngineSpeed;
                if (this.shiftingTime > 0 || this.americanSpeed > throttleSpeed)
                    this.engineForce = 0;
                if (assist === false) {
                    // ..
                    // Update Direct Steer Angle (Non Assisted)
                    // ..
                    if (this.americanSpeed >= 10) {
                        let autoTurnAngle = (BABYLON.Scalar.Lerp(this.lowSpeedAngle, this.highSpeedAngle, this.normalizedSpeed) * BABYLON.System.Deg2Rad);
                        autoTurnAngle *= (BABYLON.Scalar.Lerp(this.lowSpeedTurning, this.highSpeedTurning, this.normalizedSpeed) * 100);
                        this.physicsSteerAngle = (this.currentTurning * autoTurnAngle);
                        this.visualSteerAngle = (this.currentTurning * autoTurnAngle);
                    }
                    else {
                        this.physicsSteerAngle = this.currentTurning * (this.maxTurnAngle * BABYLON.System.Deg2Rad);
                        this.visualSteerAngle = this.currentTurning * (this.maxTurnAngle * BABYLON.System.Deg2Rad);
                    }
                    if (this.overSteerDelay > 0 && handbraking === true) {
                        if (this.driftingTimer >= this.overSteerDelay) {
                            this.visualSteerAngle *= -1; // Note: Invert Over Steering Angle
                        }
                    }
                }
                else {
                    // ..
                    // Update Physics Turn Angle (Assisted Steering)
                    // ..
                    this.allowedTurningIncement = BABYLON.Scalar.Lerp(this.lowSpeedTurning, this.highSpeedTurning, this.normalizedSpeed);
                    if (this.americanSpeed >= 10) {
                        this.allowedTurningAngle = BABYLON.Scalar.Lerp((this.lowSpeedAngle * BABYLON.System.Deg2Rad), (this.highSpeedAngle * BABYLON.System.Deg2Rad), this.normalizedSpeed);
                    }
                    else {
                        this.allowedTurningAngle = (this.maxTurnAngle * BABYLON.System.Deg2Rad);
                    }
                    if (this.wheelBurnout === true && this.wheelDonuts === true) {
                        this.allowedTurningAngle = (this.maxBurnAngle * BABYLON.System.Deg2Rad);
                    }
                    if (this.currentTurning > 0) { // Right
                        if (this.physicsSteerAngle < this.allowedTurningAngle) {
                            this.physicsSteerAngle += (this.allowedTurningIncement);
                        }
                    }
                    else if (this.currentTurning < 0) { // Left
                        if (this.physicsSteerAngle > -this.allowedTurningAngle) {
                            this.physicsSteerAngle -= (this.allowedTurningIncement);
                        }
                    }
                    else {
                        if (this.physicsSteerAngle < -this.allowedTurningIncement) {
                            this.physicsSteerAngle += this.allowedTurningIncement;
                        }
                        else {
                            if (this.physicsSteerAngle > this.allowedTurningIncement) {
                                this.physicsSteerAngle -= this.allowedTurningIncement;
                            }
                            else {
                                this.physicsSteerAngle = 0;
                            }
                        }
                    }
                    // ..
                    // Update Visual Turn Angle (No Steering Effect)
                    // ..
                    if (this.wheelBurnout === true || this.wheelSkidding == true) {
                        this.allowedTurningAngle = (this.maxTurnAngle * BABYLON.System.Deg2Rad);
                        this.allowedTurningIncement = this.lowSpeedTurning;
                    }
                    else {
                        this.allowedTurningIncement = BABYLON.Scalar.Lerp(this.lowSpeedTurning, this.highSpeedTurning, this.normalizedSpeed);
                        this.allowedTurningAngle = BABYLON.Scalar.Lerp((this.lowSpeedAngle * BABYLON.System.Deg2Rad), (this.highSpeedAngle * BABYLON.System.Deg2Rad), this.normalizedSpeed);
                        if (this.steeringBoost > 0 && Math.abs(this.currentTurning) >= 0.1) {
                            this.allowedTurningAngle += (this.steeringBoost * BABYLON.System.Deg2Rad);
                        }
                    }
                    if (this.overSteerDelay > 0 && handbraking === true) {
                        if (this.driftingTimer >= this.overSteerDelay) {
                            this.currentTurning *= -1; // Note: Invert Over Steering Angle
                        }
                    }
                    if (this.currentTurning > 0) { // Right
                        if (this.visualSteerAngle < this.allowedTurningAngle) {
                            this.visualSteerAngle += (this.allowedTurningIncement);
                        }
                    }
                    else if (this.currentTurning < 0) { // Left
                        if (this.visualSteerAngle > -this.allowedTurningAngle) {
                            this.visualSteerAngle -= (this.allowedTurningIncement);
                        }
                    }
                    else {
                        if (this.visualSteerAngle < -this.allowedTurningIncement) {
                            this.visualSteerAngle += this.allowedTurningIncement;
                        }
                        else {
                            if (this.visualSteerAngle > this.allowedTurningIncement) {
                                this.visualSteerAngle -= this.allowedTurningIncement;
                            }
                            else {
                                this.visualSteerAngle = 0;
                            }
                        }
                    }
                }
                // ..
                // Update Raycast Vehicle Controls
                // ..
                let updateFriction = true;
                if (handbraking === true) {
                    this.wheelBurnout = false;
                    this.wheelDonuts = false;
                    this.burnoutTimer = 0;
                    this.driftingTimer += deltaTime;
                    // ..
                    // Validate Wheel Skidding Mode
                    // ..
                    if (this.raycastVehicle.lockedWheelIndexes == null)
                        this.raycastVehicle.lockedWheelIndexes = [this.BACK_LEFT, this.BACK_RIGHT];
                    if (this.americanSpeed >= 5) {
                        if (this.wheelSkidding === false) {
                            this.wheelSkidding = true;
                            if (this.m_frontLeftWheel != null)
                                this.m_frontLeftWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_frontRightWheel != null)
                                this.m_frontRightWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_backLeftWheel != null)
                                this.m_backLeftWheel.set_m_frictionSlip(this.wheelLockFriction);
                            if (this.m_backRightWheel != null)
                                this.m_backRightWheel.set_m_frictionSlip(this.wheelLockFriction);
                            updateFriction = false; // Note: Disable Friction Lerping This Frame
                        }
                    }
                    // ..
                    // Update Vehicle Wheel Information
                    // ..
                    this.updateCurrentBrakeDamping(this.linearBrakingForce, this.angularBrakingForce);
                    if (updateFriction === true)
                        this.updateCurrentFrictionSlip(deltaTime * this.driftingLerpSpeed);
                    this.updateCurrentRotationBoost(0);
                    // ..
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_RIGHT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_RIGHT);
                    // ..
                    this.raycastVehicle.setEngineForce(0, this.FRONT_LEFT);
                    this.raycastVehicle.setEngineForce(0, this.FRONT_RIGHT);
                    this.raycastVehicle.setEngineForce(0, this.BACK_LEFT);
                    this.raycastVehicle.setEngineForce(0, this.BACK_RIGHT);
                    // ..
                    this.raycastVehicle.setBrakingForce(0, this.FRONT_LEFT);
                    this.raycastVehicle.setBrakingForce(0, this.FRONT_RIGHT);
                    this.raycastVehicle.setBrakingForce(this.handBrakingForce, this.BACK_LEFT);
                    this.raycastVehicle.setBrakingForce(this.handBrakingForce, this.BACK_RIGHT);
                }
                else {
                    this.driftingTimer = 0;
                    this.wheelSkidding = false;
                    if (this.raycastVehicle.lockedWheelIndexes != null)
                        this.raycastVehicle.lockedWheelIndexes = null;
                    if (this.burnoutCoefficient > 0) {
                        this.burnoutCoefficient = BABYLON.Scalar.Clamp(this.burnoutCoefficient, 1, 20);
                    }
                    if (this.burnoutTriggerMark > 0) {
                        this.burnoutTriggerMark = BABYLON.Scalar.Clamp(this.burnoutTriggerMark, 1, 20);
                    }
                    const isBurnoutSpeed = (this.americanSpeed <= this.burnoutTriggerMark);
                    const isFullThrottle = (this.currentForward < -0.9 || this.currentForward > 0.9);
                    const isFullTurning = (this.currentTurning < -0.9 || this.currentTurning > 0.9);
                    let wheelLerpSpeed = (deltaTime * this.defaultLerpSpeed);
                    let wheelBoostSpeed = 0; // Default Zero Wheel Rotation Boost
                    // ..
                    // Validate Wheel Burnout Mode
                    // ..
                    if (this.burnoutTimer <= 0 && this.burnoutCoefficient >= 1.0 && isBurnoutSpeed === true && isFullThrottle === true) {
                        this.burnoutTimer = (this.burnoutTimeDelay * 0.25); // Note: 25 Percent Slipping Time
                        this.wheelDonuts = false;
                        this.wheelBurnout = true;
                    }
                    // ..
                    // Validate Wheel Burnout Timers
                    // ..
                    if (this.restoreTimer > 0) {
                        this.restoreTimer -= deltaTime;
                        if (this.restoreTimer < 0)
                            this.restoreTimer = 0;
                        wheelLerpSpeed *= this.burnoutLerpSpeed;
                    }
                    if (this.cooldownTimer > 0) {
                        this.cooldownTimer -= deltaTime;
                        if (this.cooldownTimer < 0)
                            this.cooldownTimer = 0;
                    }
                    if (this.wheelDonuts === true) {
                        this.donutSpinTime += deltaTime;
                        if (isFullTurning === false) {
                            this.burnoutTimer = 0;
                        }
                    }
                    else {
                        this.donutSpinTime = 0;
                    }
                    // ..
                    // Validate Wheel Drive Burnout Mode
                    // ..
                    if (this.burnoutTimer > 0 && isFullThrottle === true) {
                        wheelBoostSpeed = 0.185;
                        const frontSlipFactor = (this.wheelDonuts === true) ? 1.25 : 1.0;
                        if (this.burnoutCoefficient >= 1.0)
                            this.engineForce *= this.burnoutCoefficient;
                        if (this.m_frontLeftWheel != null)
                            this.m_frontLeftWheel.set_m_frictionSlip(this.wheelBurnFriction * frontSlipFactor);
                        if (this.m_frontRightWheel != null)
                            this.m_frontRightWheel.set_m_frictionSlip(this.wheelBurnFriction * frontSlipFactor);
                        if (this.m_backLeftWheel != null)
                            this.m_backLeftWheel.set_m_frictionSlip(this.wheelBurnFriction);
                        if (this.m_backRightWheel != null)
                            this.m_backRightWheel.set_m_frictionSlip(this.wheelBurnFriction);
                        updateFriction = false; // Note: Disable Friction Lerping This Frame
                        // ..
                        this.burnoutTimer -= deltaTime;
                        if (this.burnoutTimer <= 0 && this.cooldownTimer <= 0 && isFullTurning === true && this.currentForward > 0 && this.currentDrifting === true) {
                            this.burnoutTimer = 0.01; // Note: Use Fixed Donut Burnout Time Extension
                            this.wheelDonuts = true;
                        }
                    }
                    else {
                        this.burnoutTimer = 0; // Note: Force Burnout Timer Reset
                        this.donutSpinTime = 0; // Note: Force Donut Spin Time Reset
                        if (this.wheelDonuts === true) {
                            this.wheelDonuts = false;
                            this.cooldownTimer = (this.burnoutTimeDelay * 2); // Note: 200 Percent Cooldown Time
                        }
                        if (this.wheelBurnout === true) {
                            this.wheelBurnout = false;
                            this.restoreTimer = (this.burnoutTimeDelay * 0.75); // Note: 75 Percent Restoring Time
                        }
                    }
                    // ..
                    // Validate Wheel Drive Power Force
                    // ..
                    if (this.wheelBurnout === true && this.wheelDonuts === true) {
                        this.frontWheelPower = (this.engineForce * 0.2); // Note: 20 Percent Engine Power Force
                    }
                    else if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                        this.frontWheelPower = this.engineForce;
                    }
                    if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                        this.backWheelPower = this.engineForce;
                    }
                    // ..
                    // Update Vehicle Wheel Information
                    // ..
                    if (this.getCurrentBraking() === true) {
                        this.updateCurrentBrakeDamping(this.linearBrakingForce, this.angularBrakingForce);
                    }
                    else {
                        this.updateCurrentBrakeDamping(this.linearDamping, this.angularDamping);
                    }
                    if (updateFriction === true)
                        this.updateCurrentFrictionSlip(wheelLerpSpeed);
                    this.updateCurrentRotationBoost(wheelBoostSpeed);
                    // ..
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setVisualSteeringAngle(this.visualSteerAngle, this.FRONT_RIGHT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_LEFT);
                    this.raycastVehicle.setPhysicsSteeringAngle(this.physicsSteerAngle, this.FRONT_RIGHT);
                    // ..
                    this.raycastVehicle.setEngineForce(this.frontWheelPower, this.FRONT_LEFT);
                    this.raycastVehicle.setEngineForce(this.frontWheelPower, this.FRONT_RIGHT);
                    this.raycastVehicle.setEngineForce(this.backWheelPower, this.BACK_LEFT);
                    this.raycastVehicle.setEngineForce(this.backWheelPower, this.BACK_RIGHT);
                    // ..
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce * this.maxFrontBraking, this.FRONT_LEFT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce * this.maxFrontBraking, this.FRONT_RIGHT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce, this.BACK_LEFT);
                    this.raycastVehicle.setBrakingForce(this.wheelBrakingForce, this.BACK_RIGHT);
                }
                // Trace Current Speed
                // const msg:string = ("Speed: " + this.americanSpeed.toFixed(1) + " --> Turn Angle: " + this.allowedTurningAngle.toFixed(4));
                // const msg:string = ("MPH: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Engine Pitch: " + this.getCurrentEnginePitch().toFixed(2) + " ---> Raw KPH: " + this.absoluteSpeed.toFixed(1));
                // const msg:string = ("Car Speed: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Engine Toruqe: " + engineMotorTorque.toFixed(2)+ " ---> Engine Power: " + allowedEnginePower.toFixed(2));
                // const msg:string = ("Fwd Speed: " + this.forwardSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Engine Toruqe: " + engineMotorTorque.toFixed(2)+ " ---> Engine Power: " + allowedEnginePower.toFixed(2));
                // const msg:string = ("Car Speed: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " ---> Downshift Value: " + this.downShift.toFixed(0));
                const msg = ("Car Speed: " + this.americanSpeed.toFixed(1) + " --> Gear Index: " + this.gearIndex.toFixed(0) + " --> Engine RPM: " + this.engineRPM.toFixed(0) + " --> Speed Throttle: " + throttleSpeed.toFixed(0));
                BABYLON.Utilities.PrintToScreen(msg, "#008000");
            }
        }
        getVehicleEngineTorque(rpm) {
            let result = 0;
            if (this.engineTorqueCurve != null) {
                result = (BABYLON.Utilities.FastFloatInterpolate(this.engineTorqueCurve, BABYLON.Scalar.Clamp(rpm, StandardCarController.MIN_RPM, StandardCarController.MAX_RPM), 0, 0) * this.powerCoefficient);
            }
            return result;
        }
        createSmokeParticleSystem(name, emitter) {
            const result = new BABYLON.ParticleSystem(name, 10000, this.scene);
            result.blendMode = BABYLON.ParticleSystem.BLENDMODE_STANDARD;
            result.particleTexture = this.smokeTexture;
            result.emitter = emitter;
            result.emitRate = 0;
            result.updateSpeed = 0.01;
            // change size and speed
            result.minSize = 0.2;
            result.maxSize = 1.3;
            result.minAngularSpeed = -1.5;
            result.maxAngularSpeed = 1.5;
            // changed lifetime to control shape of the cloud in conjunction with velocity gradient
            result.minLifeTime = 3.0;
            result.maxLifeTime = 5.0;
            // adding velocity over time to prevent large bloom of particles by launching them fast and then slowing them down GPU particles don't take a gradient on velocity, but the reduction in velocity over time is worth the trade off for less randomization
            result.addVelocityGradient(0, 1);
            result.addVelocityGradient(0.1, 0.7);
            result.addVelocityGradient(0.7, 0.2);
            result.addVelocityGradient(1.0, 0.05);
            // reduced the emit rate to reduce bloom of particles in the center of mass
            result.gravity = new BABYLON.Vector3(0, -0.1, 0);
            result.minEmitBox = new BABYLON.Vector3(0, -0.25, 0);
            result.maxEmitBox = new BABYLON.Vector3(0, -0.25, 0);
            result.direction1 = new BABYLON.Vector3(-1, -1, -1);
            result.direction2 = new BABYLON.Vector3(1, 1, 1);
            // The color1, color2, colorDead pattern is overridden by color gradient so is unnecessary
            result.color1 = new BABYLON.Color4(0.95, 0.95, 0.95, this.smokeOpacity);
            result.color2 = new BABYLON.Color4(0.85, 0.85, 0.85, this.smokeOpacity);
            result.colorDead = new BABYLON.Color4(0.9, 0.9, 0.9, (this.smokeOpacity * 0.5));
            // Changed the color gradient to add a second value for randomization and ramped the color down further to create more texture with alpha blending
            //result.addColorGradient(0.0, new BABYLON.Color4(1, 1, 1, 0.0), new BABYLON.Color4(0.7, 0.7, 0.7, 0.0));
            //result.addColorGradient(0.2, new BABYLON.Color4(0.7, 0.7, 0.7, 0.2), new BABYLON.Color4(0.6, 0.6, 0.6, 0.2));
            //result.addColorGradient(0.6, new BABYLON.Color4(0.6, 0.6, 0.6, 0.1),new BABYLON.Color4(0.4, 0.4, 0.4, 0.1));
            //result.addColorGradient(1.0, new BABYLON.Color4(0.3, 0.3, 0.3, 0.0),new BABYLON.Color4(0.1, 0.1, 0.1, 0.0));            
            return result;
        }
        updateCurrentSkidInfo(wheel) {
            let result = BABYLON.Scalar.Clamp((1 - wheel.get_m_skidInfo()));
            const isbraking = this.getCurrentBraking();
            const footbraking = (isbraking === true && this.currentForward <= -this.footBrakingThreashold);
            if (this.skidWhenFootBraking === true && footbraking === true) {
                if (this.americanSpeed >= this.footSkidBrakingSpeed) {
                    result = BABYLON.Scalar.Clamp(0, 1, (this.normalizedSpeed * this.footSkidBrakingFactor));
                }
            }
            return result;
        }
        updateCurrentBrakeDamping(linear, angular) {
            if (this._rigidbody != null)
                this._rigidbody.setDamping(linear, angular);
        }
        updateCurrentRotationBoost(boost) {
            if (this.wheelDriveType === 1 || this.wheelDriveType === 2) { // FRONT OR ALL WHEEL DRIVE
                if (this.m_frontLeftWheel != null)
                    this.m_frontLeftWheel.rotationBoost = boost;
                if (this.m_frontRightWheel != null)
                    this.m_frontRightWheel.rotationBoost = boost;
            }
            if (this.wheelDriveType === 0 || this.wheelDriveType === 2) { // REAR OR ALL WHEEL DRIVE
                if (this.m_backLeftWheel != null)
                    this.m_backLeftWheel.rotationBoost = boost;
                if (this.m_backRightWheel != null)
                    this.m_backRightWheel.rotationBoost = boost;
            }
        }
        updateCurrentFrictionSlip(lerpSpeed) {
            if (this.m_frontLeftWheel != null && this.m_frontLeftWheel.defaultFriction != null) {
                let frontLeftFriction = this.m_frontLeftWheel.get_m_frictionSlip();
                if (frontLeftFriction < this.m_frontLeftWheel.defaultFriction) {
                    frontLeftFriction = BABYLON.Scalar.Lerp(frontLeftFriction, this.m_frontLeftWheel.defaultFriction, lerpSpeed);
                    this.m_frontLeftWheel.set_m_frictionSlip(frontLeftFriction);
                }
                else if (frontLeftFriction > this.m_frontLeftWheel.defaultFriction) {
                    this.m_frontLeftWheel.set_m_frictionSlip(this.m_frontLeftWheel.defaultFriction);
                }
            }
            if (this.m_frontRightWheel != null && this.m_frontRightWheel.defaultFriction != null) {
                let frontRightFriction = this.m_frontRightWheel.get_m_frictionSlip();
                if (frontRightFriction !== this.m_frontRightWheel.defaultFriction) {
                    frontRightFriction = BABYLON.Scalar.Lerp(frontRightFriction, this.m_frontRightWheel.defaultFriction, lerpSpeed);
                    this.m_frontRightWheel.set_m_frictionSlip(frontRightFriction);
                }
                else if (frontRightFriction > this.m_frontRightWheel.defaultFriction) {
                    this.m_frontRightWheel.set_m_frictionSlip(this.m_frontRightWheel.defaultFriction);
                }
            }
            if (this.m_backLeftWheel != null && this.m_backLeftWheel.defaultFriction != null) {
                let backLeftFriction = this.m_backLeftWheel.get_m_frictionSlip();
                if (backLeftFriction !== this.m_backLeftWheel.defaultFriction) {
                    backLeftFriction = BABYLON.Scalar.Lerp(backLeftFriction, this.m_backLeftWheel.defaultFriction, lerpSpeed);
                    this.m_backLeftWheel.set_m_frictionSlip(backLeftFriction);
                }
                else if (backLeftFriction > this.m_backLeftWheel.defaultFriction) {
                    this.m_backLeftWheel.set_m_frictionSlip(this.m_backLeftWheel.defaultFriction);
                }
            }
            if (this.m_backRightWheel != null && this.m_backRightWheel.defaultFriction != null) {
                let backRightFriction = this.m_backRightWheel.get_m_frictionSlip();
                if (backRightFriction !== this.m_backRightWheel.defaultFriction) {
                    backRightFriction = BABYLON.Scalar.Lerp(backRightFriction, this.m_backRightWheel.defaultFriction, lerpSpeed);
                    this.m_backRightWheel.set_m_frictionSlip(backRightFriction);
                }
                else if (backRightFriction > this.m_backRightWheel.defaultFriction) {
                    this.m_backRightWheel.set_m_frictionSlip(this.m_backRightWheel.defaultFriction);
                }
            }
        }
    }
    StandardCarController.MIN_RPM = 1000;
    StandardCarController.MAX_RPM = 6000;
    PROJECT.StandardCarController = StandardCarController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class VehicleInputController
     */
    class VehicleInputController extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.playerDeltaX = 0;
            this.playerDeltaY = 0;
            this.playerMouseX = 0;
            this.playerMouseY = 0;
            this.avoidancePath = 0;
            this.avoidanceTime = 0;
            this.targetPosition = BABYLON.Vector3.Zero();
            this.targetRotation = BABYLON.Quaternion.Zero();
            this.waypointIndex = 0;
            this.lastMovementTime = 0;
            this.showRabbitChasing = false;
            this.showTriggerVolume = false;
            this.circuitSpeedLimit = 0;
            this.drawRabbitTracker = false;
            this.rabbitTrackerLine = null;
            this.rabbitTrackerColor = new BABYLON.Color3(0, 0, 0);
            this.targetAngles = new BABYLON.Vector3(0, 0, 0);
            this.transformAngles = new BABYLON.Vector3(0, 0, 0);
            this.positionBuffer = new BABYLON.Vector3(0, 0, 0);
            this.rotationBuffer = new BABYLON.Quaternion(0, 0, 0, 1);
            this.tempRotationBuffer = new BABYLON.Vector3(0, 0, 0);
            this.localTargetPosition = new BABYLON.Vector3(0, 0, 0);
            this.localTargetAvoidance = new BABYLON.Vector3(0, 0, 0);
            this.playerNumber = BABYLON.PlayerNumber.One;
            this.triggerForward = BABYLON.Xbox360Trigger.Right;
            this.keyboardForawrd = BABYLON.UserInputKey.W;
            this.auxKeyboardForawrd = BABYLON.UserInputKey.UpArrow;
            this.triggerBackwards = BABYLON.Xbox360Trigger.Left;
            this.keyboardBackwards = BABYLON.UserInputKey.S;
            this.auxKeyboardBackwards = BABYLON.UserInputKey.DownArrow;
            this.buttonHandbrake = BABYLON.Xbox360Button.X;
            this.keyboardHandbrake = BABYLON.UserInputKey.SpaceBar;
            this.buttonDonuts = BABYLON.Xbox360Button.B;
            this.keyboardDonuts = BABYLON.UserInputKey.Shift;
            // Default Drive Properties
            this.enableInput = false;
            this.attachCamera = false;
            this.followBehind = false;
            this.followDistance = 5.0;
            this.followHeight = 1.65;
            this.heightOffset = 0.0;
            this.heightDamping = 3;
            this.rotationDamping = 3;
            this.assistedSteering = true;
            this.useTriggerVolume = false;
            this.donutCameraLock = new BABYLON.Vector3(0.0, 0.5, 7.5);
            this.triggerVolumePos = new BABYLON.Vector3(0, 0, 0);
            this.triggerVolumeSize = new BABYLON.Vector3(1, 1, 1);
            // Auto Pilot Properties
            this.minCircuitSpeed = 80;
            this.maxCircuitSpeed = 85;
            this.chaseRabbitSpeed = 1;
            this.waypointThreashold = 1;
            this.wanderingDistance = 1;
            this.avoidOthersTimer = 0.1;
            this.driverLookAhead = 15;
            this.brakingMultiplier = 6;
            this.brakingSensitivity = 1;
            this.steeringSensitivity = 1;
            this.throttleSensitivity = 1;
            this.throttleSpeedAngle = 5;
            this.brakingSpeedAngle = 10;
            this.skiddingSpeedAngle = 20;
            this.throttleSpeedLimit = 5;
            this.brakingSpeedLimit = 25;
            this.skiddingSpeedLimit = 50;
            this.resetMovingTimeout = 5;
            // Vehicle Drive Properties
            this.m_chaseRabbitMesh = null;
            this.m_triggerVolumeMesh = null;
            this.m_cameraTransform = null;
            this.m_circuitWaypoints = null;
            this.m_rigidbodyPhysics = null;
            this.m_standardCarController = null;
            this.lastSteeringAngle = 0;
            this.enableInput = this.getEditorProperty("enableInput", this.enableInput);
            this.playerNumber = this.getEditorProperty("playerNumber", this.playerNumber);
            this.attachCamera = this.getEditorProperty("attachCamera", this.attachCamera);
            this.followBehind = this.getEditorProperty("followBehind", this.followBehind);
            this.followDistance = this.getEditorProperty("followDistance", this.followDistance);
            this.followHeight = this.getEditorProperty("followHeight", this.followHeight);
            this.heightOffset = this.getEditorProperty("heightOffset", this.heightOffset);
            this.heightDamping = this.getEditorProperty("heightDamping", this.heightDamping);
            this.rotationDamping = this.getEditorProperty("rotationDamping", this.rotationDamping);
            this.assistedSteering = this.getEditorProperty("useAssistedSteering", this.assistedSteering);
            this.showRabbitChasing = this.getEditorProperty("showRabbitChasing", this.showRabbitChasing);
            this.showTriggerVolume = this.getEditorProperty("showTriggerVolume", this.showTriggerVolume);
            this.useTriggerVolume = this.getEditorProperty("useTriggerVolume", this.useTriggerVolume);
            this.triggerVolumePos = BABYLON.Utilities.ParseVector3(this.getEditorProperty("triggerVolumePos"), this.triggerVolumePos);
            this.triggerVolumeSize = BABYLON.Utilities.ParseVector3(this.getEditorProperty("triggerVolumeSize"), this.triggerVolumeSize);
            // ..
            this.driverLookAhead = this.getEditorProperty("driverLookAhead", this.driverLookAhead);
            this.chaseRabbitSpeed = this.getEditorProperty("chaseRabbitSpeed", this.chaseRabbitSpeed);
            this.waypointThreashold = this.getEditorProperty("waypointThreashold", this.waypointThreashold);
            this.brakingMultiplier = this.getEditorProperty("brakingMultiplier", this.brakingMultiplier);
            this.brakingSensitivity = this.getEditorProperty("brakingSensitivity", this.brakingSensitivity);
            this.steeringSensitivity = this.getEditorProperty("steeringSensitivity", this.steeringSensitivity);
            this.throttleSensitivity = this.getEditorProperty("throttleSensitivity", this.throttleSensitivity);
            this.throttleSpeedAngle = this.getEditorProperty("throttleSpeedAngle", this.throttleSpeedAngle);
            this.brakingSpeedAngle = this.getEditorProperty("brakingSpeedAngle", this.brakingSpeedAngle);
            this.skiddingSpeedAngle = this.getEditorProperty("skiddingSpeedAngle", this.skiddingSpeedAngle);
            this.throttleSpeedLimit = this.getEditorProperty("throttleSpeedLimit", this.throttleSpeedLimit);
            this.brakingSpeedLimit = this.getEditorProperty("brakingSpeedLimit", this.brakingSpeedLimit);
            this.skiddingSpeedLimit = this.getEditorProperty("skiddingSpeedLimit", this.skiddingSpeedLimit);
            this.minCircuitSpeed = this.getEditorProperty("minCircuitSpeed", this.minCircuitSpeed);
            this.maxCircuitSpeed = this.getEditorProperty("maxCircuitSpeed", this.maxCircuitSpeed);
            this.wanderingDistance = this.getEditorProperty("wanderingDistance", this.wanderingDistance);
            this.avoidOthersTimer = this.getEditorProperty("avoidOthersTimer", this.avoidOthersTimer);
            this.resetMovingTimeout = this.getEditorProperty("resetMovingTimeout", this.resetMovingTimeout);
            // ..
            if (this.throttleSensitivity <= 0)
                this.throttleSensitivity = 1;
            if (this.steeringSensitivity <= 0)
                this.steeringSensitivity = 1;
            if (this.brakingSensitivity <= 0)
                this.brakingSensitivity = 1;
            if (this.brakingMultiplier <= 0)
                this.brakingMultiplier = 6;
            if (this.wanderingDistance <= 0)
                this.wanderingDistance = 0.5;
            if (this.avoidOthersTimer <= 0)
                this.brakingMultiplier = 0.1;
            // ..
            const donutCameraLock = this.getEditorProperty("donutCameraLock");
            if (donutCameraLock != null)
                this.donutCameraLock = BABYLON.Utilities.ParseVector3(donutCameraLock);
            console.log("Donut Camera Lock: " + this.donutCameraLock);
        }
        // Public Properties
        getPlayerDeltaX() { return this.playerDeltaX; }
        ;
        getPlayerDeltaY() { return this.playerDeltaY; }
        ;
        getPlayerMouseX() { return this.playerMouseX; }
        ;
        getPlayerMouseY() { return this.playerMouseY; }
        ;
        getWaypointIndex() { return this.waypointIndex; }
        ;
        getChaseRabbitMesh() { return this.m_chaseRabbitMesh; }
        ;
        resetChaseRabbitMesh() {
            if (this.m_chaseRabbitMesh != null) {
                this.m_chaseRabbitMesh.position = this.transform.position.clone();
                this.m_chaseRabbitMesh.rotationQuaternion = this.transform.rotationQuaternion.clone();
            }
        }
        start() { this.initVehicleController(); }
        update() { this.updateVehicleController(); }
        destroy() { this.destroyVehicleController(); }
        //////////////////////////////////////////////////
        // Protected Character Movement State Functions //
        //////////////////////////////////////////////////
        initVehicleController() {
            // Get Rigidbody Physics
            this.m_rigidbodyPhysics = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this.m_rigidbodyPhysics != null) {
                this.m_rigidbodyPhysics.registerOnCollisionEnter((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    if (tag === "Vehicle") {
                        // TODO: Handle Any Rigid Body Contact Enter Events - ???
                        // console.warn(this.transform.name.toLocaleUpperCase() + " COLLISION ENTER: " + mesh.name + " ---> TAG: " + tag);
                    }
                });
                this.m_rigidbodyPhysics.registerOnCollisionStay((mesh) => {
                    if (mesh != null) {
                        const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                        if (tag === "Vehicle") {
                            // TODO: Handle Any Rigid Body Contact Stay Events - ???
                            // console.log(this.transform.name.toLocaleUpperCase() + " COLLISION STAY: " + mesh.name + " ---> TAG: " + tag);
                            // Update Avoidance Info
                            const otherTargetPosition = BABYLON.Utilities.InverseTransformPoint(this.transform, mesh.getAbsolutePosition());
                            const otherTargetAngle = Math.atan2(otherTargetPosition.x, otherTargetPosition.z) * BABYLON.System.Rad2Deg;
                            this.avoidancePath = (this.wanderingDistance * -Math.sign(otherTargetAngle));
                            this.avoidanceTime = (this.getGameTime() + this.avoidOthersTimer);
                        }
                    }
                });
                this.m_rigidbodyPhysics.registerOnCollisionExit((mesh) => {
                    if (mesh != null) {
                        const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                        if (tag === "Vehicle") {
                            // TODO: Handle Any Rigid Body Contact Exit Events - ???
                            // console.warn(this.transform.name.toLocaleUpperCase() + " COLLISION EXIT: " + mesh.name + " ---> TAG: " + tag);
                        }
                    }
                });
            }
            else {
                BABYLON.Tools.Warn("Null rigidbody physics for: " + this.transform.name);
            }
            // Get Standard Car Controller
            this.m_standardCarController = this.getComponent("PROJECT.StandardCarController");
            if (this.m_standardCarController != null) {
                this.m_standardCarController.playVehicleSounds = true;
                this.m_standardCarController.onUpdateVehicleInformation = (skid_FL, skid_FR, skid_RL, skid_RR) => {
                    // TODO: Support Donut Camera Mode
                };
            }
            else {
                BABYLON.Tools.Warn("Null standard car controller for: " + this.transform.name);
            }
            // TODO: Get Player Camera Transform
            if (this.attachCamera === true) {
                this.m_cameraTransform = BABYLON.SceneManager.GetTransformNode(this.scene, "Main Camera");
                if (this.m_cameraTransform != null)
                    BABYLON.Utilities.ValidateTransformQuaternion(this.m_cameraTransform);
            }
            // Get Test Circuit Waypoints
            const waypointsTransform = BABYLON.SceneManager.GetTransformNode(this.scene, "Waypoints");
            if (waypointsTransform != null) {
                const waypointManager = BABYLON.SceneManager.FindScriptComponent(waypointsTransform, "PROJECT.WaypointManager");
                if (waypointManager != null) {
                    this.waypointIndex = 0;
                    this.circuitSpeedLimit = this.maxCircuitSpeed;
                    this.drawRabbitTracker = waypointManager.drawTraces;
                    this.rabbitTrackerColor = waypointManager.traceColor;
                    this.m_circuitWaypoints = waypointManager.getSplineCurvePositions();
                }
            }
            // Sync Vehicle Chase Camera Position
            this.updateVehicleFollowCamera(this.followBehind, true);
            // const abstractMesh:BABYLON.AbstractMesh = this.getAbstractMesh();
            // if (abstractMesh != null) abstractMesh.physicsImpostor.registerAfterPhysicsStep((impostor:BABYLON.PhysicsImpostor)=>{ this.updateVehicleFollowCamera(this.followBehind, true); });
        }
        updateVehicleController() {
            if (this.useTriggerVolume === true) {
                if (this.m_triggerVolumeMesh == null) {
                    this.m_triggerVolumeMesh = BABYLON.MeshBuilder.CreateBox(this.transform.name + ".TriggerVolumer", { size: this.triggerVolumeSize.z, width: this.triggerVolumeSize.x, height: this.triggerVolumeSize.y }, this.scene);
                    this.m_triggerVolumeMesh.position.copyFrom(this.triggerVolumePos);
                    this.m_triggerVolumeMesh.rotationQuaternion = (this.transform.rotationQuaternion != null) ? this.transform.rotationQuaternion.clone() : new BABYLON.Quaternion(0, 0, 0, 1);
                    this.m_triggerVolumeMesh.checkCollisions = false;
                    this.m_triggerVolumeMesh.receiveShadows = false;
                    this.m_triggerVolumeMesh.visibility = 0.25;
                    this.m_triggerVolumeMesh.isVisible = false;
                    // ..
                    // Setup Trigger Volume Physics
                    // ..
                    const mass = 0.0, drag = 0.0, angular = 0.05, friction = 0.6, restitution = 0.0, kinematic = true, trigger = true;
                    BABYLON.Utilities.ValidateTransformMetadata(this.m_triggerVolumeMesh);
                    this.m_triggerVolumeMesh.metadata.unity.physics = BABYLON.RigidbodyPhysics.CreatePhysicsMetadata(mass, drag, angular, new BABYLON.Vector3(0, 0, 0));
                    this.m_triggerVolumeMesh.metadata.unity.collision = BABYLON.RigidbodyPhysics.CreateCollisionMetadata("BoxCollider", trigger, false, restitution, friction, friction);
                    const rigidbodyProps = BABYLON.RigidbodyPhysics.CreatePhysicsProperties(mass, drag, angular, true, kinematic);
                    BABYLON.RigidbodyPhysics.SetupPhysicsComponent(this.scene, this.m_triggerVolumeMesh);
                    const rigidbody = new BABYLON.RigidbodyPhysics(this.m_triggerVolumeMesh, this.scene, rigidbodyProps);
                    BABYLON.SceneManager.RegisterScriptComponent(rigidbody, true);
                    rigidbody.registerOnCollisionEnter((mesh) => {
                        if (this.useTriggerVolume === true && mesh.name !== this.transform.name) {
                            // TODO: Handle Any Trigger Volume Contact Enter Events - ???
                            // console.warn(this.transform.name.toLocaleUpperCase() + " TRIGGER VOL COLLISION ENTER: " + mesh.name);
                        }
                    });
                    rigidbody.registerOnCollisionStay((mesh) => {
                        if (this.useTriggerVolume === true && mesh.name !== this.transform.name) {
                            // TODO: Handle Any Trigger Volume Contact Stay Events - ???
                            // console.log(this.transform.name.toLocaleUpperCase() + " TRIGGER VOL COLLISION STAY: " + mesh.name);
                        }
                    });
                    rigidbody.registerOnCollisionExit((mesh) => {
                        if (this.useTriggerVolume === true && mesh.name !== this.transform.name) {
                            // TODO: Handle Any Trigger Volume Contact Exit Events - ???
                            // console.warn(this.transform.name.toLocaleUpperCase() + " TRIGGER VOL COLLISION EXIT: " + mesh.name);
                        }
                    });
                }
                // ..
                // Update Trigger Volume Position And Rotation
                // ..
                if (this.m_triggerVolumeMesh != null) {
                    if (this.m_triggerVolumeMesh.isVisible === true && this.showTriggerVolume === false) {
                        this.m_triggerVolumeMesh.isVisible = false;
                    }
                    if (this.m_triggerVolumeMesh.isVisible === false && this.showTriggerVolume === true) {
                        this.m_triggerVolumeMesh.isVisible = true;
                    }
                    this.m_triggerVolumeMesh.position.copyFrom(this.transform.position);
                    this.m_triggerVolumeMesh.position.addInPlace(this.triggerVolumePos);
                    if (this.transform.rotationQuaternion != null) {
                        if (this.m_triggerVolumeMesh.rotationQuaternion == null) {
                            this.m_triggerVolumeMesh.rotationQuaternion = this.transform.rotationQuaternion.clone();
                        }
                        else {
                            this.m_triggerVolumeMesh.rotationQuaternion.copyFrom(this.transform.rotationQuaternion);
                        }
                    }
                }
            }
            // ..
            // Update Standard Car Controller Drive Input
            // ..
            if (this.enableInput === true) {
                if (this.playerNumber === 0) {
                    this.updateAutoPilotDrive();
                }
                else {
                    this.updateManualInputDrive();
                }
            }
            this.updateVehicleFollowCamera(this.followBehind, true);
        }
        updateManualInputDrive() {
            if (this.m_standardCarController != null) {
                this.playerDeltaX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Horizontal, this.playerNumber);
                this.playerDeltaY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.Vertical, this.playerNumber);
                this.playerMouseX = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseX, this.playerNumber);
                this.playerMouseY = BABYLON.SceneManager.GetUserInput(BABYLON.UserInputAxis.MouseY, this.playerNumber);
                // Check Dead Stick
                if (Math.abs(this.playerDeltaX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerDeltaX = 0;
                if (Math.abs(this.playerDeltaY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerDeltaY = 0;
                if (Math.abs(this.playerMouseX) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerMouseX = 0;
                if (Math.abs(this.playerMouseY) <= BABYLON.UserInputOptions.GamepadDeadStickValue)
                    this.playerMouseY = 0;
                // Get Button Triggers
                const auxForwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.auxKeyboardForawrd); // Player One Only
                const forwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardForawrd); // Player One Only
                const forwardTrigger = BABYLON.SceneManager.GetGamepadTriggerInput(this.triggerForward, this.playerNumber);
                const auxBackwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.auxKeyboardBackwards); // Player One Only
                const backwardKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardBackwards); // Player One Only
                const backwardTrigger = BABYLON.SceneManager.GetGamepadTriggerInput(this.triggerBackwards, this.playerNumber);
                const handbrakeKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardHandbrake); // Player One Only
                const handbrakeButton = BABYLON.SceneManager.GetGamepadButtonInput(this.buttonHandbrake, this.playerNumber);
                const donutsKeyboard = BABYLON.SceneManager.GetKeyboardInput(this.keyboardDonuts); // Player One Only
                const donutsButton = BABYLON.SceneManager.GetGamepadButtonInput(this.buttonDonuts, this.playerNumber);
                // Reset Player Movement
                let playerMovement = 0;
                let playerSteering = 0;
                let playerHandbrake = false;
                let playerDonuts = false;
                let playerAssisted = this.assistedSteering;
                // Primary Accelerattion
                if (forwardTrigger > 0.2)
                    playerMovement = forwardTrigger;
                else if (this.playerNumber === BABYLON.PlayerNumber.One && (forwardKeyboard === true || auxForwardKeyboard === true))
                    playerMovement = 1;
                // Braking Takes Precedence
                if (backwardTrigger > 0.2)
                    playerMovement = -backwardTrigger;
                else if (this.playerNumber === BABYLON.PlayerNumber.One && (backwardKeyboard === true || auxBackwardKeyboard === true))
                    playerMovement = -1;
                // Includes AD And Arrow Keys
                playerSteering = this.playerDeltaX;
                // Pull Hard Hand Brake Lever
                playerHandbrake = (handbrakeKeyboard === true || handbrakeButton === true);
                // Pull Hard Hand Donut Lever
                playerDonuts = (donutsKeyboard === true || donutsButton === true);
                // Drive Standard Car Controller
                this.m_standardCarController.throttleEngineSpeed = 0;
                this.m_standardCarController.drive(playerMovement, playerSteering, playerHandbrake, playerDonuts, playerAssisted);
            }
        }
        updateAutoPilotDrive() {
            const gameTime = this.getGameTime();
            if (this.m_chaseRabbitMesh == null) {
                this.m_chaseRabbitMesh = BABYLON.MeshBuilder.CreateSphere(this.transform.name + ".Rabbit", { segments: 24, diameter: 2 }, this.scene);
                this.m_chaseRabbitMesh.checkCollisions = false;
                this.m_chaseRabbitMesh.receiveShadows = false;
                this.m_chaseRabbitMesh.visibility = 0.5;
                this.m_chaseRabbitMesh.isVisible = false;
                this.resetChaseRabbitMesh();
            }
            if (this.m_chaseRabbitMesh != null) {
                if (this.m_chaseRabbitMesh.isVisible === true && this.showRabbitChasing === false) {
                    this.m_chaseRabbitMesh.isVisible = false;
                }
                if (this.m_chaseRabbitMesh.isVisible === false && this.showRabbitChasing === true) {
                    this.m_chaseRabbitMesh.isVisible = true;
                }
            }
            if (this.m_standardCarController != null) {
                if (this.m_standardCarController.getAbsoluteSpeed() >= 1) {
                    this.lastMovementTime = gameTime;
                }
            }
            /* TODO: CarAIControl.cs (Standard Assets)
            // if are we currently taking evasive action to prevent being stuck against another car:
            if (Time.time < m_AvoidOtherCarTime)
            {
                // slow down if necessary (if we were behind the other car when collision occured)
                desiredSpeed *= m_AvoidOtherCarSlowdown;

                // and veer towards the side of our path-to-target that is away from the other car
                offsetTargetPos += m_Target.right*m_AvoidPathOffset;
            }
            else
            {
                // no need for evasive action, we can just wander across the path-to-target in a random way,
                // which can help prevent AI from seeming too uniform and robotic in their driving
                offsetTargetPos += m_Target.right*
                                    (Mathf.PerlinNoise(Time.time*m_LateralWanderSpeed, m_RandomPerlin)*2 - 1)*
                                    m_LateralWanderDistance;
            }
            */
            // TODO: Update Speed Throttle On Navigation Point Change And NOT On Individual Spline Waypoint Change - ???
            // this.circuitSpeedLimit = BABYLON.Scalar.Lerp(this.minCircuitSpeed, this.maxCircuitSpeed, Math.random());
            if (this.m_standardCarController != null && this.m_circuitWaypoints != null && this.m_chaseRabbitMesh != null) {
                const waypointPosition = this.m_circuitWaypoints[this.waypointIndex];
                const transformPosition = this.transform.getAbsolutePosition();
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // UPDATE CHASE RABBIT - Walk Spline Waypoint Positions
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                const rabbitPosition = this.m_chaseRabbitMesh.getAbsolutePosition();
                const rabbitDistance = BABYLON.Vector3.Distance(transformPosition, rabbitPosition);
                if (rabbitDistance <= this.driverLookAhead) {
                    this.m_chaseRabbitMesh.lookAt(waypointPosition);
                    this.m_chaseRabbitMesh.translate(BABYLON.Axis.Z, this.chaseRabbitSpeed);
                }
                /* MOVE FOR TESTING
                if (this.drawRabbitTracker === true) {
                    const trackVehiclePosition:BABYLON.Vector3 = new BABYLON.Vector3(transformPosition.x, (transformPosition.y + 0.5), transformPosition.z);
                    const trackRabbitPosition:BABYLON.Vector3 = new BABYLON.Vector3(rabbitPosition.x, (rabbitPosition.y + 0.25), rabbitPosition.z);
                    const mypoints:BABYLON.Vector3[] = [];
                    mypoints.push(trackVehiclePosition);
                    mypoints.push(trackRabbitPosition);
                    if (this.rabbitTrackerLine == null) {
                        this.rabbitTrackerLine = BABYLON.MeshBuilder.CreateLines((this.transform.name + ".TrackingLine"), { points: mypoints, updatable:true, }, this.scene);
                        this.rabbitTrackerLine.color = this.rabbitTrackerColor;
                    } else {
                        this.rabbitTrackerLine = BABYLON.MeshBuilder.CreateLines((this.transform.name + ".TrackingLine"), { points: mypoints, instance: this.rabbitTrackerLine }, this.scene);
                    }
                    //console.log("Tracking Rabbit: " + trackVehiclePosition + " ---> " + trackRabbitPosition);
                }
                */
                const waypointDistance = BABYLON.Vector3.Distance(rabbitPosition, waypointPosition);
                if (waypointDistance <= this.waypointThreashold) {
                    this.waypointIndex++;
                    if (this.waypointIndex >= this.m_circuitWaypoints.length) {
                        this.waypointIndex = 0;
                    }
                }
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                BABYLON.Utilities.InverseTransformPointToRef(this.transform, rabbitPosition, this.localTargetPosition);
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                this.avoidanceTime = 0;
                this.avoidancePath = 0;
                /* WORK-IN-PROGRESS
                if (this.avoidanceTime > 0 && this.avoidancePath !== 0) {
                    const avoidCheckTime:number = (gameTime - this.avoidanceTime)
                    if (avoidCheckTime <= this.avoidOthersTimer) {
                        BABYLON.Utilities.InverseTransformPointToRef(this.transform, rabbitPosition, this.localTargetPosition);
                        //this.m_chaseRabbitMesh.right.scaleToRef(this.avoidancePath, this.localTargetAvoidance); // BUG: VECTOR3 SCALE TO REF DOES NOT WORK - ???
                        this.localTargetAvoidance = this.m_chaseRabbitMesh.right.scale(this.avoidancePath);
                        this.localTargetPosition.multiplyInPlace(this.localTargetAvoidance);
                        //console.log(this.transform.name.toUpperCase() + " - AUTO AVOIDANCE PATH: " + this.avoidancePath.toFixed(2));
                    } else {
                        this.avoidanceTime = 0;
                        this.avoidancePath = 0;
                        BABYLON.Utilities.InverseTransformPointToRef(this.transform, rabbitPosition, this.localTargetPosition);
                        //console.warn(this.transform.name.toUpperCase() + " - RESET AVOIDANCE PATH: " + this.avoidancePath.toFixed(2));
                    }
                } else {
                    this.avoidanceTime = 0;
                    this.avoidancePath = 0;
                    BABYLON.Utilities.InverseTransformPointToRef(this.transform, rabbitPosition, this.localTargetPosition);
                }
                */
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                // TODO: Reset Stuck Movement
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                if (gameTime > (this.lastMovementTime + this.resetMovingTimeout)) {
                    //const localWaypointTrn:BABYLON.TransformNode = (this.transform.parent != null) ? this.transform.parent as BABYLON.TransformNode : this.transform
                    //const localWaypointPos:BABYLON.Vector3 = BABYLON.Utilities.InverseTransformPoint(localWaypointTrn, waypointPosition);
                    //const localWaypointPos:BABYLON.Vector3 = transformPosition.clone();
                    //localWaypointPos.multiplyInPlace(BABYLON.Vector3.Up().scale(0.25));
                    //this.transform.position.copyFrom(localWaypointPos);
                    // TODO: FIXME - Reset To Waypoint Global Position
                    // this.transform.position.y += 0.25;
                    // console.log(this.transform.name.toUpperCase() + " - RESET WAYPOINT POS: " + transformPosition.toString());
                }
                ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                const localTargetAngle = Math.atan2(this.localTargetPosition.x, this.localTargetPosition.z) * BABYLON.System.Rad2Deg;
                const normalizeSpeed = this.m_standardCarController.getNormalizedSpeed();
                const americanSpeed = this.m_standardCarController.getAmericanSpeed();
                //const forwardSpeed:number = this.m_standardCarController.getForwardSpeed();
                const cornerAngle = BABYLON.Scalar.Clamp(Math.abs(localTargetAngle), 0, 90);
                const cornerFactor = cornerAngle / 90;
                // ..
                // Update Vehicle Driving
                // ..
                let skidding = false;
                let braking = 0;
                let throttle = (1.0 * this.throttleSensitivity);
                // PENNY: let steering:number = (BABYLON.Scalar.Clamp(((localTargetAngle * this.steeringSensitivity) * 0.2), -1, 1) * Math.sign(forwardSpeed));
                let steering = BABYLON.Scalar.Clamp(((this.localTargetPosition.x / this.localTargetPosition.length()) * this.steeringSensitivity), -1, 1);
                //console.log(this.transform.name.toUpperCase() + " - NEW STEER: " + steering.toFixed(2) + " TO ANGLE: " + cornerAngle.toFixed(2));
                // TODO: CarAIControl.cs (Standard Assets)
                // add acceleration 'wander', which also prevents AI from seeming too uniform and robotic in their driving
                // i.e. increasing the accel wander amount can introduce jostling and bumps between AI cars in a race
                // accel *= (1 - m_AccelWanderAmount) + (Mathf.PerlinNoise(Time.time*m_AccelWanderSpeed, m_RandomPerlin)*m_AccelWanderAmount);
                if (this.throttleSpeedAngle > 0) {
                    if (cornerAngle >= this.throttleSpeedAngle && americanSpeed >= this.throttleSpeedLimit) {
                        throttle = BABYLON.Scalar.Lerp(0, (1.0 * this.throttleSensitivity), (1 - cornerFactor));
                        //console.log(this.transform.name.toUpperCase() + " - LERP THROTTLE: " + throttle.toFixed(2) + " AT ANGLE: " + cornerAngle.toFixed(2));
                    }
                }
                if (this.brakingSpeedAngle > 0) {
                    if (cornerAngle >= this.brakingSpeedAngle && americanSpeed >= this.brakingSpeedLimit) {
                        braking = BABYLON.Scalar.Lerp(0, (1 + normalizeSpeed), cornerFactor);
                        braking *= (this.brakingSensitivity * this.brakingMultiplier);
                        braking = BABYLON.Scalar.Clamp(braking, 0, 1);
                        //console.log(this.transform.name.toUpperCase() + " - AUTO BRAKING: " + braking.toFixed(2) + " AT ANGLE: " + cornerAngle.toFixed(2));
                    }
                }
                if (this.skiddingSpeedAngle > 0) {
                    if (cornerAngle >= this.skiddingSpeedAngle && americanSpeed >= this.skiddingSpeedLimit) {
                        //skidding = true;
                        //console.log(this.transform.name.toUpperCase() + " - AUTO SKIDDING: " + braking.toFixed(2) + " AT ANGLE: " + cornerAngle.toFixed(2));
                    }
                }
                if (braking > 0) {
                    throttle = (-braking);
                    //console.log(this.transform.name.toUpperCase() + " - BRAKING: " + braking.toFixed(2) + " AT ANGLE: " + cornerAngle.toFixed(2));
                }
                this.m_standardCarController.throttleEngineSpeed = this.circuitSpeedLimit;
                this.m_standardCarController.drive(throttle, steering, false, false, false);
            }
        }
        updateVehicleFollowCamera(follow, look) {
            if (this.enableInput === true) {
                if (this.attachCamera === true && this.m_cameraTransform != null && this.m_rigidbodyPhysics != null) {
                    const deltaTime = this.getDeltaSeconds();
                    this.m_rigidbodyPhysics.getTransformPositionToRef(this.targetPosition);
                    this.m_rigidbodyPhysics.getTransformRotationToRef(this.targetRotation);
                    if (follow === true) {
                        BABYLON.Utilities.ToEulerToRef(this.targetRotation, this.targetAngles);
                        BABYLON.Utilities.ToEulerToRef(this.m_cameraTransform.rotationQuaternion, this.transformAngles);
                        let wantedRotationAngle = this.targetAngles.y;
                        let wantedHeight = this.targetPosition.y + this.followHeight;
                        let currentRotationAngle = this.transformAngles.y;
                        let currentHeight = this.m_cameraTransform.position.y;
                        currentRotationAngle = BABYLON.Scalar.LerpAngle(currentRotationAngle, wantedRotationAngle, this.rotationDamping * deltaTime);
                        currentHeight = BABYLON.Scalar.Lerp(currentHeight, wantedHeight, this.heightDamping * deltaTime);
                        BABYLON.Utilities.FromEulerToRef(0, currentRotationAngle, 0, this.rotationBuffer);
                        BABYLON.Utilities.MultiplyQuaternionByVectorToRef(this.rotationBuffer, BABYLON.Vector3.Forward(), this.tempRotationBuffer);
                        this.tempRotationBuffer.scaleInPlace(this.followDistance);
                        this.positionBuffer.copyFrom(this.targetPosition);
                        this.positionBuffer.subtractInPlace(this.tempRotationBuffer);
                        // TODO: LERP 90 Percent - ???
                        this.m_cameraTransform.position.set(this.positionBuffer.x, (currentHeight + this.heightOffset), this.positionBuffer.z);
                    }
                    if (look === true) {
                        // TODO: LERP 90 Percent - ???
                        this.m_cameraTransform.lookAt(this.targetPosition);
                    }
                }
            }
        }
        destroyVehicleController() {
            this.targetAngles = null;
            this.targetPosition = null;
            this.targetRotation = null;
            this.transformAngles = null;
            this.positionBuffer = null;
            this.rotationBuffer = null;
            this.tempRotationBuffer = null;
            this.m_cameraTransform = null;
            this.m_circuitWaypoints = null;
            this.m_rigidbodyPhysics = null;
            if (this.m_chaseRabbitMesh != null) {
                this.m_chaseRabbitMesh.dispose();
                this.m_chaseRabbitMesh = null;
            }
            this.m_standardCarController = null;
            if (this.m_triggerVolumeMesh != null) {
                this.m_triggerVolumeMesh.dispose();
                this.m_triggerVolumeMesh = null;
            }
        }
    }
    PROJECT.VehicleInputController = VehicleInputController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class ItemRotator
     */
    class ItemRotator extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.rotateSpeed = 1.0;
            this.rotateSpeed = this.getEditorProperty("rotateSpeed", this.rotateSpeed);
        }
        start() {
            console.log("===> Starting item rotator for: " + this.transform.name);
        }
        update() {
            const delta = this.getDeltaSeconds();
            this.transform.addRotation(0, (this.rotateSpeed * delta), 0);
        }
        destroy() {
            console.log("===> Destroying item rotator for: " + this.transform.name);
        }
    }
    PROJECT.ItemRotator = ItemRotator;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestAnimation
     */
    class TestAnimation extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            //private animator:BABYLON.AnimationState = null;
            this.animator = null;
        }
        start() {
            console.log("===> Starting animation test for: " + this.transform.name);
            this.animator = this.getComponent("BABYLON.AnimationState");
            if (this.animator == null) {
                BABYLON.Tools.Warn("Failed to get animation state component: " + this.transform.name);
            }
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.TestAnimation = TestAnimation;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class TestCenter
    */
    class TestCenter extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
        }
        start() {
            // Start render loop function
            const rb = this.getComponent("BABYLON.RigidbodyPhysics");
            console.warn("### FINAL COM ###");
            console.log(rb.centerOfMass);
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.TestCenter = TestCenter;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestCollision
     */
    class TestCollision extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.rigidbody = null;
        }
        start() {
            // Start render loop function
            console.log("Test collision for: " + this.transform.name);
            this.rigidbody = this.getComponent("BABYLON.RigidbodyPhysics");
            if (this.rigidbody != null) {
                this.rigidbody.registerOnCollisionEnter((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    console.log("###: " + this.transform.name + ": Begin Contact With: " + mesh.name);
                });
                this.rigidbody.registerOnCollisionStay((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    //console.log("###: " + this.transform.name + ": Update Contact With: " + mesh.name);
                });
                this.rigidbody.registerOnCollisionExit((mesh) => {
                    const tag = BABYLON.SceneManager.GetTransformTag(mesh);
                    console.warn("###: " + this.transform.name + ": End Contact With: " + mesh.name);
                });
            }
            else {
                console.warn("Failed to locate rigidbody component for: " + this.transform.name);
            }
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.TestCollision = TestCollision;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
     * Babylon Script Component
     * @class TestController
     */
    class TestController extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
            this.testTexture = null;
            this.m_physicsWorld = null;
            this.m_physicsEngine = null;
            this.ran = false;
            this.testTexture = this.getEditorProperty("testTexture", this.testTexture);
        }
        start() {
            return __awaiter(this, void 0, void 0, function* () {
                // Start render loop function
                console.log("===> Starting test controller...");
                this.m_physicsWorld = BABYLON.SceneManager.GetPhysicsWorld(this.scene);
                this.m_physicsEngine = BABYLON.SceneManager.GetPhysicsEngine(this.scene);
                /*
                const mass:number = 1.0, drag:number = 0.0, angular:number = 0.05;
                const cubeTest:BABYLON.AbstractMesh = BABYLON.MeshBuilder.CreateBox("TesterCube1", { size: 1 }, this.scene);
                BABYLON.Utilities.ValidateTransformMetadata(cubeTest);
                cubeTest.position.set(0, 2.5, 125);
                cubeTest.metadata.unity.physics = BABYLON.RigidbodyPhysics.CreatePhysicsMetadata(mass, drag, angular, new BABYLON.Vector3(0,0,0));
                cubeTest.metadata.unity.collision = BABYLON.RigidbodyPhysics.CreateCollisionMetadata("BoxCollider", false, false, 0.0, 0.6, 0.6);
                
                const rigidbodyProps:any = BABYLON.RigidbodyPhysics.CreatePhysicsProperties(mass, drag, angular, true, false);
                BABYLON.RigidbodyPhysics.SetupPhysicsComponent(this.scene, cubeTest);
                BABYLON.SceneManager.RegisterScriptComponent(new BABYLON.RigidbodyPhysics(cubeTest, this.scene, rigidbodyProps), true);
                console.log(cubeTest);
                */
                /*
                console.log("===> Test Texture");
                console.log(this.testTexture);
                const babylonTexture:BABYLON.Texture = BABYLON.Utilities.ParseTexture(this.testTexture, this.scene);
                console.log(babylonTexture);
                const testProjector:BABYLON.AbstractMesh = BABYLON.SceneManager.GetAbstractMesh(this.scene, "TestProjector");
                console.warn("*** FOUND TEST PROJECTOR ***");
                console.log(testProjector);
                let angle:number = Math.PI / 3;
                let light = new BABYLON.SpotLight(
                    "Light",
                    testProjector.position.clone(),
                    new BABYLON.Vector3(0, -1, 0),
                    angle,
                    1,
                    this.scene
                );
                light.diffuse.copyFromFloats(1, 1, 1);
                light.specular.copyFromFloats(0.01, 0.01, 0.01);
                light.intensity = 50;
                light.projectionTexture = babylonTexture;
                //let dynTexture = new BABYLON.DynamicTexture("Texture", {width: 512, height: 512}, this.scene, true);
                //dynTexture.drawText("TEST", 80, 256, "bold 100px Arial", "white", "black", true, true);
                //light.projectionTexture = dynTexture;
                */
                //BABYLON.SceneLoader.ImportMesh("", "scenes/", "ABot.babylon", this.scene, function (newMeshes:BABYLON.AbstractMesh[]) {
                //    console.warn("*** LOADED NEW MESHES ***");
                //    console.log(newMeshes);
                //});
                //var pm:BABYLON.PBRMaterial;
                //var sm:BABYLON.StandardMaterial;
                /*
                console.log("===> Create test prefabs...");
                const root:BABYLON.TransformNode = BABYLON.SceneManager.GetMesh(this.scene, "__root__");
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Remy 1", "New Remy 1", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Remy 2", "New Remy 2", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Cube 1", "New Cube 1", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Cube 2", "New Cube 2", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Sphere 1", "New Sphere 1", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Sphere 2", "New Sphere 2", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Capsule 1", "New Capsule 1", root);
                BABYLON.SceneManager.InstantiatePrefab(this.scene, "Capsule 2", "New Capsule 2", root);
                */
                // Import authored scene
                //var newMeshes = (await BABYLON.SceneLoader.ImportMeshAsync("", "https://mackeyk24.github.io/temp/TestPhysics.glb", "", this.scene)).meshes;
                //console.warn("WTF: That Worked");
                //console.log(newMeshes);
                // Load Test Remy Meshes
                //BABYLON.SceneLoader.ImportMesh("", "scenes/", "Remy.gltf", this.scene, function (newMeshes:BABYLON.AbstractMesh[]) {
                //    console.warn("*** LOADED NEW MESHES ***");
                //    console.log(newMeshes);
                //});       
                //let box = BABYLON.Mesh.CreateBox("Test Box", 1, this.scene);
                //box.position.x += 2;
                //box.position.y += 2;
                /*
                var font_names:string[] = ["Arial", "Helvetica", "Sans-Serif", "ComicSans", "Jura", "HirukoPro-Book", "WebGL-Dings"];
                var line_height:number = 1;
                var upper_offset:number = (line_height * -1.0);
                var middle_offset:number = (line_height * -0.33);
                var lower_offset:number = (line_height * 0.25);
                var y_position:number = upper_offset;
                var z_position:number = 0;
                
                var wnd:any = window;
                var Writer = wnd.BABYLON.MeshWriter(this.scene, {scale: 1.0});
                var text1  = new Writer("Hello World", {
                        "anchor": "left",
                        "font-family" : "Arial",
                        "letter-height": line_height,
                        "letter-thickness": 0.01,
                        "position" : {
                            "y" : y_position,
                            "z" : z_position
                        },
                        "alpha" : 1,
                        "colors" : {
                            "diffuse": "#F0F0F0",
                            "ambient" : "#F0F0F0",
                            "specular" : "#000000",
                            "emissive": "#808080",
                        }
                    }
                );
                var np:BABYLON.AbstractMesh = BABYLON.SceneManager.GetMesh(this.scene, "New Text");
                var mx:BABYLON.AbstractMesh = text1.getMesh();
                mx.rotation = new BABYLON.Vector3(-Math.PI/2, Math.PI/2, -Math.PI/2);
                mx.parent = np;
                */
            });
        }
        update() {
            // Update render loop function
            // const num_manifolds:number = this.m_physicsWorld.getBroadphase().getOverlappingPairCache().getNumOverlappingPairs();
            //const num_manifolds:number = this.m_physicsWorld.getDispatcher().getNumManifolds();
            //const msg = "Total Overlapping Paris: " + num_manifolds;
            //BABYLON.Utilities.PrintToScreen(msg);   
            // Test Running Loop
            //if (this.ran === false) {
            //    this.ran = true;
            //    
            //}
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.TestController = TestController;
})(PROJECT || (PROJECT = {}));
var PROJECT;
(function (PROJECT) {
    /**
    * Babylon Script Component
    * @class WTFComp
    */
    class WTFComp extends BABYLON.ScriptComponent {
        constructor(transform, scene, properties = {}) {
            super(transform, scene, properties);
        }
        start() {
            // Start render loop function
        }
        update() {
            // Update render loop function
        }
        after() {
            // After render loop function
        }
        destroy() {
            // Destroy component function
        }
    }
    PROJECT.WTFComp = WTFComp;
})(PROJECT || (PROJECT = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFieWxvblBsYXlncm91bmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L0RlYnVnL0RlYnVnSW5mb3JtYXRpb24udHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1BoeXNpY3MvU29mdGJvZHlNZXNoLnRzIiwiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9QbGF5ZXJzL0ZpcnN0UGVyc29uQ29udHJvbGxlci50cyIsIi4uL0Fzc2V0cy9CYWJ5bG9uL1tQcm9dL0NvbnRlbnQvUGxheWVycy9UaGlyZFBlcnNvbkNvbnRyb2xsZXIudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1RhcmdldC9TbW9vdGhGb2xsb3dUYXJnZXQudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1RhcmdldC9XYXlwb2ludE1hbmFnZXIudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1ZlaGljbGUvUGFpbnRzaG9wTWFuYWdlci50cyIsIi4uL0Fzc2V0cy9CYWJ5bG9uL1tQcm9dL0NvbnRlbnQvVmVoaWNsZS9Ta2lkbWFya01hbmFnZXIudHMiLCIuLi9Bc3NldHMvQmFieWxvbi9bUHJvXS9Db250ZW50L1ZlaGljbGUvU3RhbmRhcmRDYXJDb250cm9sbGVyLnRzIiwiLi4vQXNzZXRzL0JhYnlsb24vW1Byb10vQ29udGVudC9WZWhpY2xlL1ZlaGljbGVJbnB1dENvbnRyb2xsZXIudHMiLCIuLi9Bc3NldHMvU2NyaXB0cy9JdGVtUm90YXRvci50cyIsIi4uL0Fzc2V0cy9TY3JpcHRzL1Rlc3RBbmltYXRpb24udHMiLCIuLi9Bc3NldHMvU2NyaXB0cy9UZXN0Q2VudGVyLnRzIiwiLi4vQXNzZXRzL1NjcmlwdHMvVGVzdENvbGxpc2lvbi50cyIsIi4uL0Fzc2V0cy9TY3JpcHRzL1Rlc3RDb250cm9sbGVyLnRzIiwiLi4vQXNzZXRzL1Njcmlw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QyxDQUFDLENBQUM7WUFDN0QsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25FLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxLQUFLLEdBQUcsZUFBZSxDQUFDLGFBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDN0QsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25FLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRSxLQUFLLEdBQUcsZUFBZSxDQUFDLGFBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDN0QsZUFBZSxDQUFDLG1CQUFtQixDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ25FLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENB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WUFBbUIsU0FBZ0MsRUFBRSxLQUFvQixFQUFFLGFBQWtCLEVBQUU7WUFDM0YsS0FBSyxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVTLEtBQUs7WUFDWCw2QkFBNkI7UUFDakMsQ0FBQztRQUVTLE1BQU07WUFDWiw4QkFBOEI7UUFDbEMsQ0FBQztRQUVTLEtBQUs7WUFDWCw2QkFBNkI7UUFDakMsQ0FBQztRQUVTLE9BQU87WUFDYiw2QkFBNkI7UUFDakMsQ0FBQztLQUNKO0lBcEJZLGVBQU8sVUFvQm5CLENBQUE7QUFDTCxDQUFDLEVBMUJNLE9BQU8sS0FBUCxPQUFPLFFBMEJiIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICAqIEBjbGFzcyBEZWJ1Z0luZm9ybWF0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIERlYnVnSW5mb3JtYXRpb24gZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUga2V5czpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHJpdmF0ZSBzaG93OmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICBwcml2YXRlIHBvcHVwOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSB2aWV3czpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgeGJveDpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMua2V5cyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJlbmFibGVEZWJ1Z0tleXNcIiwgdGhpcy5rZXlzKTtcbiAgICAgICAgICAgIHRoaXMuc2hvdyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzaG93RGVidWdMYWJlbHNcIiwgdGhpcy5zaG93KTtcbiAgICAgICAgICAgIHRoaXMucG9wdXAgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicG9wdXBEZWJ1Z1BhbmVsXCIsIHRoaXMucG9wdXApO1xuICAgICAgICAgICAgdGhpcy52aWV3cyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0b2dnbGVQbGF5ZXJWaWV3c1wiLCB0aGlzLnZpZXdzKTtcbiAgICAgICAgICAgIHRoaXMueGJveCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhbGxvd1hib3hMaXZlU2lnbkluXCIsIHRoaXMueGJveCk7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgaWYgKEJBQllMT04uU2NlbmVNYW5hZ2VyLklzV2luZG93cygpKSB0aGlzLnBvcHVwID0gZmFsc2U7XG4gICAgICAgICAgICBCQUJZTE9OLlRvb2xzLkxvZyhcIkRlYnVnIGluZm9ybWF0aW9uIG92ZXJsYXkgbG9hZGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCkgOnZvaWQge1xuICAgICAgICAgICAgLy90aGlzLnNjcmVlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NyZWVuXCIpO1xuICAgICAgICAgICAgLy90aGlzLnRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9nZ2xlXCIpO1xuICAgICAgICAgICAgLy90aGlzLnNpZ25pbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lnbmluXCIpO1xuICAgICAgICAgICAgLy90aGlzLnJlbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVsb2FkXCIpO1xuICAgICAgICAgICAgLy90aGlzLm1vdXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb3VzZVwiKTtcbiAgICAgICAgICAgIC8vdGhpcy5kZWJ1ZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWdcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5rZXlzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQkFCWUxPTi5TY2VuZU1hbmFnZXIuSXNYYm94T25lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjcmVlbikgdGhpcy5zY3JlZW4uaW5uZXJIVE1MID0gXCJGIC0gU2hvdyBGdWxsIFNjcmVlblwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChCQUJZTE9OLkNhbWVyYVN5c3RlbS5Jc011bHRpUGxheWVyVmlldygpICYmIHRoaXMudmlld3MgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvZ2dsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCQUJZTE9OLlNjZW5lTWFuYWdlci5Jc1hib3hPbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZS5zdHlsZS50b3AgPSBcIjI5cHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGUuaW5uZXJIVE1MID0gXCIxIC0gNCBUb2dnbGUgUGxheWVyIFZpZXdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoQkFCWUxPTi5TY2VuZU1hbmFnZXIuSXNYYm94TGl2ZVBsdWdpbkVuYWJsZWQoKSAmJiB0aGlzLnhib3ggPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpZ25pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChCQUJZTE9OLlNjZW5lTWFuYWdlci5Jc1hib3hPbmUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25pbi5zdHlsZS50b3AgPSBcIjQ5cHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduaW4uaW5uZXJIVE1MID0gXCJYIC0gWGJveCBMaXZlIFNpZ24gSW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3VzZSkgdGhpcy5tb3VzZS5pbm5lckhUTUwgPSAoQkFCWUxPTi5TY2VuZU1hbmFnZXIuSXNYYm94T25lKCkpID8gXCJNIC0gTW91c2VcIiA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbG9hZCkgdGhpcy5yZWxvYWQuaW5uZXJIVE1MID0gXCJSIC0gUmVsb2FkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnKSB0aGlzLmRlYnVnLmlubmVySFRNTCA9IFwiUCAtIERlYnVnXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5rZXlzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld3MgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbmFibGUgTXVsdGlwbGF5ZXIgS2V5c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5Lk51bTEsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlVuaXZlcnNhbENhbWVyYVN5c3RlbS5TZXRNdWx0aVBsYXllclZpZXdMYXlvdXQodGhpcy5zY2VuZSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIjEgcGxheWVyIHByZXNzZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuTnVtMiwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVW5pdmVyc2FsQ2FtZXJhU3lzdGVtLlNldE11bHRpUGxheWVyVmlld0xheW91dCh0aGlzLnNjZW5lLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMiBwbGF5ZXJzIHByZXNzZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuTnVtMywgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVW5pdmVyc2FsQ2FtZXJhU3lzdGVtLlNldE11bHRpUGxheWVyVmlld0xheW91dCh0aGlzLnNjZW5lLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiMyBwbGF5ZXJzIHByZXNzZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuTnVtNCwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVW5pdmVyc2FsQ2FtZXJhU3lzdGVtLlNldE11bHRpUGxheWVyVmlld0xheW91dCh0aGlzLnNjZW5lLCA0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiNCBwbGF5ZXJzIHByZXNzZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuUiwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLk9uS2V5Ym9hcmRQcmVzcyhCQUJZTE9OLlVzZXJJbnB1dEtleS5JLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3B1cCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuUG9wdXBEZWJ1Zyh0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLlRvZ2dsZURlYnVnKHRoaXMuc2NlbmUsIHRydWUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKEJBQllMT04uU2NlbmVNYW5hZ2VyLklzWGJveE9uZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IuZ2FtZXBhZElucHV0RW11bGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5PbktleWJvYXJkUHJlc3MoQkFCWUxPTi5Vc2VySW5wdXRLZXkuTSwgKCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLmdhbWVwYWRJbnB1dEVtdWxhdGlvbiAhPT0gXCJtb3VzZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nYW1lcGFkSW5wdXRFbXVsYXRpb24gPSBcIm1vdXNlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmdhbWVwYWRJbnB1dEVtdWxhdGlvbiA9IFwiZ2FtZXBhZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuT25LZXlib2FyZFByZXNzKEJBQllMT04uVXNlcklucHV0S2V5LkYsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0JBQllMT04uVG9vbHMuUmVxdWVzdEZ1bGxzY3JlZW4oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZ2V0RW5naW5lKCkuZW50ZXJGdWxsc2NyZWVuKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKEJBQllMT04uV2luZG93c1BsYXRmb3JtLklzWGJveExpdmVQbHVnaW5FbmFibGVkKCkgJiYgdGhpcy54Ym94ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLk9uS2V5Ym9hcmRQcmVzcyhCQUJZTE9OLlVzZXJJbnB1dEtleS5YLCAoKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXllcjpCQUJZTE9OLlBsYXllck51bWJlci5PbmUgPSBCQUJZTE9OLlBsYXllck51bWJlci5PbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUJBQllMT04uV2luZG93c1BsYXRmb3JtLklzWGJveExpdmVVc2VyU2lnbmVkSW4obnVsbCwgcGxheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVG9vbHMuTG9nKFwiPT09PiBUcnlpbmcgWGJveCBMaXZlIFNpZ24gSW4gRm9yIFBsYXllcjogXCIgKyBwbGF5ZXIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5XaW5kb3dzUGxhdGZvcm0uWGJveExpdmVVc2VyU2lnbkluKHBsYXllciwgKHJlc3VsdDogTWljcm9zb2Z0Llhib3guU2VydmljZXMuU3lzdGVtLlNpZ25JblJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IEJBQllMT04uV2luZG93c1BsYXRmb3JtLkdldFhib3hMaXZlVXNlcihwbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gXCIoXCIgKyB1c2VyLnhib3hVc2VySWQgKyBcIikgLSBcIiArIHVzZXIuZ2FtZXJ0YWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLkFsZXJ0TWVzc2FnZShtc2csIFwiWGJveCBMaXZlIFVzZXIgU2lnbmVkIEluXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIChlcnIpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtc2c6c3RyaW5nID0gXCJFbmNvdW50ZXJlZCBTaWduIEVycm9yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVG9vbHMuV2Fybihtc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5BbGVydE1lc3NhZ2UobXNnLCBcIlhib3ggTGl2ZSBXYXJuaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJYYm94IExpdmUgVXNlciBBbHJlYWR5IFNpZ25lZCBJblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5BbGVydE1lc3NhZ2UoXCJVc2VyIEFscmVhZHkgU2lnbmVkIEluXCIsIFwiWGJveCBMaXZlIFdhcm5pbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEZWZhdWx0IFByaW50IFRvIFNjcmVlbiBUZXh0XG4gICAgICAgICAgICB2YXIgcHJpbnRDb2xvcjpzdHJpbmcgPSAodGhpcy5zY2VuZS5nZXRFbmdpbmUoKS53ZWJHTFZlcnNpb24gPCAyKSA/IFwicmVkXCIgOiBcIiMwYzBcIjtcbiAgICAgICAgICAgIHZhciBncmFwaGljc1ZlcnNpb246c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0V2ViR0xWZXJzaW9uU3RyaW5nKHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuUHJpbnRUb1NjcmVlbihncmFwaGljc1ZlcnNpb24sIHByaW50Q29sb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKSA6dm9pZCB7XG4gICAgICAgICAgICAvL3RoaXMuc2NyZWVuID0gbnVsbDtcbiAgICAgICAgICAgIC8vdGhpcy50b2dnbGUgPSBudWxsO1xuICAgICAgICAgICAgLy90aGlzLnNpZ25pbiA9IG51bGw7XG4gICAgICAgICAgICAvL3RoaXMucmVsb2FkID0gbnVsbDtcbiAgICAgICAgICAgIC8vdGhpcy5tb3VzZSA9IG51bGw7XG4gICAgICAgICAgICAvL3RoaXMuZGVidWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgU29mdGJvZHlNZXNoXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFNvZnRib2R5TWVzaCBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgICAgICBjb25zdCB0eXBlOm51bWJlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0eXBlXCIsIDApO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtYXNzOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWFzc1wiLCAxKSxcbiAgICAgICAgICAgICAgICBmcmljdGlvbjogdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZyaWN0aW9uXCIsIDAuMyksXG4gICAgICAgICAgICAgICAgcmVzdGl0dXRpb246IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyZXN0aXR1dGlvblwiLCAwLjMpLFxuICAgICAgICAgICAgICAgIHByZXNzdXJlOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicHJlc3N1cmVcIiwgMjAwKSxcbiAgICAgICAgICAgICAgICB2ZWxvY2l0eUl0ZXJhdGlvbnM6IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ2ZWxvY2l0eUl0ZXJhdGlvbnNcIiwgMjApLCBcbiAgICAgICAgICAgICAgICBwb3NpdGlvbkl0ZXJhdGlvbnM6IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJwb3NpdGlvbkl0ZXJhdGlvbnNcIiwgMjApLFxuICAgICAgICAgICAgICAgIHN0aWZmbmVzczogdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInN0aWZmbmVzc1wiLCAxKSxcbiAgICAgICAgICAgICAgICBtYXJnaW46IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXJnaW5cIiwgMC4wKSxcbiAgICAgICAgICAgICAgICBkYW1waW5nOiB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZGFtcGluZ1wiLCAwLjAxKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtZXNoOkJBQllMT04uTWVzaCA9IHRoaXMuZ2V0VHJhbnNmb3JtTWVzaCgpO1xuICAgICAgICAgICAgY29uc3QgZm9yY2VTaGFyZWRWZXJ0aWNlczpib29sZWFuID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvcmNlU2hhcmVkVmVydGljZXNcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoZm9yY2VTaGFyZWRWZXJ0aWNlcyA9PT0gdHJ1ZSkgbWVzaC5mb3JjZVNoYXJlZFZlcnRpY2VzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGluY3JlYXNlVmVydGljZXM6bnVtYmVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImluY3JlYXNlVmVydGljZXNcIiwgNCk7XG4gICAgICAgICAgICBpZiAoaW5jcmVhc2VWZXJ0aWNlcyA+IDApIG1lc2guaW5jcmVhc2VWZXJ0aWNlcyhpbmNyZWFzZVZlcnRpY2VzKTtcbiAgICAgICAgXG4gICAgICAgICAgICBsZXQgaW1wb3N0b3I6QkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IDApIHsgLy8gTWVzaFxuICAgICAgICAgICAgICAgIGltcG9zdG9yID0gbmV3IEJBQllMT04uUGh5c2ljc0ltcG9zdG9yKG1lc2gsIEJBQllMT04uUGh5c2ljc0ltcG9zdG9yLlNvZnRib2R5SW1wb3N0b3IsIG9wdGlvbnMsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAxKSB7IC8vIENsb3RoXG4gICAgICAgICAgICAgICAgaW1wb3N0b3IgPSBuZXcgQkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IobWVzaCwgQkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IuQ2xvdGhJbXBvc3Rvciwgb3B0aW9ucywgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDIpICB7IC8vIFJvcGVcbiAgICAgICAgICAgICAgICBpbXBvc3RvciA9IG5ldyBCQUJZTE9OLlBoeXNpY3NJbXBvc3RvcihtZXNoLCBCQUJZTE9OLlBoeXNpY3NJbXBvc3Rvci5Sb3BlSW1wb3N0b3IsIG9wdGlvbnMsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGltcG9zdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbXBvc3Rvci5leGVjdXRlTmF0aXZlRnVuY3Rpb24oKHdvcmQ6YW55LCBib2R5OmFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZXR1cCBOYXRpdmUgU29mdGJvZHkgUGh5c2ljcyBPcHRpb25zXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIEZpcnN0UGVyc29uQ29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBGaXJzdFBlcnNvbkNvbnRyb2xsZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgZGVsdGFGYWN0b3I6bnVtYmVyID0gMi4wO1xuICAgICAgICBwcml2YXRlIGF0dGFjaENhbWVyYTpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFQaXZvdDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGNhbWVyYVJpZ2dlcjpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIG1vdmVtZW50U3BlZWQ6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIGp1bXBpbmdWZWxvY2l0eTpudW1iZXIgPSAxMC4wO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdmVtZW50OkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHByaXZhdGUgcGxheWVyVHVyblJhdGU6bnVtYmVyID0gMC4wO1xuICAgICAgICBwcml2YXRlIGNhbWVyYVBpdGNoUmF0ZTpudW1iZXIgPSAwLjA7XG4gICAgICAgIHByaXZhdGUgaG9yelNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSB2ZXJ0U2Vuc2l0aXZpdHk6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIG1vdXNlU2Vuc2l0aXZpdHk6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIG1pbmltdW1QaXRjaEFuZ2xlOm51bWJlciA9IC02MC4wO1xuICAgICAgICBwcml2YXRlIG1heGltdW1QaXRjaEFuZ2xlOm51bWJlciA9IDYwLjA7XG4gICAgICAgIHByaXZhdGUgaXNDaGFyYWN0ZXJHcm91bmRlZDpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgaXNDaGFyYWN0ZXJKdW1wRnJhbWU6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGNhbWVyYUV1bGVyQW5nbGVzOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHByaXZhdGUgY2hhcmFjdGVyQ29udHJvbGxlcjpCQUJZTE9OLkNoYXJhY3RlckNvbnRyb2xsZXIgPSBudWxsO1xuXG4gICAgICAgIHB1YmxpYyBpc0NoYXJhY3Rlckp1bXBpbmcoKTpib29sZWFuIHsgcmV0dXJuIGZhbHNlOyAvKiBUT0RPOiBEZXRlcm1pbmUgSWYgQ2hhcmFjdGVyIElzIEp1bXBpbmcgLSA/Pz8gKi8gfVxuICAgICAgICBwdWJsaWMgaXNDaGFyYWN0ZXJGYWxsaW5nKCk6Ym9vbGVhbiB7IHJldHVybiBmYWxzZTsgLyogVE9ETzogRGV0ZXJtaW5lIElmIENoYXJhY3RlciBJcyBGYWxsaW5nIC0gPz8/ICovIH1cblxuICAgICAgICBwdWJsaWMgYnV0dG9uSnVtcDpudW1iZXIgPSBCQUJZTE9OLlhib3gzNjBCdXR0b24uQTtcbiAgICAgICAgcHVibGljIGtleWJvYXJkSnVtcDpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5TcGFjZUJhcjtcbiAgICAgICAgcHVibGljIHBsYXllck51bWJlcjpCQUJZTE9OLlBsYXllck51bWJlciA9IEJBQllMT04uUGxheWVyTnVtYmVyLk9uZTtcbiAgICAgICAgcHVibGljIHBsYXllckRlbHRhWDpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJEZWx0YVo6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgcGxheWVyTW91c2VYOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIHBsYXllck1vdXNlWTpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJFeWVMZXZlbDpudW1iZXIgPSAwLjU7XG4gICAgICAgIHB1YmxpYyBnZXRDaGFyYWN0ZXJDb250cm9sbGVyKCk6QkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyIHsgcmV0dXJuIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlcjsgfVxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaENhbWVyYSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhdHRhY2hDYW1lcmFcIiwgdGhpcy5hdHRhY2hDYW1lcmEpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJOdW1iZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicGxheWVyTnVtYmVyXCIsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRXllTGV2ZWwgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicGxheWVyRXllTGV2ZWxcIiwgdGhpcy5wbGF5ZXJFeWVMZXZlbCk7XG4gICAgICAgICAgICB0aGlzLm1vdmVtZW50U3BlZWQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibW92ZW1lbnRTcGVlZFwiLCB0aGlzLm1vdmVtZW50U3BlZWQpO1xuICAgICAgICAgICAgdGhpcy5tb3VzZVNlbnNpdGl2aXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1vdXNlU2Vuc2l0aXZpdHlcIiwgdGhpcy5tb3VzZVNlbnNpdGl2aXR5KVxuICAgICAgICAgICAgdGhpcy5taW5pbXVtUGl0Y2hBbmdsZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtaW5pbXVtUGl0Y2hBbmdsZVwiLCB0aGlzLm1pbmltdW1QaXRjaEFuZ2xlKTtcbiAgICAgICAgICAgIHRoaXMubWF4aW11bVBpdGNoQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWF4aW11bVBpdGNoQW5nbGVcIiwgdGhpcy5tYXhpbXVtUGl0Y2hBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLnZlcnRTZW5zaXRpdml0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ2ZXJ0aWNhbFNlbnNpdGl2aXR5XCIsIHRoaXMudmVydFNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgIHRoaXMuaG9yelNlbnNpdGl2aXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImhvcml6b250YWxTZW5zaXRpdml0eVwiLCB0aGlzLmhvcnpTZW5zaXRpdml0eSlcbiAgICAgICAgICAgIHRoaXMuanVtcGluZ1ZlbG9jaXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImltcHVsc2VKdW1wVmVsb2NpdHlcIiwgdGhpcy5qdW1waW5nVmVsb2NpdHkpO1xuICAgICAgICAgICAgLy8gU2NhbGUgTW91c2UgUG9pbnRlciBTZW5zaXRpdml0eVxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyTnVtYmVyID09IEJBQllMT04uUGxheWVyTnVtYmVyLk9uZSkge1xuICAgICAgICAgICAgICAgIEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5Qb2ludGVyQW5ndWxhclNlbnNpYmlsaXR5ID0gKEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5Qb2ludGVyQW5ndWxhclNlbnNpYmlsaXR5ICogdGhpcy5tb3VzZVNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpOiB2b2lkIHsgdGhpcy5zZXR1cEZpcnN0UGVyc29uQ29udHJvbGxlcigpOyB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7IHRoaXMudXBkYXRlRmlyc3RQZXJzb25Db250cm9sbGVyKCk7IH1cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7IHRoaXMuZGVzdHJveUZpcnN0UGVyc29uQ29udHJvbGxlcigpOyB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZXR1cEZpcnN0UGVyc29uQ29udHJvbGxlcigpOnZvaWQge1xuICAgICAgICAgICAgLy8gU2V0dXAgQ2FtZXJhIEFhdHRhY2htZW50c1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdCA9IHRoaXMuZ2V0Q2hpbGRUcmFuc2Zvcm0oXCJQaXZvdFwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYVBpdm90ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90ID0gbmV3IEJBQllMT04uVHJhbnNmb3JtTm9kZShcIlBpdm90XCIsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3Quc2V0UGFyZW50KHRoaXMudHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90LnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLjAsIHRoaXMucGxheWVyRXllTGV2ZWwsIDAuMCk7IC8vIE5PVEU6IFBPU0lUSU9OIENBTUVSQSBFWUUgTEVWRUwgKFRPIFNFRSBBUk1TKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVmFsaWRhdGVUcmFuc2Zvcm1RdWF0ZXJuaW9uKHRoaXMuY2FtZXJhUGl2b3QpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQXR0YWNoIENhbWVyYSBGb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiIC0tPiBcIiArIHRoaXMuYXR0YWNoQ2FtZXJhLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRyYW5zZm9ybS5tZXRhZGF0YSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmF0dGFjaENhbWVyYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IENyZWF0ZSBNdWx0aSBQbGF5ZXIgQ2FtZXJhIChObyBBdHRhY2ggQ2FtZXJhKVxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtTm9kZSh0aGlzLnNjZW5lLCBcIk1haW4gQ2FtZXJhXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbWVyYVJpZ2dlciAhPSBudWxsICYmIHRoaXMuY2FtZXJhUGl2b3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90LnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLjAsIHRoaXMucGxheWVyRXllTGV2ZWwsIDAuMCk7IC8vIE5PVEU6IFBPU0lUSU9OIENBTUVSQSBFWUUgTEVWRUwgKFRPIFNFRSBBUk1TKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVJpZ2dlci5zZXRQYXJlbnQodGhpcy5jYW1lcmFQaXZvdCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyLnBvc2l0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygwLjAsIDAuMCwgMC4wKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIucm90YXRpb25RdWF0ZXJuaW9uID0gQkFCWUxPTi5RdWF0ZXJuaW9uLklkZW50aXR5KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRlBDOiBBdHRhY2hlZCBtYWluIGNhbWVyYSB0byBwbGF5ZXIgY29udHJvbGxlcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gbG9jYXRlIGNhbWVyYSBvciBsb2NhbCBwaXZvdCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2V0dXAgQ2hhcmFjdGVyIENvbnRyb2xsZXJcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciA9PSBudWxsKSBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gbG9jYXRlIGNoYXJhY3RlciBjb250cm9sbGVyIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcblxuICAgICAgICAgICAgLy8gQ2hhcmFjdGVyIENvbGxpc2lvbiBDb250YWN0IChURVNUKVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciAhPSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBUZXN0IFN0YXRpYyBPbmx5IENvbGxpc2lvbnNcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIuc2V0Q29sbGlzaW9uRmlsdGVyTWFzayhCQUJZTE9OLkNvbGxpc2lvbkZpbHRlcnMuU3RhdGljRmlsdGVyKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci5yZWdpc3Rlck9uQ29sbGlzaW9uRW50ZXIoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJQTEFZRVI6ID09PT4gR290IENvbGxpc2lvbiBFbnRlciBFdmVudDogXCIgKyBtZXNoLm5hbWUgKyBcIiAtLT4gXCIgKyB0YWcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci5yZWdpc3Rlck9uQ29sbGlzaW9uU3RheSgobWVzaDpCQUJZTE9OLkFic3RyYWN0TWVzaCk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnOnN0cmluZyA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFRyYW5zZm9ybVRhZyhtZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlBMQVlFUjogPT09PiBHb3QgQ29sbGlzaW9uIFN0YXkgRXZlbnQ6IFwiICsgbWVzaC5uYW1lICsgXCIgLS0+IFwiICsgdGFnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIucmVnaXN0ZXJPbkNvbGxpc2lvbkV4aXQoKG1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2gpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS53YXJuKFwiUExBWUVSID09PT4gREVTVFJPWTogQ29sbGlzaW9uIEV4aXQgRXZlbnQ6IFwiICsgbWVzaC5uYW1lICsgXCIgLS0+IFwiICsgdGFnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlRmlyc3RQZXJzb25Db250cm9sbGVyKCk6dm9pZCB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVRpbWU6bnVtYmVyID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRGVsdGFYID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Ib3Jpem9udGFsLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICB0aGlzLnBsYXllckRlbHRhWiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuVmVydGljYWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTW91c2VYID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Nb3VzZVgsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyTW91c2VZID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5Nb3VzZVksIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIERlYWQgSW5wdXQgVmFsdWVzXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJEZWx0YVgpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyRGVsdGFYID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllckRlbHRhWikgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJEZWx0YVogPSAwO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMucGxheWVyTW91c2VYKSA8PSBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuR2FtZXBhZERlYWRTdGlja1ZhbHVlKSB0aGlzLnBsYXllck1vdXNlWCA9IDA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJNb3VzZVkpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyTW91c2VZID0gMDtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIENoYXJhY3RlciBNb3ZlbWVudFxuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NoYXJhY3Rlckdyb3VuZGVkID0gdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyLmlzR3JvdW5kZWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ2hhcmFjdGVySnVtcEZyYW1lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUm90YXRlIFBsYXllciBMZWZ0IEFuZCBSaWdodCBXaXRoIE1vdXNlLVhcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllclR1cm5SYXRlID0gKHRoaXMucGxheWVyTW91c2VYICogKHRoaXMuaG9yelNlbnNpdGl2aXR5ICogdGhpcy5kZWx0YUZhY3RvcikpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlci50dXJuKHRoaXMucGxheWVyVHVyblJhdGUpO1xuXG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgLy8gRlBDOiBQaXRjaCBDYW1lcmEgUGl2b3QgVXAgQW5kIERvd24gV2l0aCBNb3VzZS1ZXG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXRjaFJhdGUgPSAodGhpcy5wbGF5ZXJNb3VzZVkgKiAodGhpcy52ZXJ0U2Vuc2l0aXZpdHkgKiB0aGlzLmRlbHRhRmFjdG9yKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdC5yb3RhdGUoQkFCWUxPTi5BeGlzLlgsIC0odGhpcy5jYW1lcmFQaXRjaFJhdGUgKiBCQUJZTE9OLlN5c3RlbS5EZWcyUmFkKSwgQkFCWUxPTi5TcGFjZS5MT0NBTCk7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVG9FdWxlclRvUmVmKHRoaXMuY2FtZXJhUGl2b3Qucm90YXRpb25RdWF0ZXJuaW9uLCB0aGlzLmNhbWVyYUV1bGVyQW5nbGVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYUV1bGVyQW5nbGVzLnggPSBCQUJZTE9OLlNjYWxhci5DbGFtcCh0aGlzLmNhbWVyYUV1bGVyQW5nbGVzLngsIHRoaXMubWluaW11bVBpdGNoQW5nbGUsIHRoaXMubWF4aW11bVBpdGNoQW5nbGUpO1xuICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLkZyb21FdWxlclRvUmVmKHRoaXMuY2FtZXJhRXVsZXJBbmdsZXMueCwgdGhpcy5jYW1lcmFFdWxlckFuZ2xlcy55LCB0aGlzLmNhbWVyYUV1bGVyQW5nbGVzLnosIHRoaXMuY2FtZXJhUGl2b3Qucm90YXRpb25RdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBQbGF5ZXIgSW5wdXQgV2l0aCBEZWx0YS1YIEFuZCBEZWx0YS1aXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNDaGFyYWN0ZXJHcm91bmRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllck1vdmVtZW50LnggPSB0aGlzLnBsYXllckRlbHRhWDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlbWVudC55ID0gMC4wO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllck1vdmVtZW50LnogPSB0aGlzLnBsYXllckRlbHRhWjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NoYXJhY3Rlckp1bXBGcmFtZSA9IChCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRLZXlib2FyZElucHV0KHRoaXMua2V5Ym9hcmRKdW1wKSB8fCBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRHYW1lcGFkQnV0dG9uSW5wdXQodGhpcy5idXR0b25KdW1wKSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2Zvcm0gTW92ZW1lbnQgRGlyZWN0aW9uIEFuZCBTY2FsZSBTcGVlZFxuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5UcmFuc2Zvcm1EaXJlY3Rpb25Ub1JlZih0aGlzLnRyYW5zZm9ybSwgdGhpcy5wbGF5ZXJNb3ZlbWVudCwgdGhpcy5wbGF5ZXJNb3ZlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uVmVjdG9yMy5Ob3JtYWxpemVUb1JlZih0aGlzLnBsYXllck1vdmVtZW50LCB0aGlzLnBsYXllck1vdmVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3ZlbWVudC5zY2FsZUluUGxhY2UoKEJBQllMT04uU3lzdGVtLldhbGtpbmdWZWxvY2l0eSAqIHRoaXMubW92ZW1lbnRTcGVlZCkgKiBkZWx0YVRpbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgUGxheWVyIFVzaW5nIFBoeXNpY3MgQ2hhcmFjdGVyIENvbnRyb2xsZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyLm1vdmUodGhpcy5wbGF5ZXJNb3ZlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCBQbGF5ZXIgVXNpbmcgUGh5c2ljcyBDaGFyYWN0ZXIgQ29udHJvbGxlclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0NoYXJhY3Rlckp1bXBGcmFtZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyLmp1bXAodGhpcy5qdW1waW5nVmVsb2NpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIGRlc3Ryb3lGaXJzdFBlcnNvbkNvbnRyb2xsZXIoKTp2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIFRoaXJkUGVyc29uQ29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBUaGlyZFBlcnNvbkNvbnRyb2xsZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgZGVsdGFGYWN0b3I6bnVtYmVyID0gMi4wO1xuICAgICAgICBwcml2YXRlIGF0dGFjaENhbWVyYTpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHJpdmF0ZSBjYW1lcmFQaXZvdDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGNhbWVyYVJpZ2dlcjpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBudWxsO1xuICAgICAgICBwcml2YXRlIG1vdmVtZW50U3BlZWQ6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIGp1bXBpbmdWZWxvY2l0eTpudW1iZXIgPSAxMC4wO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdmVtZW50OkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVmVjdG9yMy5aZXJvKCk7XG4gICAgICAgIHByaXZhdGUgcGxheWVyVHVyblJhdGU6bnVtYmVyID0gMC4wO1xuICAgICAgICBwcml2YXRlIGNhbWVyYVBpdGNoUmF0ZTpudW1iZXIgPSAwLjA7XG4gICAgICAgIHByaXZhdGUgaG9yelNlbnNpdGl2aXR5Om51bWJlciA9IDEuMDtcbiAgICAgICAgcHJpdmF0ZSB2ZXJ0U2Vuc2l0aXZpdHk6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIG1vdXNlU2Vuc2l0aXZpdHk6bnVtYmVyID0gMS4wO1xuICAgICAgICBwcml2YXRlIG1pbmltdW1QaXRjaEFuZ2xlOm51bWJlciA9IC02MC4wO1xuICAgICAgICBwcml2YXRlIG1heGltdW1QaXRjaEFuZ2xlOm51bWJlciA9IDYwLjA7XG4gICAgICAgIHByaXZhdGUgaXNDaGFyYWN0ZXJHcm91bmRlZDpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgaXNDaGFyYWN0ZXJKdW1wRnJhbWU6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGNoYXJhY3RlckNvbnRyb2xsZXI6QkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyID0gbnVsbDtcblxuICAgICAgICBwdWJsaWMgYnV0dG9uSnVtcDpudW1iZXIgPSBCQUJZTE9OLlhib3gzNjBCdXR0b24uQTtcbiAgICAgICAgcHVibGljIGtleWJvYXJkSnVtcDpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5TcGFjZUJhcjtcbiAgICAgICAgcHVibGljIHBsYXllck51bWJlcjpCQUJZTE9OLlBsYXllck51bWJlciA9IEJBQllMT04uUGxheWVyTnVtYmVyLk9uZTtcbiAgICAgICAgcHVibGljIHBsYXllckRlbHRhWDpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBwbGF5ZXJEZWx0YVo6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgcGxheWVyTW91c2VYOm51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIHBsYXllck1vdXNlWTpudW1iZXIgPSAwLjA7XG4gICAgICAgIHB1YmxpYyBnZXRDaGFyYWN0ZXJDb250cm9sbGVyKCk6QkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyIHsgcmV0dXJuIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlcjsgfVxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaENhbWVyYSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhdHRhY2hDYW1lcmFcIiwgdGhpcy5hdHRhY2hDYW1lcmEpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJOdW1iZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicGxheWVyTnVtYmVyXCIsIHRoaXMucGxheWVyTnVtYmVyKVxuICAgICAgICAgICAgdGhpcy5tb3ZlbWVudFNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1vdmVtZW50U3BlZWRcIiwgdGhpcy5tb3ZlbWVudFNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VTZW5zaXRpdml0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtb3VzZVNlbnNpdGl2aXR5XCIsIHRoaXMubW91c2VTZW5zaXRpdml0eSlcbiAgICAgICAgICAgIHRoaXMubWluaW11bVBpdGNoQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWluaW11bVBpdGNoQW5nbGVcIiwgdGhpcy5taW5pbXVtUGl0Y2hBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLm1heGltdW1QaXRjaEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heGltdW1QaXRjaEFuZ2xlXCIsIHRoaXMubWF4aW11bVBpdGNoQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy52ZXJ0U2Vuc2l0aXZpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidmVydGljYWxTZW5zaXRpdml0eVwiLCB0aGlzLnZlcnRTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB0aGlzLmhvcnpTZW5zaXRpdml0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJob3Jpem9udGFsU2Vuc2l0aXZpdHlcIiwgdGhpcy5ob3J6U2Vuc2l0aXZpdHkpXG4gICAgICAgICAgICB0aGlzLmp1bXBpbmdWZWxvY2l0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJpbXB1bHNlSnVtcFZlbG9jaXR5XCIsIHRoaXMuanVtcGluZ1ZlbG9jaXR5KTtcbiAgICAgICAgICAgIC8vIFNjYWxlIE1vdXNlIFBvaW50ZXIgU2Vuc2l0aXZpdHlcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllck51bWJlciA9PSBCQUJZTE9OLlBsYXllck51bWJlci5PbmUpIHtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuUG9pbnRlckFuZ3VsYXJTZW5zaWJpbGl0eSA9IChCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuUG9pbnRlckFuZ3VsYXJTZW5zaWJpbGl0eSAqIHRoaXMubW91c2VTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7IHRoaXMuc2V0dXBUaGlyZFBlcnNvbkNvbnRyb2xsZXIoKTsgfVxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQgeyB0aGlzLnVwZGF0ZVRoaXJkUGVyc29uQ29udHJvbGxlcigpOyB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQgeyB0aGlzLmRlc3Ryb3lUaGlyZFBlcnNvbkNvbnRyb2xsZXIoKTsgfVxuXG4gICAgICAgIHByaXZhdGUgc2V0dXBUaGlyZFBlcnNvbkNvbnRyb2xsZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTZXR1cCBDYW1lcmEgQXR0YWNobWVudHNcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhUGl2b3QgPSB0aGlzLmdldENoaWxkVHJhbnNmb3JtKFwiUGl2b3RcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5jYW1lcmFQaXZvdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdCA9IG5ldyBCQUJZTE9OLlRyYW5zZm9ybU5vZGUoXCJQaXZvdFwiLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYVBpdm90LnNldFBhcmVudCh0aGlzLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdC5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMC4wLCAxLjg1LCAwLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVmFsaWRhdGVUcmFuc2Zvcm1RdWF0ZXJuaW9uKHRoaXMuY2FtZXJhUGl2b3QpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNoQ2FtZXJhID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogQ3JlYXRlIE11bHRpIFBsYXllciBDYW1lcmEgKE5vIEF0dGFjaCBDYW1lcmEpXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1Ob2RlKHRoaXMuc2NlbmUsIFwiTWFpbiBDYW1lcmFcIik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FtZXJhUmlnZ2VyICE9IG51bGwgJiYgdGhpcy5jYW1lcmFQaXZvdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhUmlnZ2VyLnNldFBhcmVudCh0aGlzLmNhbWVyYVBpdm90KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIucG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAuMCwgMC4wLCAtNC41KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW1lcmFSaWdnZXIucm90YXRpb25RdWF0ZXJuaW9uID0gQkFCWUxPTi5RdWF0ZXJuaW9uLklkZW50aXR5KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVFBDOiBBdHRhY2hlZCBtYWluIGNhbWVyYSB0byBwbGF5ZXIgY29udHJvbGxlcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gbG9jYXRlIGNhbWVyYSBvciBsb2NhbCBwaXZvdCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2V0dXAgQ2hhcmFjdGVyIENvbnRyb2xsZXJcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5DaGFyYWN0ZXJDb250cm9sbGVyXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyQ29udHJvbGxlciA9PSBudWxsKSBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gbG9jYXRlIGNoYXJhY3RlciBjb250cm9sbGVyIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVGhpcmRQZXJzb25Db250cm9sbGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJEZWx0YVggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLkhvcml6b250YWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyRGVsdGFaID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VXNlcklucHV0KEJBQllMT04uVXNlcklucHV0QXhpcy5WZXJ0aWNhbCwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3VzZVggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLk1vdXNlWCwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3VzZVkgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLk1vdXNlWSwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgRGVhZCBJbnB1dCBWYWx1ZXNcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllckRlbHRhWCkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJEZWx0YVggPSAwO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMucGxheWVyRGVsdGFaKSA8PSBCQUJZTE9OLlVzZXJJbnB1dE9wdGlvbnMuR2FtZXBhZERlYWRTdGlja1ZhbHVlKSB0aGlzLnBsYXllckRlbHRhWiA9IDA7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJNb3VzZVgpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyTW91c2VYID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBsYXllck1vdXNlWSkgPD0gQkFCWUxPTi5Vc2VySW5wdXRPcHRpb25zLkdhbWVwYWREZWFkU3RpY2tWYWx1ZSkgdGhpcy5wbGF5ZXJNb3VzZVkgPSAwO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgQ2hhcmFjdGVyIE1vdmVtZW50XG4gICAgICAgICAgICBpZiAodGhpcy5jaGFyYWN0ZXJDb250cm9sbGVyICE9IG51bGwpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBkZXN0cm95VGhpcmRQZXJzb25Db250cm9sbGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFQaXZvdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYVJpZ2dlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckNvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICogQGNsYXNzIFNtb290aEZvbGxvd1RhcmdldFxuICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFNtb290aEZvbGxvd1RhcmdldCBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcblxuICAgICAgICBwdWJsaWMgdGFyZ2V0OkJBQllMT04uVHJhbnNmb3JtTm9kZSA9IG51bGw7XG4gICAgICAgIHB1YmxpYyBkaXN0YW5jZTpudW1iZXIgPSAxMDtcbiAgICAgICAgcHVibGljIGhlaWdodDpudW1iZXIgPSAxLjU7XG4gICAgICAgIHB1YmxpYyBoZWlnaHRPZmZzZXQ6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgaGVpZ2h0RGFtcGluZzpudW1iZXIgPSAyO1xuICAgICAgICBwdWJsaWMgcm90YXRpb25EYW1waW5nOm51bWJlciA9IDI7XG4gICAgICAgIHB1YmxpYyBzdGFydEJlaGluZFRhcmdldDpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHVibGljIGZvbGxvd0JlaGluZFRhcmdldDpib29sZWFuID0gdHJ1ZTtcblxuICAgICAgICBwcml2YXRlIHRhcmdldEFuZ2xlczpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgcHJpdmF0ZSB0cmFuc2Zvcm1BbmdsZXM6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByaXZhdGUgcG9zaXRpb25CdWZmZXI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByaXZhdGUgcm90YXRpb25CdWZmZXI6QkFCWUxPTi5RdWF0ZXJuaW9uID0gbmV3IEJBQllMT04uUXVhdGVybmlvbigwLDAsMCwxKTtcbiAgICAgICAgcHJpdmF0ZSB0ZW1wUm90YXRpb25CdWZmZXI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG5cbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZGlzdGFuY2VcIiwgdGhpcy5kaXN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5oZWlnaHRPZmZzZXQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGVpZ2h0T2Zmc2V0XCIsIHRoaXMuaGVpZ2h0T2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0RGFtcGluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJoZWlnaHREYW1waW5nXCIsIHRoaXMuaGVpZ2h0RGFtcGluZyk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uRGFtcGluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyb3RhdGlvbkRhbXBpbmdcIiwgdGhpcy5yb3RhdGlvbkRhbXBpbmcpO1xuICAgICAgICAgICAgdGhpcy5zdGFydEJlaGluZFRhcmdldCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzdGFydEJlaGluZFRhcmdldFwiLCB0aGlzLnN0YXJ0QmVoaW5kVGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuZm9sbG93QmVoaW5kVGFyZ2V0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvbGxvd0JlaGluZFRhcmdldFwiLCB0aGlzLmZvbGxvd0JlaGluZFRhcmdldCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3RhbmNlIDw9IDApIHRoaXMuZGlzdGFuY2UgPSAxMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmhlaWdodCA8PSAwKSB0aGlzLmRpc3RhbmNlID0gMS41O1xuICAgICAgICAgICAgaWYgKHRoaXMuaGVpZ2h0RGFtcGluZyA8PSAwKSB0aGlzLmhlaWdodERhbXBpbmcgPSA0O1xuICAgICAgICAgICAgaWYgKHRoaXMucm90YXRpb25EYW1waW5nIDw9IDApIHRoaXMucm90YXRpb25EYW1waW5nID0gMjtcblxuICAgICAgICAgICAgY29uc3QgZm9sbG93VGFyZ2V0OmFueSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0YXJnZXRcIik7XG4gICAgICAgICAgICBpZiAoZm9sbG93VGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IEJBQllMT04uVXRpbGl0aWVzLlBhcnNlVHJhbnNmb3JtKHRoaXMuc2NlbmUsIGZvbGxvd1RhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0QmVoaW5kVGFyZ2V0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uID0gdGhpcy50YXJnZXQucG9zaXRpb24uY2xvbmUoKTsgLSA/Pz9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mb2xsb3dCZWhpbmRUYXJnZXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lOm51bWJlciA9IHRoaXMuZ2V0RGVsdGFTZWNvbmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlRvRXVsZXJUb1JlZih0aGlzLnRhcmdldC5yb3RhdGlvblF1YXRlcm5pb24sIHRoaXMudGFyZ2V0QW5nbGVzKTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVG9FdWxlclRvUmVmKHRoaXMudHJhbnNmb3JtLnJvdGF0aW9uUXVhdGVybmlvbiwgdGhpcy50cmFuc2Zvcm1BbmdsZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB3YW50ZWRSb3RhdGlvbkFuZ2xlID0gdGhpcy50YXJnZXRBbmdsZXMueTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdhbnRlZEhlaWdodCA9IHRoaXMudGFyZ2V0LnBvc2l0aW9uLnkgKyB0aGlzLmhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFJvdGF0aW9uQW5nbGUgPSB0aGlzLnRyYW5zZm9ybUFuZ2xlcy55O1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEhlaWdodCA9IHRoaXMudHJhbnNmb3JtLnBvc2l0aW9uLnk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSb3RhdGlvbkFuZ2xlID0gQkFCWUxPTi5TY2FsYXIuTGVycEFuZ2xlKGN1cnJlbnRSb3RhdGlvbkFuZ2xlLCB3YW50ZWRSb3RhdGlvbkFuZ2xlLCB0aGlzLnJvdGF0aW9uRGFtcGluZyAqIGRlbHRhVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRIZWlnaHQgPSBCQUJZTE9OLlNjYWxhci5MZXJwKGN1cnJlbnRIZWlnaHQsIHdhbnRlZEhlaWdodCwgdGhpcy5oZWlnaHREYW1waW5nICogZGVsdGFUaW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Gcm9tRXVsZXJUb1JlZigwLCBjdXJyZW50Um90YXRpb25BbmdsZSwgMCwgdGhpcy5yb3RhdGlvbkJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLk11bHRpcGx5UXVhdGVybmlvbkJ5VmVjdG9yVG9SZWYodGhpcy5yb3RhdGlvbkJ1ZmZlciwgQkFCWUxPTi5WZWN0b3IzLkZvcndhcmQoKSwgdGhpcy50ZW1wUm90YXRpb25CdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBSb3RhdGlvbkJ1ZmZlci5zY2FsZUluUGxhY2UodGhpcy5kaXN0YW5jZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbkJ1ZmZlci5jb3B5RnJvbSh0aGlzLnRhcmdldC5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25CdWZmZXIuc3VidHJhY3RJblBsYWNlKHRoaXMudGVtcFJvdGF0aW9uQnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0ucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb25CdWZmZXIueCwgKGN1cnJlbnRIZWlnaHQgKyB0aGlzLmhlaWdodE9mZnNldCksIHRoaXMucG9zaXRpb25CdWZmZXIueik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLmxvb2tBdCh0aGlzLnRhcmdldC5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QW5nbGVzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQW5nbGVzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25CdWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRlbXBSb3RhdGlvbkJ1ZmZlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgKiBAY2xhc3MgV2F5cG9pbnRNYW5hZ2VyXG4gICAgKi9cbiAgICBleHBvcnQgY2xhc3MgV2F5cG9pbnRNYW5hZ2VyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIF93YXlwb2ludE1lc2hMaW5lczpCQUJZTE9OLkxpbmVzTWVzaCA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgX3dheXBvaW50U3BsaW5lQ3VydmU6QkFCWUxPTi5DdXJ2ZTMgPSBudWxsO1xuICAgICAgICBwcml2YXRlIF93YXlwb2ludFRyYW5zZm9ybU5vZGVzOkJBQllMT04uVHJhbnNmb3JtTm9kZVtdID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBfd2F5cG9pbnRTcGxpbmVQb3NpdGlvbnM6QkFCWUxPTi5WZWN0b3IzW10gPSBudWxsO1xuICAgICAgICBwcml2YXRlIF93YXlwb2ludFNwaGVyZU1hdGVyaWFsOkJBQllMT04uU3RhbmRhcmRNYXRlcmlhbCA9IG51bGw7XG5cbiAgICAgICAgcHVibGljIHJlc29sdXRpb246bnVtYmVyID0gMTtcbiAgICAgICAgcHVibGljIGNsb3NlZExvb3A6Ym9vbGVhbiA9IHRydWU7XG4gICAgICAgIHB1YmxpYyBkcmF3TGluZXM6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgZHJhd1BvaW50czpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBkcmF3VHJhY2VzOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHVibGljIHBvaW50U2l6ZTpudW1iZXIgPSAwLjU7XG4gICAgICAgIHB1YmxpYyBsaW5lQ29sb3I6QkFCWUxPTi5Db2xvcjMgPSBuZXcgQkFCWUxPTi5Db2xvcjMoMSwgMSwgMSk7XG4gICAgICAgIHB1YmxpYyBwb2ludENvbG9yOkJBQllMT04uQ29sb3IzID0gbmV3IEJBQllMT04uQ29sb3IzKDEsIDEsIDEpO1xuICAgICAgICBwdWJsaWMgdHJhY2VDb2xvcjpCQUJZTE9OLkNvbG9yMyA9IG5ldyBCQUJZTE9OLkNvbG9yMygxLCAxLCAxKTtcbiAgICAgICAgcHVibGljIGdldFNwbGluZUN1cnZlKCk6QkFCWUxPTi5DdXJ2ZTMgeyByZXR1cm4gdGhpcy5fd2F5cG9pbnRTcGxpbmVDdXJ2ZTsgfVxuICAgICAgICBwdWJsaWMgZ2V0U3BsaW5lQ3VydmVMZW5ndGgoKTpudW1iZXIgeyByZXR1cm4gKHRoaXMuX3dheXBvaW50U3BsaW5lQ3VydmUgIT0gbnVsbCkgPyB0aGlzLl93YXlwb2ludFNwbGluZUN1cnZlLmxlbmd0aCgpIDogMDsgIH1cbiAgICAgICAgcHVibGljIGdldFNwbGluZUN1cnZlUG9zaXRpb25zKCk6QkFCWUxPTi5WZWN0b3IzW10geyByZXR1cm4gdGhpcy5fd2F5cG9pbnRTcGxpbmVQb3NpdGlvbnM7IH1cbiAgICAgICAgcHVibGljIGdldENvbnRyb2xQb2ludFRyYW5zZm9ybXMoKTpCQUJZTE9OLlRyYW5zZm9ybU5vZGVbXSB7IHJldHVybiB0aGlzLl93YXlwb2ludFRyYW5zZm9ybU5vZGVzOyB9XG5cbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJlc29sdXRpb25cIiwgdGhpcy5yZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VkTG9vcCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJjbG9zZWRMb29wXCIsIHRoaXMuY2xvc2VkTG9vcCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdMaW5lcyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJkcmF3TGluZXNcIiwgdGhpcy5kcmF3TGluZXMpO1xuICAgICAgICAgICAgdGhpcy5kcmF3UG9pbnRzID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImRyYXdQb2ludHNcIiwgdGhpcy5kcmF3UG9pbnRzKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RyYWNlcyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJkcmF3VHJhY2VzXCIsIHRoaXMuZHJhd1RyYWNlcyk7XG4gICAgICAgICAgICB0aGlzLnBvaW50U2l6ZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJwb2ludFNpemVcIiwgdGhpcy5wb2ludFNpemUpO1xuICAgICAgICAgICAgdGhpcy5saW5lQ29sb3IgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZUNvbG9yMyh0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibGluZUNvbG9yXCIsIHRoaXMubGluZUNvbG9yKSk7XG4gICAgICAgICAgICB0aGlzLnBvaW50Q29sb3IgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZUNvbG9yMyh0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicG9pbnRDb2xvclwiLCB0aGlzLnBvaW50Q29sb3IpKTtcbiAgICAgICAgICAgIHRoaXMudHJhY2VDb2xvciA9IEJBQllMT04uVXRpbGl0aWVzLlBhcnNlQ29sb3IzKHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0cmFjZUNvbG9yXCIsIHRoaXMudHJhY2VDb2xvcikpO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIHRoaXMuX3dheXBvaW50U3BoZXJlTWF0ZXJpYWwgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKHRoaXMudHJhbnNmb3JtLm5hbWUgKyBcIi5TcGxpbmVNYXRlcmlhbFwiLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIHRoaXMuX3dheXBvaW50U3BoZXJlTWF0ZXJpYWwuZGlmZnVzZUNvbG9yID0gdGhpcy5wb2ludENvbG9yO1xuICAgICAgICAgICAgLy90aGlzLl93YXlwb2ludFNwaGVyZU1hdGVyaWFsLndpcmVmcmFtZSA9IHRydWU7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgdGhpcy5fd2F5cG9pbnRUcmFuc2Zvcm1Ob2RlcyA9IHRoaXMudHJhbnNmb3JtLmdldENoaWxkcmVuKG51bGwsIHRydWUpIGFzIEJBQllMT04uVHJhbnNmb3JtTm9kZVtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dheXBvaW50VHJhbnNmb3JtTm9kZXMgIT0gbnVsbCAmJiB0aGlzLl93YXlwb2ludFRyYW5zZm9ybU5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sUG9pbnRzOkJBQllMT04uVmVjdG9yM1tdID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5fd2F5cG9pbnRUcmFuc2Zvcm1Ob2Rlcy5mb3JFYWNoKCh0cmFuc2Zvcm06QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlZhbGlkYXRlVHJhbnNmb3JtUXVhdGVybmlvbih0cmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sUG9pbnRzLnB1c2godHJhbnNmb3JtLmdldEFic29sdXRlUG9zaXRpb24oKS5jbG9uZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhd1BvaW50cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbFBvaW50OkJBQllMT04uTWVzaCA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlU3BoZXJlKHRyYW5zZm9ybS5uYW1lICsgXCIuV2lyZVNwaGVyZVwiLCB7IHNlZ21lbnRzOiAyNCwgZGlhbWV0ZXI6ICh0aGlzLnBvaW50U2l6ZSAqIDIpIH0sIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50LnBhcmVudCA9IHRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludC5wb3NpdGlvbi5zZXQoMCwwLDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50LnZpc2liaWxpdHkgPSAwLjI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50LmlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sUG9pbnQubWF0ZXJpYWwgPSB0aGlzLl93YXlwb2ludFNwaGVyZU1hdGVyaWFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2F5cG9pbnRTcGxpbmVDdXJ2ZSA9IEJBQllMT04uQ3VydmUzLkNyZWF0ZUNhdG11bGxSb21TcGxpbmUoY29udHJvbFBvaW50cywgdGhpcy5yZXNvbHV0aW9uLCB0aGlzLmNsb3NlZExvb3ApO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl93YXlwb2ludFNwbGluZUN1cnZlICE9IG51bGwpIHRoaXMuX3dheXBvaW50U3BsaW5lUG9zaXRpb25zID0gdGhpcy5fd2F5cG9pbnRTcGxpbmVDdXJ2ZS5nZXRQb2ludHMoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fd2F5cG9pbnRTcGxpbmVQb3NpdGlvbnMgIT0gbnVsbCkgY29uc29sZS53YXJuKFwiREVCVUc6IFdheXBvaW50IE1hbmFnZXIgLSBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUgKyBcIjogKFwiICsgdGhpcy5fd2F5cG9pbnRUcmFuc2Zvcm1Ob2Rlcy5sZW5ndGggKyBcIiAtIFwiICsgdGhpcy5fd2F5cG9pbnRTcGxpbmVQb3NpdGlvbnMubGVuZ3RoICsgXCIgLSBcIiArIHRoaXMuX3dheXBvaW50U3BsaW5lQ3VydmUubGVuZ3RoKCkudG9GaXhlZCgyKSArIFwiKVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKSA6dm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5fd2F5cG9pbnRTcGxpbmVQb3NpdGlvbnMgIT0gbnVsbCAmJiB0aGlzLmRyYXdMaW5lcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dheXBvaW50TWVzaExpbmVzID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVMaW5lcygodGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiLlNwbGluZU1lc2hcIiksIHsgcG9pbnRzOiB0aGlzLl93YXlwb2ludFNwbGluZVBvc2l0aW9ucyB9LCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICB0aGlzLl93YXlwb2ludE1lc2hMaW5lcy5wYXJlbnQgPSB0aGlzLnRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICB0aGlzLl93YXlwb2ludE1lc2hMaW5lcy5jb2xvciA9IHRoaXMubGluZUNvbG9yOyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMubGluZUNvbG9yID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3dheXBvaW50U3BsaW5lQ3VydmUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fd2F5cG9pbnRUcmFuc2Zvcm1Ob2RlcyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl93YXlwb2ludFNwbGluZVBvc2l0aW9ucyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5fd2F5cG9pbnRNZXNoTGluZXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dheXBvaW50TWVzaExpbmVzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl93YXlwb2ludE1lc2hMaW5lcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgKiBAY2xhc3MgUGFpbnRzaG9wTWFuYWdlclxuICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFBhaW50c2hvcE1hbmFnZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgYmFzZUNvbG9yOkJBQllMT04uQ29sb3IzID0gQkFCWUxPTi5Db2xvcjMuV2hpdGUoKTtcbiAgICAgICAgcHJpdmF0ZSBiYXNlTWF0ZXJpYWw6QkFCWUxPTi5NYXRlcmlhbCA9IG51bGw7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMuYmFzZUNvbG9yID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VDb2xvcjModGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJhc2VDb2xvclwiLCB0aGlzLmJhc2VDb2xvcikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBUT0RPOiBGaW5kIFNraW4gTWVzaCBBbmQgR2V0IE1hdGVyaWFsIFRvIENsb25lXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBza2lkbWFyayBzZWN0aW9uIGNsYXNzIChOYXRpdmUgQnVsbGV0IFBoeXNpY3MgMi44MilcbiAgICAgKiBAY2xhc3MgU2tpZG1hcmtTZWN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFNraWRtYXJrU2VjdGlvbiB7XG4gICAgICAgIHB1YmxpYyBQb3M6QkFCWUxPTi5WZWN0b3IzID0gQkFCWUxPTi5WZWN0b3IzLlplcm8oKTtcbiAgICAgICAgcHVibGljIE5vcm1hbDpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwdWJsaWMgVGFuZ2VudDpCQUJZTE9OLlZlY3RvcjQgPSBCQUJZTE9OLlZlY3RvcjQuWmVybygpO1xuICAgICAgICBwdWJsaWMgUG9zbDpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwdWJsaWMgUG9zcjpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuICAgICAgICBwdWJsaWMgSW50ZW5zaXR5Om51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIExhc3RJbmRleDpudW1iZXIgPSAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIFNraWRtYXJrTWFuYWdlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBTa2lkbWFya01hbmFnZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIE1BWF9NQVJLUzpudW1iZXIgPSA0MDk2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1heCBudW1iZXIgb2YgbWFya3MgdG90YWwgZm9yIGV2ZXJ5b25lIHRvZ2V0aGVyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEdST1VORF9PRkZTRVQ6bnVtYmVyID0gMC4wMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERpc3RhbmNlIGFib3ZlIHN1cmZhY2UgaW4gbWV0cmVzXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEdQVV9UUklBTkdMRVM6Ym9vbGVhbiA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdQVSBxdWFkIHRyaWFuZ2xlIGluZGljZXMgb25seVxuICAgICAgICBwcml2YXRlIHN0YXRpYyBNQVJLX0NPTE9SOkJBQllMT04uQ29sb3IzID0gQkFCWUxPTi5Db2xvcjMuQmxhY2soKTsgICAgICAvLyBTa2lkbWFyayBDb2xvclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBNQVJLX1dJRFRIOm51bWJlciA9IDAuMzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaWR0aCBvZiB0aGUgU2tpZG1hcmtzLiBTaG91bGQgbWF0Y2ggdGhlIHdpZHRoIG9mIHRoZSB3aGVlbHNcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVEVYX0lOVEVOU0lUWTpudW1iZXIgPSAxLjA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1vdW50IG9mIHRoZSBza2lkbWFyayB0ZXh0dXJlIGludGVuc2l0eSBjb2VmZmVjaWVudFxuICAgICAgICBwcml2YXRlIHN0YXRpYyBNSU5fRElTVEFOQ0U6bnVtYmVyID0gMC4xOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXN0YW5jZSBiZXR3ZWVuIHNraWQgdGV4dHVyZSBzZWN0aW9ucyBpbiBtZXRyZXMuIEJpZ2dlciA9IGJldHRlciBwZXJmb3JtYW5jZSwgbGVzcyBzbW9vdGhcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTUlOX1NRUl9ESVNUQU5DRSA9IChTa2lkbWFya01hbmFnZXIuTUlOX0RJU1RBTkNFICogU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSk7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFRFWFRVUkVfTUFSS1M6YW55ID0gbnVsbDtcblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkQnVmZmVyUG9zaXRpb25zOkZsb2F0MzJBcnJheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRCdWZmZXJOb3JtYWxzOkZsb2F0MzJBcnJheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRCdWZmZXJUYW5nZW50czpGbG9hdDMyQXJyYXkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkQnVmZmVyQ29sb3JzOkZsb2F0MzJBcnJheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRCdWZmZXJVdnM6RmxvYXQzMkFycmF5ID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU2tpZEJ1ZmZlckluZGljZXM6SW50MzJBcnJheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRtYXJrU2VjdGlvbnM6U2tpZG1hcmtTZWN0aW9uW10gPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkbWFya0luZGV4Om51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNraWRtYXJrTWVzaDpCQUJZTE9OLk1lc2ggPSBudWxsO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBTa2lkbWFya1VwZGF0ZWQ6Ym9vbGVhbiA9IGZhbHNlO1xuXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFRlbXBWZWN0b3IzX1BPUzpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVGVtcFZlY3RvcjNfRElSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBUZW1wVmVjdG9yM19YRElSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcml2YXRlIHN0YXRpYyBUZW1wVmVjdG9yM19TRElSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuTUFYX01BUktTID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heFNlY3Rpb25zXCIsIFNraWRtYXJrTWFuYWdlci5NQVhfTUFSS1MpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLk1BUktfQ09MT1IgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZUNvbG9yMyh0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidGV4dHVyZUNvbG9yXCIsIFNraWRtYXJrTWFuYWdlci5NQVJLX0NPTE9SKSk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuTUFSS19XSURUSCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0ZXh0dXJlV2lkdGhcIiwgU2tpZG1hcmtNYW5hZ2VyLk1BUktfV0lEVEgpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLkdST1VORF9PRkZTRVQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ3JvdW5kT2Zmc2V0XCIsIFNraWRtYXJrTWFuYWdlci5HUk9VTkRfT0ZGU0VUKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5HUFVfVFJJQU5HTEVTID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdwdVF1YWRJbmRpY2VzXCIsIFNraWRtYXJrTWFuYWdlci5HUFVfVFJJQU5HTEVTKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5URVhUVVJFX01BUktTID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRleHR1cmVNYXJrc1wiLCBTa2lkbWFya01hbmFnZXIuVEVYVFVSRV9NQVJLUyk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVEVYX0lOVEVOU0lUWSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0ZXh0dXJlSW50ZW5zaXR5XCIsIFNraWRtYXJrTWFuYWdlci5URVhfSU5URU5TSVRZKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5NSU5fRElTVEFOQ0UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwidGV4dHVyZURpc3RhbmNlXCIsIFNraWRtYXJrTWFuYWdlci5NSU5fRElTVEFOQ0UpO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLk1JTl9TUVJfRElTVEFOQ0UgPSAoU2tpZG1hcmtNYW5hZ2VyLk1JTl9ESVNUQU5DRSAqIFNraWRtYXJrTWFuYWdlci5NSU5fRElTVEFOQ0UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQgeyBTa2lkbWFya01hbmFnZXIuQ3JlYXRlU2tpZG1hcmtNYW5hZ2VyKHRoaXMuc2NlbmUpOyB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKTogdm9pZCB7IFNraWRtYXJrTWFuYWdlci5VcGRhdGVTa2lkbWFya01hbmFnZXIoKTsgfVxuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgQWRkU2tpZG1hcmtTZWdtZW50KHBvczpCQUJZTE9OLlZlY3RvcjMsIG5vcm1hbDpCQUJZTE9OLlZlY3RvcjMsIGludGVuc2l0eTpudW1iZXIsIGxhc3RJbmRleDpudW1iZXIpOkJBQllMT04uTnVsbGFibGU8bnVtYmVyPiB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19QT1Muc2V0KDAsMCwwKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19ESVIuc2V0KDAsMCwwKTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19YRElSLnNldCgwLDAsMCk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUi5zZXQoMCwwLDApO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmIChpbnRlbnNpdHkgPiAxLjApIGludGVuc2l0eSA9IDEuMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGludGVuc2l0eSA8IDAuMCkgcmV0dXJuIC0xLjA7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBwb3Muc3VidHJhY3RUb1JlZihTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tsYXN0SW5kZXhdLlBvcywgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3FyRGlzdGFuY2U6bnVtYmVyID0gU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUy5sZW5ndGhTcXVhcmVkKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNxckRpc3RhbmNlIDwgU2tpZG1hcmtNYW5hZ2VyLk1JTl9TUVJfRElTVEFOQ0UpIHJldHVybiBsYXN0SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgY29uc3QgY3VyU2VjdGlvbjpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleF07XG4gICAgICAgICAgICBub3JtYWwuc2NhbGVUb1JlZihTa2lkbWFya01hbmFnZXIuR1JPVU5EX09GRlNFVCwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUyk7XG4gICAgICAgICAgICBwb3MuYWRkVG9SZWYoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1BPUywgY3VyU2VjdGlvbi5Qb3MpO1xuICAgICAgICAgICAgY3VyU2VjdGlvbi5Ob3JtYWwuY29weUZyb20obm9ybWFsKTtcbiAgICAgICAgICAgIGN1clNlY3Rpb24uSW50ZW5zaXR5ID0gKGludGVuc2l0eSAqIFNraWRtYXJrTWFuYWdlci5URVhfSU5URU5TSVRZKTtcbiAgICAgICAgICAgIGN1clNlY3Rpb24uTGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0U2VjdGlvbjpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tsYXN0SW5kZXhdO1xuICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uUG9zLnN1YnRyYWN0VG9SZWYobGFzdFNlY3Rpb24uUG9zLCBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfRElSKTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlZlY3RvcjMuQ3Jvc3NUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfRElSLCBub3JtYWwsIFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19YRElSKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUi5ub3JtYWxpemVUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUik7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfWERJUi5zY2FsZVRvUmVmKFNraWRtYXJrTWFuYWdlci5NQVJLX1dJRFRIICogMC41LCBTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUilcbiAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5hZGRUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUiwgY3VyU2VjdGlvbi5Qb3NsKTtcbiAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5zdWJ0cmFjdFRvUmVmKFNraWRtYXJrTWFuYWdlci5UZW1wVmVjdG9yM19TRElSLCBjdXJTZWN0aW9uLlBvc3IpO1xuICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uVGFuZ2VudC5zZXQoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueCwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueSwgU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1hESVIueiwgMSk7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBpZiAobGFzdFNlY3Rpb24uTGFzdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJTZWN0aW9uLlBvcy5hZGRUb1JlZihTa2lkbWFya01hbmFnZXIuVGVtcFZlY3RvcjNfU0RJUiwgbGFzdFNlY3Rpb24uUG9zbCk7XG4gICAgICAgICAgICAgICAgICAgIGN1clNlY3Rpb24uUG9zLnN1YnRyYWN0VG9SZWYoU2tpZG1hcmtNYW5hZ2VyLlRlbXBWZWN0b3IzX1NESVIsIGxhc3RTZWN0aW9uLlBvc3IpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0U2VjdGlvbi5UYW5nZW50LmNvcHlGcm9tKGN1clNlY3Rpb24uVGFuZ2VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5BZGRTa2lkbWFya1ZlcnRleERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1ckluZGV4Om51bWJlciA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggPSArK1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICUgU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUztcbiAgICAgICAgICAgIHJldHVybiBjdXJJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIHN0YXRpYyBDcmVhdGVTa2lkbWFya01hbmFnZXIoc2NlbmU6QkFCWUxPTi5TY2VuZSk6dm9pZCB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpZG1hcmtNYXRlcmlhbDpCQUJZTE9OLlN0YW5kYXJkTWF0ZXJpYWwgPSBuZXcgQkFCWUxPTi5TdGFuZGFyZE1hdGVyaWFsKFwiU2tpZG1hcmtNYXRlcmlhbFwiLCBzY2VuZSk7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5iYWNrRmFjZUN1bGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpc2FibGVMaWdodGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5lbWlzc2l2ZUNvbG9yID0gU2tpZG1hcmtNYW5hZ2VyLk1BUktfQ09MT1I7XG4gICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBTa2lkbWFya01hbmFnZXIuTUFSS19DT0xPUjtcbiAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VUZXh0dXJlKFNraWRtYXJrTWFuYWdlci5URVhUVVJFX01BUktTLCBzY2VuZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRtYXJrTWF0ZXJpYWwuZGlmZnVzZVRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBza2lkbWFya01hdGVyaWFsLmRpZmZ1c2VUZXh0dXJlLmhhc0FscGhhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgc2tpZG1hcmtNYXRlcmlhbC51c2VBbHBoYUZyb21EaWZmdXNlVGV4dHVyZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNraWRtYXJrTWF0ZXJpYWwuZnJlZXplKCk7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCA9IG5ldyBCQUJZTE9OLk1lc2goXCJTa2lkbWFya01lc2hcIiwgc2NlbmUpO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2gubWF0ZXJpYWwgPSBza2lkbWFya01hdGVyaWFsO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guYWx3YXlzU2VsZWN0QXNBY3RpdmVNZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmRvTm90U3luY0JvdW5kaW5nSW5mbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5yZWNlaXZlU2hhZG93cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guY2hlY2tDb2xsaXNpb25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC51c2VWZXJ0ZXhDb2xvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guaGFzVmVydGV4QWxwaGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guaXNQaWNrYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgU2tpZG1hcmsgU2VjdGlvbiBQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9ucyA9IG5ldyBBcnJheTxTa2lkbWFya1NlY3Rpb24+KFNraWRtYXJrTWFuYWdlci5NQVhfTUFSS1MpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnNbaV0gPSBuZXcgU2tpZG1hcmtTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgUmF3IE1lc2ggVmVydGV4IEJ1ZmZlciBEYXRhXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiAzKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KFNraWRtYXJrTWFuYWdlci5NQVhfTUFSS1MgKiA0ICogMyk7XG4gICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiA0KTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiA0KTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2cyA9IG5ldyBGbG9hdDMyQXJyYXkoU2tpZG1hcmtNYW5hZ2VyLk1BWF9NQVJLUyAqIDQgKiAyKTtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXMgPSBuZXcgSW50MzJBcnJheShTa2lkbWFya01hbmFnZXIuTUFYX01BUktTICogNik7XG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBSYXcgVmVydGV4IEJ1ZmZlciBEYXRhIFRvIE1lc2hcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleERhdGEgPSBuZXcgQkFCWUxPTi5WZXJ0ZXhEYXRhKCk7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS5wb3NpdGlvbnMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclBvc2l0aW9ucztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLm5vcm1hbHMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHM7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS50YW5nZW50cyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHM7XG4gICAgICAgICAgICAgICAgdmVydGV4RGF0YS5jb2xvcnMgPSBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9ycztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLnV2cyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzOyAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZlcnRleERhdGEuaW5kaWNlcyA9IFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlcztcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEYXRhLmFwcGx5VG9NZXNoKFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2gsIHRydWUpO1xuICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZnJlZXplV29ybGRNYXRyaXgoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIHN0YXRpYyBBZGRTa2lkbWFya1ZlcnRleERhdGEoKTp2b2lkIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnI6U2tpZG1hcmtTZWN0aW9uID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrU2VjdGlvbnNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXhdO1xuICAgICAgICAgICAgaWYgKGN1cnIuTGFzdEluZGV4ID09PSAtMSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgbGFzdDpTa2lkbWFya1NlY3Rpb24gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtTZWN0aW9uc1tjdXJyLkxhc3RJbmRleF07XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtVcGRhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAvLyBVcGRhdGUgUG9zaXRpb24gQnVmZmVycyBEaXJlY3RseVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGxldCBpbmRleDpudW1iZXIgPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGxhc3QuUG9zbC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGxhc3QuUG9zbC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGxhc3QuUG9zbC56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAxO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGxhc3QuUG9zci54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGxhc3QuUG9zci55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGxhc3QuUG9zci56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAyO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGN1cnIuUG9zbC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGN1cnIuUG9zbC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGN1cnIuUG9zbC56O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAzO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbaW5kZXggKiAzXSA9IGN1cnIuUG9zci54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAxXSA9IGN1cnIuUG9zci55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnNbKGluZGV4ICogMykgKyAyXSA9IGN1cnIuUG9zci56O1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBOb3JtYWwgQnVmZmVycyBEaXJlY3RseVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gbGFzdC5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gbGFzdC5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gbGFzdC5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gbGFzdC5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gbGFzdC5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gbGFzdC5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gY3Vyci5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gY3Vyci5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gY3Vyci5Ob3JtYWwuejtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMztcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1tpbmRleCAqIDNdID0gY3Vyci5Ob3JtYWwueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDFdID0gY3Vyci5Ob3JtYWwueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyTm9ybWFsc1soaW5kZXggKiAzKSArIDJdID0gY3Vyci5Ob3JtYWwuejtcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAvLyBVcGRhdGUgVGFuZ2VudCBCdWZmZXJzIERpcmVjdGx5XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1tpbmRleCAqIDRdID0gbGFzdC5UYW5nZW50Lng7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMV0gPSBsYXN0LlRhbmdlbnQueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAyXSA9IGxhc3QuVGFuZ2VudC56O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5UYW5nZW50Lnc7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzW2luZGV4ICogNF0gPSBsYXN0LlRhbmdlbnQueDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAxXSA9IGxhc3QuVGFuZ2VudC55O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDJdID0gbGFzdC5UYW5nZW50Lno7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgM10gPSBsYXN0LlRhbmdlbnQudztcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbaW5kZXggKiA0XSA9IGN1cnIuVGFuZ2VudC54O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDFdID0gY3Vyci5UYW5nZW50Lnk7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMl0gPSBjdXJyLlRhbmdlbnQuejtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAzXSA9IGN1cnIuVGFuZ2VudC53O1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAzO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1tpbmRleCAqIDRdID0gY3Vyci5UYW5nZW50Lng7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclRhbmdlbnRzWyhpbmRleCAqIDQpICsgMV0gPSBjdXJyLlRhbmdlbnQueTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVGFuZ2VudHNbKGluZGV4ICogNCkgKyAyXSA9IGN1cnIuVGFuZ2VudC56O1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50c1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5UYW5nZW50Lnc7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIENvbG9yIEJ1ZmZlcnMgRGlyZWN0bHlcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gbGFzdC5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDI7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5JbnRlbnNpdHk7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1tpbmRleCAqIDRdID0gMS4wO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnNbKGluZGV4ICogNCkgKyAxXSA9IDEuMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyQ29sb3JzWyhpbmRleCAqIDQpICsgMl0gPSAxLjA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckNvbG9yc1soaW5kZXggKiA0KSArIDNdID0gY3Vyci5JbnRlbnNpdHk7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIENvb3JkIEJ1ZmZlcnMgRGlyZWN0bHlcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDA7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1tpbmRleCAqIDJdID0gMDtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzWyhpbmRleCAqIDIpICsgMV0gPSAwO1xuICAgICAgICAgICAgaW5kZXggPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAxO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJVdnNbaW5kZXggKiAyXSA9IDE7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1soaW5kZXggKiAyKSArIDFdID0gMDtcbiAgICAgICAgICAgIGluZGV4ID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMjtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzW2luZGV4ICogMl0gPSAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJVdnNbKGluZGV4ICogMikgKyAxXSA9IDE7XG4gICAgICAgICAgICBpbmRleCA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlclV2c1tpbmRleCAqIDJdID0gMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzWyhpbmRleCAqIDIpICsgMV0gPSAxO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBUcmlhbmdsZSAxIEJ1ZmZlcnMgRGlyZWN0bHkgKFFVQUQpXG4gICAgICAgICAgICAvLy4uXG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA2ICsgMF0gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAwO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJJbmRpY2VzW1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNiArIDJdID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDYgKyAxXSA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDI7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgLy8gVXBkYXRlIFRyaWFuZ2xlIDIgQnVmZmVycyBEaXJlY3RseSAoUVVBRClcbiAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXNbU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA2ICsgM10gPSBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDQgKyAyO1xuICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJJbmRpY2VzW1NraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNiArIDVdID0gU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrSW5kZXggKiA0ICsgMTtcbiAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVySW5kaWNlc1tTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtJbmRleCAqIDYgKyA0XSA9IFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya0luZGV4ICogNCArIDM7XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgVXBkYXRlU2tpZG1hcmtNYW5hZ2VyKCk6dm9pZCB7XG4gICAgICAgICAgICBpZiAoU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaCAhPSBudWxsICYmIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya1VwZGF0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtVcGRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZ2VvbWV0cnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmdlb21ldHJ5LnVwZGF0ZVZlcnRpY2VzRGF0YURpcmVjdGx5KEJBQllMT04uVmVydGV4QnVmZmVyLlBvc2l0aW9uS2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJQb3NpdGlvbnMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5Ob3JtYWxLaW5kLCBTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlck5vcm1hbHMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5UYW5nZW50S2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJUYW5nZW50cywgMCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBTa2lkbWFya01hbmFnZXIuU2tpZG1hcmtNZXNoLmdlb21ldHJ5LnVwZGF0ZVZlcnRpY2VzRGF0YURpcmVjdGx5KEJBQllMT04uVmVydGV4QnVmZmVyLkNvbG9yS2luZCwgU2tpZG1hcmtNYW5hZ2VyLlNraWRCdWZmZXJDb2xvcnMsIDAsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgU2tpZG1hcmtNYW5hZ2VyLlNraWRtYXJrTWVzaC5nZW9tZXRyeS51cGRhdGVWZXJ0aWNlc0RhdGFEaXJlY3RseShCQUJZTE9OLlZlcnRleEJ1ZmZlci5VVktpbmQsIFNraWRtYXJrTWFuYWdlci5Ta2lkQnVmZmVyVXZzLCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIFNraWRtYXJrTWFuYWdlci5Ta2lkbWFya01lc2guZ2VvbWV0cnkudXBkYXRlSW5kaWNlcyhTa2lkbWFya01hbmFnZXIuU2tpZEJ1ZmZlckluZGljZXMsIDAsIFNraWRtYXJrTWFuYWdlci5HUFVfVFJJQU5HTEVTKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlIFBST0pFQ1Qge1xuICAgIC8qKlxuICAgICAqIEJhYnlsb24gc3RhbmRhcmQgcmlnaWRib2R5IHZlaGljbGUgY29udHJvbGxlciBjbGFzcyAoTmF0aXZlIEJ1bGxldCBQaHlzaWNzIDIuODIpXG4gICAgICogQGNsYXNzIFN0YW5kYXJkQ2FyQ29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBTdGFuZGFyZENhckNvbnRyb2xsZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTUlOX1JQTSA9IDEwMDA7XG4gICAgICAgIHB1YmxpYyBzdGF0aWMgTUFYX1JQTSA9IDYwMDA7XG5cbiAgICAgICAgcHJpdmF0ZSBfcmlnaWRib2R5OkJBQllMT04uUmlnaWRib2R5UGh5c2ljcyA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgX2VuZ2luZUF1ZGlvU291cmNlOkJBQllMT04uQXVkaW9Tb3VyY2UgPSBudWxsO1xuICAgICAgICBwcml2YXRlIF9za2lkQXVkaW9Tb3VyY2U6QkFCWUxPTi5BdWRpb1NvdXJjZSA9IG51bGw7XG5cbiAgICAgICAgcHJpdmF0ZSBnZWFySW5kZXg6bnVtYmVyID0gMDsgLy8gRmlyc3QgR2VhciBSYXRpb1xuICAgICAgICBwcml2YXRlIGRvd25TaGlmdDpudW1iZXIgPSAxMDAwO1xuICAgICAgICBwcml2YXRlIHNoaWZ0aW5nVGltZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGVuZ2luZUZvcmNlOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgbGluZWFyRGFtcGluZzpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGFuZ3VsYXJEYW1waW5nOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgZm9yd2FyZFNwZWVkOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgYWJzb2x1dGVTcGVlZDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGFtZXJpY2FuU3BlZWQ6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBub3JtYWxpemVkU3BlZWQ6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udFdoZWVsUG93ZXI6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrV2hlZWxQb3dlcjpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHdoZWVsQnJha2luZ0ZvcmNlOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgdmlzdWFsU3RlZXJBbmdsZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBoeXNpY3NTdGVlckFuZ2xlOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgdmVoaWNsZVJlc2V0Q2hlY2s6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSByYXljYXN0VmVoaWNsZTpCQUJZTE9OLlJheWNhc3RWZWhpY2xlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udExlZnRXaGVlbFRyYW5zOkJBQllMT04uSVVuaXR5VHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udFJpZ2h0V2hlZWxUcmFuczpCQUJZTE9OLklVbml0eVRyYW5zZm9ybSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYmFja0xlZnRXaGVlbFRyYW5zOkJBQllMT04uSVVuaXR5VHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrUmlnaHRXaGVlbFRyYW5zOkJBQllMT04uSVVuaXR5VHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udExlZnRXaGVlbE1lc2g6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udFJpZ2h0V2hlZWxNZXNoOkJBQllMT04uVHJhbnNmb3JtTm9kZSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYmFja0xlZnRXaGVlbE1lc2g6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrUmlnaHRXaGVlbE1lc2g6QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udExlZnRXaGVlbEVtaXR0ZXI6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250UmlnaHRXaGVlbEVtaXR0ZXI6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tMZWZ0V2hlZWxFbWl0dGVyOkJBQllMT04uQWJzdHJhY3RNZXNoID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBiYWNrUmlnaHRXaGVlbEVtaXR0ZXI6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250TGVmdFdoZWVsUGFydGljbGU6QkFCWUxPTi5QYXJ0aWNsZVN5c3RlbSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgZnJvbnRSaWdodFdoZWVsUGFydGljbGU6QkFCWUxPTi5QYXJ0aWNsZVN5c3RlbSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYmFja0xlZnRXaGVlbFBhcnRpY2xlOkJBQllMT04uUGFydGljbGVTeXN0ZW0gPSBudWxsO1xuICAgICAgICBwcml2YXRlIGJhY2tSaWdodFdoZWVsUGFydGljbGU6QkFCWUxPTi5QYXJ0aWNsZVN5c3RlbSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgZnJvbnRMZWZ0V2hlZWxDb2xsaWRlcjphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGZyb250UmlnaHRXaGVlbENvbGxpZGVyOmFueSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYmFja0xlZnRXaGVlbENvbGxpZGVyOmFueSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYmFja1JpZ2h0V2hlZWxDb2xsaWRlcjphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIGVuZ2luZVRvcnF1ZUN1cnZlOkJBQllMT04uQW5pbWF0aW9uID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbFJhZGl1czpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGNsdXRjaFNsaXA6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBlbmdpbmVSUE06bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBwaXRjaFJQTTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHNoaWZ0UlBNOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgRlJPTlRfTEVGVDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBGUk9OVF9SSUdIVDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBCQUNLX0xFRlQ6bnVtYmVyID0gLTE7XG4gICAgICAgIHByaXZhdGUgQkFDS19SSUdIVDpudW1iZXIgPSAtMTtcblxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudEJyYWtpbmcoKTpib29sZWFuIHsgcmV0dXJuICh0aGlzLmN1cnJlbnRGb3J3YXJkIDwgMCAmJiB0aGlzLmZvcndhcmRTcGVlZCA+IDEpOyB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50Rm9yd2FyZCgpOm51bWJlciB7IHJldHVybiB0aGlzLmN1cnJlbnRGb3J3YXJkOyB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50VHVybmluZygpOm51bWJlciB7IHJldHVybiB0aGlzLmN1cnJlbnRUdXJuaW5nOyB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50U2tpZGRpbmcoKTpib29sZWFuIHsgcmV0dXJuIHRoaXMuY3VycmVudFNraWRkaW5nOyB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50RHJpZnRpbmcoKTpib29sZWFuIHsgcmV0dXJuIHRoaXMuY3VycmVudERyaWZ0aW5nOyB9XG4gICAgICAgIHB1YmxpYyBnZXRSaWdpZGJvZHlQaHlzaWNzKCk6QkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzIHsgcmV0dXJuIHRoaXMuX3JpZ2lkYm9keTsgfVxuICAgICAgICBwdWJsaWMgZ2V0UmF5Y2FzdFZlaGljbGUoKTpCQUJZTE9OLlJheWNhc3RWZWhpY2xlIHsgcmV0dXJuIHRoaXMucmF5Y2FzdFZlaGljbGU7IH1cbiAgICAgICAgcHVibGljIGdldEZvcndhcmRTcGVlZCgpOm51bWJlciB7IHJldHVybiB0aGlzLmFic29sdXRlU3BlZWQ7IH1cbiAgICAgICAgcHVibGljIGdldEFic29sdXRlU3BlZWQoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5mb3J3YXJkU3BlZWQ7IH1cbiAgICAgICAgcHVibGljIGdldEFtZXJpY2FuU3BlZWQoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5hbWVyaWNhblNwZWVkOyB9XG4gICAgICAgIHB1YmxpYyBnZXROb3JtYWxpemVkU3BlZWQoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5ub3JtYWxpemVkU3BlZWQ7IH1cbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRHZWFySW5kZXgoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5nZWFySW5kZXggfVxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudEVuZ2luZVJQTSgpOm51bWJlciB7IHJldHVybiB0aGlzLmVuZ2luZVJQTSB9XG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50RW5naW5lUGl0Y2goKTpudW1iZXIgeyByZXR1cm4gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoKHRoaXMucGl0Y2hSUE0gLyB0aGlzLmdlYXJCb3hNYXhQaXRjaGluZykgKyAwLjEpOyB9XG4gICAgICAgIHB1YmxpYyBnZXRHZWFyU2hpZnRSYXRpb0NvdW50KCk6bnVtYmVyIHsgcmV0dXJuICh0aGlzLmdlYXJCb3hTaGlmdFJhdGlvcyAhPSBudWxsKSA/IHRoaXMuZ2VhckJveFNoaWZ0UmF0aW9zLmxlbmd0aCA6IDAgfVxuICAgICAgICBwdWJsaWMgZ2V0U21va2VUZXh0dXJlTWFzaygpOkJBQllMT04uVGV4dHVyZSB7IHJldHVybiB0aGlzLnNtb2tlVGV4dHVyZTsgfVxuICAgICAgICBwdWJsaWMgZ2V0U2hhZG93VGV4dHVyZU1hc2soKTpCQUJZTE9OLlRleHR1cmUgeyByZXR1cm4gdGhpcy5zaGFkb3dUZXh0dXJlOyB9XG4gICAgICAgIHB1YmxpYyBnZXRGcm9udExlZnRXaGVlbE5vZGUoKTpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgeyByZXR1cm4gdGhpcy5mcm9udExlZnRXaGVlbE1lc2g7IH1cbiAgICAgICAgcHVibGljIGdldEZyb250UmlnaHRXaGVlbE5vZGUoKTpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgeyByZXR1cm4gdGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoOyB9XG4gICAgICAgIHB1YmxpYyBnZXRCYWNrTGVmdFdoZWVsTm9kZSgpOkJBQllMT04uVHJhbnNmb3JtTm9kZSB7IHJldHVybiB0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoOyB9XG4gICAgICAgIHB1YmxpYyBnZXRCYWNrUmlnaHRXaGVlbE5vZGUoKTpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgeyByZXR1cm4gdGhpcy5iYWNrUmlnaHRXaGVlbE1lc2g7IH1cbiAgICAgICAgcHVibGljIGdldFdoZWVsQnVybm91dEVuYWJsZWQoKTpib29sZWFuIHsgcmV0dXJuIHRoaXMud2hlZWxCdXJub3V0OyB9XG4gICAgICAgIHB1YmxpYyBnZXRXaGVlbERvbnV0c0VuYWJsZWQoKTpib29sZWFuIHsgcmV0dXJuIHRoaXMud2hlZWxEb251dHM7IH1cbiAgICAgICAgcHVibGljIGdldEN1cnJlbnREb251dFNwaW5UaW1lKCk6bnVtYmVyIHsgcmV0dXJuIHRoaXMuZG9udXRTcGluVGltZTsgfVxuICAgICAgICBwdWJsaWMgb25VcGRhdGVWZWhpY2xlSW5mb3JtYXRpb246KHNraWRfRkw6bnVtYmVyLCBza2lkX0ZSOm51bWJlciwgc2tpZF9STDpudW1iZXIsIHNraWRfUlI6bnVtYmVyKT0+dm9pZCA9IG51bGw7XG5cbiAgICAgICAgcHVibGljIHNtb2tlVGV4dHVyZTpCQUJZTE9OLlRleHR1cmUgPSBudWxsO1xuICAgICAgICBwdWJsaWMgc2hhZG93VGV4dHVyZTpCQUJZTE9OLlRleHR1cmUgPSBudWxsO1xuICAgICAgICBwdWJsaWMgc21va2VJbnRlbnNpdHk6bnVtYmVyID0gMTUwO1xuICAgICAgICBwdWJsaWMgc21va2VPcGFjaXR5Om51bWJlciA9IDAuMTtcbiAgICAgICAgcHVibGljIHNtb2tlRG9udXRzOm51bWJlciA9IDIuMDtcbiAgICAgICAgcHVibGljIHZlbG9jaXR5U2NhbGluZzpudW1iZXIgPSAwLjAyO1xuICAgICAgICBwdWJsaWMgc2tpZFRocmVhc2hvbGQ6bnVtYmVyID0gMC42NTtcbiAgICAgICAgcHVibGljIG1heFR1cm5BbmdsZTpudW1iZXIgPSAyMDtcbiAgICAgICAgcHVibGljIG1heEJ1cm5BbmdsZTpudW1iZXIgPSA0MDtcbiAgICAgICAgcHVibGljIG92ZXJTdGVlckRlbGF5Om51bWJlciA9IDAuMTtcbiAgICAgICAgcHVibGljIHN0ZWVyaW5nQm9vc3Q6bnVtYmVyID0gMztcbiAgICAgICAgcHVibGljIHRvcEVuZ2luZVNwZWVkOm51bWJlciA9IDEyNTtcbiAgICAgICAgcHVibGljIHBvd2VyQ29lZmZpY2llbnQ6bnVtYmVyID0gMS4wO1xuICAgICAgICBwdWJsaWMgbG93U3BlZWRBbmdsZTpudW1iZXIgPSAxMDtcbiAgICAgICAgcHVibGljIGhpZ2hTcGVlZEFuZ2xlOm51bWJlciA9IDE7XG4gICAgICAgIHB1YmxpYyBsb3dTcGVlZFR1cm5pbmc6bnVtYmVyID0gMC4wMTU7XG4gICAgICAgIHB1YmxpYyBoaWdoU3BlZWRUdXJuaW5nOm51bWJlciA9IDAuMDA1O1xuICAgICAgICBwdWJsaWMgc3RhYmxlRG93bkZvcmNlOm51bWJlciA9IDEuMDtcbiAgICAgICAgcHVibGljIHRyYW5zbWlzc2lvblJhdGlvOm51bWJlciA9IDAuNzU7XG4gICAgICAgIHB1YmxpYyBkaWZmZXJlbnRpYWxSYXRpbzpudW1iZXIgPSAzLjU1O1xuICAgICAgICBwdWJsaWMgbWF4RnJvbnRCcmFraW5nOm51bWJlciA9IDAuMjtcbiAgICAgICAgcHVibGljIG1heFJldmVyc2VQb3dlcjpudW1iZXIgPSAwLjU7XG4gICAgICAgIHB1YmxpYyBtaW5CcmFraW5nRm9yY2U6bnVtYmVyID0gNTA7XG4gICAgICAgIHB1YmxpYyBtYXhCcmFraW5nRm9yY2U6bnVtYmVyID0gMjUwO1xuICAgICAgICBwdWJsaWMgaGFuZEJyYWtpbmdGb3JjZTpudW1iZXIgPSAyNTAwO1xuICAgICAgICBwdWJsaWMgbGluZWFyQnJha2luZ0ZvcmNlOm51bWJlciA9IDAuMztcbiAgICAgICAgcHVibGljIGFuZ3VsYXJCcmFraW5nRm9yY2U6bnVtYmVyID0gMC4wO1xuICAgICAgICBwdWJsaWMgc2tpZFdoZW5Gb290QnJha2luZzpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBmb290QnJha2luZ1RocmVhc2hvbGQ6bnVtYmVyID0gMC45O1xuICAgICAgICBwdWJsaWMgZm9vdFNraWRCcmFraW5nRmFjdG9yOm51bWJlciA9IDEuNTtcbiAgICAgICAgcHVibGljIGZvb3RTa2lkQnJha2luZ1NwZWVkOm51bWJlciA9IDMwO1xuICAgICAgICBwdWJsaWMgd2hlZWxMb2NrRnJpY3Rpb246bnVtYmVyID0gMS4wO1xuICAgICAgICBwdWJsaWMgd2hlZWxCdXJuRnJpY3Rpb246bnVtYmVyID0gMS4wO1xuICAgICAgICBwdWJsaWMgZGVmYXVsdExlcnBTcGVlZDpudW1iZXIgPSAwLjY1O1xuICAgICAgICBwdWJsaWMgZHJpZnRpbmdMZXJwU3BlZWQ6bnVtYmVyID0gMC4yNTtcbiAgICAgICAgcHVibGljIGJ1cm5vdXRMZXJwU3BlZWQ6bnVtYmVyID0gMC4xO1xuICAgICAgICBwdWJsaWMgYnVybm91dFRpbWVEZWxheTpudW1iZXIgPSAxLjU7XG4gICAgICAgIHB1YmxpYyBidXJub3V0V2hlZWxQaXRjaDpudW1iZXIgPSAwLjg1O1xuICAgICAgICBwdWJsaWMgYnVybm91dENvZWZmaWNpZW50Om51bWJlciA9IDAuMDtcbiAgICAgICAgcHVibGljIGJ1cm5vdXRUcmlnZ2VyTWFyazpudW1iZXIgPSAxMDtcbiAgICAgICAgcHVibGljIHJlc2V0VmVoaWNsZVRpbWU6bnVtYmVyID0gMztcbiAgICAgICAgcHVibGljIHBsYXlWZWhpY2xlU291bmRzOmJvb2xlYW4gPSB0cnVlO1xuICAgICAgICBwdWJsaWMgdGhyb3R0bGVFbmdpbmVTcGVlZDpudW1iZXIgPSAwO1xuICAgICAgICBwdWJsaWMgd2hlZWxEcml2ZVR5cGU6bnVtYmVyID0gMDtcbiAgICAgICAgcHVibGljIGdlYXJCb3hNYXhQaXRjaGluZyA9IDY1MDA7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnRDaGFuZ2U6bnVtYmVyID0gNDUwMDtcbiAgICAgICAgcHVibGljIGdlYXJCb3hTaGlmdERlbGF5Om51bWJlciA9IDAuMzU7XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnRSYXRpb3M6bnVtYmVyW10gPSBbNC4xNywgMi4zNCwgMS41MiwgMS4xNCwgMC44OSwgMC42OF07XG4gICAgICAgIHB1YmxpYyBnZWFyQm94U2hpZnRSYW5nZXM6bnVtYmVyW10gPSBbMTAwMCwgMjQwMCwgMjgwMCwgMzIwMCwgMzIwMCwgMzIwMF07XG5cbiAgICAgICAgcHJvdGVjdGVkIG1fZnJvbnRMZWZ0V2hlZWw6YW55ID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fZnJvbnRSaWdodFdoZWVsOmFueSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX2JhY2tMZWZ0V2hlZWw6YW55ID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fYmFja1JpZ2h0V2hlZWw6YW55ID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fcGh5c2ljc1dvcmxkOmFueSA9IG51bGw7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgICAgICAgICAgdGhpcy5mcm9udFdoZWVsUG93ZXIgPSAwO1xuICAgICAgICAgICAgdGhpcy5iYWNrV2hlZWxQb3dlciA9IDA7XG4gICAgICAgICAgICB0aGlzLndoZWVsQnJha2luZ0ZvcmNlID0gMDtcbiAgICAgICAgICAgIHRoaXMudmlzdWFsU3RlZXJBbmdsZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVlckFuZ2xlID0gMDtcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlc2V0Q2hlY2sgPSAwO1xuICAgICAgICAgICAgdGhpcy5tX3BoeXNpY3NXb3JsZCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFBoeXNpY3NXb3JsZCh0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIHRoaXMuc21va2VJbnRlbnNpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic21va2VJbnRlbnNpdHlcIiwgdGhpcy5zbW9rZUludGVuc2l0eSk7XG4gICAgICAgICAgICB0aGlzLnNtb2tlT3BhY2l0eSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzbW9rZU9wYWNpdHlcIiwgdGhpcy5zbW9rZU9wYWNpdHkpO1xuICAgICAgICAgICAgdGhpcy5zbW9rZURvbnV0cyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzbW9rZURvbnV0c1wiLCB0aGlzLnNtb2tlRG9udXRzKTtcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHlTY2FsaW5nID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInZlbG9jaXR5U2NhbGluZ1wiLCB0aGlzLnZlbG9jaXR5U2NhbGluZyk7XG4gICAgICAgICAgICB0aGlzLnNraWRUaHJlYXNob2xkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInNraWRUaHJlYXNob2xkXCIsIHRoaXMuc2tpZFRocmVhc2hvbGQpO1xuICAgICAgICAgICAgdGhpcy50b3BFbmdpbmVTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0b3BFbmdpbmVTcGVlZFwiLCB0aGlzLnRvcEVuZ2luZVNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMucG93ZXJDb2VmZmljaWVudCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJwb3dlckNvZWZmaWNpZW50XCIsIHRoaXMucG93ZXJDb2VmZmljaWVudCk7XG4gICAgICAgICAgICB0aGlzLm1heEZyb250QnJha2luZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhGcm9udEJyYWtpbmdcIiwgdGhpcy5tYXhGcm9udEJyYWtpbmcpO1xuICAgICAgICAgICAgdGhpcy5tYXhSZXZlcnNlUG93ZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWF4UmV2ZXJzZVBvd2VyXCIsIHRoaXMubWF4UmV2ZXJzZVBvd2VyKTtcbiAgICAgICAgICAgIHRoaXMuc3RhYmxlRG93bkZvcmNlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInN0YWJsZURvd25Gb3JjZVwiLCB0aGlzLnN0YWJsZURvd25Gb3JjZSk7XG4gICAgICAgICAgICB0aGlzLm1heFR1cm5BbmdsZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhUdXJuQW5nbGVcIiwgdGhpcy5tYXhUdXJuQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy5tYXhCdXJuQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWF4QnVybkFuZ2xlXCIsIHRoaXMubWF4QnVybkFuZ2xlKTtcbiAgICAgICAgICAgIHRoaXMuc3RlZXJpbmdCb29zdCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzdGVlcmluZ0Jvb3N0XCIsIHRoaXMuc3RlZXJpbmdCb29zdCk7XG4gICAgICAgICAgICB0aGlzLm92ZXJTdGVlckRlbGF5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm92ZXJTdGVlckRlbGF5XCIsIHRoaXMub3ZlclN0ZWVyRGVsYXkpO1xuICAgICAgICAgICAgdGhpcy5sb3dTcGVlZEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImxvd1NwZWVkQW5nbGVcIiwgdGhpcy5sb3dTcGVlZEFuZ2xlKTtcbiAgICAgICAgICAgIHRoaXMuaGlnaFNwZWVkQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGlnaFNwZWVkQW5nbGVcIiwgdGhpcy5oaWdoU3BlZWRBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLndoZWVsRHJpdmVUeXBlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIndoZWVsRHJpdmVUeXBlXCIsIHRoaXMud2hlZWxEcml2ZVR5cGUpO1xuICAgICAgICAgICAgdGhpcy5taW5CcmFraW5nRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibWluQnJha2luZ0ZvcmNlXCIsIHRoaXMubWluQnJha2luZ0ZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMubWF4QnJha2luZ0ZvcmNlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1heEJyYWtpbmdGb3JjZVwiLCB0aGlzLm1heEJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICB0aGlzLmhhbmRCcmFraW5nRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGFuZEJyYWtpbmdGb3JjZVwiLCB0aGlzLmhhbmRCcmFraW5nRm9yY2UpO1xuICAgICAgICAgICAgdGhpcy5saW5lYXJCcmFraW5nRm9yY2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwibGluZWFyQnJha2luZ0ZvcmNlXCIsIHRoaXMubGluZWFyQnJha2luZ0ZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhbmd1bGFyQnJha2luZ0ZvcmNlXCIsIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICB0aGlzLmZvb3RCcmFraW5nVGhyZWFzaG9sZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmb290QnJha2luZ1RocmVhc2hvbGRcIiwgdGhpcy5mb290QnJha2luZ1RocmVhc2hvbGQpO1xuICAgICAgICAgICAgdGhpcy5za2lkV2hlbkZvb3RCcmFraW5nID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInNraWRXaGVuRm9vdEJyYWtpbmdcIiwgdGhpcy5za2lkV2hlbkZvb3RCcmFraW5nKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdFNraWRCcmFraW5nRmFjdG9yID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvb3RTa2lkQnJha2luZ0ZhY3RvclwiLCB0aGlzLmZvb3RTa2lkQnJha2luZ0ZhY3Rvcik7XG4gICAgICAgICAgICB0aGlzLmZvb3RTa2lkQnJha2luZ1NwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvb3RTa2lkQnJha2luZ1NwZWVkXCIsIHRoaXMuZm9vdFNraWRCcmFraW5nU3BlZWQpO1xuICAgICAgICAgICAgdGhpcy53aGVlbEJ1cm5GcmljdGlvbiA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ3aGVlbEJ1cm5GcmljdGlvblwiLCB0aGlzLndoZWVsQnVybkZyaWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMud2hlZWxMb2NrRnJpY3Rpb24gPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwid2hlZWxMb2NrRnJpY3Rpb25cIiwgdGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICB0aGlzLmxvd1NwZWVkVHVybmluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJsb3dTcGVlZFR1cm5pbmdcIiwgdGhpcy5sb3dTcGVlZFR1cm5pbmcpO1xuICAgICAgICAgICAgdGhpcy5oaWdoU3BlZWRUdXJuaW5nID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImhpZ2hTcGVlZFR1cm5pbmdcIiwgdGhpcy5oaWdoU3BlZWRUdXJuaW5nKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRMZWZ0V2hlZWxUcmFucyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmcm9udExlZnRXaGVlbE1lc2hcIiwgdGhpcy5mcm9udExlZnRXaGVlbFRyYW5zKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsVHJhbnMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZnJvbnRSaWdodFdoZWVsTWVzaFwiLCB0aGlzLmZyb250UmlnaHRXaGVlbFRyYW5zKTtcbiAgICAgICAgICAgIHRoaXMuYmFja0xlZnRXaGVlbFRyYW5zID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJlYXJMZWZ0V2hlZWxNZXNoXCIsIHRoaXMuYmFja0xlZnRXaGVlbFRyYW5zKTtcbiAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxUcmFucyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyZWFyUmlnaHRXaGVlbE1lc2hcIiwgdGhpcy5iYWNrUmlnaHRXaGVlbFRyYW5zKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJmcm9udExlZnRXaGVlbENvbGxpZGVyXCIsIHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlcik7XG4gICAgICAgICAgICB0aGlzLmZyb250UmlnaHRXaGVlbENvbGxpZGVyID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZyb250UmlnaHRXaGVlbENvbGxpZGVyXCIsIHRoaXMuZnJvbnRSaWdodFdoZWVsQ29sbGlkZXIpO1xuICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicmVhckxlZnRXaGVlbENvbGxpZGVyXCIsIHRoaXMuYmFja0xlZnRXaGVlbENvbGxpZGVyKTtcbiAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyZWFyUmlnaHRXaGVlbENvbGxpZGVyXCIsIHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlcik7XG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRMZXJwU3BlZWQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZGVmYXVsdExlcnBTcGVlZFwiLCB0aGlzLmRlZmF1bHRMZXJwU3BlZWQpO1xuICAgICAgICAgICAgdGhpcy5kcmlmdGluZ0xlcnBTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJkcmlmdGluZ0xlcnBTcGVlZFwiLCB0aGlzLmRyaWZ0aW5nTGVycFNwZWVkKTtcbiAgICAgICAgICAgIHRoaXMuYnVybm91dExlcnBTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJidXJub3V0TGVycFNwZWVkXCIsIHRoaXMuYnVybm91dExlcnBTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLmJ1cm5vdXRUaW1lRGVsYXkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYnVybm91dFRpbWVEZWxheVwiLCB0aGlzLmJ1cm5vdXRUaW1lRGVsYXkpO1xuICAgICAgICAgICAgdGhpcy5idXJub3V0V2hlZWxQaXRjaCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJidXJub3V0V2hlZWxQaXRjaFwiLCB0aGlzLmJ1cm5vdXRXaGVlbFBpdGNoKTtcbiAgICAgICAgICAgIHRoaXMuYnVybm91dENvZWZmaWNpZW50ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJ1cm5vdXRDb2VmZmljaWVudFwiLCB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCk7XG4gICAgICAgICAgICB0aGlzLmJ1cm5vdXRUcmlnZ2VyTWFyayA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJidXJub3V0VHJpZ2dlck1hcmtcIiwgdGhpcy5idXJub3V0VHJpZ2dlck1hcmspO1xuICAgICAgICAgICAgdGhpcy5yZXNldFZlaGljbGVUaW1lID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJlc2V0VmVoaWNsZVRpbWVcIiwgdGhpcy5yZXNldFZlaGljbGVUaW1lKTtcbiAgICAgICAgICAgIHRoaXMucGxheVZlaGljbGVTb3VuZHMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicGxheVZlaGljbGVTb3VuZHNcIiwgdGhpcy5wbGF5VmVoaWNsZVNvdW5kcyk7XG4gICAgICAgICAgICB0aGlzLmRpZmZlcmVudGlhbFJhdGlvID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdlYXJCb3hEaWZmZXJlbnRpYWxcIiwgdGhpcy5kaWZmZXJlbnRpYWxSYXRpbyk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zbWlzc2lvblJhdGlvID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImdlYXJCb3hPdmVyZHJpdmVcIiwgdGhpcy50cmFuc21pc3Npb25SYXRpbyk7XG4gICAgICAgICAgICB0aGlzLmdlYXJCb3hNYXhQaXRjaGluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJnZWFyQm94TWF4UGl0Y2hpbmdcIiwgdGhpcy5nZWFyQm94TWF4UGl0Y2hpbmcpO1xuICAgICAgICAgICAgdGhpcy5nZWFyQm94U2hpZnRDaGFuZ2UgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ2VhckJveFNoaWZ0Q2hhbmdlXCIsIHRoaXMuZ2VhckJveFNoaWZ0Q2hhbmdlKTtcbiAgICAgICAgICAgIHRoaXMuZ2VhckJveFNoaWZ0RGVsYXkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ2VhckJveFNoaWZ0RGVsYXlcIiwgdGhpcy5nZWFyQm94U2hpZnREZWxheSk7XG4gICAgICAgICAgICB0aGlzLmdlYXJCb3hTaGlmdFJhdGlvcyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJnZWFyQm94U2hpZnRSYXRpb3NcIiwgdGhpcy5nZWFyQm94U2hpZnRSYXRpb3MpO1xuICAgICAgICAgICAgdGhpcy5nZWFyQm94U2hpZnRSYW5nZXMgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZ2VhckJveFNoaWZ0UmFuZ2VzXCIsIHRoaXMuZ2VhckJveFNoaWZ0UmFuZ2VzKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMubWF4VHVybkFuZ2xlIDw9IDApIHRoaXMubWF4VHVybkFuZ2xlID0gMjA7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhCdXJuQW5nbGUgPD0gMCkgdGhpcy5tYXhCdXJuQW5nbGUgPSA0NTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1heEZyb250QnJha2luZyA8PSAwKSB0aGlzLm1heEZyb250QnJha2luZyA9IDAuMDE7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhSZXZlcnNlUG93ZXIgPD0gMCkgdGhpcy5tYXhSZXZlcnNlUG93ZXIgPSAwLjU7XG4gICAgICAgICAgICBpZiAodGhpcy5sb3dTcGVlZEFuZ2xlIDw9IDApIHRoaXMubG93U3BlZWRBbmdsZSA9IDEwO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlnaFNwZWVkQW5nbGUgPD0gMCkgdGhpcy5oaWdoU3BlZWRBbmdsZSA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5sb3dTcGVlZFR1cm5pbmcgPD0gMCkgdGhpcy5sb3dTcGVlZFR1cm5pbmcgPSAwLjAxNTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpZ2hTcGVlZFR1cm5pbmcgPD0gMCkgdGhpcy5oaWdoU3BlZWRUdXJuaW5nID0gMC4wMDU7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3dlckNvZWZmaWNpZW50IDw9IDApIHRoaXMucG93ZXJDb2VmZmljaWVudCA9IDEuMDtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvcEVuZ2luZVNwZWVkIDw9IDApIHRoaXMudG9wRW5naW5lU3BlZWQgPSAxMjU7XG4gICAgICAgICAgICBpZiAodGhpcy5nZWFyQm94TWF4UGl0Y2hpbmcgPD0gMCkgdGhpcy5nZWFyQm94TWF4UGl0Y2hpbmcgPSA2NTAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckJveFNoaWZ0Q2hhbmdlIDw9IDApIHRoaXMuZ2VhckJveFNoaWZ0Q2hhbmdlID0gNDUwMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmdlYXJCb3hTaGlmdERlbGF5IDw9IDApIHRoaXMuZ2VhckJveFNoaWZ0RGVsYXkgPSAwLjM1O1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNtaXNzaW9uUmF0aW8gPD0gMCkgdGhpcy50cmFuc21pc3Npb25SYXRpbyA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5kaWZmZXJlbnRpYWxSYXRpbyA8PSAwKSB0aGlzLmRpZmZlcmVudGlhbFJhdGlvID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHRMZXJwU3BlZWQgPD0gMCkgdGhpcy5kZWZhdWx0TGVycFNwZWVkID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyaWZ0aW5nTGVycFNwZWVkIDw9IDApIHRoaXMuZHJpZnRpbmdMZXJwU3BlZWQgPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dExlcnBTcGVlZCA8PSAwKSB0aGlzLmJ1cm5vdXRMZXJwU3BlZWQgPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dFRpbWVEZWxheSA8PSAwKSB0aGlzLmJ1cm5vdXRUaW1lRGVsYXkgPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dFdoZWVsUGl0Y2ggPD0gMCkgdGhpcy5idXJub3V0V2hlZWxQaXRjaCA9IDE7XG5cbiAgICAgICAgICAgIGNvbnN0IHNtb2tlVGV4dHVyZUluZm86YW55ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInNtb2tlVGV4dHVyZVwiKTtcbiAgICAgICAgICAgIGlmIChzbW9rZVRleHR1cmVJbmZvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNtb2tlVGV4dHVyZSA9IEJBQllMT04uVXRpbGl0aWVzLlBhcnNlVGV4dHVyZShzbW9rZVRleHR1cmVJbmZvLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNoYWRvd1RleHR1cmVJbmZvOmFueSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzaGFkb3dUZXh0dXJlXCIpO1xuICAgICAgICAgICAgaWYgKHNoYWRvd1RleHR1cmVJbmZvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1RleHR1cmUgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZVRleHR1cmUoc2hhZG93VGV4dHVyZUluZm8sIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZW5naW5lVG9ycXVlSW5mbzphbnkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZW5naW5lVG9ycXVlXCIpO1xuICAgICAgICAgICAgaWYgKGVuZ2luZVRvcnF1ZUluZm8gIT0gbnVsbCAmJiBlbmdpbmVUb3JxdWVJbmZvLmFuaW1hdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmdpbmVUb3JxdWVDdXJ2ZSA9IEJBQllMT04uQW5pbWF0aW9uLlBhcnNlKGVuZ2luZVRvcnF1ZUluZm8uYW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgICBlbmdpbmVUb3JxdWVJbmZvLmFuaW1hdGlvbiA9IG51bGw7IC8vIElzIFRoaXMgUmVhbGx5IE5lZWRlZCAtID8/P1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5naW5lVG9ycXVlQ3VydmUgPT0gbnVsbCkgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIHBhcnNlIGVuZ2luZSB0b3JxdWUgY3VydmUgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6dm9pZCB7IHRoaXMuaW5pdFZlaGljbGVTdGF0ZSgpOyB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKSA6dm9pZCB7ICB0aGlzLnVwZGF0ZVZlaGljbGVTdGF0ZSgpOyB9XG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQgeyB0aGlzLmRlc3Ryb3lWZWhpY2xlU3RhdGUoKTsgfVxuXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgIC8vIFByb3RlY3RlZCBWZWhpY2xlIE1vdmVtZW50IFN0YXRlIEZ1bmN0aW9ucyAvL1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIFxuICAgICAgICBwcm90ZWN0ZWQgaW5pdFZlaGljbGVTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlZhbGlkYXRlVHJhbnNmb3JtUXVhdGVybmlvbih0aGlzLnRyYW5zZm9ybSk7XG4gICAgICAgICAgICAvLyBTZXR1cCBFbmdpbmUgQXVkaW9cbiAgICAgICAgICAgIHRoaXMuX2VuZ2luZUF1ZGlvU291cmNlID0gdGhpcy5nZXRDb21wb25lbnQoXCJCQUJZTE9OLkF1ZGlvU291cmNlXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2VuZ2luZUF1ZGlvU291cmNlID09IG51bGwpIEJBQllMT04uVG9vbHMuV2FybihcIk5vIGVuZ2luZSBhdWRpbyBzb3VyY2UgbWFuYWdlciBmb3VuZCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAvLyBTZXR1cCBSYXljYXN0IFZlaGljbGVcbiAgICAgICAgICAgIHRoaXMuX3JpZ2lkYm9keSA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JpZ2lkYm9keSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JpZ2lkYm9keS5oYXNSYXljYXN0VmVoaWNsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUgPSB0aGlzLl9yaWdpZGJvZHkuZ2V0UmF5Y2FzdFZlaGljbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmF5Y2FzdFZlaGljbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdGhpcy5fcmlnaWRib2R5LmdldExpbmVhckRhbXBpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0aGlzLl9yaWdpZGJvZHkuZ2V0QW5ndWxhckRhbXBpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250TGVmdFdoZWVsTmFtZTpzdHJpbmcgPSAodGhpcy5mcm9udExlZnRXaGVlbFRyYW5zICE9IG51bGwgJiYgdGhpcy5mcm9udExlZnRXaGVlbFRyYW5zLm5hbWUgIT0gbnVsbCAmJiB0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMubmFtZSAhPT0gXCJcIikgPyB0aGlzLmZyb250TGVmdFdoZWVsVHJhbnMubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9udFJpZ2h0V2hlZWxOYW1lOnN0cmluZyA9ICh0aGlzLmZyb250UmlnaHRXaGVlbFRyYW5zICE9IG51bGwgJiYgdGhpcy5mcm9udFJpZ2h0V2hlZWxUcmFucy5uYW1lICE9IG51bGwgJiYgdGhpcy5mcm9udFJpZ2h0V2hlZWxUcmFucy5uYW1lICE9PSBcIlwiKSA/IHRoaXMuZnJvbnRSaWdodFdoZWVsVHJhbnMubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrTGVmdFdoZWVsTmFtZTpzdHJpbmcgPSAodGhpcy5iYWNrTGVmdFdoZWVsVHJhbnMgIT0gbnVsbCAmJiB0aGlzLmJhY2tMZWZ0V2hlZWxUcmFucy5uYW1lICE9IG51bGwgJiYgdGhpcy5iYWNrTGVmdFdoZWVsVHJhbnMubmFtZSAhPT0gXCJcIikgPyB0aGlzLmJhY2tMZWZ0V2hlZWxUcmFucy5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tSaWdodFdoZWVsTmFtZTpzdHJpbmcgPSAodGhpcy5iYWNrUmlnaHRXaGVlbFRyYW5zICE9IG51bGwgJiYgdGhpcy5iYWNrUmlnaHRXaGVlbFRyYW5zLm5hbWUgIT0gbnVsbCAmJiB0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMubmFtZSAhPT0gXCJcIikgPyB0aGlzLmJhY2tSaWdodFdoZWVsVHJhbnMubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9udExlZnRXaGVlbExhYmVsOnN0cmluZyA9ICh0aGlzLmZyb250TGVmdFdoZWVsQ29sbGlkZXIgIT0gbnVsbCAmJiB0aGlzLmZyb250TGVmdFdoZWVsQ29sbGlkZXIubmFtZSAhPSBudWxsICYmIHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlci5uYW1lICE9PSBcIlwiKSA/IHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlci5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250UmlnaHRXaGVlbExhYmVsOnN0cmluZyA9ICh0aGlzLmZyb250UmlnaHRXaGVlbENvbGxpZGVyICE9IG51bGwgJiYgdGhpcy5mcm9udFJpZ2h0V2hlZWxDb2xsaWRlci5uYW1lICE9IG51bGwgJiYgdGhpcy5mcm9udFJpZ2h0V2hlZWxDb2xsaWRlci5uYW1lICE9PSBcIlwiKSA/IHRoaXMuZnJvbnRSaWdodFdoZWVsQ29sbGlkZXIubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrTGVmdFdoZWVsTGFiZWw6c3RyaW5nID0gKHRoaXMuYmFja0xlZnRXaGVlbENvbGxpZGVyICE9IG51bGwgJiYgdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIubmFtZSAhPSBudWxsICYmIHRoaXMuYmFja0xlZnRXaGVlbENvbGxpZGVyLm5hbWUgIT09IFwiXCIpID8gdGhpcy5iYWNrTGVmdFdoZWVsQ29sbGlkZXIubmFtZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrUmlnaHRXaGVlbExhYmVsOnN0cmluZyA9ICh0aGlzLmJhY2tSaWdodFdoZWVsQ29sbGlkZXIgIT0gbnVsbCAmJiB0aGlzLmJhY2tSaWdodFdoZWVsQ29sbGlkZXIubmFtZSAhPSBudWxsICYmIHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlci5uYW1lICE9PSBcIlwiKSA/IHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlci5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCBXaGVlbCBJbmRleHMgZnJvbSBXaGVlbCBOYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250TGVmdFdoZWVsTGFiZWwgIT0gbnVsbCkgdGhpcy5GUk9OVF9MRUZUID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZGV4QnlOYW1lKGZyb250TGVmdFdoZWVsTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250UmlnaHRXaGVlbExhYmVsICE9IG51bGwpIHRoaXMuRlJPTlRfUklHSFQgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFdoZWVsSW5kZXhCeU5hbWUoZnJvbnRSaWdodFdoZWVsTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tMZWZ0V2hlZWxMYWJlbCAhPSBudWxsKSB0aGlzLkJBQ0tfTEVGVCA9IHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0V2hlZWxJbmRleEJ5TmFtZShiYWNrTGVmdFdoZWVsTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tSaWdodFdoZWVsTGFiZWwgIT0gbnVsbCkgdGhpcy5CQUNLX1JJR0hUID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZGV4QnlOYW1lKGJhY2tSaWdodFdoZWVsTGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0dXAgV2hlZWwgSW5mbyBBbmQgVHJhbnNmb3JtIE1lc2hlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0TnVtV2hlZWxzKCkgPj0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLkZST05UX0xFRlQgPj0gMCAmJiBmcm9udExlZnRXaGVlbE5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwgPSB0aGlzLnJheWNhc3RWZWhpY2xlLmdldFdoZWVsSW5mbyh0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsTWVzaCA9IHRoaXMuZ2V0Q2hpbGRUcmFuc2Zvcm0oZnJvbnRMZWZ0V2hlZWxOYW1lLCBCQUJZTE9OLlNlYXJjaFR5cGUuU3RhcnRzV2l0aCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcm9udExlZnRXaGVlbE1lc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250TGVmdFdoZWVsLnNwaW5uZXIgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NlbmVDaGlsZFRyYW5zZm9ybSh0aGlzLmZyb250TGVmdFdoZWVsTWVzaCwgXCJXaGVlbFwiLCBCQUJZTE9OLlNlYXJjaFR5cGUuSW5kZXhPZiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFdoZWVsVHJhbnNmb3JtTWVzaCh0aGlzLkZST05UX0xFRlQsIHRoaXMuZnJvbnRMZWZ0V2hlZWxNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAxIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gRlJPTlQgT1IgQUxMIFdIRUVMIERSSVZFXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsRW1pdHRlciA9IG5ldyBCQUJZTE9OLkFic3RyYWN0TWVzaChcIkVtaXR0ZXJfRkxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbEVtaXR0ZXIucGFyZW50ID0gdGhpcy5tX2Zyb250TGVmdFdoZWVsLnNwaW5uZXIgfHwgdGhpcy5mcm9udExlZnRXaGVlbE1lc2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbEVtaXR0ZXIucG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsUGFydGljbGUgPSB0aGlzLmNyZWF0ZVNtb2tlUGFydGljbGVTeXN0ZW0odGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiU21va2VfRkxcIiwgdGhpcy5mcm9udExlZnRXaGVlbEVtaXR0ZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxSYWRpdXMgPD0gMCAmJiB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsUmFkaXVzID0gdGhpcy5tX2Zyb250TGVmdFdoZWVsLmdldF9tX3doZWVsc1JhZGl1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5GUk9OVF9SSUdIVCA+PSAwICYmIGZyb250UmlnaHRXaGVlbE5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRSaWdodFdoZWVsID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZm8odGhpcy5GUk9OVF9SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaCA9IHRoaXMuZ2V0Q2hpbGRUcmFuc2Zvcm0oZnJvbnRSaWdodFdoZWVsTmFtZSwgQkFCWUxPTi5TZWFyY2hUeXBlLlN0YXJ0c1dpdGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLnNwaW5uZXIgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NlbmVDaGlsZFRyYW5zZm9ybSh0aGlzLmZyb250UmlnaHRXaGVlbE1lc2gsIFwiV2hlZWxcIiwgQkFCWUxPTi5TZWFyY2hUeXBlLkluZGV4T2YsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRXaGVlbFRyYW5zZm9ybU1lc2godGhpcy5GUk9OVF9SSUdIVCwgdGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAxIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gRlJPTlQgT1IgQUxMIFdIRUVMIERSSVZFXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250UmlnaHRXaGVlbEVtaXR0ZXIgPSBuZXcgQkFCWUxPTi5BYnN0cmFjdE1lc2goXCJFbWl0dGVyX0ZSXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsRW1pdHRlci5wYXJlbnQgPSB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLnNwaW5uZXIgfHwgdGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsRW1pdHRlci5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsUGFydGljbGUgPSB0aGlzLmNyZWF0ZVNtb2tlUGFydGljbGVTeXN0ZW0odGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiU21va2VfRlJcIiwgdGhpcy5mcm9udFJpZ2h0V2hlZWxFbWl0dGVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsUmFkaXVzIDw9IDAgJiYgdGhpcy5tX2Zyb250UmlnaHRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxSYWRpdXMgPSB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmdldF9tX3doZWVsc1JhZGl1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5CQUNLX0xFRlQgPj0gMCAmJiBiYWNrTGVmdFdoZWVsTmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrTGVmdFdoZWVsID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZm8odGhpcy5CQUNLX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoID0gdGhpcy5nZXRDaGlsZFRyYW5zZm9ybShiYWNrTGVmdFdoZWVsTmFtZSwgQkFCWUxPTi5TZWFyY2hUeXBlLlN0YXJ0c1dpdGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja0xlZnRXaGVlbE1lc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tMZWZ0V2hlZWwuc3Bpbm5lciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkZpbmRTY2VuZUNoaWxkVHJhbnNmb3JtKHRoaXMuYmFja0xlZnRXaGVlbE1lc2gsIFwiV2hlZWxcIiwgQkFCWUxPTi5TZWFyY2hUeXBlLkluZGV4T2YsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRXaGVlbFRyYW5zZm9ybU1lc2godGhpcy5CQUNLX0xFRlQsIHRoaXMuYmFja0xlZnRXaGVlbE1lc2gpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxFbWl0dGVyID0gbmV3IEJBQllMT04uQWJzdHJhY3RNZXNoKFwiRW1pdHRlcl9STFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja0xlZnRXaGVlbEVtaXR0ZXIucGFyZW50ID0gdGhpcy5tX2JhY2tMZWZ0V2hlZWwuc3Bpbm5lciB8fCB0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsRW1pdHRlci5wb3NpdGlvbiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsUGFydGljbGUgPSB0aGlzLmNyZWF0ZVNtb2tlUGFydGljbGVTeXN0ZW0odGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiU21va2VfUkxcIiwgdGhpcy5iYWNrTGVmdFdoZWVsRW1pdHRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAwIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gUkVBUiBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbFJhZGl1cyA8PSAwICYmIHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbFJhZGl1cyA9IHRoaXMubV9iYWNrTGVmdFdoZWVsLmdldF9tX3doZWVsc1JhZGl1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5CQUNLX1JJR0hUID49IDAgJiYgYmFja1JpZ2h0V2hlZWxOYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tSaWdodFdoZWVsID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRXaGVlbEluZm8odGhpcy5CQUNLX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbE1lc2ggPSB0aGlzLmdldENoaWxkVHJhbnNmb3JtKGJhY2tSaWdodFdoZWVsTmFtZSwgQkFCWUxPTi5TZWFyY2hUeXBlLlN0YXJ0c1dpdGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja1JpZ2h0V2hlZWxNZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zcGlubmVyID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjZW5lQ2hpbGRUcmFuc2Zvcm0odGhpcy5iYWNrUmlnaHRXaGVlbE1lc2gsIFwiV2hlZWxcIiwgQkFCWUxPTi5TZWFyY2hUeXBlLkluZGV4T2YsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRXaGVlbFRyYW5zZm9ybU1lc2godGhpcy5CQUNLX1JJR0hULCB0aGlzLmJhY2tSaWdodFdoZWVsTWVzaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxFbWl0dGVyID0gbmV3IEJBQllMT04uQWJzdHJhY3RNZXNoKFwiRW1pdHRlcl9SUlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxFbWl0dGVyLnBhcmVudCA9IHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zcGlubmVyIHx8IHRoaXMuYmFja1JpZ2h0V2hlZWxNZXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbEVtaXR0ZXIucG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxQYXJ0aWNsZSA9IHRoaXMuY3JlYXRlU21va2VQYXJ0aWNsZVN5c3RlbSh0aGlzLnRyYW5zZm9ybS5uYW1lICsgXCJTbW9rZV9SUlwiLCB0aGlzLmJhY2tSaWdodFdoZWVsRW1pdHRlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAwIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gUkVBUiBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbFJhZGl1cyA8PSAwICYmIHRoaXMubV9iYWNrUmlnaHRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxSYWRpdXMgPSB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZ2V0X21fd2hlZWxzUmFkaXVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPT0gbnVsbCAmJiB0aGlzLmJhY2tSaWdodFdoZWVsTWVzaCAhPSBudWxsKSB0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NyaXB0Q29tcG9uZW50KHRoaXMuYmFja1JpZ2h0V2hlZWxNZXNoLCBcIkJBQllMT04uQXVkaW9Tb3VyY2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NraWRBdWRpb1NvdXJjZSA9PSBudWxsICYmIHRoaXMuYmFja0xlZnRXaGVlbE1lc2ggIT0gbnVsbCkgdGhpcy5fc2tpZEF1ZGlvU291cmNlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuRmluZFNjcmlwdENvbXBvbmVudCh0aGlzLmJhY2tMZWZ0V2hlZWxNZXNoLCBcIkJBQllMT04uQXVkaW9Tb3VyY2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NraWRBdWRpb1NvdXJjZSA9PSBudWxsICYmIHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaCAhPSBudWxsKSB0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NyaXB0Q29tcG9uZW50KHRoaXMuZnJvbnRSaWdodFdoZWVsTWVzaCwgXCJCQUJZTE9OLkF1ZGlvU291cmNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPT0gbnVsbCAmJiB0aGlzLmZyb250TGVmdFdoZWVsTWVzaCAhPSBudWxsKSB0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5GaW5kU2NyaXB0Q29tcG9uZW50KHRoaXMuZnJvbnRMZWZ0V2hlZWxNZXNoLCBcIkJBQllMT04uQXVkaW9Tb3VyY2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NraWRBdWRpb1NvdXJjZSA9PSBudWxsKSBCQUJZTE9OLlRvb2xzLldhcm4oXCJObyBza2lkIGF1ZGlvIHNvdXJjZSBtYW5hZ2VyIGZvdW5kIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiSW52YWxpZCB2ZWhpY2xlIGNvbnRyb2xsZXIgd2hlZWwgY291bnQgaW5mbyBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gY3JlYXRlIHZlaGljbGUgY29udHJvbGxlciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJObyB3aGVlbCBjb2xsaWRlciBpbmZvcm1hdGlvbiBmb3VuZCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlRvb2xzLldhcm4oXCJGYWlsZWQgdG8gZ2V0IHJpZ2lkYm9keSBjb21wb25lbnQ6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG1fZnJvbnRMZWZ0V2hlZWxTa2lkOm51bWJlciA9IC0xO1xuICAgICAgICBwcml2YXRlIG1fZnJvbnRSaWdodFdoZWVsU2tpZDpudW1iZXIgPSAtMTtcbiAgICAgICAgcHJpdmF0ZSBtX2JhY2tMZWZ0V2hlZWxTa2lkOm51bWJlciA9IC0xO1xuICAgICAgICBwcml2YXRlIG1fYmFja1JpZ2h0V2hlZWxTa2lkOm51bWJlciA9IC0xO1xuICAgICAgICBwcml2YXRlIG1fdmVsb2NpdHlPZmZzZXQ6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGVWZWhpY2xlU3RhdGUoKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVRpbWUgPSB0aGlzLmdldERlbHRhU2Vjb25kcygpO1xuICAgICAgICAgICAgY29uc3QgZ2VhckNvdW50Om51bWJlciA9IHRoaXMuZ2V0R2VhclNoaWZ0UmF0aW9Db3VudCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hpZnRpbmdUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRpbmdUaW1lIC09IGRlbHRhVGltZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaGlmdGluZ1RpbWUgPCAwKSB0aGlzLnNoaWZ0aW5nVGltZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ICE9IG51bGwgJiYgdGhpcy5yYXljYXN0VmVoaWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVhZFNwZWVkOm51bWJlciA9IDAuMjsgLy8gTm90ZTogRGVhZCBNb3ZlbWVudCBTcGVlZCBUaHJlc2hvbGRcbiAgICAgICAgICAgICAgICB0aGlzLmZvcndhcmRTcGVlZCA9IHRoaXMucmF5Y2FzdFZlaGljbGUuZ2V0UmF3Q3VycmVudFNwZWVkS3BoKCk7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHRoaXMuZm9yd2FyZFNwZWVkKSA8IGRlYWRTcGVlZCkgdGhpcy5mb3J3YXJkU3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgdGhpcy5hYnNvbHV0ZVNwZWVkID0gdGhpcy5yYXljYXN0VmVoaWNsZS5nZXRBYnNDdXJyZW50U3BlZWRLcGgoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hYnNvbHV0ZVNwZWVkIDwgZGVhZFNwZWVkKSB0aGlzLmFic29sdXRlU3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgdGhpcy5hbWVyaWNhblNwZWVkID0gKHRoaXMuYWJzb2x1dGVTcGVlZCAqIEJBQllMT04uU3lzdGVtLktwaDJNcGgpO1xuICAgICAgICAgICAgICAgIHRoaXMubm9ybWFsaXplZFNwZWVkID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoKHRoaXMuYWJzb2x1dGVTcGVlZCAvIHRoaXMudG9wRW5naW5lU3BlZWQpKTtcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlYXJCb3hTaGlmdFJhdGlvcyAhPSBudWxsICYmIHRoaXMuZ2VhckluZGV4ID49IDAgJiYgdGhpcy5nZWFySW5kZXggPCBnZWFyQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWluaW11bURlbHRhID0gTWF0aC5taW4oTWF0aC5tYXgoZGVsdGFUaW1lLCAxIC8gMjAwKSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdoZWVsRGlhbWV0ZXI6bnVtYmVyID0gKHRoaXMud2hlZWxSYWRpdXMgKiAyICogQkFCWUxPTi5TeXN0ZW0uTWV0ZXIySW5jaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsR2VhclJhdGlvOm51bWJlciA9ICh0aGlzLmdlYXJCb3hTaGlmdFJhdGlvc1t0aGlzLmdlYXJJbmRleF0gKiB0aGlzLmRpZmZlcmVudGlhbFJhdGlvICogdGhpcy50cmFuc21pc3Npb25SYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgUmV2b2x1dGlvbnMgKFRPRE86IE5vIFNoaWZ0aW5nIERvbnV0IE1vZGUgLSBSUE0gQm91bmNlIEJvb3N0aW5nKVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvd25TaGlmdCA9ICh0aGlzLmdlYXJCb3hTaGlmdFJhbmdlcyAhPSBudWxsICYmIHRoaXMuZ2VhckJveFNoaWZ0UmFuZ2VzLmxlbmd0aCA9PT0gdGhpcy5nZWFyQm94U2hpZnRSYXRpb3MubGVuZ3RoKSA/IHRoaXMuZ2VhckJveFNoaWZ0UmFuZ2VzW3RoaXMuZ2VhckluZGV4XSA6IDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2x1dGNoU2xpcCA9IEJBQllMT04uVXRpbGl0aWVzLkxlcnBDbGFtcCh0aGlzLmNsdXRjaFNsaXAsIDAsIDEgLSBNYXRoLnBvdygwLjAxLCBtaW5pbXVtRGVsdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmdpbmVSUE0gPSAoKHRoaXMuYW1lcmljYW5TcGVlZCAqIGZpbmFsR2VhclJhdGlvICogMzM2KSAvIHdoZWVsRGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBMb2NrIEhpZ2ggUGl0Y2hpbmcgUlBNIFdoaWxlIFNraWRkaW5nICYgRG9udXRzXG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBpdGNoUlBNID0gQkFCWUxPTi5VdGlsaXRpZXMuTGVycENsYW1wKHRoaXMuc2hpZnRSUE0sIHRoaXMuZW5naW5lUlBNLCAoMSAtIHRoaXMuY2x1dGNoU2xpcCkpICsgU3RhbmRhcmRDYXJDb250cm9sbGVyLk1JTl9SUE07XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAgICAgICAgIC8qIFBlbm55IC0gQ2hhbmdlIEdlYXJzXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHNwZWVkUGVyY2VudGFnZSA9IE1hdGhmLkFicyhjdXJyZW50U3BlZWQgLyBtYXhTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHVwcGVyR2Vhck1heCA9ICgxIC8gKGZsb2F0KW51bUdlYXJzKSAqIChjdXJyZW50R2VhciArIDEpO1xuICAgICAgICAgICAgICAgICAgICBmbG9hdCBkb3duR2Vhck1heCA9ICgxIC8gKGZsb2F0KW51bUdlYXJzKSAqIGN1cnJlbnRHZWFyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50R2VhciA+IDAgJiYgc3BlZWRQZXJjZW50YWdlIDwgZG93bkdlYXJNYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50R2Vhci0tO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGVlZFBlcmNlbnRhZ2UgPiB1cHBlckdlYXJNYXggJiYgKGN1cnJlbnRHZWFyIDwgKG51bUdlYXJzIC0gMSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEdlYXIrKztcbiAgICAgICAgICAgICAgICAgICAgKi8gICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgR2VhcmluZyBCb3ggKFRPRE86IE5vIFNoaWZ0aW5nIERvbnV0IE1vZGUgLSBSUE0gQm91bmNlIEJvb3N0aW5nKVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbWVyaWNhblNwZWVkIDwgNSkgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VhckluZGV4ID0gMDtcdFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuZ2luZVJQTSA+IHRoaXMuZ2VhckJveFNoaWZ0Q2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdFJQTSA9IHRoaXMuZW5naW5lUlBNO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2x1dGNoU2xpcCA9IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0aW5nVGltZSA9IHRoaXMuZ2VhckJveFNoaWZ0RGVsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckluZGV4IDwgKGdlYXJDb3VudCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VhckluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVuZ2luZVJQTSA8IHRoaXMuZG93blNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdFJQTSA9IHRoaXMuZW5naW5lUlBNO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2x1dGNoU2xpcCA9IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0aW5nVGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VhckluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlYXJJbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gRG91YmxlIENoZWNrIEdlYXIgSW5kZXggLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlYXJJbmRleCA8IDApIHRoaXMuZ2VhckluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5nZWFySW5kZXggPj0gZ2VhckNvdW50KSB0aGlzLmdlYXJJbmRleCA9IChnZWFyQ291bnQgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFjY291bnQgZm9yIGZ1cnRoZXIgbW92ZW1lbnQgc2luY2UgdGhlIGxhc3Qgd2hlZWwgdXBkYXRlXG4gICAgICAgICAgICBpZiAodGhpcy52ZWxvY2l0eVNjYWxpbmcgPiAwICYmIHRoaXMuX3JpZ2lkYm9keSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tX3ZlbG9jaXR5T2Zmc2V0LmNvcHlGcm9tKHRoaXMuX3JpZ2lkYm9keS5nZXRMaW5lYXJWZWxvY2l0eSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fdmVsb2NpdHlPZmZzZXQuc2NhbGVJblBsYWNlKHRoaXMudmVsb2NpdHlTY2FsaW5nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIEVuZ2luZSBTb3VuZCBQaXRjaFxuICAgICAgICAgICAgbGV0IHBpdGNoaW5nOm51bWJlciA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGF5VmVoaWNsZVNvdW5kcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHBpdGNoaW5nID0gKHRoaXMuZ2V0Q3VycmVudEVuZ2luZVBpdGNoKCkgKiAwLjc1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9lbmdpbmVBdWRpb1NvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5naW5lU291bmRDbGlwOkJBQllMT04uU291bmQgPSB0aGlzLl9lbmdpbmVBdWRpb1NvdXJjZS5nZXRTb3VuZENsaXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoZW5naW5lU291bmRDbGlwICE9IG51bGwpIGVuZ2luZVNvdW5kQ2xpcC5zZXRQbGF5YmFja1JhdGUocGl0Y2hpbmcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgU21va2UgSW5zdGVuc2l0eVxuICAgICAgICAgICAgdGhpcy5zbW9rZURvbnV0cyA9IEJBQllMT04uU2NhbGFyLkNsYW1wKHRoaXMuc21va2VEb251dHMsIDEsIDEwKTtcbiAgICAgICAgICAgIGxldCBzbW9rZUludGVuc2l0eUZhY3RvcjpudW1iZXIgPSB0aGlzLnNtb2tlSW50ZW5zaXR5O1xuICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxCdXJub3V0ID09PSB0cnVlICYmIHRoaXMud2hlZWxEb251dHMgPT09IHRydWUpIHNtb2tlSW50ZW5zaXR5RmFjdG9yICo9IHRoaXMuc21va2VEb251dHM7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBXaGVlbCBTa2lkZGluZyBJbmZvXG4gICAgICAgICAgICBsZXQgc2tpZF9GTDpudW1iZXIgPSAwLCBza2lkX0ZSID0gMCwgc2tpZF9STCA9IDAsIHNraWRfUlIgID0gMFxuICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2hlZWxDb250YWN0Rkw6Ym9vbGVhbiA9ICh0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9ncm91bmRPYmplY3QoKSAhPT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIHNraWRfRkwgPSB0aGlzLnVwZGF0ZUN1cnJlbnRTa2lkSW5mbyh0aGlzLm1fZnJvbnRMZWZ0V2hlZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpZF9GTCA8IHRoaXMuc2tpZFRocmVhc2hvbGQpIHNraWRfRkwgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpZF9GTCA+IDAgJiYgd2hlZWxDb250YWN0RkwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludEZMOmFueSA9IHRoaXMubV9mcm9udExlZnRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3RQb2ludFdTKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsRkw6YW55ID0gdGhpcy5tX2Zyb250TGVmdFdoZWVsLmdldF9tX3JheWNhc3RJbmZvKCkuZ2V0X21fY29udGFjdE5vcm1hbFdTKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWRQb3NGTDpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKGNvbnRhY3RQb2ludEZMLngoKSwgY29udGFjdFBvaW50RkwueSgpLCBjb250YWN0UG9pbnRGTC56KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZE5vcm1GTDpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKGNvbnRhY3ROb3JtYWxGTC54KCksIGNvbnRhY3ROb3JtYWxGTC55KCksIGNvbnRhY3ROb3JtYWxGTC56KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFNjYWxlRkw6bnVtYmVyID0gQkFCWUxPTi5TY2FsYXIuTm9ybWFsaXplKHNraWRfRkwsIHRoaXMuc2tpZFRocmVhc2hvbGQsIDEuMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlbG9jaXR5U2NhbGluZyA+IDApIHNraWRQb3NGTC5hZGRJblBsYWNlKHRoaXMubV92ZWxvY2l0eU9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRMZWZ0V2hlZWxTa2lkID0gU2tpZG1hcmtNYW5hZ2VyLkFkZFNraWRtYXJrU2VnbWVudChza2lkUG9zRkwsIHNraWROb3JtRkwsIHNraWRTY2FsZUZMLCB0aGlzLm1fZnJvbnRMZWZ0V2hlZWxTa2lkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbnRMZWZ0V2hlZWxQYXJ0aWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbnRMZWZ0V2hlZWxQYXJ0aWNsZS5pc1N0YXJ0ZWQoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbFBhcnRpY2xlLnN0YXJ0KCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtb2tlX0ZMID0gc2tpZF9GTCAqIHNraWRfRkw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbFBhcnRpY2xlLmVtaXRSYXRlID0gc21va2VJbnRlbnNpdHlGYWN0b3IgKiBzbW9rZV9GTDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250TGVmdFdoZWVsUGFydGljbGUubWluU2l6ZSA9IDAuMiAqIHNtb2tlX0ZMICsgMC4yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnJvbnRMZWZ0V2hlZWxQYXJ0aWNsZS5tYXhTaXplID0gMS41ICogc21va2VfRkwgKyAxLjI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcm9udExlZnRXaGVlbFBhcnRpY2xlICE9IG51bGwpIHRoaXMuZnJvbnRMZWZ0V2hlZWxQYXJ0aWNsZS5lbWl0UmF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRMZWZ0V2hlZWxTa2lkID0gLTE7ICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRSaWdodFdoZWVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2hlZWxDb250YWN0RlI6Ym9vbGVhbiA9ICh0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmdldF9tX3JheWNhc3RJbmZvKCkuZ2V0X21fZ3JvdW5kT2JqZWN0KCkgIT09IDApO1xuICAgICAgICAgICAgICAgICAgICBza2lkX0ZSID0gdGhpcy51cGRhdGVDdXJyZW50U2tpZEluZm8odGhpcy5tX2Zyb250UmlnaHRXaGVlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lkX0ZSIDwgdGhpcy5za2lkVGhyZWFzaG9sZCkgc2tpZF9GUiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lkX0ZSID4gMCAmJiB3aGVlbENvbnRhY3RGUiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50RlI6YW55ID0gdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3RQb2ludFdTKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsRlI6YW55ID0gdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3ROb3JtYWxXUygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBza2lkUG9zRlI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyhjb250YWN0UG9pbnRGUi54KCksIGNvbnRhY3RQb2ludEZSLnkoKSwgY29udGFjdFBvaW50RlIueigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWROb3JtRlI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyhjb250YWN0Tm9ybWFsRlIueCgpLCBjb250YWN0Tm9ybWFsRlIueSgpLCBjb250YWN0Tm9ybWFsRlIueigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWRTY2FsZUZSOm51bWJlciA9IEJBQllMT04uU2NhbGFyLk5vcm1hbGl6ZShza2lkX0ZSLCB0aGlzLnNraWRUaHJlYXNob2xkLCAxLjApO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWxvY2l0eVNjYWxpbmcgPiAwKSBza2lkUG9zRlIuYWRkSW5QbGFjZSh0aGlzLm1fdmVsb2NpdHlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250UmlnaHRXaGVlbFNraWQgPSBTa2lkbWFya01hbmFnZXIuQWRkU2tpZG1hcmtTZWdtZW50KHNraWRQb3NGUiwgc2tpZE5vcm1GUiwgc2tpZFNjYWxlRlIsIHRoaXMubV9mcm9udFJpZ2h0V2hlZWxTa2lkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnJvbnRSaWdodFdoZWVsUGFydGljbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyb250UmlnaHRXaGVlbFBhcnRpY2xlLmlzU3RhcnRlZCgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb250UmlnaHRXaGVlbFBhcnRpY2xlLnN0YXJ0KCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtb2tlX0ZSID0gc2tpZF9GUiAqIHNraWRfRlI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxQYXJ0aWNsZS5lbWl0UmF0ZSA9IHNtb2tlSW50ZW5zaXR5RmFjdG9yICogc21va2VfRlI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxQYXJ0aWNsZS5taW5TaXplID0gMC4yICogc21va2VfRlIgKyAwLjI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxQYXJ0aWNsZS5tYXhTaXplID0gMS41ICogc21va2VfRlIgKyAxLjI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mcm9udFJpZ2h0V2hlZWxQYXJ0aWNsZSAhPSBudWxsKSB0aGlzLmZyb250UmlnaHRXaGVlbFBhcnRpY2xlLmVtaXRSYXRlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWxTa2lkID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxCdXJub3V0ID09IHRydWUgfHwgdGhpcy5yZXN0b3JlVGltZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWRfRkwgKj0gdGhpcy5idXJub3V0V2hlZWxQaXRjaDtcbiAgICAgICAgICAgICAgICAgICAgc2tpZF9GUiAqPSB0aGlzLmJ1cm5vdXRXaGVlbFBpdGNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgLy8gSGFsZiBTa2lkIEZvciBGcm9udCBXaGVlbHNcbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgc2tpZF9GTCAqPSAwLjU7XG4gICAgICAgICAgICAgICAgc2tpZF9GUiAqPSAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tMZWZ0V2hlZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdoZWVsQ29udGFjdEJMOmJvb2xlYW4gPSAodGhpcy5tX2JhY2tMZWZ0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9ncm91bmRPYmplY3QoKSAhPT0gMCk7XG4gICAgICAgICAgICAgICAgc2tpZF9STCA9IHRoaXMudXBkYXRlQ3VycmVudFNraWRJbmZvKHRoaXMubV9iYWNrTGVmdFdoZWVsKTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9STCA8IHRoaXMuc2tpZFRocmVhc2hvbGQpIHNraWRfUkwgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChza2lkX1JMID4gMCAmJiB3aGVlbENvbnRhY3RCTCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnRSTDphbnkgPSB0aGlzLm1fYmFja0xlZnRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3RQb2ludFdTKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhY3ROb3JtYWxSTDphbnkgPSB0aGlzLm1fYmFja0xlZnRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3ROb3JtYWxXUygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFBvc1JMOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdFBvaW50UkwueCgpLCBjb250YWN0UG9pbnRSTC55KCksIGNvbnRhY3RQb2ludFJMLnooKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWROb3JtUkw6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyhjb250YWN0Tm9ybWFsUkwueCgpLCBjb250YWN0Tm9ybWFsUkwueSgpLCBjb250YWN0Tm9ybWFsUkwueigpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFNjYWxlUkw6bnVtYmVyID0gQkFCWUxPTi5TY2FsYXIuTm9ybWFsaXplKHNraWRfUkwsIHRoaXMuc2tpZFRocmVhc2hvbGQsIDEuMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmVsb2NpdHlTY2FsaW5nID4gMCkgc2tpZFBvc1JMLmFkZEluUGxhY2UodGhpcy5tX3ZlbG9jaXR5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tMZWZ0V2hlZWxTa2lkID0gU2tpZG1hcmtNYW5hZ2VyLkFkZFNraWRtYXJrU2VnbWVudChza2lkUG9zUkwsIHNraWROb3JtUkwsIHNraWRTY2FsZVJMLCB0aGlzLm1fYmFja0xlZnRXaGVlbFNraWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhY2tMZWZ0V2hlZWxQYXJ0aWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWNrTGVmdFdoZWVsUGFydGljbGUuaXNTdGFydGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsUGFydGljbGUuc3RhcnQoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNtb2tlX1JMID0gc2tpZF9STCAqIHNraWRfUkw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxQYXJ0aWNsZS5lbWl0UmF0ZSA9IHNtb2tlSW50ZW5zaXR5RmFjdG9yICogc21va2VfUkw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxQYXJ0aWNsZS5taW5TaXplID0gMC4yICogc21va2VfUkwgKyAwLjI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tMZWZ0V2hlZWxQYXJ0aWNsZS5tYXhTaXplID0gMS41ICogc21va2VfUkwgKyAxLjI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWNrTGVmdFdoZWVsUGFydGljbGUgIT0gbnVsbCkgdGhpcy5iYWNrTGVmdFdoZWVsUGFydGljbGUuZW1pdFJhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fYmFja0xlZnRXaGVlbFNraWQgPSAtMTsgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrUmlnaHRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2hlZWxDb250YWN0QlI6Ym9vbGVhbiA9ICh0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZ2V0X21fcmF5Y2FzdEluZm8oKS5nZXRfbV9ncm91bmRPYmplY3QoKSAhPT0gMCk7XG4gICAgICAgICAgICAgICAgc2tpZF9SUiA9IHRoaXMudXBkYXRlQ3VycmVudFNraWRJbmZvKHRoaXMubV9iYWNrUmlnaHRXaGVlbCk7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRfUlIgPCB0aGlzLnNraWRUaHJlYXNob2xkKSBza2lkX1JSID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9SUiA+IDAgJiYgd2hlZWxDb250YWN0QlIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdFBvaW50UlI6YW55ID0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmdldF9tX3JheWNhc3RJbmZvKCkuZ2V0X21fY29udGFjdFBvaW50V1MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbFJSOmFueSA9IHRoaXMubV9iYWNrUmlnaHRXaGVlbC5nZXRfbV9yYXljYXN0SW5mbygpLmdldF9tX2NvbnRhY3ROb3JtYWxXUygpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFBvc1JSOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoY29udGFjdFBvaW50UlIueCgpLCBjb250YWN0UG9pbnRSUi55KCksIGNvbnRhY3RQb2ludFJSLnooKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNraWROb3JtUlI6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyhjb250YWN0Tm9ybWFsUlIueCgpLCBjb250YWN0Tm9ybWFsUlIueSgpLCBjb250YWN0Tm9ybWFsUlIueigpKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpZFNjYWxlUlI6bnVtYmVyID0gQkFCWUxPTi5TY2FsYXIuTm9ybWFsaXplKHNraWRfUlIsIHRoaXMuc2tpZFRocmVhc2hvbGQsIDEuMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmVsb2NpdHlTY2FsaW5nID4gMCkgc2tpZFBvc1JSLmFkZEluUGxhY2UodGhpcy5tX3ZlbG9jaXR5T2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tSaWdodFdoZWVsU2tpZCA9IFNraWRtYXJrTWFuYWdlci5BZGRTa2lkbWFya1NlZ21lbnQoc2tpZFBvc1JSLCBza2lkTm9ybVJSLCBza2lkU2NhbGVSUiwgdGhpcy5tX2JhY2tSaWdodFdoZWVsU2tpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja1JpZ2h0V2hlZWxQYXJ0aWNsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWNrUmlnaHRXaGVlbFBhcnRpY2xlLmlzU3RhcnRlZCgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxQYXJ0aWNsZS5zdGFydCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21va2VfUlIgPSBza2lkX1JSICogc2tpZF9SUjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxQYXJ0aWNsZS5lbWl0UmF0ZSA9IHNtb2tlSW50ZW5zaXR5RmFjdG9yICogc21va2VfUlI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tSaWdodFdoZWVsUGFydGljbGUubWluU2l6ZSA9IDAuMiAqIHNtb2tlX1JSICsgMC4yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbFBhcnRpY2xlLm1heFNpemUgPSAxLjUgKiBzbW9rZV9SUiArIDEuMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJhY2tSaWdodFdoZWVsUGFydGljbGUgIT0gbnVsbCkgdGhpcy5iYWNrUmlnaHRXaGVlbFBhcnRpY2xlLmVtaXRSYXRlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tSaWdodFdoZWVsU2tpZCA9IC0xOyAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT0gdHJ1ZSB8fCB0aGlzLnJlc3RvcmVUaW1lciA+IDApIHtcbiAgICAgICAgICAgICAgICBza2lkX1JMICo9IHRoaXMuYnVybm91dFdoZWVsUGl0Y2g7XG4gICAgICAgICAgICAgICAgc2tpZF9SUiAqPSB0aGlzLmJ1cm5vdXRXaGVlbFBpdGNoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBQbGF5IFNraWQgQXVkaW8gVHJhY2tcbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIGxldCBza2lkZGluZzpudW1iZXIgPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMucGxheVZlaGljbGVTb3VuZHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9GTCA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfRkw7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRfRlIgPiBza2lkZGluZykgc2tpZGRpbmcgPSBza2lkX0ZSO1xuICAgICAgICAgICAgICAgIGlmIChza2lkX1JMID4gc2tpZGRpbmcpIHNraWRkaW5nID0gc2tpZF9STDtcbiAgICAgICAgICAgICAgICBpZiAoc2tpZF9SUiA+IHNraWRkaW5nKSBza2lkZGluZyA9IHNraWRfUlI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fc2tpZEF1ZGlvU291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lkU291bmRDbGlwOkJBQllMT04uU291bmQgPSB0aGlzLl9za2lkQXVkaW9Tb3VyY2UuZ2V0U291bmRDbGlwKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNraWRTb3VuZENsaXAgIT0gbnVsbCkgc2tpZFNvdW5kQ2xpcC5zZXRQbGF5YmFja1JhdGUoc2tpZGRpbmcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBSZXNldCBWZWhpY2xlIEluZm9ybWF0aW9uIENoZWNrXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICBpZiAodGhpcy5yZXNldFZlaGljbGVUaW1lID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdhbWVUaW1lOm51bWJlciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEdhbWVUaW1lKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtLnVwLnkgPiAwLjUgfHwgdGhpcy5hYnNvbHV0ZVNwZWVkID4gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVSZXNldENoZWNrID0gZ2FtZVRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lVGltZSA+ICh0aGlzLnZlaGljbGVSZXNldENoZWNrICsgdGhpcy5yZXNldFZlaGljbGVUaW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi5hZGRJblBsYWNlKEJBQllMT04uVmVjdG9yMy5VcCgpLnNjYWxlKDAuNSkpO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Mb29rUm90YXRpb25Ub1JlZih0aGlzLnRyYW5zZm9ybS5mb3J3YXJkLCBCQUJZTE9OLlZlY3RvcjMuVXAoKSwgdGhpcy50cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIEZpbmFsIFZlaGljbGUgSW5mb3JtYXRpb24gVXBkYXRlXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICBpZiAodGhpcy5vblVwZGF0ZVZlaGljbGVJbmZvcm1hdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblVwZGF0ZVZlaGljbGVJbmZvcm1hdGlvbihza2lkX0ZMLCBza2lkX0ZSLCBza2lkX1JMLCBza2lkX1JSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgZGVzdHJveVZlaGljbGVTdGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuX3JpZ2lkYm9keSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9lbmdpbmVBdWRpb1NvdXJjZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9za2lkQXVkaW9Tb3VyY2UgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udExlZnRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMubV9mcm9udExlZnRXaGVlbCk7IC8vID8/P1xuICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250UmlnaHRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMubV9mcm9udFJpZ2h0V2hlZWwpOyAvLyA/Pz9cbiAgICAgICAgICAgICAgICB0aGlzLm1fZnJvbnRSaWdodFdoZWVsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1fYmFja0xlZnRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMubV9iYWNrTGVmdFdoZWVsKTsgLy8gPz8/XG4gICAgICAgICAgICAgICAgdGhpcy5tX2JhY2tMZWZ0V2hlZWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrUmlnaHRXaGVlbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQW1tby5kZXN0cm95KHRoaXMubV9iYWNrUmlnaHRXaGVlbCk7IC8vID8/P1xuICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1fcGh5c2ljc1dvcmxkID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbE1lc2ggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5mcm9udFJpZ2h0V2hlZWxNZXNoID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFja0xlZnRXaGVlbE1lc2ggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbE1lc2ggPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5mcm9udExlZnRXaGVlbFRyYW5zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRSaWdodFdoZWVsVHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrTGVmdFdoZWVsVHJhbnMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5iYWNrUmlnaHRXaGVlbFRyYW5zID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRMZWZ0V2hlZWxDb2xsaWRlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZyb250UmlnaHRXaGVlbENvbGxpZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFja0xlZnRXaGVlbENvbGxpZGVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuYmFja1JpZ2h0V2hlZWxDb2xsaWRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgLy8gUHVibGljIFZlaGljbGUgQ29udHJvbGxlciBNb3ZlbWVudCBGdW5jdGlvbnMgICAvL1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgcHJpdmF0ZSBidXJub3V0VGltZXI6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSByZXN0b3JlVGltZXI6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBjb29sZG93blRpbWVyOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgZHJpZnRpbmdUaW1lcjpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHdoZWVsRG9udXRzOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbEJ1cm5vdXQ6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIHdoZWVsU2tpZGRpbmc6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGRvbnV0U3BpblRpbWU6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50Rm9yd2FyZDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGN1cnJlbnRUdXJuaW5nOm51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgY3VycmVudFNraWRkaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50RHJpZnRpbmc6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcml2YXRlIGFsbG93ZWRUdXJuaW5nQW5nbGU6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBhbGxvd2VkVHVybmluZ0luY2VtZW50Om51bWJlciA9IDA7XG5cbiAgICAgICAgLyoqIERyaXZlcyB0aGUgcmF5Y2FzdCB2ZWhpY2xlIHdpdGggdGhlIHNwZWNmaWVkIG1vdmVtZW50IGFuZCBoYW5kIGJyYWtpbmcgcHJvcGVydGllcy4gKi9cbiAgICAgICAgcHVibGljIGRyaXZlKGFjY2VsOm51bWJlciwgc3RlZXI6bnVtYmVyLCBza2lkOmJvb2xlYW4gPSBmYWxzZSwgZHJpZnQ6Ym9vbGVhbiwgYXNzaXN0OmJvb2xlYW4gPSB0cnVlKTp2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZvcndhcmQgPSBCQUJZTE9OLlNjYWxhci5DbGFtcChhY2NlbCwgLTEsIDEpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VHVybmluZyA9IEJBQllMT04uU2NhbGFyLkNsYW1wKHN0ZWVyLCAtMSwgMSk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTa2lkZGluZyA9IHNraWQ7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREcmlmdGluZyA9IGRyaWZ0XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ID09IG51bGwgfHwgdGhpcy5yYXljYXN0VmVoaWNsZSA9PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5GUk9OVF9MRUZUID49IDAgJiYgdGhpcy5GUk9OVF9SSUdIVCA+PSAwICYmIHRoaXMuQkFDS19MRUZUID49IDAgJiYgdGhpcy5CQUNLX1JJR0hUID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVRpbWU6bnVtYmVyID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsgdGhpcy53aGVlbEJyYWtpbmdGb3JjZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mcm9udFdoZWVsUG93ZXIgPSAwOyB0aGlzLmJhY2tXaGVlbFBvd2VyID0gMDtcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBFbmdpbmUgRm9yY2VzXG4gICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kYnJha2luZzpib29sZWFuID0gKHRoaXMuZ2V0Q3VycmVudFNraWRkaW5nKCkgPT09IHRydWUgJiYgdGhpcy5oYW5kQnJha2luZ0ZvcmNlID4gMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2VhclNoaWZ0UmF0aW86bnVtYmVyID0gKHRoaXMuZ2VhckJveFNoaWZ0UmF0aW9zICE9IG51bGwgJiYgdGhpcy5nZWFyQm94U2hpZnRSYXRpb3MubGVuZ3RoID4gdGhpcy5nZWFySW5kZXgpID8gdGhpcy5nZWFyQm94U2hpZnRSYXRpb3NbdGhpcy5nZWFySW5kZXhdIDogMS4wO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsR2VhclJhdGlvOm51bWJlciA9IChnZWFyU2hpZnRSYXRpbyAqIHRoaXMuZGlmZmVyZW50aWFsUmF0aW8gKiB0aGlzLnRyYW5zbWlzc2lvblJhdGlvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmdpbmVNb3RvclRvcnF1ZTpudW1iZXIgPSB0aGlzLmdldFZlaGljbGVFbmdpbmVUb3JxdWUodGhpcy5lbmdpbmVSUE0pICogTWF0aC5hYnModGhpcy5jdXJyZW50Rm9yd2FyZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZEVuZ2luZVBvd2VyOm51bWJlciA9IChlbmdpbmVNb3RvclRvcnF1ZSAqIGZpbmFsR2VhclJhdGlvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkQnJha2luZ0ZvcmNlOm51bWJlciA9IEJBQllMT04uU2NhbGFyLkxlcnAodGhpcy5taW5CcmFraW5nRm9yY2UsIHRoaXMubWF4QnJha2luZ0ZvcmNlLCB0aGlzLm5vcm1hbGl6ZWRTcGVlZCkgKiBNYXRoLmFicyh0aGlzLmN1cnJlbnRGb3J3YXJkKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Rm9yd2FyZCA+IDAgJiYgdGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgJiYgdGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZUZvcmNlID0gYWxsb3dlZEVuZ2luZVBvd2VyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRGb3J3YXJkID4gMCkgeyAvLyBGb3J3YXJkXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFN1cHBvcnQgUmlnaHQgSGFuZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3J3YXJkU3BlZWQgPCAtMSkgdGhpcy53aGVlbEJyYWtpbmdGb3JjZSA9IGFsbG93ZWRCcmFraW5nRm9yY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRoaXMuZW5naW5lRm9yY2UgPSBhbGxvd2VkRW5naW5lUG93ZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRGb3J3YXJkIDwgMCkgeyAvLyBSZXZlcnNlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFN1cHBvcnQgUmlnaHQgSGFuZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3J3YXJkU3BlZWQgPiAxKSB0aGlzLndoZWVsQnJha2luZ0ZvcmNlID0gYWxsb3dlZEJyYWtpbmdGb3JjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5lbmdpbmVGb3JjZSA9IC0oYWxsb3dlZEVuZ2luZVBvd2VyICogdGhpcy5tYXhSZXZlcnNlUG93ZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIFN0YXRpY1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmdpbmVGb3JjZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsQnJha2luZ0ZvcmNlID0gMTA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdGhyb3R0bGVTcGVlZDpudW1iZXIgPSAodGhpcy50aHJvdHRsZUVuZ2luZVNwZWVkID4gMCkgPyB0aGlzLnRocm90dGxlRW5naW5lU3BlZWQgOiB0aGlzLnRvcEVuZ2luZVNwZWVkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNoaWZ0aW5nVGltZSA+IDAgfHwgdGhpcy5hbWVyaWNhblNwZWVkID4gdGhyb3R0bGVTcGVlZCkgdGhpcy5lbmdpbmVGb3JjZSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGFzc2lzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIERpcmVjdCBTdGVlciBBbmdsZSAoTm9uIEFzc2lzdGVkKVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbWVyaWNhblNwZWVkID49IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXV0b1R1cm5BbmdsZTpudW1iZXIgPSAoQkFCWUxPTi5TY2FsYXIuTGVycCh0aGlzLmxvd1NwZWVkQW5nbGUsIHRoaXMuaGlnaFNwZWVkQW5nbGUsIHRoaXMubm9ybWFsaXplZFNwZWVkKSAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1R1cm5BbmdsZSAqPSAoQkFCWUxPTi5TY2FsYXIuTGVycCh0aGlzLmxvd1NwZWVkVHVybmluZywgdGhpcy5oaWdoU3BlZWRUdXJuaW5nLCB0aGlzLm5vcm1hbGl6ZWRTcGVlZCkgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSA9ICh0aGlzLmN1cnJlbnRUdXJuaW5nICogYXV0b1R1cm5BbmdsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPSAodGhpcy5jdXJyZW50VHVybmluZyAqIGF1dG9UdXJuQW5nbGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSA9IHRoaXMuY3VycmVudFR1cm5pbmcgKiAodGhpcy5tYXhUdXJuQW5nbGUgKiBCQUJZTE9OLlN5c3RlbS5EZWcyUmFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsU3RlZXJBbmdsZSA9IHRoaXMuY3VycmVudFR1cm5pbmcgKiAodGhpcy5tYXhUdXJuQW5nbGUgKiBCQUJZTE9OLlN5c3RlbS5EZWcyUmFkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vdmVyU3RlZXJEZWxheSA+IDAgJiYgaGFuZGJyYWtpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyaWZ0aW5nVGltZXIgPj0gdGhpcy5vdmVyU3RlZXJEZWxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsU3RlZXJBbmdsZSAqPSAtMTsgLy8gTm90ZTogSW52ZXJ0IE92ZXIgU3RlZXJpbmcgQW5nbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBQaHlzaWNzIFR1cm4gQW5nbGUgKEFzc2lzdGVkIFN0ZWVyaW5nKVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQgPSBCQUJZTE9OLlNjYWxhci5MZXJwKHRoaXMubG93U3BlZWRUdXJuaW5nLCB0aGlzLmhpZ2hTcGVlZFR1cm5pbmcsIHRoaXMubm9ybWFsaXplZFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW1lcmljYW5TcGVlZCA+PSAxMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVHVybmluZ0FuZ2xlID0gQkFCWUxPTi5TY2FsYXIuTGVycCgodGhpcy5sb3dTcGVlZEFuZ2xlICogQkFCWUxPTi5TeXN0ZW0uRGVnMlJhZCksICh0aGlzLmhpZ2hTcGVlZEFuZ2xlICogQkFCWUxPTi5TeXN0ZW0uRGVnMlJhZCksIHRoaXMubm9ybWFsaXplZFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSA9ICh0aGlzLm1heFR1cm5BbmdsZSAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgJiYgdGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVHVybmluZ0FuZ2xlID0gKHRoaXMubWF4QnVybkFuZ2xlICogQkFCWUxPTi5TeXN0ZW0uRGVnMlJhZCk7IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRUdXJuaW5nID4gMCkgeyAvLyBSaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPCB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVlckFuZ2xlICs9ICh0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFR1cm5pbmcgPCAwKSB7IC8vIExlZnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlID4gLXRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgLT0gKHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5waHlzaWNzU3RlZXJBbmdsZSA8IC10aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBoeXNpY3NTdGVlckFuZ2xlICs9IHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUgPiB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSAtPSB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waHlzaWNzU3RlZXJBbmdsZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBWaXN1YWwgVHVybiBBbmdsZSAoTm8gU3RlZXJpbmcgRWZmZWN0KVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgfHwgdGhpcy53aGVlbFNraWRkaW5nID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSA9ICh0aGlzLm1heFR1cm5BbmdsZSAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVHVybmluZ0luY2VtZW50ID0gdGhpcy5sb3dTcGVlZFR1cm5pbmc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQgPSBCQUJZTE9OLlNjYWxhci5MZXJwKHRoaXMubG93U3BlZWRUdXJuaW5nLCB0aGlzLmhpZ2hTcGVlZFR1cm5pbmcsIHRoaXMubm9ybWFsaXplZFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb3dlZFR1cm5pbmdBbmdsZSA9IEJBQllMT04uU2NhbGFyLkxlcnAoKHRoaXMubG93U3BlZWRBbmdsZSAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpLCAodGhpcy5oaWdoU3BlZWRBbmdsZSAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpLCB0aGlzLm5vcm1hbGl6ZWRTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGVlcmluZ0Jvb3N0ID4gMCAmJiBNYXRoLmFicyh0aGlzLmN1cnJlbnRUdXJuaW5nKSA+PSAwLjEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUgKz0gKHRoaXMuc3RlZXJpbmdCb29zdCAqIEJBQllMT04uU3lzdGVtLkRlZzJSYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm92ZXJTdGVlckRlbGF5ID4gMCAmJiBoYW5kYnJha2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJpZnRpbmdUaW1lciA+PSB0aGlzLm92ZXJTdGVlckRlbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VHVybmluZyAqPSAtMTsgLy8gTm90ZTogSW52ZXJ0IE92ZXIgU3RlZXJpbmcgQW5nbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50VHVybmluZyA+IDApIHsgLy8gUmlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPCB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgKz0gKHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VHVybmluZyA8IDApIHsgLy8gTGVmdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlzdWFsU3RlZXJBbmdsZSA+IC10aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgLT0gKHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aXN1YWxTdGVlckFuZ2xlIDwgLXRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsU3RlZXJBbmdsZSArPSB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPiB0aGlzLmFsbG93ZWRUdXJuaW5nSW5jZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aXN1YWxTdGVlckFuZ2xlIC09IHRoaXMuYWxsb3dlZFR1cm5pbmdJbmNlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbFN0ZWVyQW5nbGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBSYXljYXN0IFZlaGljbGUgQ29udHJvbHNcbiAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgIGxldCB1cGRhdGVGcmljdGlvbjpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGJyYWtpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbEJ1cm5vdXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbERvbnV0cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1cm5vdXRUaW1lciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJpZnRpbmdUaW1lciArPSBkZWx0YVRpbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIFdoZWVsIFNraWRkaW5nIE1vZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmF5Y2FzdFZlaGljbGUubG9ja2VkV2hlZWxJbmRleGVzID09IG51bGwpIHRoaXMucmF5Y2FzdFZlaGljbGUubG9ja2VkV2hlZWxJbmRleGVzID0gW3RoaXMuQkFDS19MRUZULCB0aGlzLkJBQ0tfUklHSFRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbWVyaWNhblNwZWVkID49IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsU2tpZGRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVlbFNraWRkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsTG9ja0ZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy53aGVlbExvY2tGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRnJpY3Rpb24gPSBmYWxzZTsgLy8gTm90ZTogRGlzYWJsZSBGcmljdGlvbiBMZXJwaW5nIFRoaXMgRnJhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVmVoaWNsZSBXaGVlbCBJbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRCcmFrZURhbXBpbmcodGhpcy5saW5lYXJCcmFraW5nRm9yY2UsIHRoaXMuYW5ndWxhckJyYWtpbmdGb3JjZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVGcmljdGlvbiA9PT0gdHJ1ZSkgdGhpcy51cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKGRlbHRhVGltZSAqIHRoaXMuZHJpZnRpbmdMZXJwU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRSb3RhdGlvbkJvb3N0KDApO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRQaHlzaWNzU3RlZXJpbmdBbmdsZSh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFBoeXNpY3NTdGVlcmluZ0FuZ2xlKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKDAsIHRoaXMuRlJPTlRfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UoMCwgdGhpcy5GUk9OVF9SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UoMCwgdGhpcy5CQUNLX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKDAsIHRoaXMuQkFDS19SSUdIVCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKDAsIHRoaXMuRlJPTlRfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKDAsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEJyYWtpbmdGb3JjZSh0aGlzLmhhbmRCcmFraW5nRm9yY2UsIHRoaXMuQkFDS19MRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy5oYW5kQnJha2luZ0ZvcmNlLCB0aGlzLkJBQ0tfUklHSFQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJpZnRpbmdUaW1lciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxTa2lkZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yYXljYXN0VmVoaWNsZS5sb2NrZWRXaGVlbEluZGV4ZXMgIT0gbnVsbCkgdGhpcy5yYXljYXN0VmVoaWNsZS5sb2NrZWRXaGVlbEluZGV4ZXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0Q29lZmZpY2llbnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCA9IEJBQllMT04uU2NhbGFyLkNsYW1wKHRoaXMuYnVybm91dENvZWZmaWNpZW50LCAxLCAyMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dFRyaWdnZXJNYXJrID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJub3V0VHJpZ2dlck1hcmsgPSBCQUJZTE9OLlNjYWxhci5DbGFtcCh0aGlzLmJ1cm5vdXRUcmlnZ2VyTWFyaywgMSwgMjApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQnVybm91dFNwZWVkOmJvb2xlYW4gPSAodGhpcy5hbWVyaWNhblNwZWVkIDw9IHRoaXMuYnVybm91dFRyaWdnZXJNYXJrKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNGdWxsVGhyb3R0bGU6Ym9vbGVhbiA9ICh0aGlzLmN1cnJlbnRGb3J3YXJkIDwgLTAuOSB8fCB0aGlzLmN1cnJlbnRGb3J3YXJkID4gMC45KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNGdWxsVHVybmluZzpib29sZWFuID0gKHRoaXMuY3VycmVudFR1cm5pbmcgPCAtMC45IHx8IHRoaXMuY3VycmVudFR1cm5pbmcgPiAwLjkpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2hlZWxMZXJwU3BlZWQ6bnVtYmVyID0gKGRlbHRhVGltZSAqIHRoaXMuZGVmYXVsdExlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJvb3N0U3BlZWQ6bnVtYmVyID0gMDsgLy8gRGVmYXVsdCBaZXJvIFdoZWVsIFJvdGF0aW9uIEJvb3N0XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIFdoZWVsIEJ1cm5vdXQgTW9kZVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0VGltZXIgPD0gMCAmJiB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudCA+PSAxLjAgJiYgaXNCdXJub3V0U3BlZWQgPT09IHRydWUgJiYgaXNGdWxsVGhyb3R0bGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gKHRoaXMuYnVybm91dFRpbWVEZWxheSAqIDAuMjUpOyAvLyBOb3RlOiAyNSBQZXJjZW50IFNsaXBwaW5nIFRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxEb251dHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxCdXJub3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSBXaGVlbCBCdXJub3V0IFRpbWVyc1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN0b3JlVGltZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVUaW1lciAtPSBkZWx0YVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN0b3JlVGltZXIgPCAwKSB0aGlzLnJlc3RvcmVUaW1lciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVlbExlcnBTcGVlZCAqPSB0aGlzLmJ1cm5vdXRMZXJwU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29vbGRvd25UaW1lciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29vbGRvd25UaW1lciAtPSBkZWx0YVRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb29sZG93blRpbWVyIDwgMCkgdGhpcy5jb29sZG93blRpbWVyID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb251dFNwaW5UaW1lICs9IGRlbHRhVGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bGxUdXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gMDsgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbnV0U3BpblRpbWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIFdoZWVsIERyaXZlIEJ1cm5vdXQgTW9kZVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idXJub3V0VGltZXIgPiAwICYmIGlzRnVsbFRocm90dGxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGVlbEJvb3N0U3BlZWQgPSAwLjE4NTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250U2xpcEZhY3RvcjpudW1iZXIgPSAodGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkgPyAxLjI1IDogMS4wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dENvZWZmaWNpZW50ID49IDEuMCkgdGhpcy5lbmdpbmVGb3JjZSAqPSB0aGlzLmJ1cm5vdXRDb2VmZmljaWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRMZWZ0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2Zyb250TGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsQnVybkZyaWN0aW9uICogZnJvbnRTbGlwRmFjdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fZnJvbnRSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuc2V0X21fZnJpY3Rpb25TbGlwKHRoaXMud2hlZWxCdXJuRnJpY3Rpb24gKiBmcm9udFNsaXBGYWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsQnVybkZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fYmFja1JpZ2h0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2JhY2tSaWdodFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLndoZWVsQnVybkZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZyaWN0aW9uID0gZmFsc2U7IC8vIE5vdGU6IERpc2FibGUgRnJpY3Rpb24gTGVycGluZyBUaGlzIEZyYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJub3V0VGltZXIgLT0gZGVsdGFUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVybm91dFRpbWVyIDw9IDAgJiYgdGhpcy5jb29sZG93blRpbWVyIDw9IDAgJiYgaXNGdWxsVHVybmluZyA9PT0gdHJ1ZSAmJiB0aGlzLmN1cnJlbnRGb3J3YXJkID4gMCAmJiB0aGlzLmN1cnJlbnREcmlmdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gMC4wMTsgLy8gTm90ZTogVXNlIEZpeGVkIERvbnV0IEJ1cm5vdXQgVGltZSBFeHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndoZWVsRG9udXRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVybm91dFRpbWVyID0gMDsgLy8gTm90ZTogRm9yY2UgQnVybm91dCBUaW1lciBSZXNldFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb251dFNwaW5UaW1lID0gMDsgLy8gTm90ZTogRm9yY2UgRG9udXQgU3BpbiBUaW1lIFJlc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxEb251dHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvb2xkb3duVGltZXIgPSAodGhpcy5idXJub3V0VGltZURlbGF5ICogMik7IC8vIE5vdGU6IDIwMCBQZXJjZW50IENvb2xkb3duIFRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsQnVybm91dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2hlZWxCdXJub3V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlVGltZXIgPSAodGhpcy5idXJub3V0VGltZURlbGF5ICogMC43NSk7IC8vIE5vdGU6IDc1IFBlcmNlbnQgUmVzdG9yaW5nIFRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICAvLyBWYWxpZGF0ZSBXaGVlbCBEcml2ZSBQb3dlciBGb3JjZVxuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53aGVlbEJ1cm5vdXQgPT09IHRydWUgJiYgdGhpcy53aGVlbERvbnV0cyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFdoZWVsUG93ZXIgPSAodGhpcy5lbmdpbmVGb3JjZSAqIDAuMik7IC8vIE5vdGU6IDIwIFBlcmNlbnQgRW5naW5lIFBvd2VyIEZvcmNlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMSB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIEZST05UIE9SIEFMTCBXSEVFTCBEUklWRVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mcm9udFdoZWVsUG93ZXIgPSB0aGlzLmVuZ2luZUZvcmNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndoZWVsRHJpdmVUeXBlID09PSAwIHx8IHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDIpIHsgLy8gUkVBUiBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja1doZWVsUG93ZXIgPSB0aGlzLmVuZ2luZUZvcmNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBWZWhpY2xlIFdoZWVsIEluZm9ybWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldEN1cnJlbnRCcmFraW5nKCkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudEJyYWtlRGFtcGluZyh0aGlzLmxpbmVhckJyYWtpbmdGb3JjZSwgdGhpcy5hbmd1bGFyQnJha2luZ0ZvcmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudEJyYWtlRGFtcGluZyh0aGlzLmxpbmVhckRhbXBpbmcsIHRoaXMuYW5ndWxhckRhbXBpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVGcmljdGlvbiA9PT0gdHJ1ZSkgdGhpcy51cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKHdoZWVsTGVycFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50Um90YXRpb25Cb29zdCh3aGVlbEJvb3N0U3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFZpc3VhbFN0ZWVyaW5nQW5nbGUodGhpcy52aXN1YWxTdGVlckFuZ2xlLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRQaHlzaWNzU3RlZXJpbmdBbmdsZSh0aGlzLnBoeXNpY3NTdGVlckFuZ2xlLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldFBoeXNpY3NTdGVlcmluZ0FuZ2xlKHRoaXMucGh5c2ljc1N0ZWVyQW5nbGUsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKHRoaXMuZnJvbnRXaGVlbFBvd2VyLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEVuZ2luZUZvcmNlKHRoaXMuZnJvbnRXaGVlbFBvd2VyLCB0aGlzLkZST05UX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRFbmdpbmVGb3JjZSh0aGlzLmJhY2tXaGVlbFBvd2VyLCB0aGlzLkJBQ0tfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0RW5naW5lRm9yY2UodGhpcy5iYWNrV2hlZWxQb3dlciwgdGhpcy5CQUNLX1JJR0hUKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYXljYXN0VmVoaWNsZS5zZXRCcmFraW5nRm9yY2UodGhpcy53aGVlbEJyYWtpbmdGb3JjZSAqIHRoaXMubWF4RnJvbnRCcmFraW5nLCB0aGlzLkZST05UX0xFRlQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEJyYWtpbmdGb3JjZSh0aGlzLndoZWVsQnJha2luZ0ZvcmNlICogdGhpcy5tYXhGcm9udEJyYWtpbmcsIHRoaXMuRlJPTlRfUklHSFQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJheWNhc3RWZWhpY2xlLnNldEJyYWtpbmdGb3JjZSh0aGlzLndoZWVsQnJha2luZ0ZvcmNlLCB0aGlzLkJBQ0tfTEVGVCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmF5Y2FzdFZlaGljbGUuc2V0QnJha2luZ0ZvcmNlKHRoaXMud2hlZWxCcmFraW5nRm9yY2UsIHRoaXMuQkFDS19SSUdIVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRyYWNlIEN1cnJlbnQgU3BlZWRcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBtc2c6c3RyaW5nID0gKFwiU3BlZWQ6IFwiICsgdGhpcy5hbWVyaWNhblNwZWVkLnRvRml4ZWQoMSkgKyBcIiAtLT4gVHVybiBBbmdsZTogXCIgKyB0aGlzLmFsbG93ZWRUdXJuaW5nQW5nbGUudG9GaXhlZCg0KSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc3QgbXNnOnN0cmluZyA9IChcIk1QSDogXCIgKyB0aGlzLmFtZXJpY2FuU3BlZWQudG9GaXhlZCgxKSArIFwiIC0tPiBHZWFyIEluZGV4OiBcIiArIHRoaXMuZ2VhckluZGV4LnRvRml4ZWQoMCkgKyBcIiAtLT4gRW5naW5lIFJQTTogXCIgKyB0aGlzLmVuZ2luZVJQTS50b0ZpeGVkKDApICsgXCIgLS0tPiBFbmdpbmUgUGl0Y2g6IFwiICsgdGhpcy5nZXRDdXJyZW50RW5naW5lUGl0Y2goKS50b0ZpeGVkKDIpICsgXCIgLS0tPiBSYXcgS1BIOiBcIiArIHRoaXMuYWJzb2x1dGVTcGVlZC50b0ZpeGVkKDEpKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBtc2c6c3RyaW5nID0gKFwiQ2FyIFNwZWVkOiBcIiArIHRoaXMuYW1lcmljYW5TcGVlZC50b0ZpeGVkKDEpICsgXCIgLS0+IEdlYXIgSW5kZXg6IFwiICsgdGhpcy5nZWFySW5kZXgudG9GaXhlZCgwKSArIFwiIC0tPiBFbmdpbmUgUlBNOiBcIiArIHRoaXMuZW5naW5lUlBNLnRvRml4ZWQoMCkgKyBcIiAtLS0+IEVuZ2luZSBUb3J1cWU6IFwiICsgZW5naW5lTW90b3JUb3JxdWUudG9GaXhlZCgyKSsgXCIgLS0tPiBFbmdpbmUgUG93ZXI6IFwiICsgYWxsb3dlZEVuZ2luZVBvd2VyLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnN0IG1zZzpzdHJpbmcgPSAoXCJGd2QgU3BlZWQ6IFwiICsgdGhpcy5mb3J3YXJkU3BlZWQudG9GaXhlZCgxKSArIFwiIC0tPiBHZWFyIEluZGV4OiBcIiArIHRoaXMuZ2VhckluZGV4LnRvRml4ZWQoMCkgKyBcIiAtLT4gRW5naW5lIFJQTTogXCIgKyB0aGlzLmVuZ2luZVJQTS50b0ZpeGVkKDApICsgXCIgLS0tPiBFbmdpbmUgVG9ydXFlOiBcIiArIGVuZ2luZU1vdG9yVG9ycXVlLnRvRml4ZWQoMikrIFwiIC0tLT4gRW5naW5lIFBvd2VyOiBcIiArIGFsbG93ZWRFbmdpbmVQb3dlci50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBtc2c6c3RyaW5nID0gKFwiQ2FyIFNwZWVkOiBcIiArIHRoaXMuYW1lcmljYW5TcGVlZC50b0ZpeGVkKDEpICsgXCIgLS0+IEdlYXIgSW5kZXg6IFwiICsgdGhpcy5nZWFySW5kZXgudG9GaXhlZCgwKSArIFwiIC0tPiBFbmdpbmUgUlBNOiBcIiArIHRoaXMuZW5naW5lUlBNLnRvRml4ZWQoMCkgKyBcIiAtLS0+IERvd25zaGlmdCBWYWx1ZTogXCIgKyB0aGlzLmRvd25TaGlmdC50b0ZpeGVkKDApKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtc2c6c3RyaW5nID0gKFwiQ2FyIFNwZWVkOiBcIiArIHRoaXMuYW1lcmljYW5TcGVlZC50b0ZpeGVkKDEpICsgXCIgLS0+IEdlYXIgSW5kZXg6IFwiICsgdGhpcy5nZWFySW5kZXgudG9GaXhlZCgwKSArIFwiIC0tPiBFbmdpbmUgUlBNOiBcIiArIHRoaXMuZW5naW5lUlBNLnRvRml4ZWQoMCkgKyBcIiAtLT4gU3BlZWQgVGhyb3R0bGU6IFwiICsgdGhyb3R0bGVTcGVlZC50b0ZpeGVkKDApKTtcbiAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5QcmludFRvU2NyZWVuKG1zZywgXCIjMDA4MDAwXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByaXZhdGUgZ2V0VmVoaWNsZUVuZ2luZVRvcnF1ZShycG06bnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6bnVtYmVyID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmVuZ2luZVRvcnF1ZUN1cnZlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAoQkFCWUxPTi5VdGlsaXRpZXMuRmFzdEZsb2F0SW50ZXJwb2xhdGUodGhpcy5lbmdpbmVUb3JxdWVDdXJ2ZSwgQkFCWUxPTi5TY2FsYXIuQ2xhbXAocnBtLCBTdGFuZGFyZENhckNvbnRyb2xsZXIuTUlOX1JQTSwgU3RhbmRhcmRDYXJDb250cm9sbGVyLk1BWF9SUE0pLCAwLCAwKSAqIHRoaXMucG93ZXJDb2VmZmljaWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0OyBcbiAgICAgICAgfVxuICAgICAgICBwcml2YXRlIGNyZWF0ZVNtb2tlUGFydGljbGVTeXN0ZW0obmFtZTpzdHJpbmcsIGVtaXR0ZXI6QkFCWUxPTi5BYnN0cmFjdE1lc2gpOkJBQllMT04uUGFydGljbGVTeXN0ZW0ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEJBQllMT04uUGFydGljbGVTeXN0ZW0obmFtZSwgMTAwMDAsIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgcmVzdWx0LmJsZW5kTW9kZSA9IEJBQllMT04uUGFydGljbGVTeXN0ZW0uQkxFTkRNT0RFX1NUQU5EQVJEO1xuICAgICAgICAgICAgcmVzdWx0LnBhcnRpY2xlVGV4dHVyZSA9IHRoaXMuc21va2VUZXh0dXJlICAgICAgXG4gICAgICAgICAgICByZXN1bHQuZW1pdHRlciA9IGVtaXR0ZXI7XG4gICAgICAgICAgICByZXN1bHQuZW1pdFJhdGUgPSAwO1xuICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZVNwZWVkID0gMC4wMTtcblxuICAgICAgICAgICAgLy8gY2hhbmdlIHNpemUgYW5kIHNwZWVkXG4gICAgICAgICAgICByZXN1bHQubWluU2l6ZSA9IDAuMjtcbiAgICAgICAgICAgIHJlc3VsdC5tYXhTaXplID0gMS4zO1xuICAgICAgICAgICAgcmVzdWx0Lm1pbkFuZ3VsYXJTcGVlZCA9IC0xLjU7XG4gICAgICAgICAgICByZXN1bHQubWF4QW5ndWxhclNwZWVkID0gMS41O1xuICAgIFxuICAgICAgICAgICAgLy8gY2hhbmdlZCBsaWZldGltZSB0byBjb250cm9sIHNoYXBlIG9mIHRoZSBjbG91ZCBpbiBjb25qdW5jdGlvbiB3aXRoIHZlbG9jaXR5IGdyYWRpZW50XG4gICAgICAgICAgICByZXN1bHQubWluTGlmZVRpbWUgPSAzLjA7XG4gICAgICAgICAgICByZXN1bHQubWF4TGlmZVRpbWUgPSA1LjA7XG4gICAgXG4gICAgICAgICAgICAvLyBhZGRpbmcgdmVsb2NpdHkgb3ZlciB0aW1lIHRvIHByZXZlbnQgbGFyZ2UgYmxvb20gb2YgcGFydGljbGVzIGJ5IGxhdW5jaGluZyB0aGVtIGZhc3QgYW5kIHRoZW4gc2xvd2luZyB0aGVtIGRvd24gR1BVIHBhcnRpY2xlcyBkb24ndCB0YWtlIGEgZ3JhZGllbnQgb24gdmVsb2NpdHksIGJ1dCB0aGUgcmVkdWN0aW9uIGluIHZlbG9jaXR5IG92ZXIgdGltZSBpcyB3b3J0aCB0aGUgdHJhZGUgb2ZmIGZvciBsZXNzIHJhbmRvbWl6YXRpb25cbiAgICAgICAgICAgIHJlc3VsdC5hZGRWZWxvY2l0eUdyYWRpZW50KDAsIDEpO1xuICAgICAgICAgICAgcmVzdWx0LmFkZFZlbG9jaXR5R3JhZGllbnQoMC4xLCAwLjcpO1xuICAgICAgICAgICAgcmVzdWx0LmFkZFZlbG9jaXR5R3JhZGllbnQoMC43LCAwLjIpO1xuICAgICAgICAgICAgcmVzdWx0LmFkZFZlbG9jaXR5R3JhZGllbnQoMS4wLCAwLjA1KTtcbiAgICBcbiAgICAgICAgICAgIC8vIHJlZHVjZWQgdGhlIGVtaXQgcmF0ZSB0byByZWR1Y2UgYmxvb20gb2YgcGFydGljbGVzIGluIHRoZSBjZW50ZXIgb2YgbWFzc1xuICAgICAgICAgICAgcmVzdWx0LmdyYXZpdHkgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIC0wLjEsIDApO1xuICAgICAgICAgICAgcmVzdWx0Lm1pbkVtaXRCb3ggPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIC0wLjI1LCAwKTtcbiAgICAgICAgICAgIHJlc3VsdC5tYXhFbWl0Qm94ID0gbmV3IEJBQllMT04uVmVjdG9yMygwLCAtMC4yNSwgMCk7XG4gICAgICAgICAgICByZXN1bHQuZGlyZWN0aW9uMSA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoLTEsIC0xLCAtMSk7XG4gICAgICAgICAgICByZXN1bHQuZGlyZWN0aW9uMiA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMSwgMSwgMSk7XG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgY29sb3IxLCBjb2xvcjIsIGNvbG9yRGVhZCBwYXR0ZXJuIGlzIG92ZXJyaWRkZW4gYnkgY29sb3IgZ3JhZGllbnQgc28gaXMgdW5uZWNlc3NhcnlcbiAgICAgICAgICAgIHJlc3VsdC5jb2xvcjEgPSBuZXcgQkFCWUxPTi5Db2xvcjQoMC45NSwgMC45NSwgMC45NSwgdGhpcy5zbW9rZU9wYWNpdHkpO1xuICAgICAgICAgICAgcmVzdWx0LmNvbG9yMiA9IG5ldyBCQUJZTE9OLkNvbG9yNCgwLjg1LCAwLjg1LCAwLjg1LCB0aGlzLnNtb2tlT3BhY2l0eSk7XG4gICAgICAgICAgICByZXN1bHQuY29sb3JEZWFkID0gbmV3IEJBQllMT04uQ29sb3I0KDAuOSwgMC45LCAwLjksICh0aGlzLnNtb2tlT3BhY2l0eSAqIDAuNSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGFuZ2VkIHRoZSBjb2xvciBncmFkaWVudCB0byBhZGQgYSBzZWNvbmQgdmFsdWUgZm9yIHJhbmRvbWl6YXRpb24gYW5kIHJhbXBlZCB0aGUgY29sb3IgZG93biBmdXJ0aGVyIHRvIGNyZWF0ZSBtb3JlIHRleHR1cmUgd2l0aCBhbHBoYSBibGVuZGluZ1xuICAgICAgICAgICAgLy9yZXN1bHQuYWRkQ29sb3JHcmFkaWVudCgwLjAsIG5ldyBCQUJZTE9OLkNvbG9yNCgxLCAxLCAxLCAwLjApLCBuZXcgQkFCWUxPTi5Db2xvcjQoMC43LCAwLjcsIDAuNywgMC4wKSk7XG4gICAgICAgICAgICAvL3Jlc3VsdC5hZGRDb2xvckdyYWRpZW50KDAuMiwgbmV3IEJBQllMT04uQ29sb3I0KDAuNywgMC43LCAwLjcsIDAuMiksIG5ldyBCQUJZTE9OLkNvbG9yNCgwLjYsIDAuNiwgMC42LCAwLjIpKTtcbiAgICAgICAgICAgIC8vcmVzdWx0LmFkZENvbG9yR3JhZGllbnQoMC42LCBuZXcgQkFCWUxPTi5Db2xvcjQoMC42LCAwLjYsIDAuNiwgMC4xKSxuZXcgQkFCWUxPTi5Db2xvcjQoMC40LCAwLjQsIDAuNCwgMC4xKSk7XG4gICAgICAgICAgICAvL3Jlc3VsdC5hZGRDb2xvckdyYWRpZW50KDEuMCwgbmV3IEJBQllMT04uQ29sb3I0KDAuMywgMC4zLCAwLjMsIDAuMCksbmV3IEJBQllMT04uQ29sb3I0KDAuMSwgMC4xLCAwLjEsIDAuMCkpOyAgICAgICAgICAgIFxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0OyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ3VycmVudFNraWRJbmZvKHdoZWVsOmFueSk6bnVtYmVyIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ6bnVtYmVyID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoKDEgLSB3aGVlbC5nZXRfbV9za2lkSW5mbygpKSk7XG4gICAgICAgICAgICBjb25zdCBpc2JyYWtpbmc6Ym9vbGVhbiA9IHRoaXMuZ2V0Q3VycmVudEJyYWtpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IGZvb3RicmFraW5nOmJvb2xlYW4gPSAoaXNicmFraW5nID09PSB0cnVlICYmIHRoaXMuY3VycmVudEZvcndhcmQgPD0gLXRoaXMuZm9vdEJyYWtpbmdUaHJlYXNob2xkKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNraWRXaGVuRm9vdEJyYWtpbmcgPT09IHRydWUgJiYgZm9vdGJyYWtpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbWVyaWNhblNwZWVkID49IHRoaXMuZm9vdFNraWRCcmFraW5nU3BlZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gQkFCWUxPTi5TY2FsYXIuQ2xhbXAoMCwgMSwgKHRoaXMubm9ybWFsaXplZFNwZWVkICogdGhpcy5mb290U2tpZEJyYWtpbmdGYWN0b3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ3VycmVudEJyYWtlRGFtcGluZyhsaW5lYXI6bnVtYmVyLCBhbmd1bGFyOm51bWJlcik6dm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmlnaWRib2R5ICE9IG51bGwpIHRoaXMuX3JpZ2lkYm9keS5zZXREYW1waW5nKGxpbmVhciwgYW5ndWxhcik7XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50Um90YXRpb25Cb29zdChib29zdDpudW1iZXIpOnZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMud2hlZWxEcml2ZVR5cGUgPT09IDEgfHwgdGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMikgeyAvLyBGUk9OVCBPUiBBTEwgV0hFRUwgRFJJVkVcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2Zyb250TGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9mcm9udExlZnRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCkgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy53aGVlbERyaXZlVHlwZSA9PT0gMCB8fCB0aGlzLndoZWVsRHJpdmVUeXBlID09PSAyKSB7IC8vIFJFQVIgT1IgQUxMIFdIRUVMIERSSVZFXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubV9iYWNrTGVmdFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrTGVmdFdoZWVsLnJvdGF0aW9uQm9vc3QgPSBib29zdDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tSaWdodFdoZWVsICE9IG51bGwpIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5yb3RhdGlvbkJvb3N0ID0gYm9vc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50RnJpY3Rpb25TbGlwKGxlcnBTcGVlZDpudW1iZXIpOnZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udExlZnRXaGVlbCAhPSBudWxsICYmIHRoaXMubV9mcm9udExlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBmcm9udExlZnRGcmljdGlvbjpudW1iZXIgPSB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZ2V0X21fZnJpY3Rpb25TbGlwKCk7XG4gICAgICAgICAgICAgICAgaWYgKGZyb250TGVmdEZyaWN0aW9uIDwgdGhpcy5tX2Zyb250TGVmdFdoZWVsLmRlZmF1bHRGcmljdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmcm9udExlZnRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoZnJvbnRMZWZ0RnJpY3Rpb24sIHRoaXMubV9mcm9udExlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24sIGxlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoZnJvbnRMZWZ0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZnJvbnRMZWZ0RnJpY3Rpb24gPiB0aGlzLm1fZnJvbnRMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udExlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy5tX2Zyb250TGVmdFdoZWVsLmRlZmF1bHRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb250UmlnaHRGcmljdGlvbjpudW1iZXIgPSB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChmcm9udFJpZ2h0RnJpY3Rpb24gIT09IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb250UmlnaHRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoZnJvbnRSaWdodEZyaWN0aW9uLCB0aGlzLm1fZnJvbnRSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbiwgbGVycFNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2Zyb250UmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoZnJvbnRSaWdodEZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZyb250UmlnaHRGcmljdGlvbiA+IHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuc2V0X21fZnJpY3Rpb25TbGlwKHRoaXMubV9mcm9udFJpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5tX2JhY2tMZWZ0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBiYWNrTGVmdEZyaWN0aW9uOm51bWJlciA9IHRoaXMubV9iYWNrTGVmdFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChiYWNrTGVmdEZyaWN0aW9uICE9PSB0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja0xlZnRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoYmFja0xlZnRGcmljdGlvbiwgdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uLCBsZXJwU3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fYmFja0xlZnRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoYmFja0xlZnRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiYWNrTGVmdEZyaWN0aW9uID4gdGhpcy5tX2JhY2tMZWZ0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrTGVmdFdoZWVsLnNldF9tX2ZyaWN0aW9uU2xpcCh0aGlzLm1fYmFja0xlZnRXaGVlbC5kZWZhdWx0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1fYmFja1JpZ2h0V2hlZWwgIT0gbnVsbCAmJiB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsZXQgYmFja1JpZ2h0RnJpY3Rpb246bnVtYmVyID0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmdldF9tX2ZyaWN0aW9uU2xpcCgpO1xuICAgICAgICAgICAgICAgIGlmIChiYWNrUmlnaHRGcmljdGlvbiAhPT0gdGhpcy5tX2JhY2tSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBiYWNrUmlnaHRGcmljdGlvbiA9IEJBQllMT04uU2NhbGFyLkxlcnAoYmFja1JpZ2h0RnJpY3Rpb24sIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5kZWZhdWx0RnJpY3Rpb24sIGxlcnBTcGVlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAoYmFja1JpZ2h0RnJpY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmFja1JpZ2h0RnJpY3Rpb24gPiB0aGlzLm1fYmFja1JpZ2h0V2hlZWwuZGVmYXVsdEZyaWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9iYWNrUmlnaHRXaGVlbC5zZXRfbV9mcmljdGlvblNsaXAodGhpcy5tX2JhY2tSaWdodFdoZWVsLmRlZmF1bHRGcmljdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgVmVoaWNsZUlucHV0Q29udHJvbGxlclxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBWZWhpY2xlSW5wdXRDb250cm9sbGVyIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwcml2YXRlIHBsYXllckRlbHRhWDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllckRlbHRhWTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdXNlWDpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHBsYXllck1vdXNlWTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIGF2b2lkYW5jZVBhdGg6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBhdm9pZGFuY2VUaW1lOm51bWJlciA9IDA7XG5cdFx0cHJpdmF0ZSB0YXJnZXRQb3NpdGlvbjpCQUJZTE9OLlZlY3RvcjMgPSBCQUJZTE9OLlZlY3RvcjMuWmVybygpO1xuXHRcdHByaXZhdGUgdGFyZ2V0Um90YXRpb246QkFCWUxPTi5RdWF0ZXJuaW9uID0gQkFCWUxPTi5RdWF0ZXJuaW9uLlplcm8oKTtcbiAgICAgICAgcHJpdmF0ZSB3YXlwb2ludEluZGV4Om51bWJlciA9IDA7XG4gICAgICAgIHByaXZhdGUgbGFzdE1vdmVtZW50VGltZTpudW1iZXIgPSAwO1xuICAgICAgICBwcml2YXRlIHNob3dSYWJiaXRDaGFzaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgcHJpdmF0ZSBzaG93VHJpZ2dlclZvbHVtZTpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgY2lyY3VpdFNwZWVkTGltaXQ6bnVtYmVyID0gMDtcbiAgICAgICAgcHJpdmF0ZSBkcmF3UmFiYml0VHJhY2tlcjpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHByaXZhdGUgcmFiYml0VHJhY2tlckxpbmU6QkFCWUxPTi5MaW5lc01lc2ggPSBudWxsO1xuICAgICAgICBwcml2YXRlIHJhYmJpdFRyYWNrZXJDb2xvcjpCQUJZTE9OLkNvbG9yMyA9IG5ldyBCQUJZTE9OLkNvbG9yMygwLDAsMCk7XG5cbiAgICAgICAgcHJpdmF0ZSB0YXJnZXRBbmdsZXM6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByaXZhdGUgdHJhbnNmb3JtQW5nbGVzOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcml2YXRlIHBvc2l0aW9uQnVmZmVyOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcml2YXRlIHJvdGF0aW9uQnVmZmVyOkJBQllMT04uUXVhdGVybmlvbiA9IG5ldyBCQUJZTE9OLlF1YXRlcm5pb24oMCwwLDAsMSk7XG4gICAgICAgIHByaXZhdGUgdGVtcFJvdGF0aW9uQnVmZmVyOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwwLDApO1xuICAgICAgICBwcml2YXRlIGxvY2FsVGFyZ2V0UG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG4gICAgICAgIHByaXZhdGUgbG9jYWxUYXJnZXRBdm9pZGFuY2U6QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCk7XG5cbiAgICAgICAgLy8gUHVibGljIFByb3BlcnRpZXNcbiAgICAgICAgcHVibGljIGdldFBsYXllckRlbHRhWCgpOm51bWJlciB7IHJldHVybiB0aGlzLnBsYXllckRlbHRhWCB9O1xuICAgICAgICBwdWJsaWMgZ2V0UGxheWVyRGVsdGFZKCk6bnVtYmVyIHsgcmV0dXJuIHRoaXMucGxheWVyRGVsdGFZIH07XG4gICAgICAgIHB1YmxpYyBnZXRQbGF5ZXJNb3VzZVgoKTpudW1iZXIgeyByZXR1cm4gdGhpcy5wbGF5ZXJNb3VzZVggfTtcbiAgICAgICAgcHVibGljIGdldFBsYXllck1vdXNlWSgpOm51bWJlciB7IHJldHVybiB0aGlzLnBsYXllck1vdXNlWSB9O1xuICAgICAgICBwdWJsaWMgZ2V0V2F5cG9pbnRJbmRleCgpOm51bWJlciB7IHJldHVybiB0aGlzLndheXBvaW50SW5kZXggfTtcbiAgICAgICAgcHVibGljIGdldENoYXNlUmFiYml0TWVzaCgpOkJBQllMT04uTWVzaCB7IHJldHVybiB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoIH07XG4gICAgICAgIHB1YmxpYyByZXNldENoYXNlUmFiYml0TWVzaCgpOnZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMubV9jaGFzZVJhYmJpdE1lc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubV9jaGFzZVJhYmJpdE1lc2gucG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMubV9jaGFzZVJhYmJpdE1lc2gucm90YXRpb25RdWF0ZXJuaW9uID0gdGhpcy50cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uLmNsb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHVibGljIHBsYXllck51bWJlcjpCQUJZTE9OLlBsYXllck51bWJlciA9IEJBQllMT04uUGxheWVyTnVtYmVyLk9uZTtcbiAgICAgICAgcHVibGljIHRyaWdnZXJGb3J3YXJkOm51bWJlciA9IEJBQllMT04uWGJveDM2MFRyaWdnZXIuUmlnaHQ7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZEZvcmF3cmQ6bnVtYmVyID0gQkFCWUxPTi5Vc2VySW5wdXRLZXkuVztcbiAgICAgICAgcHVibGljIGF1eEtleWJvYXJkRm9yYXdyZDpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5VcEFycm93O1xuICAgICAgICBwdWJsaWMgdHJpZ2dlckJhY2t3YXJkczpudW1iZXIgPSBCQUJZTE9OLlhib3gzNjBUcmlnZ2VyLkxlZnQ7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZEJhY2t3YXJkczpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5TO1xuICAgICAgICBwdWJsaWMgYXV4S2V5Ym9hcmRCYWNrd2FyZHM6bnVtYmVyID0gQkFCWUxPTi5Vc2VySW5wdXRLZXkuRG93bkFycm93O1xuICAgICAgICBwdWJsaWMgYnV0dG9uSGFuZGJyYWtlOm51bWJlciA9IEJBQllMT04uWGJveDM2MEJ1dHRvbi5YO1xuICAgICAgICBwdWJsaWMga2V5Ym9hcmRIYW5kYnJha2U6bnVtYmVyID0gQkFCWUxPTi5Vc2VySW5wdXRLZXkuU3BhY2VCYXI7XG4gICAgICAgIHB1YmxpYyBidXR0b25Eb251dHM6bnVtYmVyID0gQkFCWUxPTi5YYm94MzYwQnV0dG9uLkI7XG4gICAgICAgIHB1YmxpYyBrZXlib2FyZERvbnV0czpudW1iZXIgPSBCQUJZTE9OLlVzZXJJbnB1dEtleS5TaGlmdDtcbiAgICBcbiAgICAgICAgLy8gRGVmYXVsdCBEcml2ZSBQcm9wZXJ0aWVzXG4gICAgICAgIHB1YmxpYyBlbmFibGVJbnB1dDpib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHB1YmxpYyBhdHRhY2hDYW1lcmE6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgZm9sbG93QmVoaW5kOmJvb2xlYW4gPSBmYWxzZTtcblx0XHRwdWJsaWMgZm9sbG93RGlzdGFuY2U6bnVtYmVyID0gNS4wO1xuICAgICAgICBwdWJsaWMgZm9sbG93SGVpZ2h0Om51bWJlciA9IDEuNjU7XG5cdFx0cHVibGljIGhlaWdodE9mZnNldDpudW1iZXIgPSAwLjA7XG5cdFx0cHVibGljIGhlaWdodERhbXBpbmc6bnVtYmVyID0gMztcbiAgICAgICAgcHVibGljIHJvdGF0aW9uRGFtcGluZzpudW1iZXIgPSAzO1xuICAgICAgICBwdWJsaWMgYXNzaXN0ZWRTdGVlcmluZzpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgcHVibGljIHVzZVRyaWdnZXJWb2x1bWU6Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwdWJsaWMgZG9udXRDYW1lcmFMb2NrOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMC4wLCAwLjUsIDcuNSk7XG4gICAgICAgIHB1YmxpYyB0cmlnZ2VyVm9sdW1lUG9zOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMCwgMCk7XG4gICAgICAgIHB1YmxpYyB0cmlnZ2VyVm9sdW1lU2l6ZTpCQUJZTE9OLlZlY3RvcjMgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDEsIDEsIDEpO1xuXG4gICAgICAgIC8vIEF1dG8gUGlsb3QgUHJvcGVydGllc1xuICAgICAgICBwdWJsaWMgbWluQ2lyY3VpdFNwZWVkOm51bWJlciA9IDgwO1xuICAgICAgICBwdWJsaWMgbWF4Q2lyY3VpdFNwZWVkOm51bWJlciA9IDg1O1xuICAgICAgICBwdWJsaWMgY2hhc2VSYWJiaXRTcGVlZDpudW1iZXIgPSAxO1xuICAgICAgICBwdWJsaWMgd2F5cG9pbnRUaHJlYXNob2xkOm51bWJlciA9IDE7XG4gICAgICAgIHB1YmxpYyB3YW5kZXJpbmdEaXN0YW5jZTpudW1iZXIgPSAxO1xuICAgICAgICBwdWJsaWMgYXZvaWRPdGhlcnNUaW1lcjpudW1iZXIgPSAwLjE7XG4gICAgICAgIHB1YmxpYyBkcml2ZXJMb29rQWhlYWQ6bnVtYmVyID0gMTU7XG4gICAgICAgIHB1YmxpYyBicmFraW5nTXVsdGlwbGllcjpudW1iZXIgPSA2O1xuICAgICAgICBwdWJsaWMgYnJha2luZ1NlbnNpdGl2aXR5Om51bWJlciA9IDE7XG4gICAgICAgIHB1YmxpYyBzdGVlcmluZ1NlbnNpdGl2aXR5Om51bWJlciA9IDE7XG4gICAgICAgIHB1YmxpYyB0aHJvdHRsZVNlbnNpdGl2aXR5Om51bWJlciA9IDE7XG4gICAgICAgIHB1YmxpYyB0aHJvdHRsZVNwZWVkQW5nbGU6bnVtYmVyID0gNTtcbiAgICAgICAgcHVibGljIGJyYWtpbmdTcGVlZEFuZ2xlOm51bWJlciA9IDEwO1xuICAgICAgICBwdWJsaWMgc2tpZGRpbmdTcGVlZEFuZ2xlOm51bWJlciA9IDIwO1xuICAgICAgICBwdWJsaWMgdGhyb3R0bGVTcGVlZExpbWl0Om51bWJlciA9IDU7XG4gICAgICAgIHB1YmxpYyBicmFraW5nU3BlZWRMaW1pdDpudW1iZXIgPSAyNTtcbiAgICAgICAgcHVibGljIHNraWRkaW5nU3BlZWRMaW1pdDpudW1iZXIgPSA1MDtcbiAgICAgICAgcHVibGljIHJlc2V0TW92aW5nVGltZW91dDpudW1iZXIgPSA1O1xuXG4gICAgICAgIC8vIFZlaGljbGUgRHJpdmUgUHJvcGVydGllc1xuICAgICAgICBwcm90ZWN0ZWQgbV9jaGFzZVJhYmJpdE1lc2g6QkFCWUxPTi5NZXNoID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fdHJpZ2dlclZvbHVtZU1lc2g6QkFCWUxPTi5NZXNoID0gbnVsbDtcbiAgICAgICAgcHJvdGVjdGVkIG1fY2FtZXJhVHJhbnNmb3JtOkJBQllMT04uVHJhbnNmb3JtTm9kZSA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX2NpcmN1aXRXYXlwb2ludHM6QkFCWUxPTi5WZWN0b3IzW10gPSBudWxsO1xuICAgICAgICBwcm90ZWN0ZWQgbV9yaWdpZGJvZHlQaHlzaWNzOkJBQllMT04uUmlnaWRib2R5UGh5c2ljcyA9IG51bGw7XG4gICAgICAgIHByb3RlY3RlZCBtX3N0YW5kYXJkQ2FyQ29udHJvbGxlcjpQUk9KRUNULlN0YW5kYXJkQ2FyQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlSW5wdXQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZW5hYmxlSW5wdXRcIiwgdGhpcy5lbmFibGVJbnB1dCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllck51bWJlciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJwbGF5ZXJOdW1iZXJcIiwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hDYW1lcmEgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiYXR0YWNoQ2FtZXJhXCIsIHRoaXMuYXR0YWNoQ2FtZXJhKTtcbiAgICAgICAgICAgIHRoaXMuZm9sbG93QmVoaW5kID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvbGxvd0JlaGluZFwiLCB0aGlzLmZvbGxvd0JlaGluZCk7XG4gICAgICAgICAgICB0aGlzLmZvbGxvd0Rpc3RhbmNlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImZvbGxvd0Rpc3RhbmNlXCIsIHRoaXMuZm9sbG93RGlzdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5mb2xsb3dIZWlnaHQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZm9sbG93SGVpZ2h0XCIsIHRoaXMuZm9sbG93SGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0T2Zmc2V0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImhlaWdodE9mZnNldFwiLCB0aGlzLmhlaWdodE9mZnNldCk7XG4gICAgICAgICAgICB0aGlzLmhlaWdodERhbXBpbmcgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiaGVpZ2h0RGFtcGluZ1wiLCB0aGlzLmhlaWdodERhbXBpbmcpO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRhbXBpbmcgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwicm90YXRpb25EYW1waW5nXCIsIHRoaXMucm90YXRpb25EYW1waW5nKTtcbiAgICAgICAgICAgIHRoaXMuYXNzaXN0ZWRTdGVlcmluZyA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ1c2VBc3Npc3RlZFN0ZWVyaW5nXCIsIHRoaXMuYXNzaXN0ZWRTdGVlcmluZyk7XG4gICAgICAgICAgICB0aGlzLnNob3dSYWJiaXRDaGFzaW5nID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInNob3dSYWJiaXRDaGFzaW5nXCIsIHRoaXMuc2hvd1JhYmJpdENoYXNpbmcpO1xuICAgICAgICAgICAgdGhpcy5zaG93VHJpZ2dlclZvbHVtZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJzaG93VHJpZ2dlclZvbHVtZVwiLCB0aGlzLnNob3dUcmlnZ2VyVm9sdW1lKTtcbiAgICAgICAgICAgIHRoaXMudXNlVHJpZ2dlclZvbHVtZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ1c2VUcmlnZ2VyVm9sdW1lXCIsIHRoaXMudXNlVHJpZ2dlclZvbHVtZSk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJWb2x1bWVQb3MgPSBCQUJZTE9OLlV0aWxpdGllcy5QYXJzZVZlY3RvcjModGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRyaWdnZXJWb2x1bWVQb3NcIiksIHRoaXMudHJpZ2dlclZvbHVtZVBvcyk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJWb2x1bWVTaXplID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VWZWN0b3IzKHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ0cmlnZ2VyVm9sdW1lU2l6ZVwiKSwgdGhpcy50cmlnZ2VyVm9sdW1lU2l6ZSk7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgdGhpcy5kcml2ZXJMb29rQWhlYWQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwiZHJpdmVyTG9va0FoZWFkXCIsIHRoaXMuZHJpdmVyTG9va0FoZWFkKTtcbiAgICAgICAgICAgIHRoaXMuY2hhc2VSYWJiaXRTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJjaGFzZVJhYmJpdFNwZWVkXCIsIHRoaXMuY2hhc2VSYWJiaXRTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLndheXBvaW50VGhyZWFzaG9sZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ3YXlwb2ludFRocmVhc2hvbGRcIiwgdGhpcy53YXlwb2ludFRocmVhc2hvbGQpO1xuICAgICAgICAgICAgdGhpcy5icmFraW5nTXVsdGlwbGllciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJicmFraW5nTXVsdGlwbGllclwiLCB0aGlzLmJyYWtpbmdNdWx0aXBsaWVyKTtcbiAgICAgICAgICAgIHRoaXMuYnJha2luZ1NlbnNpdGl2aXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJyYWtpbmdTZW5zaXRpdml0eVwiLCB0aGlzLmJyYWtpbmdTZW5zaXRpdml0eSk7XG4gICAgICAgICAgICB0aGlzLnN0ZWVyaW5nU2Vuc2l0aXZpdHkgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic3RlZXJpbmdTZW5zaXRpdml0eVwiLCB0aGlzLnN0ZWVyaW5nU2Vuc2l0aXZpdHkpO1xuICAgICAgICAgICAgdGhpcy50aHJvdHRsZVNlbnNpdGl2aXR5ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRocm90dGxlU2Vuc2l0aXZpdHlcIiwgdGhpcy50aHJvdHRsZVNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgIHRoaXMudGhyb3R0bGVTcGVlZEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRocm90dGxlU3BlZWRBbmdsZVwiLCB0aGlzLnRocm90dGxlU3BlZWRBbmdsZSk7XG4gICAgICAgICAgICB0aGlzLmJyYWtpbmdTcGVlZEFuZ2xlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJyYWtpbmdTcGVlZEFuZ2xlXCIsIHRoaXMuYnJha2luZ1NwZWVkQW5nbGUpO1xuICAgICAgICAgICAgdGhpcy5za2lkZGluZ1NwZWVkQW5nbGUgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic2tpZGRpbmdTcGVlZEFuZ2xlXCIsIHRoaXMuc2tpZGRpbmdTcGVlZEFuZ2xlKTtcbiAgICAgICAgICAgIHRoaXMudGhyb3R0bGVTcGVlZExpbWl0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRocm90dGxlU3BlZWRMaW1pdFwiLCB0aGlzLnRocm90dGxlU3BlZWRMaW1pdCk7XG4gICAgICAgICAgICB0aGlzLmJyYWtpbmdTcGVlZExpbWl0ID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcImJyYWtpbmdTcGVlZExpbWl0XCIsIHRoaXMuYnJha2luZ1NwZWVkTGltaXQpO1xuICAgICAgICAgICAgdGhpcy5za2lkZGluZ1NwZWVkTGltaXQgPSB0aGlzLmdldEVkaXRvclByb3BlcnR5KFwic2tpZGRpbmdTcGVlZExpbWl0XCIsIHRoaXMuc2tpZGRpbmdTcGVlZExpbWl0KTtcbiAgICAgICAgICAgIHRoaXMubWluQ2lyY3VpdFNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcIm1pbkNpcmN1aXRTcGVlZFwiLCB0aGlzLm1pbkNpcmN1aXRTcGVlZCk7XG4gICAgICAgICAgICB0aGlzLm1heENpcmN1aXRTcGVlZCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJtYXhDaXJjdWl0U3BlZWRcIiwgdGhpcy5tYXhDaXJjdWl0U3BlZWQpO1xuICAgICAgICAgICAgdGhpcy53YW5kZXJpbmdEaXN0YW5jZSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJ3YW5kZXJpbmdEaXN0YW5jZVwiLCB0aGlzLndhbmRlcmluZ0Rpc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMuYXZvaWRPdGhlcnNUaW1lciA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJhdm9pZE90aGVyc1RpbWVyXCIsIHRoaXMuYXZvaWRPdGhlcnNUaW1lcik7XG4gICAgICAgICAgICB0aGlzLnJlc2V0TW92aW5nVGltZW91dCA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJyZXNldE1vdmluZ1RpbWVvdXRcIiwgdGhpcy5yZXNldE1vdmluZ1RpbWVvdXQpO1xuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmICh0aGlzLnRocm90dGxlU2Vuc2l0aXZpdHkgPD0gMCkgdGhpcy50aHJvdHRsZVNlbnNpdGl2aXR5ID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0ZWVyaW5nU2Vuc2l0aXZpdHkgPD0gMCkgdGhpcy5zdGVlcmluZ1NlbnNpdGl2aXR5ID0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmJyYWtpbmdTZW5zaXRpdml0eSA8PSAwKSB0aGlzLmJyYWtpbmdTZW5zaXRpdml0eSA9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5icmFraW5nTXVsdGlwbGllciA8PSAwKSB0aGlzLmJyYWtpbmdNdWx0aXBsaWVyID0gNjtcbiAgICAgICAgICAgIGlmICh0aGlzLndhbmRlcmluZ0Rpc3RhbmNlIDw9IDApIHRoaXMud2FuZGVyaW5nRGlzdGFuY2UgPSAwLjU7XG4gICAgICAgICAgICBpZiAodGhpcy5hdm9pZE90aGVyc1RpbWVyIDw9IDApIHRoaXMuYnJha2luZ011bHRpcGxpZXIgPSAwLjE7XG4gICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgY29uc3QgZG9udXRDYW1lcmFMb2NrOmFueSA9IHRoaXMuZ2V0RWRpdG9yUHJvcGVydHkoXCJkb251dENhbWVyYUxvY2tcIik7XG4gICAgICAgICAgICBpZiAoZG9udXRDYW1lcmFMb2NrICE9IG51bGwpIHRoaXMuZG9udXRDYW1lcmFMb2NrID0gQkFCWUxPTi5VdGlsaXRpZXMuUGFyc2VWZWN0b3IzKGRvbnV0Q2FtZXJhTG9jayk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRvbnV0IENhbWVyYSBMb2NrOiBcIiArIHRoaXMuZG9udXRDYW1lcmFMb2NrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpOnZvaWQgeyB0aGlzLmluaXRWZWhpY2xlQ29udHJvbGxlcigpOyB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGUoKSA6dm9pZCB7ICB0aGlzLnVwZGF0ZVZlaGljbGVDb250cm9sbGVyKCk7IH1cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7IHRoaXMuZGVzdHJveVZlaGljbGVDb250cm9sbGVyKCk7IH1cblxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAvLyBQcm90ZWN0ZWQgQ2hhcmFjdGVyIE1vdmVtZW50IFN0YXRlIEZ1bmN0aW9ucyAvL1xuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0VmVoaWNsZUNvbnRyb2xsZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBHZXQgUmlnaWRib2R5IFBoeXNpY3NcbiAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzID0gdGhpcy5nZXRDb21wb25lbnQoXCJCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3NcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5tX3JpZ2lkYm9keVBoeXNpY3MgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLnJlZ2lzdGVyT25Db2xsaXNpb25FbnRlcigobWVzaCk9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZzpzdHJpbmcgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRUcmFuc2Zvcm1UYWcobWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IFwiVmVoaWNsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBIYW5kbGUgQW55IFJpZ2lkIEJvZHkgQ29udGFjdCBFbnRlciBFdmVudHMgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLnRyYW5zZm9ybS5uYW1lLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBcIiBDT0xMSVNJT04gRU5URVI6IFwiICsgbWVzaC5uYW1lICsgXCIgLS0tPiBUQUc6IFwiICsgdGFnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLnJlZ2lzdGVyT25Db2xsaXNpb25TdGF5KChtZXNoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnOnN0cmluZyA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFRyYW5zZm9ybVRhZyhtZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWcgPT09IFwiVmVoaWNsZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogSGFuZGxlIEFueSBSaWdpZCBCb2R5IENvbnRhY3QgU3RheSBFdmVudHMgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRyYW5zZm9ybS5uYW1lLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBcIiBDT0xMSVNJT04gU1RBWTogXCIgKyBtZXNoLm5hbWUgKyBcIiAtLS0+IFRBRzogXCIgKyB0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBBdm9pZGFuY2UgSW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyVGFyZ2V0UG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gQkFCWUxPTi5VdGlsaXRpZXMuSW52ZXJzZVRyYW5zZm9ybVBvaW50KHRoaXMudHJhbnNmb3JtLCBtZXNoLmdldEFic29sdXRlUG9zaXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3RoZXJUYXJnZXRBbmdsZTpudW1iZXIgPSBNYXRoLmF0YW4yKG90aGVyVGFyZ2V0UG9zaXRpb24ueCwgb3RoZXJUYXJnZXRQb3NpdGlvbi56KSAqIEJBQllMT04uU3lzdGVtLlJhZDJEZWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdm9pZGFuY2VQYXRoID0gKHRoaXMud2FuZGVyaW5nRGlzdGFuY2UgKiAtTWF0aC5zaWduKG90aGVyVGFyZ2V0QW5nbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF2b2lkYW5jZVRpbWUgPSAodGhpcy5nZXRHYW1lVGltZSgpICsgdGhpcy5hdm9pZE90aGVyc1RpbWVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tX3JpZ2lkYm9keVBoeXNpY3MucmVnaXN0ZXJPbkNvbGxpc2lvbkV4aXQoKG1lc2gpPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gXCJWZWhpY2xlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBIYW5kbGUgQW55IFJpZ2lkIEJvZHkgQ29udGFjdCBFeGl0IEV2ZW50cyAtID8/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLnRyYW5zZm9ybS5uYW1lLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBcIiBDT0xMSVNJT04gRVhJVDogXCIgKyBtZXNoLm5hbWUgKyBcIiAtLS0+IFRBRzogXCIgKyB0YWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEJBQllMT04uVG9vbHMuV2FybihcIk51bGwgcmlnaWRib2R5IHBoeXNpY3MgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR2V0IFN0YW5kYXJkIENhciBDb250cm9sbGVyXG4gICAgICAgICAgICB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyID0gdGhpcy5nZXRDb21wb25lbnQoXCJQUk9KRUNULlN0YW5kYXJkQ2FyQ29udHJvbGxlclwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyLnBsYXlWZWhpY2xlU291bmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyLm9uVXBkYXRlVmVoaWNsZUluZm9ybWF0aW9uID0gKHNraWRfRkw6bnVtYmVyLCBza2lkX0ZSOm51bWJlciwgc2tpZF9STDpudW1iZXIsIHNraWRfUlI6bnVtYmVyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogU3VwcG9ydCBEb251dCBDYW1lcmEgTW9kZVxuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiTnVsbCBzdGFuZGFyZCBjYXIgY29udHJvbGxlciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRPRE86IEdldCBQbGF5ZXIgQ2FtZXJhIFRyYW5zZm9ybVxuICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNoQ2FtZXJhID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFRyYW5zZm9ybU5vZGUodGhpcy5zY2VuZSwgXCJNYWluIENhbWVyYVwiKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2NhbWVyYVRyYW5zZm9ybSAhPSBudWxsKSBCQUJZTE9OLlV0aWxpdGllcy5WYWxpZGF0ZVRyYW5zZm9ybVF1YXRlcm5pb24odGhpcy5tX2NhbWVyYVRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCBUZXN0IENpcmN1aXQgV2F5cG9pbnRzXG4gICAgICAgICAgICBjb25zdCB3YXlwb2ludHNUcmFuc2Zvcm06QkFCWUxPTi5UcmFuc2Zvcm1Ob2RlID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtTm9kZSh0aGlzLnNjZW5lLCBcIldheXBvaW50c1wiKTtcbiAgICAgICAgICAgIGlmICh3YXlwb2ludHNUcmFuc2Zvcm0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdheXBvaW50TWFuYWdlcjpQUk9KRUNULldheXBvaW50TWFuYWdlciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkZpbmRTY3JpcHRDb21wb25lbnQod2F5cG9pbnRzVHJhbnNmb3JtLCBcIlBST0pFQ1QuV2F5cG9pbnRNYW5hZ2VyXCIpO1xuICAgICAgICAgICAgICAgIGlmICh3YXlwb2ludE1hbmFnZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndheXBvaW50SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNpcmN1aXRTcGVlZExpbWl0ID0gdGhpcy5tYXhDaXJjdWl0U3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JhYmJpdFRyYWNrZXIgPSB3YXlwb2ludE1hbmFnZXIuZHJhd1RyYWNlcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYWJiaXRUcmFja2VyQ29sb3IgPSB3YXlwb2ludE1hbmFnZXIudHJhY2VDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2NpcmN1aXRXYXlwb2ludHMgPSB3YXlwb2ludE1hbmFnZXIuZ2V0U3BsaW5lQ3VydmVQb3NpdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN5bmMgVmVoaWNsZSBDaGFzZSBDYW1lcmEgUG9zaXRpb25cbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmVoaWNsZUZvbGxvd0NhbWVyYSh0aGlzLmZvbGxvd0JlaGluZCwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBjb25zdCBhYnN0cmFjdE1lc2g6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSB0aGlzLmdldEFic3RyYWN0TWVzaCgpO1xuICAgICAgICAgICAgLy8gaWYgKGFic3RyYWN0TWVzaCAhPSBudWxsKSBhYnN0cmFjdE1lc2gucGh5c2ljc0ltcG9zdG9yLnJlZ2lzdGVyQWZ0ZXJQaHlzaWNzU3RlcCgoaW1wb3N0b3I6QkFCWUxPTi5QaHlzaWNzSW1wb3N0b3IpPT57IHRoaXMudXBkYXRlVmVoaWNsZUZvbGxvd0NhbWVyYSh0aGlzLmZvbGxvd0JlaGluZCwgdHJ1ZSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGVWZWhpY2xlQ29udHJvbGxlcigpOiB2b2lkIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZVRyaWdnZXJWb2x1bWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX3RyaWdnZXJWb2x1bWVNZXNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX3RyaWdnZXJWb2x1bWVNZXNoID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVCb3godGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiLlRyaWdnZXJWb2x1bWVyXCIsIHsgIHNpemU6dGhpcy50cmlnZ2VyVm9sdW1lU2l6ZS56LCB3aWR0aDp0aGlzLnRyaWdnZXJWb2x1bWVTaXplLngsIGhlaWdodDp0aGlzLnRyaWdnZXJWb2x1bWVTaXplLnl9LCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX3RyaWdnZXJWb2x1bWVNZXNoLnBvc2l0aW9uLmNvcHlGcm9tKHRoaXMudHJpZ2dlclZvbHVtZVBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5yb3RhdGlvblF1YXRlcm5pb24gPSAodGhpcy50cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uICE9IG51bGwpID8gdGhpcy50cmFuc2Zvcm0ucm90YXRpb25RdWF0ZXJuaW9uLmNsb25lKCkgOiBuZXcgQkFCWUxPTi5RdWF0ZXJuaW9uKDAsMCwwLDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2guY2hlY2tDb2xsaXNpb25zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5yZWNlaXZlU2hhZG93cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2gudmlzaWJpbGl0eSA9IDAuMjU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dXAgVHJpZ2dlciBWb2x1bWUgUGh5c2ljc1xuICAgICAgICAgICAgICAgICAgICAvLyAuLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNzOm51bWJlciA9IDAuMCwgZHJhZzpudW1iZXIgPSAwLjAsIGFuZ3VsYXI6bnVtYmVyID0gMC4wNSwgZnJpY3Rpb246bnVtYmVyID0gMC42LCByZXN0aXR1dGlvbjpudW1iZXIgPSAwLjAsIGtpbmVtYXRpYzpib29sZWFuID0gdHJ1ZSwgdHJpZ2dlcjpib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVmFsaWRhdGVUcmFuc2Zvcm1NZXRhZGF0YSh0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2gpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2gubWV0YWRhdGEudW5pdHkucGh5c2ljcyA9IEJBQllMT04uUmlnaWRib2R5UGh5c2ljcy5DcmVhdGVQaHlzaWNzTWV0YWRhdGEobWFzcywgZHJhZywgYW5ndWxhciwgbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCkpOyAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5tZXRhZGF0YS51bml0eS5jb2xsaXNpb24gPSBCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MuQ3JlYXRlQ29sbGlzaW9uTWV0YWRhdGEoXCJCb3hDb2xsaWRlclwiLCB0cmlnZ2VyLCBmYWxzZSwgcmVzdGl0dXRpb24sIGZyaWN0aW9uLCBmcmljdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2lkYm9keVByb3BzOmFueSA9IEJBQllMT04uUmlnaWRib2R5UGh5c2ljcy5DcmVhdGVQaHlzaWNzUHJvcGVydGllcyhtYXNzLCBkcmFnLCBhbmd1bGFyLCB0cnVlLCBraW5lbWF0aWMpO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MuU2V0dXBQaHlzaWNzQ29tcG9uZW50KHRoaXMuc2NlbmUsIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2lkYm9keTpCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MgPSBuZXcgQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzKHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaCwgdGhpcy5zY2VuZSwgcmlnaWRib2R5UHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5SZWdpc3RlclNjcmlwdENvbXBvbmVudChyaWdpZGJvZHksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByaWdpZGJvZHkucmVnaXN0ZXJPbkNvbGxpc2lvbkVudGVyKChtZXNoKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVRyaWdnZXJWb2x1bWUgPT09IHRydWUgJiYgbWVzaC5uYW1lICE9PSB0aGlzLnRyYW5zZm9ybS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogSGFuZGxlIEFueSBUcmlnZ2VyIFZvbHVtZSBDb250YWN0IEVudGVyIEV2ZW50cyAtID8/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2Fybih0aGlzLnRyYW5zZm9ybS5uYW1lLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBcIiBUUklHR0VSIFZPTCBDT0xMSVNJT04gRU5URVI6IFwiICsgbWVzaC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2lkYm9keS5yZWdpc3Rlck9uQ29sbGlzaW9uU3RheSgobWVzaCk9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VUcmlnZ2VyVm9sdW1lID09PSB0cnVlICYmIG1lc2gubmFtZSAhPT0gdGhpcy50cmFuc2Zvcm0ubmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEhhbmRsZSBBbnkgVHJpZ2dlciBWb2x1bWUgQ29udGFjdCBTdGF5IEV2ZW50cyAtID8/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLm5hbWUudG9Mb2NhbGVVcHBlckNhc2UoKSArIFwiIFRSSUdHRVIgVk9MIENPTExJU0lPTiBTVEFZOiBcIiArIG1lc2gubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByaWdpZGJvZHkucmVnaXN0ZXJPbkNvbGxpc2lvbkV4aXQoKG1lc2gpPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlVHJpZ2dlclZvbHVtZSA9PT0gdHJ1ZSAmJiBtZXNoLm5hbWUgIT09IHRoaXMudHJhbnNmb3JtLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBIYW5kbGUgQW55IFRyaWdnZXIgVm9sdW1lIENvbnRhY3QgRXhpdCBFdmVudHMgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4odGhpcy50cmFuc2Zvcm0ubmFtZS50b0xvY2FsZVVwcGVyQ2FzZSgpICsgXCIgVFJJR0dFUiBWT0wgQ09MTElTSU9OIEVYSVQ6IFwiICsgbWVzaC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFRyaWdnZXIgVm9sdW1lIFBvc2l0aW9uIEFuZCBSb3RhdGlvblxuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2guaXNWaXNpYmxlID09PSB0cnVlICYmIHRoaXMuc2hvd1RyaWdnZXJWb2x1bWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2guaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5pc1Zpc2libGUgPT09IGZhbHNlICYmIHRoaXMuc2hvd1RyaWdnZXJWb2x1bWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5wb3NpdGlvbi5jb3B5RnJvbSh0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5wb3NpdGlvbi5hZGRJblBsYWNlKHRoaXMudHJpZ2dlclZvbHVtZVBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5yb3RhdGlvblF1YXRlcm5pb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaC5yb3RhdGlvblF1YXRlcm5pb24gPSB0aGlzLnRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24uY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX3RyaWdnZXJWb2x1bWVNZXNoLnJvdGF0aW9uUXVhdGVybmlvbi5jb3B5RnJvbSh0aGlzLnRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBTdGFuZGFyZCBDYXIgQ29udHJvbGxlciBEcml2ZSBJbnB1dFxuICAgICAgICAgICAgLy8gLi5cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUlucHV0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyTnVtYmVyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQXV0b1BpbG90RHJpdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1hbnVhbElucHV0RHJpdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZlaGljbGVGb2xsb3dDYW1lcmEodGhpcy5mb2xsb3dCZWhpbmQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGVNYW51YWxJbnB1dERyaXZlKCk6dm9pZCB7XG4gICAgICAgICAgICBpZiAodGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJEZWx0YVggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLkhvcml6b250YWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllckRlbHRhWSA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuVmVydGljYWwsIHRoaXMucGxheWVyTnVtYmVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllck1vdXNlWCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldFVzZXJJbnB1dChCQUJZTE9OLlVzZXJJbnB1dEF4aXMuTW91c2VYLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJNb3VzZVkgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRVc2VySW5wdXQoQkFCWUxPTi5Vc2VySW5wdXRBeGlzLk1vdXNlWSwgdGhpcy5wbGF5ZXJOdW1iZXIpO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIERlYWQgU3RpY2tcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJEZWx0YVgpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyRGVsdGFYID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJEZWx0YVkpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyRGVsdGFZID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJNb3VzZVgpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyTW91c2VYID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5wbGF5ZXJNb3VzZVkpIDw9IEJBQllMT04uVXNlcklucHV0T3B0aW9ucy5HYW1lcGFkRGVhZFN0aWNrVmFsdWUpIHRoaXMucGxheWVyTW91c2VZID0gMDtcbiAgICAgICAgICAgICAgICAvLyBHZXQgQnV0dG9uIFRyaWdnZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgYXV4Rm9yd2FyZEtleWJvYXJkOmJvb2xlYW4gPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRLZXlib2FyZElucHV0KHRoaXMuYXV4S2V5Ym9hcmRGb3Jhd3JkKTsgLy8gUGxheWVyIE9uZSBPbmx5XG4gICAgICAgICAgICAgICAgY29uc3QgZm9yd2FyZEtleWJvYXJkOmJvb2xlYW4gPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRLZXlib2FyZElucHV0KHRoaXMua2V5Ym9hcmRGb3Jhd3JkKTsgLy8gUGxheWVyIE9uZSBPbmx5XG4gICAgICAgICAgICAgICAgY29uc3QgZm9yd2FyZFRyaWdnZXI6bnVtYmVyID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0R2FtZXBhZFRyaWdnZXJJbnB1dCh0aGlzLnRyaWdnZXJGb3J3YXJkLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV4QmFja3dhcmRLZXlib2FyZDpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0S2V5Ym9hcmRJbnB1dCh0aGlzLmF1eEtleWJvYXJkQmFja3dhcmRzKTsgLy8gUGxheWVyIE9uZSBPbmx5XG4gICAgICAgICAgICAgICAgY29uc3QgYmFja3dhcmRLZXlib2FyZDpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0S2V5Ym9hcmRJbnB1dCh0aGlzLmtleWJvYXJkQmFja3dhcmRzKTsgLy8gUGxheWVyIE9uZSBPbmx5XG4gICAgICAgICAgICAgICAgY29uc3QgYmFja3dhcmRUcmlnZ2VyOm51bWJlciA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEdhbWVwYWRUcmlnZ2VySW5wdXQodGhpcy50cmlnZ2VyQmFja3dhcmRzLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGJyYWtlS2V5Ym9hcmQ6Ym9vbGVhbiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEtleWJvYXJkSW5wdXQodGhpcy5rZXlib2FyZEhhbmRicmFrZSk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRicmFrZUJ1dHRvbjpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0R2FtZXBhZEJ1dHRvbklucHV0KHRoaXMuYnV0dG9uSGFuZGJyYWtlLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9udXRzS2V5Ym9hcmQ6Ym9vbGVhbiA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldEtleWJvYXJkSW5wdXQodGhpcy5rZXlib2FyZERvbnV0cyk7IC8vIFBsYXllciBPbmUgT25seVxuICAgICAgICAgICAgICAgIGNvbnN0IGRvbnV0c0J1dHRvbjpib29sZWFuID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0R2FtZXBhZEJ1dHRvbklucHV0KHRoaXMuYnV0dG9uRG9udXRzLCB0aGlzLnBsYXllck51bWJlcik7XG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgUGxheWVyIE1vdmVtZW50XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllck1vdmVtZW50Om51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllclN0ZWVyaW5nOm51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllckhhbmRicmFrZTpib29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllckRvbnV0czpib29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbGV0IHBsYXllckFzc2lzdGVkOmJvb2xlYW4gPSB0aGlzLmFzc2lzdGVkU3RlZXJpbmc7XG4gICAgICAgICAgICAgICAgLy8gUHJpbWFyeSBBY2NlbGVyYXR0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGZvcndhcmRUcmlnZ2VyID4gMC4yKSBwbGF5ZXJNb3ZlbWVudCA9IGZvcndhcmRUcmlnZ2VyO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGxheWVyTnVtYmVyID09PSBCQUJZTE9OLlBsYXllck51bWJlci5PbmUgJiYgKGZvcndhcmRLZXlib2FyZCA9PT0gdHJ1ZSB8fCBhdXhGb3J3YXJkS2V5Ym9hcmQgPT09IHRydWUpKSBwbGF5ZXJNb3ZlbWVudCA9IDE7XG4gICAgICAgICAgICAgICAgLy8gQnJha2luZyBUYWtlcyBQcmVjZWRlbmNlXG4gICAgICAgICAgICAgICAgaWYgKGJhY2t3YXJkVHJpZ2dlciA+IDAuMikgcGxheWVyTW92ZW1lbnQgPSAtYmFja3dhcmRUcmlnZ2VyO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGxheWVyTnVtYmVyID09PSBCQUJZTE9OLlBsYXllck51bWJlci5PbmUgJiYgKGJhY2t3YXJkS2V5Ym9hcmQgPT09IHRydWUgfHwgYXV4QmFja3dhcmRLZXlib2FyZCA9PT0gdHJ1ZSkpIHBsYXllck1vdmVtZW50ID0gLTE7XG4gICAgICAgICAgICAgICAgLy8gSW5jbHVkZXMgQUQgQW5kIEFycm93IEtleXNcbiAgICAgICAgICAgICAgICBwbGF5ZXJTdGVlcmluZyA9IHRoaXMucGxheWVyRGVsdGFYOyBcbiAgICAgICAgICAgICAgICAvLyBQdWxsIEhhcmQgSGFuZCBCcmFrZSBMZXZlclxuICAgICAgICAgICAgICAgIHBsYXllckhhbmRicmFrZSA9IChoYW5kYnJha2VLZXlib2FyZCA9PT0gdHJ1ZSB8fCBoYW5kYnJha2VCdXR0b24gPT09IHRydWUpO1xuICAgICAgICAgICAgICAgIC8vIFB1bGwgSGFyZCBIYW5kIERvbnV0IExldmVyXG4gICAgICAgICAgICAgICAgcGxheWVyRG9udXRzID0gKGRvbnV0c0tleWJvYXJkID09PSB0cnVlIHx8IGRvbnV0c0J1dHRvbiA9PT0gdHJ1ZSk7XG4gICAgICAgICAgICAgICAgLy8gRHJpdmUgU3RhbmRhcmQgQ2FyIENvbnRyb2xsZXJcbiAgICAgICAgICAgICAgICB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyLnRocm90dGxlRW5naW5lU3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMubV9zdGFuZGFyZENhckNvbnRyb2xsZXIuZHJpdmUocGxheWVyTW92ZW1lbnQsIHBsYXllclN0ZWVyaW5nLCBwbGF5ZXJIYW5kYnJha2UsIHBsYXllckRvbnV0cywgcGxheWVyQXNzaXN0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBsYXN0U3RlZXJpbmdBbmdsZTpudW1iZXIgPSAwO1xuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlQXV0b1BpbG90RHJpdmUoKTp2b2lkIHtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVUaW1lOm51bWJlciA9IHRoaXMuZ2V0R2FtZVRpbWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1fY2hhc2VSYWJiaXRNZXNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVTcGhlcmUodGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiLlJhYmJpdFwiLCB7IHNlZ21lbnRzOiAyNCwgZGlhbWV0ZXI6IDIgfSwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tX2NoYXNlUmFiYml0TWVzaC5jaGVja0NvbGxpc2lvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLnJlY2VpdmVTaGFkb3dzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5tX2NoYXNlUmFiYml0TWVzaC52aXNpYmlsaXR5ID0gMC41O1xuICAgICAgICAgICAgICAgIHRoaXMubV9jaGFzZVJhYmJpdE1lc2guaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldENoYXNlUmFiYml0TWVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubV9jaGFzZVJhYmJpdE1lc2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLmlzVmlzaWJsZSA9PT0gdHJ1ZSAmJiB0aGlzLnNob3dSYWJiaXRDaGFzaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX2NoYXNlUmFiYml0TWVzaC5pc1Zpc2libGUgPT09IGZhbHNlICYmIHRoaXMuc2hvd1JhYmJpdENoYXNpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2NoYXNlUmFiYml0TWVzaC5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlci5nZXRBYnNvbHV0ZVNwZWVkKCkgPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb3ZlbWVudFRpbWUgPSBnYW1lVGltZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFRPRE86IENhckFJQ29udHJvbC5jcyAoU3RhbmRhcmQgQXNzZXRzKVxuICAgICAgICAgICAgLy8gaWYgYXJlIHdlIGN1cnJlbnRseSB0YWtpbmcgZXZhc2l2ZSBhY3Rpb24gdG8gcHJldmVudCBiZWluZyBzdHVjayBhZ2FpbnN0IGFub3RoZXIgY2FyOlxuICAgICAgICAgICAgaWYgKFRpbWUudGltZSA8IG1fQXZvaWRPdGhlckNhclRpbWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gc2xvdyBkb3duIGlmIG5lY2Vzc2FyeSAoaWYgd2Ugd2VyZSBiZWhpbmQgdGhlIG90aGVyIGNhciB3aGVuIGNvbGxpc2lvbiBvY2N1cmVkKVxuICAgICAgICAgICAgICAgIGRlc2lyZWRTcGVlZCAqPSBtX0F2b2lkT3RoZXJDYXJTbG93ZG93bjtcblxuICAgICAgICAgICAgICAgIC8vIGFuZCB2ZWVyIHRvd2FyZHMgdGhlIHNpZGUgb2Ygb3VyIHBhdGgtdG8tdGFyZ2V0IHRoYXQgaXMgYXdheSBmcm9tIHRoZSBvdGhlciBjYXJcbiAgICAgICAgICAgICAgICBvZmZzZXRUYXJnZXRQb3MgKz0gbV9UYXJnZXQucmlnaHQqbV9Bdm9pZFBhdGhPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbmVlZCBmb3IgZXZhc2l2ZSBhY3Rpb24sIHdlIGNhbiBqdXN0IHdhbmRlciBhY3Jvc3MgdGhlIHBhdGgtdG8tdGFyZ2V0IGluIGEgcmFuZG9tIHdheSxcbiAgICAgICAgICAgICAgICAvLyB3aGljaCBjYW4gaGVscCBwcmV2ZW50IEFJIGZyb20gc2VlbWluZyB0b28gdW5pZm9ybSBhbmQgcm9ib3RpYyBpbiB0aGVpciBkcml2aW5nXG4gICAgICAgICAgICAgICAgb2Zmc2V0VGFyZ2V0UG9zICs9IG1fVGFyZ2V0LnJpZ2h0KlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKE1hdGhmLlBlcmxpbk5vaXNlKFRpbWUudGltZSptX0xhdGVyYWxXYW5kZXJTcGVlZCwgbV9SYW5kb21QZXJsaW4pKjIgLSAxKSpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1fTGF0ZXJhbFdhbmRlckRpc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLy8gVE9ETzogVXBkYXRlIFNwZWVkIFRocm90dGxlIE9uIE5hdmlnYXRpb24gUG9pbnQgQ2hhbmdlIEFuZCBOT1QgT24gSW5kaXZpZHVhbCBTcGxpbmUgV2F5cG9pbnQgQ2hhbmdlIC0gPz8/XG4gICAgICAgICAgICAvLyB0aGlzLmNpcmN1aXRTcGVlZExpbWl0ID0gQkFCWUxPTi5TY2FsYXIuTGVycCh0aGlzLm1pbkNpcmN1aXRTcGVlZCwgdGhpcy5tYXhDaXJjdWl0U3BlZWQsIE1hdGgucmFuZG9tKCkpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlciAhPSBudWxsICYmIHRoaXMubV9jaXJjdWl0V2F5cG9pbnRzICE9IG51bGwgJiYgdGhpcy5tX2NoYXNlUmFiYml0TWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2F5cG9pbnRQb3NpdGlvbjpCQUJZTE9OLlZlY3RvcjMgPSB0aGlzLm1fY2lyY3VpdFdheXBvaW50c1t0aGlzLndheXBvaW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybVBvc2l0aW9uOkJBQllMT04uVmVjdG9yMyA9IHRoaXMudHJhbnNmb3JtLmdldEFic29sdXRlUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAvLyBVUERBVEUgQ0hBU0UgUkFCQklUIC0gV2FsayBTcGxpbmUgV2F5cG9pbnQgUG9zaXRpb25zXG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgY29uc3QgcmFiYml0UG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gdGhpcy5tX2NoYXNlUmFiYml0TWVzaC5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFiYml0RGlzdGFuY2U6bnVtYmVyID0gQkFCWUxPTi5WZWN0b3IzLkRpc3RhbmNlKHRyYW5zZm9ybVBvc2l0aW9uLCByYWJiaXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHJhYmJpdERpc3RhbmNlIDw9IHRoaXMuZHJpdmVyTG9va0FoZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9jaGFzZVJhYmJpdE1lc2gubG9va0F0KHdheXBvaW50UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLnRyYW5zbGF0ZShCQUJZTE9OLkF4aXMuWiwgdGhpcy5jaGFzZVJhYmJpdFNwZWVkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBNT1ZFIEZPUiBURVNUSU5HXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhd1JhYmJpdFRyYWNrZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2tWZWhpY2xlUG9zaXRpb246QkFCWUxPTi5WZWN0b3IzID0gbmV3IEJBQllMT04uVmVjdG9yMyh0cmFuc2Zvcm1Qb3NpdGlvbi54LCAodHJhbnNmb3JtUG9zaXRpb24ueSArIDAuNSksIHRyYW5zZm9ybVBvc2l0aW9uLnopO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja1JhYmJpdFBvc2l0aW9uOkJBQllMT04uVmVjdG9yMyA9IG5ldyBCQUJZTE9OLlZlY3RvcjMocmFiYml0UG9zaXRpb24ueCwgKHJhYmJpdFBvc2l0aW9uLnkgKyAwLjI1KSwgcmFiYml0UG9zaXRpb24ueik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG15cG9pbnRzOkJBQllMT04uVmVjdG9yM1tdID0gW107XG4gICAgICAgICAgICAgICAgICAgIG15cG9pbnRzLnB1c2godHJhY2tWZWhpY2xlUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBteXBvaW50cy5wdXNoKHRyYWNrUmFiYml0UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yYWJiaXRUcmFja2VyTGluZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhYmJpdFRyYWNrZXJMaW5lID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVMaW5lcygodGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiLlRyYWNraW5nTGluZVwiKSwgeyBwb2ludHM6IG15cG9pbnRzLCB1cGRhdGFibGU6dHJ1ZSwgfSwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhYmJpdFRyYWNrZXJMaW5lLmNvbG9yID0gdGhpcy5yYWJiaXRUcmFja2VyQ29sb3I7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhYmJpdFRyYWNrZXJMaW5lID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVMaW5lcygodGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiLlRyYWNraW5nTGluZVwiKSwgeyBwb2ludHM6IG15cG9pbnRzLCBpbnN0YW5jZTogdGhpcy5yYWJiaXRUcmFja2VyTGluZSB9LCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiVHJhY2tpbmcgUmFiYml0OiBcIiArIHRyYWNrVmVoaWNsZVBvc2l0aW9uICsgXCIgLS0tPiBcIiArIHRyYWNrUmFiYml0UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgd2F5cG9pbnREaXN0YW5jZTpudW1iZXIgPSBCQUJZTE9OLlZlY3RvcjMuRGlzdGFuY2UocmFiYml0UG9zaXRpb24sIHdheXBvaW50UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGlmICh3YXlwb2ludERpc3RhbmNlIDw9IHRoaXMud2F5cG9pbnRUaHJlYXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2F5cG9pbnRJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53YXlwb2ludEluZGV4ID49IHRoaXMubV9jaXJjdWl0V2F5cG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXlwb2ludEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5JbnZlcnNlVHJhbnNmb3JtUG9pbnRUb1JlZih0aGlzLnRyYW5zZm9ybSwgcmFiYml0UG9zaXRpb24sIHRoaXMubG9jYWxUYXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgdGhpcy5hdm9pZGFuY2VUaW1lID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmF2b2lkYW5jZVBhdGggPSAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8qIFdPUkstSU4tUFJPR1JFU1NcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdm9pZGFuY2VUaW1lID4gMCAmJiB0aGlzLmF2b2lkYW5jZVBhdGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZvaWRDaGVja1RpbWU6bnVtYmVyID0gKGdhbWVUaW1lIC0gdGhpcy5hdm9pZGFuY2VUaW1lKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXZvaWRDaGVja1RpbWUgPD0gdGhpcy5hdm9pZE90aGVyc1RpbWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5JbnZlcnNlVHJhbnNmb3JtUG9pbnRUb1JlZih0aGlzLnRyYW5zZm9ybSwgcmFiYml0UG9zaXRpb24sIHRoaXMubG9jYWxUYXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMubV9jaGFzZVJhYmJpdE1lc2gucmlnaHQuc2NhbGVUb1JlZih0aGlzLmF2b2lkYW5jZVBhdGgsIHRoaXMubG9jYWxUYXJnZXRBdm9pZGFuY2UpOyAvLyBCVUc6IFZFQ1RPUjMgU0NBTEUgVE8gUkVGIERPRVMgTk9UIFdPUksgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUYXJnZXRBdm9pZGFuY2UgPSB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLnJpZ2h0LnNjYWxlKHRoaXMuYXZvaWRhbmNlUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVGFyZ2V0UG9zaXRpb24ubXVsdGlwbHlJblBsYWNlKHRoaXMubG9jYWxUYXJnZXRBdm9pZGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRyYW5zZm9ybS5uYW1lLnRvVXBwZXJDYXNlKCkgKyBcIiAtIEFVVE8gQVZPSURBTkNFIFBBVEg6IFwiICsgdGhpcy5hdm9pZGFuY2VQYXRoLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdm9pZGFuY2VUaW1lID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXZvaWRhbmNlUGF0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5JbnZlcnNlVHJhbnNmb3JtUG9pbnRUb1JlZih0aGlzLnRyYW5zZm9ybSwgcmFiYml0UG9zaXRpb24sIHRoaXMubG9jYWxUYXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUud2Fybih0aGlzLnRyYW5zZm9ybS5uYW1lLnRvVXBwZXJDYXNlKCkgKyBcIiAtIFJFU0VUIEFWT0lEQU5DRSBQQVRIOiBcIiArIHRoaXMuYXZvaWRhbmNlUGF0aC50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXZvaWRhbmNlVGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXZvaWRhbmNlUGF0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLkludmVyc2VUcmFuc2Zvcm1Qb2ludFRvUmVmKHRoaXMudHJhbnNmb3JtLCByYWJiaXRQb3NpdGlvbiwgdGhpcy5sb2NhbFRhcmdldFBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZXNldCBTdHVjayBNb3ZlbWVudFxuICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgIGlmIChnYW1lVGltZSA+ICh0aGlzLmxhc3RNb3ZlbWVudFRpbWUgKyB0aGlzLnJlc2V0TW92aW5nVGltZW91dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBsb2NhbFdheXBvaW50VHJuOkJBQllMT04uVHJhbnNmb3JtTm9kZSA9ICh0aGlzLnRyYW5zZm9ybS5wYXJlbnQgIT0gbnVsbCkgPyB0aGlzLnRyYW5zZm9ybS5wYXJlbnQgYXMgQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlIDogdGhpcy50cmFuc2Zvcm1cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBsb2NhbFdheXBvaW50UG9zOkJBQllMT04uVmVjdG9yMyA9IEJBQllMT04uVXRpbGl0aWVzLkludmVyc2VUcmFuc2Zvcm1Qb2ludChsb2NhbFdheXBvaW50VHJuLCB3YXlwb2ludFBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBsb2NhbFdheXBvaW50UG9zOkJBQllMT04uVmVjdG9yMyA9IHRyYW5zZm9ybVBvc2l0aW9uLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vbG9jYWxXYXlwb2ludFBvcy5tdWx0aXBseUluUGxhY2UoQkFCWUxPTi5WZWN0b3IzLlVwKCkuc2NhbGUoMC4yNSkpO1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMudHJhbnNmb3JtLnBvc2l0aW9uLmNvcHlGcm9tKGxvY2FsV2F5cG9pbnRQb3MpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBGSVhNRSAtIFJlc2V0IFRvIFdheXBvaW50IEdsb2JhbCBQb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnRyYW5zZm9ybS5wb3NpdGlvbi55ICs9IDAuMjU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLm5hbWUudG9VcHBlckNhc2UoKSArIFwiIC0gUkVTRVQgV0FZUE9JTlQgUE9TOiBcIiArIHRyYW5zZm9ybVBvc2l0aW9uLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFRhcmdldEFuZ2xlID0gTWF0aC5hdGFuMih0aGlzLmxvY2FsVGFyZ2V0UG9zaXRpb24ueCwgdGhpcy5sb2NhbFRhcmdldFBvc2l0aW9uLnopICogQkFCWUxPTi5TeXN0ZW0uUmFkMkRlZztcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVTcGVlZDpudW1iZXIgPSB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyLmdldE5vcm1hbGl6ZWRTcGVlZCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFtZXJpY2FuU3BlZWQ6bnVtYmVyID0gdGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlci5nZXRBbWVyaWNhblNwZWVkKCk7XG4gICAgICAgICAgICAgICAgLy9jb25zdCBmb3J3YXJkU3BlZWQ6bnVtYmVyID0gdGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlci5nZXRGb3J3YXJkU3BlZWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb3JuZXJBbmdsZTpudW1iZXIgPSBCQUJZTE9OLlNjYWxhci5DbGFtcChNYXRoLmFicyhsb2NhbFRhcmdldEFuZ2xlKSwgMCwgOTApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvcm5lckZhY3RvcjpudW1iZXIgPSBjb3JuZXJBbmdsZSAvIDkwO1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFZlaGljbGUgRHJpdmluZ1xuICAgICAgICAgICAgICAgIC8vIC4uXG4gICAgICAgICAgICAgICAgbGV0IHNraWRkaW5nOmJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBsZXQgYnJha2luZzpudW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgIGxldCB0aHJvdHRsZTpudW1iZXIgPSAoMS4wICogdGhpcy50aHJvdHRsZVNlbnNpdGl2aXR5KTtcbiAgICAgICAgICAgICAgICAvLyBQRU5OWTogbGV0IHN0ZWVyaW5nOm51bWJlciA9IChCQUJZTE9OLlNjYWxhci5DbGFtcCgoKGxvY2FsVGFyZ2V0QW5nbGUgKiB0aGlzLnN0ZWVyaW5nU2Vuc2l0aXZpdHkpICogMC4yKSwgLTEsIDEpICogTWF0aC5zaWduKGZvcndhcmRTcGVlZCkpO1xuICAgICAgICAgICAgICAgIGxldCBzdGVlcmluZzpudW1iZXIgPSBCQUJZTE9OLlNjYWxhci5DbGFtcCgoKHRoaXMubG9jYWxUYXJnZXRQb3NpdGlvbi54IC8gdGhpcy5sb2NhbFRhcmdldFBvc2l0aW9uLmxlbmd0aCgpKSAqIHRoaXMuc3RlZXJpbmdTZW5zaXRpdml0eSksIC0xLCAxKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLm5hbWUudG9VcHBlckNhc2UoKSArIFwiIC0gTkVXIFNURUVSOiBcIiArIHN0ZWVyaW5nLnRvRml4ZWQoMikgKyBcIiBUTyBBTkdMRTogXCIgKyBjb3JuZXJBbmdsZS50b0ZpeGVkKDIpKTtcblxuICAgICAgICAgICAgICAgIC8vIFRPRE86IENhckFJQ29udHJvbC5jcyAoU3RhbmRhcmQgQXNzZXRzKVxuICAgICAgICAgICAgICAgIC8vIGFkZCBhY2NlbGVyYXRpb24gJ3dhbmRlcicsIHdoaWNoIGFsc28gcHJldmVudHMgQUkgZnJvbSBzZWVtaW5nIHRvbyB1bmlmb3JtIGFuZCByb2JvdGljIGluIHRoZWlyIGRyaXZpbmdcbiAgICAgICAgICAgICAgICAvLyBpLmUuIGluY3JlYXNpbmcgdGhlIGFjY2VsIHdhbmRlciBhbW91bnQgY2FuIGludHJvZHVjZSBqb3N0bGluZyBhbmQgYnVtcHMgYmV0d2VlbiBBSSBjYXJzIGluIGEgcmFjZVxuICAgICAgICAgICAgICAgIC8vIGFjY2VsICo9ICgxIC0gbV9BY2NlbFdhbmRlckFtb3VudCkgKyAoTWF0aGYuUGVybGluTm9pc2UoVGltZS50aW1lKm1fQWNjZWxXYW5kZXJTcGVlZCwgbV9SYW5kb21QZXJsaW4pKm1fQWNjZWxXYW5kZXJBbW91bnQpO1xuXG5cblxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGhyb3R0bGVTcGVlZEFuZ2xlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ybmVyQW5nbGUgPj0gdGhpcy50aHJvdHRsZVNwZWVkQW5nbGUgJiYgYW1lcmljYW5TcGVlZCA+PSB0aGlzLnRocm90dGxlU3BlZWRMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3R0bGUgPSBCQUJZTE9OLlNjYWxhci5MZXJwKDAsICgxLjAgKiB0aGlzLnRocm90dGxlU2Vuc2l0aXZpdHkpLCAoMSAtIGNvcm5lckZhY3RvcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRyYW5zZm9ybS5uYW1lLnRvVXBwZXJDYXNlKCkgKyBcIiAtIExFUlAgVEhST1RUTEU6IFwiICsgdGhyb3R0bGUudG9GaXhlZCgyKSArIFwiIEFUIEFOR0xFOiBcIiArIGNvcm5lckFuZ2xlLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJyYWtpbmdTcGVlZEFuZ2xlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ybmVyQW5nbGUgPj0gdGhpcy5icmFraW5nU3BlZWRBbmdsZSAmJiBhbWVyaWNhblNwZWVkID49IHRoaXMuYnJha2luZ1NwZWVkTGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyYWtpbmcgPSBCQUJZTE9OLlNjYWxhci5MZXJwKDAsICgxICsgbm9ybWFsaXplU3BlZWQpLCBjb3JuZXJGYWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJha2luZyAqPSAodGhpcy5icmFraW5nU2Vuc2l0aXZpdHkgKiB0aGlzLmJyYWtpbmdNdWx0aXBsaWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyYWtpbmcgPSBCQUJZTE9OLlNjYWxhci5DbGFtcChicmFraW5nLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy50cmFuc2Zvcm0ubmFtZS50b1VwcGVyQ2FzZSgpICsgXCIgLSBBVVRPIEJSQUtJTkc6IFwiICsgYnJha2luZy50b0ZpeGVkKDIpICsgXCIgQVQgQU5HTEU6IFwiICsgY29ybmVyQW5nbGUudG9GaXhlZCgyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpZGRpbmdTcGVlZEFuZ2xlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ybmVyQW5nbGUgPj0gdGhpcy5za2lkZGluZ1NwZWVkQW5nbGUgJiYgYW1lcmljYW5TcGVlZCA+PSB0aGlzLnNraWRkaW5nU3BlZWRMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9za2lkZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLm5hbWUudG9VcHBlckNhc2UoKSArIFwiIC0gQVVUTyBTS0lERElORzogXCIgKyBicmFraW5nLnRvRml4ZWQoMikgKyBcIiBBVCBBTkdMRTogXCIgKyBjb3JuZXJBbmdsZS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG5cblxuXG5cbiAgICAgICAgICAgICAgICBpZiAoYnJha2luZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3R0bGUgPSAoLWJyYWtpbmcpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMudHJhbnNmb3JtLm5hbWUudG9VcHBlckNhc2UoKSArIFwiIC0gQlJBS0lORzogXCIgKyBicmFraW5nLnRvRml4ZWQoMikgKyBcIiBBVCBBTkdMRTogXCIgKyBjb3JuZXJBbmdsZS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tX3N0YW5kYXJkQ2FyQ29udHJvbGxlci50aHJvdHRsZUVuZ2luZVNwZWVkID0gdGhpcy5jaXJjdWl0U3BlZWRMaW1pdDtcbiAgICAgICAgICAgICAgICB0aGlzLm1fc3RhbmRhcmRDYXJDb250cm9sbGVyLmRyaXZlKHRocm90dGxlLCBzdGVlcmluZywgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZVZlaGljbGVGb2xsb3dDYW1lcmEoZm9sbG93OmJvb2xlYW4sIGxvb2s6Ym9vbGVhbik6IHZvaWQge1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlSW5wdXQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdHRhY2hDYW1lcmEgPT09IHRydWUgJiYgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybSAhPSBudWxsICYmIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lOm51bWJlciA9IHRoaXMuZ2V0RGVsdGFTZWNvbmRzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLmdldFRyYW5zZm9ybVBvc2l0aW9uVG9SZWYodGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzLmdldFRyYW5zZm9ybVJvdGF0aW9uVG9SZWYodGhpcy50YXJnZXRSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xsb3cgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEJBQllMT04uVXRpbGl0aWVzLlRvRXVsZXJUb1JlZih0aGlzLnRhcmdldFJvdGF0aW9uLCB0aGlzLnRhcmdldEFuZ2xlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Ub0V1bGVyVG9SZWYodGhpcy5tX2NhbWVyYVRyYW5zZm9ybS5yb3RhdGlvblF1YXRlcm5pb24sIHRoaXMudHJhbnNmb3JtQW5nbGVzKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YW50ZWRSb3RhdGlvbkFuZ2xlID0gdGhpcy50YXJnZXRBbmdsZXMueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3YW50ZWRIZWlnaHQgPSB0aGlzLnRhcmdldFBvc2l0aW9uLnkgKyB0aGlzLmZvbGxvd0hlaWdodDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50Um90YXRpb25BbmdsZSA9IHRoaXMudHJhbnNmb3JtQW5nbGVzLnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudEhlaWdodCA9IHRoaXMubV9jYW1lcmFUcmFuc2Zvcm0ucG9zaXRpb24ueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSb3RhdGlvbkFuZ2xlID0gQkFCWUxPTi5TY2FsYXIuTGVycEFuZ2xlKGN1cnJlbnRSb3RhdGlvbkFuZ2xlLCB3YW50ZWRSb3RhdGlvbkFuZ2xlLCB0aGlzLnJvdGF0aW9uRGFtcGluZyAqIGRlbHRhVGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SGVpZ2h0ID0gQkFCWUxPTi5TY2FsYXIuTGVycChjdXJyZW50SGVpZ2h0LCB3YW50ZWRIZWlnaHQsIHRoaXMuaGVpZ2h0RGFtcGluZyAqIGRlbHRhVGltZSk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5Gcm9tRXVsZXJUb1JlZigwLCBjdXJyZW50Um90YXRpb25BbmdsZSwgMCwgdGhpcy5yb3RhdGlvbkJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBCQUJZTE9OLlV0aWxpdGllcy5NdWx0aXBseVF1YXRlcm5pb25CeVZlY3RvclRvUmVmKHRoaXMucm90YXRpb25CdWZmZXIsIEJBQllMT04uVmVjdG9yMy5Gb3J3YXJkKCksIHRoaXMudGVtcFJvdGF0aW9uQnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcFJvdGF0aW9uQnVmZmVyLnNjYWxlSW5QbGFjZSh0aGlzLmZvbGxvd0Rpc3RhbmNlKTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25CdWZmZXIuY29weUZyb20odGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uQnVmZmVyLnN1YnRyYWN0SW5QbGFjZSh0aGlzLnRlbXBSb3RhdGlvbkJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBMRVJQIDkwIFBlcmNlbnQgLSA/Pz9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubV9jYW1lcmFUcmFuc2Zvcm0ucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb25CdWZmZXIueCwgKGN1cnJlbnRIZWlnaHQgKyB0aGlzLmhlaWdodE9mZnNldCksIHRoaXMucG9zaXRpb25CdWZmZXIueik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb2sgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IExFUlAgOTAgUGVyY2VudCAtID8/P1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2NhbWVyYVRyYW5zZm9ybS5sb29rQXQodGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3lWZWhpY2xlQ29udHJvbGxlcigpOnZvaWQge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRBbmdsZXMgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtQW5nbGVzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25CdWZmZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnRlbXBSb3RhdGlvbkJ1ZmZlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm1fY2FtZXJhVHJhbnNmb3JtID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubV9jaXJjdWl0V2F5cG9pbnRzID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubV9yaWdpZGJvZHlQaHlzaWNzID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLm1fY2hhc2VSYWJiaXRNZXNoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fY2hhc2VSYWJiaXRNZXNoID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubV9zdGFuZGFyZENhckNvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMubV90cmlnZ2VyVm9sdW1lTWVzaCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tX3RyaWdnZXJWb2x1bWVNZXNoLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1fdHJpZ2dlclZvbHVtZU1lc2ggPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgSXRlbVJvdGF0b3JcbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgSXRlbVJvdGF0b3IgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgcm90YXRlU3BlZWQ6bnVtYmVyID0gMS4wO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVNwZWVkID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInJvdGF0ZVNwZWVkXCIsIHRoaXMucm90YXRlU3BlZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT0+IFN0YXJ0aW5nIGl0ZW0gcm90YXRvciBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgY29uc3QgZGVsdGE6bnVtYmVyID0gdGhpcy5nZXREZWx0YVNlY29uZHMoKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtLmFkZFJvdGF0aW9uKDAsICh0aGlzLnJvdGF0ZVNwZWVkICogZGVsdGEpLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWR7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PT4gRGVzdHJveWluZyBpdGVtIHJvdGF0b3IgZm9yOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgVGVzdEFuaW1hdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBUZXN0QW5pbWF0aW9uIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICAvL3ByaXZhdGUgYW5pbWF0b3I6QkFCWUxPTi5BbmltYXRpb25TdGF0ZSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgYW5pbWF0b3I6YW55ID0gbnVsbDtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT0+IFN0YXJ0aW5nIGFuaW1hdGlvbiB0ZXN0IGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0b3IgPSB0aGlzLmdldENvbXBvbmVudChcIkJBQllMT04uQW5pbWF0aW9uU3RhdGVcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRvciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQkFCWUxPTi5Ub29scy5XYXJuKFwiRmFpbGVkIHRvIGdldCBhbmltYXRpb24gc3RhdGUgY29tcG9uZW50OiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAqIEBjbGFzcyBUZXN0Q2VudGVyXG4gICAgKi9cbiAgICBleHBvcnQgY2xhc3MgVGVzdENlbnRlciBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHRyYW5zZm9ybTogQkFCWUxPTi5UcmFuc2Zvcm1Ob2RlLCBzY2VuZTogQkFCWUxPTi5TY2VuZSwgcHJvcGVydGllczogYW55ID0ge30pIHtcbiAgICAgICAgICAgIHN1cGVyKHRyYW5zZm9ybSwgc2NlbmUsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gU3RhcnQgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IHJiOkJBQllMT04uUmlnaWRib2R5UGh5c2ljcyA9IHRoaXMuZ2V0Q29tcG9uZW50KFwiQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzXCIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiIyMjIEZJTkFMIENPTSAjIyNcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyYi5jZW50ZXJPZk1hc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iLCJtb2R1bGUgUFJPSkVDVCB7XG4gICAgLyoqXG4gICAgICogQmFieWxvbiBTY3JpcHQgQ29tcG9uZW50XG4gICAgICogQGNsYXNzIFRlc3RDb2xsaXNpb25cbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgVGVzdENvbGxpc2lvbiBleHRlbmRzIEJBQllMT04uU2NyaXB0Q29tcG9uZW50IHtcblxuICAgICAgICBwcml2YXRlIHJpZ2lkYm9keTpCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MgPSBudWxsO1xuXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm06IEJBQllMT04uVHJhbnNmb3JtTm9kZSwgc2NlbmU6IEJBQllMT04uU2NlbmUsIHByb3BlcnRpZXM6IGFueSA9IHt9KSB7XG4gICAgICAgICAgICBzdXBlcih0cmFuc2Zvcm0sIHNjZW5lLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFN0YXJ0IHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlc3QgY29sbGlzaW9uIGZvcjogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMucmlnaWRib2R5ID0gdGhpcy5nZXRDb21wb25lbnQoXCJCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3NcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5yaWdpZGJvZHkgIT0gbnVsbCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHkucmVnaXN0ZXJPbkNvbGxpc2lvbkVudGVyKChtZXNoOkJBQllMT04uQWJzdHJhY3RNZXNoKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiMjIzogXCIgKyB0aGlzLnRyYW5zZm9ybS5uYW1lICsgXCI6IEJlZ2luIENvbnRhY3QgV2l0aDogXCIgKyBtZXNoLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaWRib2R5LnJlZ2lzdGVyT25Db2xsaXNpb25TdGF5KChtZXNoOkJBQllMT04uQWJzdHJhY3RNZXNoKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiIyMjOiBcIiArIHRoaXMudHJhbnNmb3JtLm5hbWUgKyBcIjogVXBkYXRlIENvbnRhY3QgV2l0aDogXCIgKyBtZXNoLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaWRib2R5LnJlZ2lzdGVyT25Db2xsaXNpb25FeGl0KChtZXNoOkJBQllMT04uQWJzdHJhY3RNZXNoKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWc6c3RyaW5nID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0VHJhbnNmb3JtVGFnKG1lc2gpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCIjIyM6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSArIFwiOiBFbmQgQ29udGFjdCBXaXRoOiBcIiArIG1lc2gubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBsb2NhdGUgcmlnaWRib2R5IGNvbXBvbmVudCBmb3I6IFwiICsgdGhpcy50cmFuc2Zvcm0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWZ0ZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBBZnRlciByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBEZXN0cm95IGNvbXBvbmVudCBmdW5jdGlvblxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAgKiBCYWJ5bG9uIFNjcmlwdCBDb21wb25lbnRcbiAgICAgKiBAY2xhc3MgVGVzdENvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBleHBvcnQgY2xhc3MgVGVzdENvbnRyb2xsZXIgZXh0ZW5kcyBCQUJZTE9OLlNjcmlwdENvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgdGVzdFRleHR1cmU6YW55ID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBtX3BoeXNpY3NXb3JsZDphbnkgPSBudWxsO1xuICAgICAgICBwcm90ZWN0ZWQgbV9waHlzaWNzRW5naW5lOkJBQllMT04uSVBoeXNpY3NFbmdpbmUgPSBudWxsO1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgICAgICB0aGlzLnRlc3RUZXh0dXJlID0gdGhpcy5nZXRFZGl0b3JQcm9wZXJ0eShcInRlc3RUZXh0dXJlXCIsIHRoaXMudGVzdFRleHR1cmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFzeW5jIHN0YXJ0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAgICAgLy8gU3RhcnQgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PiBTdGFydGluZyB0ZXN0IGNvbnRyb2xsZXIuLi5cIik7XG4gICAgICAgICAgICB0aGlzLm1fcGh5c2ljc1dvcmxkID0gQkFCWUxPTi5TY2VuZU1hbmFnZXIuR2V0UGh5c2ljc1dvcmxkKHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgdGhpcy5tX3BoeXNpY3NFbmdpbmUgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRQaHlzaWNzRW5naW5lKHRoaXMuc2NlbmUpO1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgY29uc3QgbWFzczpudW1iZXIgPSAxLjAsIGRyYWc6bnVtYmVyID0gMC4wLCBhbmd1bGFyOm51bWJlciA9IDAuMDU7XG4gICAgICAgICAgICBjb25zdCBjdWJlVGVzdDpCQUJZTE9OLkFic3RyYWN0TWVzaCA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlQm94KFwiVGVzdGVyQ3ViZTFcIiwgeyBzaXplOiAxIH0sIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgQkFCWUxPTi5VdGlsaXRpZXMuVmFsaWRhdGVUcmFuc2Zvcm1NZXRhZGF0YShjdWJlVGVzdCk7XG4gICAgICAgICAgICBjdWJlVGVzdC5wb3NpdGlvbi5zZXQoMCwgMi41LCAxMjUpO1xuICAgICAgICAgICAgY3ViZVRlc3QubWV0YWRhdGEudW5pdHkucGh5c2ljcyA9IEJBQllMT04uUmlnaWRib2R5UGh5c2ljcy5DcmVhdGVQaHlzaWNzTWV0YWRhdGEobWFzcywgZHJhZywgYW5ndWxhciwgbmV3IEJBQllMT04uVmVjdG9yMygwLDAsMCkpOyAgICAgICAgXG4gICAgICAgICAgICBjdWJlVGVzdC5tZXRhZGF0YS51bml0eS5jb2xsaXNpb24gPSBCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MuQ3JlYXRlQ29sbGlzaW9uTWV0YWRhdGEoXCJCb3hDb2xsaWRlclwiLCBmYWxzZSwgZmFsc2UsIDAuMCwgMC42LCAwLjYpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByaWdpZGJvZHlQcm9wczphbnkgPSBCQUJZTE9OLlJpZ2lkYm9keVBoeXNpY3MuQ3JlYXRlUGh5c2ljc1Byb3BlcnRpZXMobWFzcywgZHJhZywgYW5ndWxhciwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzLlNldHVwUGh5c2ljc0NvbXBvbmVudCh0aGlzLnNjZW5lLCBjdWJlVGVzdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5SZWdpc3RlclNjcmlwdENvbXBvbmVudChuZXcgQkFCWUxPTi5SaWdpZGJvZHlQaHlzaWNzKGN1YmVUZXN0LCB0aGlzLnNjZW5lLCByaWdpZGJvZHlQcm9wcyksIHRydWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY3ViZVRlc3QpO1xuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PiBUZXN0IFRleHR1cmVcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRlc3RUZXh0dXJlKTtcbiAgICAgICAgICAgIGNvbnN0IGJhYnlsb25UZXh0dXJlOkJBQllMT04uVGV4dHVyZSA9IEJBQllMT04uVXRpbGl0aWVzLlBhcnNlVGV4dHVyZSh0aGlzLnRlc3RUZXh0dXJlLCB0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhYnlsb25UZXh0dXJlKTtcbiAgICAgICAgICAgIGNvbnN0IHRlc3RQcm9qZWN0b3I6QkFCWUxPTi5BYnN0cmFjdE1lc2ggPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRBYnN0cmFjdE1lc2godGhpcy5zY2VuZSwgXCJUZXN0UHJvamVjdG9yXCIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiKioqIEZPVU5EIFRFU1QgUFJPSkVDVE9SICoqKlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlc3RQcm9qZWN0b3IpO1xuICAgICAgICAgICAgbGV0IGFuZ2xlOm51bWJlciA9IE1hdGguUEkgLyAzO1xuICAgICAgICAgICAgbGV0IGxpZ2h0ID0gbmV3IEJBQllMT04uU3BvdExpZ2h0KFxuICAgICAgICAgICAgICAgIFwiTGlnaHRcIixcbiAgICAgICAgICAgICAgICB0ZXN0UHJvamVjdG9yLnBvc2l0aW9uLmNsb25lKCksXG4gICAgICAgICAgICAgICAgbmV3IEJBQllMT04uVmVjdG9yMygwLCAtMSwgMCksXG4gICAgICAgICAgICAgICAgYW5nbGUsXG4gICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbGlnaHQuZGlmZnVzZS5jb3B5RnJvbUZsb2F0cygxLCAxLCAxKTtcbiAgICAgICAgICAgIGxpZ2h0LnNwZWN1bGFyLmNvcHlGcm9tRmxvYXRzKDAuMDEsIDAuMDEsIDAuMDEpO1xuICAgICAgICAgICAgbGlnaHQuaW50ZW5zaXR5ID0gNTA7XG4gICAgICAgICAgICBsaWdodC5wcm9qZWN0aW9uVGV4dHVyZSA9IGJhYnlsb25UZXh0dXJlO1xuICAgICAgICAgICAgLy9sZXQgZHluVGV4dHVyZSA9IG5ldyBCQUJZTE9OLkR5bmFtaWNUZXh0dXJlKFwiVGV4dHVyZVwiLCB7d2lkdGg6IDUxMiwgaGVpZ2h0OiA1MTJ9LCB0aGlzLnNjZW5lLCB0cnVlKTtcbiAgICAgICAgICAgIC8vZHluVGV4dHVyZS5kcmF3VGV4dChcIlRFU1RcIiwgODAsIDI1NiwgXCJib2xkIDEwMHB4IEFyaWFsXCIsIFwid2hpdGVcIiwgXCJibGFja1wiLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIC8vbGlnaHQucHJvamVjdGlvblRleHR1cmUgPSBkeW5UZXh0dXJlOyAgICBcbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIC8vQkFCWUxPTi5TY2VuZUxvYWRlci5JbXBvcnRNZXNoKFwiXCIsIFwic2NlbmVzL1wiLCBcIkFCb3QuYmFieWxvblwiLCB0aGlzLnNjZW5lLCBmdW5jdGlvbiAobmV3TWVzaGVzOkJBQllMT04uQWJzdHJhY3RNZXNoW10pIHtcbiAgICAgICAgICAgIC8vICAgIGNvbnNvbGUud2FybihcIioqKiBMT0FERUQgTkVXIE1FU0hFUyAqKipcIik7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZyhuZXdNZXNoZXMpO1xuICAgICAgICAgICAgLy99KTtcblxuICAgICAgICAgICAgLy92YXIgcG06QkFCWUxPTi5QQlJNYXRlcmlhbDtcbiAgICAgICAgICAgIC8vdmFyIHNtOkJBQllMT04uU3RhbmRhcmRNYXRlcmlhbDtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PiBDcmVhdGUgdGVzdCBwcmVmYWJzLi4uXCIpO1xuICAgICAgICAgICAgY29uc3Qgcm9vdDpCQUJZTE9OLlRyYW5zZm9ybU5vZGUgPSBCQUJZTE9OLlNjZW5lTWFuYWdlci5HZXRNZXNoKHRoaXMuc2NlbmUsIFwiX19yb290X19cIik7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIlJlbXkgMVwiLCBcIk5ldyBSZW15IDFcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIlJlbXkgMlwiLCBcIk5ldyBSZW15IDJcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIkN1YmUgMVwiLCBcIk5ldyBDdWJlIDFcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIkN1YmUgMlwiLCBcIk5ldyBDdWJlIDJcIiwgcm9vdCk7XG4gICAgICAgICAgICBCQUJZTE9OLlNjZW5lTWFuYWdlci5JbnN0YW50aWF0ZVByZWZhYih0aGlzLnNjZW5lLCBcIlNwaGVyZSAxXCIsIFwiTmV3IFNwaGVyZSAxXCIsIHJvb3QpO1xuICAgICAgICAgICAgQkFCWUxPTi5TY2VuZU1hbmFnZXIuSW5zdGFudGlhdGVQcmVmYWIodGhpcy5zY2VuZSwgXCJTcGhlcmUgMlwiLCBcIk5ldyBTcGhlcmUgMlwiLCByb290KTtcbiAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLkluc3RhbnRpYXRlUHJlZmFiKHRoaXMuc2NlbmUsIFwiQ2Fwc3VsZSAxXCIsIFwiTmV3IENhcHN1bGUgMVwiLCByb290KTtcbiAgICAgICAgICAgIEJBQllMT04uU2NlbmVNYW5hZ2VyLkluc3RhbnRpYXRlUHJlZmFiKHRoaXMuc2NlbmUsIFwiQ2Fwc3VsZSAyXCIsIFwiTmV3IENhcHN1bGUgMlwiLCByb290KTtcbiAgICAgICAgICAgICovXG4gICAgICAgIFxuICAgICAgICAgICAgLy8gSW1wb3J0IGF1dGhvcmVkIHNjZW5lXG4gICAgICAgICAgICAvL3ZhciBuZXdNZXNoZXMgPSAoYXdhaXQgQkFCWUxPTi5TY2VuZUxvYWRlci5JbXBvcnRNZXNoQXN5bmMoXCJcIiwgXCJodHRwczovL21hY2tleWsyNC5naXRodWIuaW8vdGVtcC9UZXN0UGh5c2ljcy5nbGJcIiwgXCJcIiwgdGhpcy5zY2VuZSkpLm1lc2hlcztcbiAgICAgICAgICAgIC8vY29uc29sZS53YXJuKFwiV1RGOiBUaGF0IFdvcmtlZFwiKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cobmV3TWVzaGVzKTtcblxuICAgICAgICAgICAgLy8gTG9hZCBUZXN0IFJlbXkgTWVzaGVzXG4gICAgICAgICAgICAvL0JBQllMT04uU2NlbmVMb2FkZXIuSW1wb3J0TWVzaChcIlwiLCBcInNjZW5lcy9cIiwgXCJSZW15LmdsdGZcIiwgdGhpcy5zY2VuZSwgZnVuY3Rpb24gKG5ld01lc2hlczpCQUJZTE9OLkFic3RyYWN0TWVzaFtdKSB7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLndhcm4oXCIqKiogTE9BREVEIE5FVyBNRVNIRVMgKioqXCIpO1xuICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2cobmV3TWVzaGVzKTtcbiAgICAgICAgICAgIC8vfSk7ICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2xldCBib3ggPSBCQUJZTE9OLk1lc2guQ3JlYXRlQm94KFwiVGVzdCBCb3hcIiwgMSwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAvL2JveC5wb3NpdGlvbi54ICs9IDI7XG4gICAgICAgICAgICAvL2JveC5wb3NpdGlvbi55ICs9IDI7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICB2YXIgZm9udF9uYW1lczpzdHJpbmdbXSA9IFtcIkFyaWFsXCIsIFwiSGVsdmV0aWNhXCIsIFwiU2Fucy1TZXJpZlwiLCBcIkNvbWljU2Fuc1wiLCBcIkp1cmFcIiwgXCJIaXJ1a29Qcm8tQm9va1wiLCBcIldlYkdMLURpbmdzXCJdO1xuICAgICAgICAgICAgdmFyIGxpbmVfaGVpZ2h0Om51bWJlciA9IDE7XG4gICAgICAgICAgICB2YXIgdXBwZXJfb2Zmc2V0Om51bWJlciA9IChsaW5lX2hlaWdodCAqIC0xLjApO1xuICAgICAgICAgICAgdmFyIG1pZGRsZV9vZmZzZXQ6bnVtYmVyID0gKGxpbmVfaGVpZ2h0ICogLTAuMzMpO1xuICAgICAgICAgICAgdmFyIGxvd2VyX29mZnNldDpudW1iZXIgPSAobGluZV9oZWlnaHQgKiAwLjI1KTtcbiAgICAgICAgICAgIHZhciB5X3Bvc2l0aW9uOm51bWJlciA9IHVwcGVyX29mZnNldDtcbiAgICAgICAgICAgIHZhciB6X3Bvc2l0aW9uOm51bWJlciA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB3bmQ6YW55ID0gd2luZG93O1xuICAgICAgICAgICAgdmFyIFdyaXRlciA9IHduZC5CQUJZTE9OLk1lc2hXcml0ZXIodGhpcy5zY2VuZSwge3NjYWxlOiAxLjB9KTtcbiAgICAgICAgICAgIHZhciB0ZXh0MSAgPSBuZXcgV3JpdGVyKFwiSGVsbG8gV29ybGRcIiwge1xuICAgICAgICAgICAgICAgICAgICBcImFuY2hvclwiOiBcImxlZnRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJmb250LWZhbWlseVwiIDogXCJBcmlhbFwiLCBcbiAgICAgICAgICAgICAgICAgICAgXCJsZXR0ZXItaGVpZ2h0XCI6IGxpbmVfaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBcImxldHRlci10aGlja25lc3NcIjogMC4wMSxcbiAgICAgICAgICAgICAgICAgICAgXCJwb3NpdGlvblwiIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ5XCIgOiB5X3Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ6XCIgOiB6X3Bvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwiYWxwaGFcIiA6IDEsXG4gICAgICAgICAgICAgICAgICAgIFwiY29sb3JzXCIgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpZmZ1c2VcIjogXCIjRjBGMEYwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFtYmllbnRcIiA6IFwiI0YwRjBGMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzcGVjdWxhclwiIDogXCIjMDAwMDAwXCIsICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW1pc3NpdmVcIjogXCIjODA4MDgwXCIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApOyBcbiAgICAgICAgICAgIHZhciBucDpCQUJZTE9OLkFic3RyYWN0TWVzaCA9IEJBQllMT04uU2NlbmVNYW5hZ2VyLkdldE1lc2godGhpcy5zY2VuZSwgXCJOZXcgVGV4dFwiKTtcbiAgICAgICAgICAgIHZhciBteDpCQUJZTE9OLkFic3RyYWN0TWVzaCA9IHRleHQxLmdldE1lc2goKTtcbiAgICAgICAgICAgIG14LnJvdGF0aW9uID0gbmV3IEJBQllMT04uVmVjdG9yMygtTWF0aC5QSS8yLCBNYXRoLlBJLzIsIC1NYXRoLlBJLzIpO1xuICAgICAgICAgICAgbXgucGFyZW50ID0gbnA7XG4gICAgICAgICAgICAqL1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSByYW46Ym9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHJlbmRlciBsb29wIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBjb25zdCBudW1fbWFuaWZvbGRzOm51bWJlciA9IHRoaXMubV9waHlzaWNzV29ybGQuZ2V0QnJvYWRwaGFzZSgpLmdldE92ZXJsYXBwaW5nUGFpckNhY2hlKCkuZ2V0TnVtT3ZlcmxhcHBpbmdQYWlycygpO1xuICAgICAgICAgICAgLy9jb25zdCBudW1fbWFuaWZvbGRzOm51bWJlciA9IHRoaXMubV9waHlzaWNzV29ybGQuZ2V0RGlzcGF0Y2hlcigpLmdldE51bU1hbmlmb2xkcygpO1xuICAgICAgICAgICAgLy9jb25zdCBtc2cgPSBcIlRvdGFsIE92ZXJsYXBwaW5nIFBhcmlzOiBcIiArIG51bV9tYW5pZm9sZHM7XG4gICAgICAgICAgICAvL0JBQllMT04uVXRpbGl0aWVzLlByaW50VG9TY3JlZW4obXNnKTsgICBcbiAgICAgICAgICAgIC8vIFRlc3QgUnVubmluZyBMb29wXG4gICAgICAgICAgICAvL2lmICh0aGlzLnJhbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vICAgIHRoaXMucmFuID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vICAgIFxuICAgICAgICAgICAgLy99XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgYWZ0ZXIoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBBZnRlciByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBEZXN0cm95IGNvbXBvbmVudCBmdW5jdGlvblxuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSBQUk9KRUNUIHtcbiAgICAvKipcbiAgICAqIEJhYnlsb24gU2NyaXB0IENvbXBvbmVudFxuICAgICogQGNsYXNzIFdURkNvbXBcbiAgICAqL1xuICAgIGV4cG9ydCBjbGFzcyBXVEZDb21wIGV4dGVuZHMgQkFCWUxPTi5TY3JpcHRDb21wb25lbnQge1xuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IodHJhbnNmb3JtOiBCQUJZTE9OLlRyYW5zZm9ybU5vZGUsIHNjZW5lOiBCQUJZTE9OLlNjZW5lLCBwcm9wZXJ0aWVzOiBhbnkgPSB7fSkge1xuICAgICAgICAgICAgc3VwZXIodHJhbnNmb3JtLCBzY2VuZSwgcHJvcGVydGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc3RhcnQoKTogdm9pZCB7XG4gICAgICAgICAgICAvLyBTdGFydCByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZW5kZXIgbG9vcCBmdW5jdGlvblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGFmdGVyKCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGxvb3AgZnVuY3Rpb25cbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICAgICAgLy8gRGVzdHJveSBjb21wb25lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

// Project Data Store
if (navigator.dataStore == null) navigator.dataStore = {};

navigator.dataStore['manifest'] = JSON.parse(window.atob("ewogICJuYW1lIjogIiMjI1RJVExFIyMjIiwKICAic2hvcnRfbmFtZSI6ICIjIyNTSE9SVCMjIyIsCiAgInRoZW1lX2NvbG9yIjogIiMjI1NQTEFTSCMjIyIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIyMjU1BMQVNIIyMjIiwKICAib3JpZW50YXRpb24iOiAiIyMjT1JJRU5UIyMjIiwgIAogICJkaXNwbGF5IjogIiMjI0RJU1BMQVkjIyMiLAogICJzdGFydF91cmwiOiAiIyMjU1RBUlQjIyMiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTcyeDcyLnBuZyIsCiAgICAgICJzaXplcyI6ICI3Mng3MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi05Nng5Ni5wbmciLAogICAgICAic2l6ZXMiOiAiOTZ4OTYiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImljb25zL2ljb24tMTI4eDEyOC5wbmciLAogICAgICAic2l6ZXMiOiAiMTI4eDEyOCIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi0xNDR4MTQ0LnBuZyIsCiAgICAgICJzaXplcyI6ICIxNDR4MTQ0IiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTE1MngxNTIucG5nIiwKICAgICAgInNpemVzIjogIjE1MngxNTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImljb25zL2ljb24tMTkyeDE5Mi5wbmciLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3BuZyIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiaWNvbnMvaWNvbi0zODR4Mzg0LnBuZyIsCiAgICAgICJzaXplcyI6ICIzODR4Mzg0IiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJpY29ucy9pY29uLTUxMng1MTIucG5nIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9CiAgXQp9"));


// Project Shader Store
// Project Shader Chunks
